<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Sources</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="style/asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style/btcphilosophy.css">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Sources</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_decentralization">1. Decentralization</a>
<ul class="sectlevel2">
<li><a href="#_paper_enabling_blockchain_innovations_with_pegged_sidechains">1.1. Paper: Enabling Blockchain Innovations with Pegged Sidechains</a></li>
<li><a href="#_bitcoin_paper">1.2. Bitcoin paper</a></li>
<li><a href="#_gregory_maxwell_on_decetralization">1.3. Gregory Maxwell On decetralization</a></li>
<li><a href="#_the_decentralist_perspective_or_why_bitcoin_might_need_small_blocks">1.4. The decentralist perspective, or why Bitcoin might need small blocks</a></li>
<li><a href="#_irc_log_2012_04_04">1.5. IRC log 2012-04-04</a></li>
<li><a href="#_pieter_wuille_on_neutrality">1.6. Pieter Wuille On neutrality</a></li>
<li><a href="#_gregory_maxwell_on_autonomy">1.7. Gregory Maxwell on autonomy</a></li>
<li><a href="#_radhika_nagpal_on_fish_schools">1.8. Radhika Nagpal on fish schools</a></li>
</ul>
</li>
<li><a href="#_trustlessness">2. Trustlessness</a>
<ul class="sectlevel2">
<li><a href="#_pieter_wuille_on_trustlessness">2.1. Pieter Wuille on trustlessness</a></li>
<li><a href="#_bitcoin_paper_2">2.2. Bitcoin paper</a></li>
<li><a href="#_david_harding_full_validation_the_best_possible_decentralized_security">2.3. David Harding: Full Validation, The best possible decentralized security</a></li>
<li><a href="#_corallo_on_trustlessness">2.4. Corallo on trustlessness</a></li>
<li><a href="#_brianddk_bitcoin_v22_0_and_guix_stronger_defense_against_the_trusting_trust_attack">2.5. brianddk - Bitcoin v22.0 and Guix; Stronger defense against the "Trusting Trust Attack"</a></li>
<li><a href="#_cve_2018_17144_full_disclosure">2.6. CVE-2018-17144 Full Disclosure</a></li>
</ul>
</li>
<li><a href="#_privacy">3. Privacy</a>
<ul class="sectlevel2">
<li><a href="#_gregory_maxwell_on_privacy">3.1. Gregory Maxwell - on privacy</a></li>
<li><a href="#_andrew_poelstra_on_anonymity">3.2. Andrew Poelstra - on anonymity</a></li>
<li><a href="#_tim_s_on_pseudonyms">3.3. Tim S. - on pseudonyms</a></li>
<li><a href="#_bitcoin_paper_3">3.4. Bitcoin paper</a></li>
<li><a href="#_gregory_maxwell_bad_privacy_contagious">3.5. Gregory Maxwell - Bad privacy contagious</a></li>
<li><a href="#_chris_belcher_bitcoin_wiki_page_on_privacy">3.6. Chris Belcher - Bitcoin wiki page on Privacy</a></li>
<li><a href="#_adam_back_and_matt_corallo_fungibility_overview">3.7. Adam Back and Matt Corallo - Fungibility Overview</a></li>
<li><a href="#_bitcoin_qa_privacy_tips">3.8. Bitcoin Q+A - Privacy tips</a></li>
<li><a href="#_chris_belcher_breaking_bitcoin_privacy">3.9. Chris Belcher - Breaking Bitcoin Privacy</a></li>
<li><a href="#_bitcoin_qa_nokyc_only">3.10. Bitcoin Q+A - noKYC only</a></li>
</ul>
</li>
<li><a href="#_finite_supply">4. Finite supply</a>
<ul class="sectlevel2">
<li><a href="#_pieter_wuille_will_there_be_21_million_bitcoins_eventually">4.1. Pieter Wuille - Will there be 21 million bitcoins eventually?</a></li>
<li><a href="#_satoshi_nakamoto_on_lost_coinst">4.2. Satoshi Nakamoto - on lost coinst</a></li>
<li><a href="#_chytrik_how_can_we_trust_supply_wont_be_increased_in_2140_by_just_a_few_lines_of_code">4.3. chytrik - How can we trust supply won&#8217;t be increased in 2140 by just a few lines of code?</a></li>
<li><a href="#_paul_sztorc_security_budget_in_the_long_run">4.4. Paul Sztorc - Security Budget in the Long Run</a></li>
<li><a href="#_david_harding_fee_sniping">4.5. David Harding - Fee sniping</a></li>
<li><a href="#_peter_todd_the_essence_of_bitcoin">4.6. Peter Todd - The Essence of Bitcoin</a></li>
</ul>
</li>
<li><a href="#_upgrading">5. Upgrading</a>
<ul class="sectlevel2">
<li><a href="#_david_harding_harmony_and_discord">5.1. David Harding - Harmony and Discord</a></li>
<li><a href="#_eric_lombrozo_changing_consensus_rules_without_breaking_bitcoin">5.2. Eric Lombrozo - Changing Consensus Rules Without Breaking Bitcoin</a></li>
<li><a href="#_aaron_van_wirdum_the_long_road_to_segwit">5.3. Aaron van Wirdum - The Long Road To Segwit</a></li>
<li><a href="#_shaolinfry_moving_towards_user_activated_soft_fork_activation">5.4. Shaolinfry - Moving towards user activated soft fork activation</a></li>
<li><a href="#_matt_corallo_modern_soft_fork_activation">5.5. Matt Corallo - Modern Soft Fork Activation</a></li>
<li><a href="#_david_harding_taproot_activation_proposals">5.6. David Harding - Taproot activation proposals</a></li>
<li><a href="#_david_harding_taproot_activation_proposal_speedy_trial">5.7. David Harding - Taproot activation proposal "Speedy Trial"</a></li>
<li><a href="#_jimmy_song_socialized_costs_of_hard_forks">5.8. Jimmy Song - Socialized Costs Of Hard Forks</a></li>
</ul>
</li>
<li><a href="#_adversarial_thinking">6. Adversarial thinking</a>
<ul class="sectlevel2">
<li><a href="#_andrew_poelstra_on_security_assumptions">6.1. Andrew Poelstra on security assumptions</a></li>
<li><a href="#_jameson_lopp_bitcoins_security_model_a_deep_dive">6.2. Jameson Lopp - Bitcoin’s Security Model: A Deep Dive</a></li>
<li><a href="#_ragnar_lifthrasir_twitter_thread_on_adversarial_thinking">6.3. Ragnar Lifthrasir - Twitter thread on Adversarial thinking</a></li>
<li><a href="#_bitcoin_wiki_weaknesses">6.4. Bitcoin Wiki - Weaknesses</a></li>
<li><a href="#_simple_sabotage_field_manual">6.5. Simple Sabotage Field Manual</a></li>
<li><a href="#_eric_voskuil_axiom_of_resistance">6.6. Eric Voskuil - Axiom of Resistance</a></li>
</ul>
</li>
<li><a href="#_open_source">7. Open source</a>
<ul class="sectlevel2">
<li><a href="#_open_sourcer_initiative_the_open_source_definition">7.1. Open Sourcer Initiative - The Open Source Definition</a></li>
<li><a href="#_jameson_lopp_who_controls_bitcoin_core">7.2. Jameson Lopp - Who controls Bitcoin Core?</a></li>
<li><a href="#_eric_lombrozo_the_bitcoin_core_merge_process">7.3. Eric Lombrozo - The Bitcoin Core Merge Process</a></li>
<li><a href="#_zmnscpxj_who_am_i">7.4. ZmnSCPxj - Who Am I?</a></li>
<li><a href="#_coindesk_many_bitcoin_developers_are_choosing_to_use_pseudonyms_for_good_reason">7.5. CoinDesk - Many Bitcoin Developers Are Choosing to Use Pseudonyms – For Good Reason</a></li>
<li><a href="#_gregory_maxwel_bitcoin_selection_cryptography">7.6. Gregory Maxwel - Bitcoin Selection Cryptography</a></li>
<li><a href="#_jon_atack_how_to_review_pull_requests_in_bitcoin_core">7.7. Jon Atack - How to Review Pull Requests in Bitcoin Core</a></li>
<li><a href="#_gloria_zhao_common_pr_review_questions">7.8. Gloria Zhao - Common PR Review Questions</a></li>
<li><a href="#_tadge_dryja_funding">7.9. Tadge Dryja - Funding</a></li>
<li><a href="#_michael_folkson_taproot_activation_meeting_2">7.10. Michael Folkson - Taproot activation meeting 2</a></li>
<li><a href="#_gregory_maxwell_is_taproot_development_moving_too_fast_or_too_slow">7.11. Gregory Maxwell - Is Taproot development moving too fast or too slow?</a></li>
</ul>
</li>
<li><a href="#_scaling">8. Scaling</a>
<ul class="sectlevel2">
<li><a href="#_james_a_donald_reply_to_bitcoin_p2p_e_cash_paper">8.1. James A. Donald - Reply to "Bitcoin P2P e-cash paper"</a></li>
<li><a href="#_gregory_maxwell_capacity_increases_for_the_bitcoin_system">8.2. Gregory Maxwell - Capacity increases for the Bitcoin system.</a></li>
<li><a href="#_peter_todd_why_scaling_bitcoin_with_sharding_is_very_hard">8.3. Peter Todd - Why Scaling Bitcoin With Sharding Is Very Hard</a></li>
<li><a href="#_jameson_lopp_bitcoin_core_performance_evolution">8.4. Jameson Lopp - Bitcoin Core Performance Evolution</a></li>
<li><a href="#_pieter_wuille_twitter_thread_on_improvements_in_libsecp256k1">8.5. Pieter Wuille - Twitter thread on improvements in libsecp256k1</a></li>
<li><a href="#_murch_2_of_3_inputs_using_pay_to_taproot">8.6. Murch - 2-of-3 inputs using Pay-to-Taproot</a></li>
<li><a href="#_gregory_maxwell_a_trip_to_the_moon_requires_a_rocket_with_multiple_stages">8.7. Gregory Maxwell - A trip to the moon requires a rocket with multiple stages &#8230;&#8203;</a></li>
</ul>
</li>
<li><a href="#_when_shit_hits_the_fan">9. When shit hits the fan</a>
<ul class="sectlevel2">
<li><a href="#_anthony_towns_responsible_disclosure_of_bugs">9.1. Anthony Towns - Responsible disclosure of bugs</a></li>
<li><a href="#_bryan_bishop_responsible_disclosure_of_bugs">9.2. Bryan Bishop - Responsible disclosure of bugs</a></li>
<li><a href="#_gregory_maxwell_responsible_disclosure_of_bugs">9.3. Gregory Maxwell - Responsible disclosure of bugs</a></li>
<li><a href="#_bitcoin_wiki_common_vulnerabilities_and_exposures">9.4. Bitcoin Wiki - Common Vulnerabilities and Exposures</a></li>
<li><a href="#_satoshi_nakamoto_alert_upgrade_to_0_3_5_asap">9.5. Satoshi Nakamoto - *** ALERT <strong>*</strong> Upgrade to 0.3.5 ASAP</a></li>
<li><a href="#_jeff_garzik_strange_block_74638">9.6. Jeff Garzik - Strange block 74638</a></li>
<li><a href="#_satoshi_nakamoto_re_overflow_bug_serious">9.7. Satoshi Nakamoto - Re: overflow bug SERIOUS</a></li>
<li><a href="#_gavin_andresen_bip50_march_2013_chain_fork_post_mortem">9.8. Gavin Andresen - BIP50, March 2013 Chain Fork Post-Mortem</a></li>
<li><a href="#_pieter_wuille_bip66_strict_der_signatures">9.9. Pieter Wuille - BIP66, Strict DER signatures</a></li>
<li><a href="#_pieter_wuille_disclosure_consensus_bug_indirectly_solved_by_bip66">9.10. Pieter Wuille - Disclosure: consensus bug indirectly solved by BIP66</a></li>
<li><a href="#_gregory_maxwell_openssl_1_0_0p_1_0_1k_incompatible_causes_blockchain_rejection">9.11. Gregory Maxwell - OpenSSL 1.0.0p / 1.0.1k incompatible, causes blockchain rejection.</a></li>
<li><a href="#_bitcoin_org_some_miners_generating_invalid_blocks">9.12. bitcoin.org - Some Miners Generating Invalid Blocks</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_decentralization"><a class="anchor" href="#_decentralization"></a>1. Decentralization</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_paper_enabling_blockchain_innovations_with_pegged_sidechains"><a class="anchor" href="#_paper_enabling_blockchain_innovations_with_pegged_sidechains"></a>1.1. Paper: Enabling Blockchain Innovations with Pegged Sidechains</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.blockstream.com/sidechains.pdf" class="bare">https://www.blockstream.com/sidechains.pdf</a></p>
</li>
<li>
<p>Author: Adam Back, Matt Corallo, Luke Dashjr, Mark Friedenbach, Gregory Maxwell, Andrew Miller, Andrew Poelstra, Jorge Timón, and Pieter Wuille</p>
</li>
<li>
<p>Date copied: 2022-05-18</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="images/sidechains.pdf">sidechains.pdf</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_paper"><a class="anchor" href="#_bitcoin_paper"></a>1.2. Bitcoin paper</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.org/bitcoin.pdf" class="bare">https://bitcoin.org/bitcoin.pdf</a></p>
</li>
<li>
<p>Author: Satoshi Nakamoto</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="images/bitcoin.pdf">bitcoin.pdf</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_on_decetralization"><a class="anchor" href="#_gregory_maxwell_on_decetralization"></a>1.3. Gregory Maxwell On decetralization</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.reddit.com/r/Bitcoin/comments/ddddfl/question_on_the_vulnerability_of_bitcoin/f2g9e7b/" class="bare">https://www.reddit.com/r/Bitcoin/comments/ddddfl/question_on_the_vulnerability_of_bitcoin/f2g9e7b/</a></p>
</li>
<li>
<p>Author: Gregory Maxwell (nullc)</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>I think questions like this are ultimately the result of a fundamental lack of understanding about what Bitcoin is doing.</p>
</div>
<div class="paragraph">
<p>The problem Bitcoin is attempting to solve is getting everyone everywhere to agree on the same stable history of transactions. This is necessary because in order to prevent users from printing money from nothing the system must have a rule that you can&#8217;t spend a given coin more than once-- like I have a dollar then pay both alice and bob that dollar, creating a dollar out of nothing.</p>
</div>
<div class="paragraph">
<p>The intuitive way to prevent that excessive spending is to decide that first transaction that spends a coin is valid and any additional spends are invalid. However, in a truly decentralized system "first" is actually logically meaningless! As an inescapable result of relativity the order which different parties will perceive events depends on their relative positions, no matter how good or fast your communication system is.</p>
</div>
<div class="paragraph">
<p>So any system that needs to prevent duplication has to have a way to artificially assign "firstness". Centralized systems like ripple, eos, iota, blockstream liquid, etc. just have a single party (or a virtual single party) use its idea of whatever came first and everyone else just has to accept its decision.</p>
</div>
<div class="paragraph">
<p>A decentralized system like Bitcoin uses a public election. But you can&#8217;t just have a vote of 'people' in a decentralized system because that would require a centralized party to authorize people to vote. Instead, Bitcoin uses a vote of computing power because it&#8217;s possible to verify computing power without the help of any centralized third party.</p>
</div>
<div class="paragraph">
<p>If we didn&#8217;t have the constraint that this system needed to work online, then you could imagine an alternative where consensus could be determined by people presenting large amounts of some rare element. &#8230;&#8203; but you can&#8217;t prove you control osmium online, it appears that computing power is the only thing that can work for this purpose online.</p>
</div>
<div class="paragraph">
<p>When people talk about "51%" all they&#8217;re really talking about is people rigging that election, so that they can override what everyone previously thought was the accepted order of transactions with a new order that changes some of their payments from one party to another.</p>
</div>
<div class="paragraph">
<p>With this understanding maybe you can see that the concern doesn&#8217;t even depend on a single person having too much of the hash-power. The attack would work just as well if there were 100 people each with an equal amount and a majority of them colluded to dishonestly override the result.</p>
</div>
<div class="paragraph">
<p>Also, any mechanism that would let you prevent one party (much less a secret collusion) from having too much authority would almost certainly let you just replace mining entirely. The only known way to do that is to introduce centralization and if you&#8217;re willing to do that it&#8217;s trivial, if you&#8217;re not it appears impossible. People have cooked up 1001 complicated schemes that claim to do it without introducing centralization, but careful analysis finds again and again that these fixes centralize the system but just hide the centralization.</p>
</div>
<div class="paragraph">
<p>I think people obsess far too much about "51%"-- it has some kind of attractive mystery to it that distracts people. If you&#8217;re worried that someone might reorder history using a high hash-power collusion-- just wait longer before you consider your transactions final.</p>
</div>
<div class="paragraph">
<p>A far bigger risk to Bitcoin is that the public using it won&#8217;t understand, won&#8217;t care, and won&#8217;t protect the decentralization properties that make it valuable over centralized alternatives in the first place. &#8230;&#8203; a risk we can see playing out constantly in the billion dollar market caps of totally centralized systems. The ability demonstrated by system with fake decentralization to arbitrarily change the rules out from under users is far more concerning than the risk that an expensive attack could allow some theft in the case of over-eagerly finalized transactions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_decentralist_perspective_or_why_bitcoin_might_need_small_blocks"><a class="anchor" href="#_the_decentralist_perspective_or_why_bitcoin_might_need_small_blocks"></a>1.4. The decentralist perspective, or why Bitcoin might need small blocks</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoinmagazine.com/technical/decentralist-perspective-bitcoin-might-need-small-blocks-1442090446" class="bare">https://bitcoinmagazine.com/technical/decentralist-perspective-bitcoin-might-need-small-blocks-1442090446</a></p>
</li>
<li>
<p>Author: Aaron Van Wirdum</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>AARON VAN WIRDUM SEP 12, 2015<br>
Op-ed - The Decentralist Perspective</p>
</div>
<div class="paragraph">
<p>The block-size limit debate has dominated Bitcoin blogs, forums, chat rooms and meet-ups for months on end, while many of Bitcoin’s brightest minds are gathering in Montreal to discuss the issue face-to-face at the Scaling Bitcoin Workshop this weekend.</p>
</div>
<div class="paragraph">
<p>So far, however, the two sides of the debate have made little progress coming to a consensus. At least for some part, this seems to result from a difference of visions – visions that are based on a different set of priorities.</p>
</div>
<div class="paragraph">
<p>One of these visions – represented by Bitcoin XT developers Gavin Andresen and Mike Hearn – is straightforward and clear. For Bitcoin to succeed, they believe it needs to grow, preferably fast. And for Bitcoin to grow fast, it needs to be cheap, accessible and easy to use. This, in turn, means that the block-size limit needs to increase in order for more transactions to fit on Bitcoin’s blockchain, for fees to remain low, and without having to rely on complicated and far-off alternative solutions. This could mean that some aspects of the Bitcoin ecosystem need to specialize further, but that was always to be expected.</p>
</div>
<div class="paragraph">
<p>On the other end of the spectrum, a majority of Bitcoin’s most active developers think it’s not that simple. For them, Bitcoin’s decentralized nature is sacrosanct, and they believe that an increase of the block-size limit represents a trade-off with this core feature. Some of these developers – perhaps best described as Bitcoin’s “decentralists” – even warn that too big an increase could destroy the system as a whole.</p>
</div>
<div class="paragraph">
<p>But for many outside this select group developers it still seems unclear why, exactly, big blocks could pose such a grave threat. To find out, Bitcoin Magazinespoke with four of the most prominent of these decentralists: Bitcoin Core developer Dr. Pieter Wuille, Bitcoin Core developer and long-term block-size conservative Peter Todd, hashcash inventor and Blockstream founder and president Dr. Adam Back, and well-known cryptographer and digital currency veteran Nick Szabo.</p>
</div>
<div class="paragraph">
<p>MINING CENTRALIZATION</p>
</div>
<div class="paragraph">
<p>According to decentralists, the problem of big blocks is essentially twofold. On one hand there is the basic assumption that bigger blocks favor bigger miners – presumably mining pools. On the other hand is the fact that bigger blocks complicate mining anonymously.</p>
</div>
<div class="paragraph">
<p>The main (though not only) reason bigger blocks favor bigger miners has to do with latency. As the block size increases, so does the time it takes for a newfound block to transmit through the Bitcoin network. That is disadvantageous to all miners, except for the miner that found the block. During the time it takes a new block to make its way through the network, the miner who found the block gets a head start mining on top of the new block, while other miners are still busy mining on top of an older block. So as a miner find more blocks, it gets more head starts. And as a miner gets more head starts, it finds more blocks. Meanwhile on the other end of the equation, smaller miners find fewer blocks and, as a result, have more trouble turning a profit, ultimately causing them to drop off the network. Bigger blocks tend to centralize mining.</p>
</div>
<div class="paragraph">
<p>This problem is worsened, moreover, if a miner wishes to remain anonymous, and wants to use Tor. Since latency on the Tor network is always higher, the problem as described above is simply magnified. If smaller miners are disadvantaged by bigger blocks to the point where it’s hard to remain profitable on a regular connection, miners using Tor don’t even stand a chance.</p>
</div>
<div class="paragraph">
<p>Neither of these arguments against bigger blocks is controversial in itself. The controversy lies in the question how big is too big. Andresen and Hearn believe an increase to 8 megabytes or even 20 megabytes should be OK, and assume that it’s fine to grow this limit to 8 gigabytes over a 20-year time period.</p>
</div>
<div class="paragraph">
<p>Speaking to Bitcoin Magazine, Bitcoin Core developer and Blockstream co-founder Dr. Pieter Wuille explained why this assumption is not shared by decentralists.</p>
</div>
<div class="paragraph">
<p>“It is obvious that block propagation is too slow already,” Wuille said. “A recent software update revealed that several mining pools maintain arrangements where they share block headers – the minimal required part of an actual block – the moment they find a new block. All miners in on the deal then start mining on top of that block header instead of waiting for the full block to propagate over the network – waiting would cut into their profits too much.”</p>
</div>
<div class="paragraph">
<p>Explaining why this is a problem, Wuille continued:</p>
</div>
<div class="paragraph">
<p>“This practice is harmful for Bitcoin, as it requires a lot of trust among miners. They no longer verify the validity of blocks individually, and instead just rely on their peers. But validating blocks is supposed to be a miner’s main task on the Bitcoin network…”</p>
</div>
<div class="paragraph">
<p>Moreover, decentralists warn there might be no turning back once bitcoin mining has become too centralized. At that point, the remaining miners could have created a deadlock on the mining market, essentially preventing newcomers to compete profitably.</p>
</div>
<div class="paragraph">
<p>Core developer and long-time block-size conservative Peter Todd told Bitcoin Magazine:</p>
</div>
<div class="paragraph">
<p>“The big concern we have here is, as we reduce these security margins, we’ll see the already worryingly small number of pools decrease even further. Even more concerning though, is that while currently it’s pretty easy to start a new pool if an existing one ‘goes rogue,’ bigger blocks can make it much more difficult to do so, because from the beginning you’ll be much less profitable than the big pools.”</p>
</div>
<div class="paragraph">
<p>And while it has been suggested that miners can connect to a VPS if they prefer to remain anonymous rather than connect through Tor, this is not quite satisfying for decentralists either. Speaking to Bitcoin Magazine, hashcash inventor and Blockstream CEO Dr. Adam Back explained why.</p>
</div>
<div class="paragraph">
<p>“It is technically possible to mine using a VPS (Virtual Private Server), but miners who do so are not choosing their own transactions,” Back emphasized. “Instead, they connect to a server that does this for them. It’s another form of centralization, at the extreme. And we already see this happening due to bad connectivity in some countries, where miners use VPS services set up in another country to win some time and increase profits…”</p>
</div>
<div class="paragraph">
<p>REGULATION</p>
</div>
<div class="paragraph">
<p>Decentralization – and anonymity – might be sacrosanct for decentralists, but that does not mean they are goals in and of themselves. Instead, decentralists cling to these properties because they believe the health of the Bitcoin network relies on them. It’s only through decentralization and anonymity that the system can remain free from outside influence, such as government regulation.</p>
</div>
<div class="paragraph">
<p>“Bitcoin achieves policy neutrality by decentralization of mining,” Back explained. “If one miner won’t mine your transaction, another will. It’s an additional benefit if miners are many, geographically dispersed and anonymous, since it’s complex to coordinate a policy imposition on many small geographically dispersed miners. And it’s even more complex to impose policy on someone who is anonymous.”</p>
</div>
<div class="paragraph">
<p>If, on the other hand, Bitcoin reaches the point where only a handful of professional miners will be able to profitably partake in the process of Bitcoin mining, and if these miners are no longer able to do so anonymously, decentralists worry that Bitcoin’s fundamental properties might be at risk.</p>
</div>
<div class="paragraph">
<p>“It is pretty clear that forcing the Bitcoin protocol to implement anti-money laundering policy and blacklisting of funds is a long-term goal of governments, which can be done by pressuring mining pools,” Todd explained. “Being able to tell regulators that pressure will simply cause pools to leave regulated jurisdictions is important, but without anonymity, there really aren’t that many jurisdictions to run to.”</p>
</div>
<div class="paragraph">
<p>Furthermore, once more that half of all hashing power is effectively regulated, authorities could even demand a complete freeze of certain funds, Back explained:</p>
</div>
<div class="paragraph">
<p>“If more than 50 percent of mining is subject to policy, it can actually censor any transaction by ignoring – orphaning – blocks made by other miners. We don’t know if that would happen or not, but given the fact that it would be within their technical power to do it, it should be expected that regulators demand their regulations achieve an effect.”</p>
</div>
<div class="paragraph">
<p>Moreover, once this sort of regulation does set in, decentralists believe it will probably be too late to fix. Bitcoin would be caught in a regulatory trap without even noticing it – until the trap closed.</p>
</div>
<div class="paragraph">
<p>Back continued:</p>
</div>
<div class="paragraph">
<p>“If Bitcoin is already at high policy risk – sort of effectively centralized but not experiencing the side-effects of that yet – and then the policy problem arises, the properties of Bitcoin are lost or eroded. How can you fix it at that point? Suddenly decentralize it? It’s uncertain that the parties who are at that point under central control over the Bitcoin network have the free choice to work to decentralize it. They would have been regulatory captured.”</p>
</div>
<div class="paragraph">
<p>FULL-NODE CENTRALIZATION</p>
</div>
<div class="paragraph">
<p>But even mining centralization and regulation might not be the end of it, decentralists warn. Ultimately, over-sized blocks bear with it another – perhaps even bigger – risk: full-node centralization.</p>
</div>
<div class="paragraph">
<p>Full-node centralization could be an even bigger risk than mining centralization, decentralists argue, as full nodes effectively verify the consensus rules Bitcoin plays by. These consensus rules enforce that Bitcoin has a 1MB block-size limit, but also that the block reward halves every four years, or that the total supply of bitcoin will not exceed 21 million. And – importantly – being able to verify these rules is what makes Bitcoin a trustless solution. In essence, full nodes allow users to check that Bitcoin does as promised.</p>
</div>
<div class="paragraph">
<p>But as it becomes expensive to run a full node, decentralists worry that verifying the consensus rules could become reserved to a small elite. This could have several consequences.</p>
</div>
<div class="paragraph">
<p>An obvious consequence would be that it injects trust in the system. Instead of using trustless full nodes, users would, for instance, use web-wallets – which obviously require a lot of trust in the service. But even solutions such as Simplified Payments Verification (SPV) nodes are no better in this regard, as they do not verify the consensus rules either.</p>
</div>
<div class="paragraph">
<p>Peter Todd explained:</p>
</div>
<div class="paragraph">
<p>“SPV nodes and wallets are not a trustless solution. They explicitly trust miners, and do no verification of the protocol rules at all. For instance, from the perspective of an SPV node there is no such thing as inflation schedule or a 21 million bitcoin cap; miners are free to create bitcoins out of thin air if they want to.”</p>
</div>
<div class="paragraph">
<p>And while the cheating of SPV nodes could be seen as a short-term problem, some decentralists argue that a drop in full nodes might even have more severe consequences in the longer term.</p>
</div>
<div class="paragraph">
<p>According to Wuille:</p>
</div>
<div class="paragraph">
<p>“If lots companies run a full node, it means they all need to be convinced to implement a different rule set. In other words: the decentralization of block validation is what gives consensus rules their weight. But if full node count would drop very low, for instance because everyone uses the same web-wallets, exchanges and SPV or mobile wallets, regulation could become a reality. And if authorities can regulate the consensus rules, it means they can change anything that makes Bitcoin Bitcoin. Even the 21 million bitcoin limit.”</p>
</div>
<div class="paragraph">
<p>It is of vital importance for the health of the Bitcoin network, therefore, that it remains possible to run full node anonymously, Todd urged:</p>
</div>
<div class="paragraph">
<p>“Like mining, having the option to run full nodes totally ‘underground’ helps change the discussion and gives us a lot of leverage with governments: try to ban us and you’ll have even less control. But if we don’t have that option, it starts looking like regulation efforts have a decent chance of actually working, and gives governments incentives to attempt them.”</p>
</div>
<div class="paragraph">
<p>Commenting on the block size limit debate itself, Back added:</p>
</div>
<div class="paragraph">
<p>“I believe that the unstated different assumption – the point at which views diverge – is the importance of economically dependent full nodes. It seems that Gavin thinks a world where economically dependent full nodes retreat to data-centers and commercial operation – and basically all users can only get SPV security – is an OK trade-off and cost of getting to higher transaction volume a year early. But most of Bitcoin’s technical experts strongly disagree and say this risks exposing Bitcoin to erosion of its main differentiating features.”</p>
</div>
<div class="paragraph">
<p>TRADE-OFFS</p>
</div>
<div class="paragraph">
<p>So what if decentralists are right? Bitcoin mining, and perhaps even running a full node, is reserved to specialists working from data centers. Anti-Money Laundering and Know Your Customer policy might be imposed, and perhaps the protocol rules are regulated to a certain extent. Sure, it would be a blow for drug dealers, CryptoLocker distributors and extortionists, but Bitcoin would still be a global, instant and cheap payments system. In a way, Bitcoin might actually be better of without these outlaws. Right?</p>
</div>
<div class="paragraph">
<p>Well, not according to decentralists.</p>
</div>
<div class="paragraph">
<p>Most decentralists maintain that Bitcoin’s distinguishing features are not its global reach, its instant transactions, or its low costs of use. Instead, they argue, Bitcoin’s single most important distinguishing feature is its decentralized nature. Without it, there would be no reason for Bitcoin to even exist.</p>
</div>
<div class="paragraph">
<p>Well-known cryptographer and digital currency veteran Nick Szabo explained:</p>
</div>
<div class="paragraph">
<p>“In computer science there are fundamental trade-offs between security and performance. Bitcoin’s automated integrity necessarily comes at high costs in its performance and resource usage. Compared to existing financial IT, Satoshi made radical trade-offs in favor of security and against performance. The seemingly wasteful process of mining is the most obvious of these trade-offs, but it also makes others. Among them is that it requires high redundancy in its messaging. Mathematically provable integrity would require full broadcast between all nodes. Bitcoin can’t achieve that, but to even get anywhere close to a good approximation of it requires a very high level of redundancy. So a 1MB block takes vastly more resources than a 1MB web page, for example, because it has to be transmitted, processed and stored with such high redundancy for Bitcoin to achieve its automated integrity.”</p>
</div>
<div class="paragraph">
<p>The crucial importance of this trade-off, was seconded by Wuille:</p>
</div>
<div class="paragraph">
<p>“If we were to allow centralization of mining, we simply wouldn’t need a blockchain in the first place. We could just let a central bank sign transactions. That would allow us much bigger and faster blocks without any capacity problems. No variable block times. No wasted electricity. No need for an inflation subsidy. It would be better in every sense, except that it would involve some trust. Really, if we don’t consider centralization of mining a problem, we might as well get rid of it altogether.”</p>
</div>
<div class="paragraph">
<p>Szabo added:</p>
</div>
<div class="paragraph">
<p>“These necessary trade-offs, sacrificing performance in order to achieve the security necessary for independent and seamlessly global automated integrity, mean that Bitcoin cannot possibly come anywhere near Visa transaction-per-second numbers and maintain the automated integrity that creates its distinctive advantages versus these traditional financial systems.”</p>
</div>
<div class="paragraph">
<p>BITCOIN VERSUS BITCOIN</p>
</div>
<div class="paragraph">
<p>This leaves us with one last question. If “Bitcoin cannot possibly come anywhere near Visa transaction-per-second numbers” as decentralists claim, then what is the point of it all? Why even bother building software, investing in startups, and spend time evangelizing Bitcoin, if it inherently doesn’t scale?</p>
</div>
<div class="paragraph">
<p>The point of it all, for decentralists, lies in a classic distinction: the distinction between Bitcoin the network and bitcoin the currency.</p>
</div>
<div class="paragraph">
<p>Bitcoin the network, decentralists argue, is fundamentally designed as a settlement system, not as a network for fast and cheap payments. While maybe not the most typical decentralist himself, a recent contribution to the Bitcoin developer mailing list by Core developer Jeff Garzik perhaps explains the decentralist perspective best.</p>
</div>
<div class="paragraph">
<p>Garzik wrote:</p>
</div>
<div class="paragraph">
<p>“Bitcoin is a settlement system, by design. The process of consensus ‘settles’ upon a timeline of transactions, and this process – by design – is necessarily far from instant. … As such, the blockchain can never support All The Transactions, even if block size increases beyond 20MB. Further layers are – by design – necessary if we want to achieve the goal of a decentralized payment network capable of supporting full global traffic.”</p>
</div>
<div class="paragraph">
<p>But, importantly, this vision of Bitcoin as a limited settlement network, does not mean that bitcoin the currency cannot flourish beyond these built-in limits.</p>
</div>
<div class="paragraph">
<p>As explained by Szabo:</p>
</div>
<div class="paragraph">
<p>“When it comes to small-b bitcoin, the currency, there is nothing impossible about paying retail with bitcoin the way you’d pay with a fiat currency – bitcoin-denominated credit and debit cards, for example, with all the chargeback and transactions-per-second capabilities of a credit or debit card. And there are clever trust-minimizing ways to do retail payments in the works. Capital-B Bitcoin, the blockchain, is going to evolve into a high-value settlement layer, and we will see other layers being used for small-b bitcoin retail transactions.”</p>
</div>
<div class="paragraph">
<p>Or as Garzik elaborated:</p>
</div>
<div class="paragraph">
<p>“Bitcoin payments are like IP packets – one way, irreversible. The world’s citizens en masse will not speak to each other with bitcoin (IP packets), but rather with multiple layers (HTTP/TCP/IP) that enable safe and secure value transfer or added features such as instant transactions.”</p>
</div>
<div class="paragraph">
<p>Moreover, decentralists contend that even these upper layers could include most of the advantages that the Bitcoin network introduced. Once fully developed, technological innovations such as the Lightning Network and tree-chains should allow users to transact in a decentralized, trustless, and even instant fashion – while ultimately settling on the Bitcoin blockchain. While it is true that on-chain transactions will cost more as room in blocks becomes scarce, decentralists maintain that it is the only way to keep that chain decentralized and trustless – and that that does not need to be a problem.</p>
</div>
<div class="paragraph">
<p>“Yes, on-chain transaction fees will rise,” Todd acknowledged. “But that changes what you use Bitcoin’s underlying blockchain layer for, and how often – not whether or not you can transact at all. A world where you can send anyone on the planet money directly on the blockchain for five dollars – or for near zero via caching techniques like Lightning – is a very good option, and it will buy us time to develop techniques to make blockchains themselves scalable …”</p>
</div>
</div>
<div class="sect2">
<h3 id="_irc_log_2012_04_04"><a class="anchor" href="#_irc_log_2012_04_04"></a>1.5. IRC log 2012-04-04</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://gnusha.org/bitcoin-core-dev/bitcoin-dev-2010-2015.txt.xz" class="bare">https://gnusha.org/bitcoin-core-dev/bitcoin-dev-2010-2015.txt.xz</a></p>
</li>
<li>
<p>Author: Wumpus (among others)</p>
</li>
<li>
<p>Date copied: 2022-05-18</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>1333560356|1|wumpus|for errors that are fatal or really require the users long term attention
1333560364|1|BlueMatt|heh, yet another request for sending double spend notifications...
1333560366|1|BlueMatt|wow...
1333560405|1|gavinandresen|while we're cleaning up code... wxAnything aught to be renamed
1333560413|1|jgarzik|heh
1333560441|1|wumpus|gavinandresen: yes
1333560554|1|lh77|What is mintchip?
1333560562|1|dvide|the best ice cream flavour
1333560565|128|erle-|Quit: erle-
1333560581|1|Graet|its the evolution of currency.
1333560588|1|BlueMatt|heh
1333560590|1|Graet|http://mintchipchallenge.com/
1333560592|1|Graet|:P
1333560598|1|lh77|is it like bitcoin?
1333560600|1|lh77|peer to peer?
1333560604|1|Graet|not at all
1333560612|1|lh77|what does it do exactly?
1333560615|1|Graet|mint = canadian mint
1333560620|1|Graet|read link?
1333560626|1|Graet|i'm going bed :)
1333560638|32|Joric_|#bitcoin-dev
1333560638|128|Joric_|Changing host
1333560638|32|Joric_|#bitcoin-dev
1333560702|128|coingenuity|Read error: Connection reset by peer
1333560710|1|freewil|well one thing mintchip has that bitcoin doesnt is a large organization behind it
1333560724|128|Joric|Ping timeout: 246 seconds
1333560740|1|Diablo-D3|no one has even proven its from the canadian mint
1333560741|1|Diablo-D3|also
1333560745|1|Diablo-D3|its not distributed nor secure
1333560760|1|Diablo-D3|its DRMed virtual money using a central source to issue keys
1333560762|1|BlueMatt|wait, do I agree with Diablo-D3 for once?
1333560776|1|wumpus|that bitcoin has no large organization behind it is a good thing imo
1333560776|1|BlueMatt|damn im getting cynical
1333560783|128|barmstro_|Remote host closed the connection
1333560813|1|Blitzboom|no it’s not
1333560819|1|gavinandresen|awww.... we don't get no respect, BTC isn't one of the currency codes supported by MintChip
1333560820|8|Joric_|Joric
1333560833|1|Blitzboom|it would be good to have funding for developmenta, PR and legal matters
1333560844|1|wumpus|bitcoin is neutral, which is a good thing, and the only way it can work
1333560863|1|gavinandresen|PR is lovebitcoins.org
1333560866|1|wumpus|if it was controlled by an organisation it'd just be another virtual object type
1333560874|1|wumpus|and I would have zero interest in it
1333560893|1|freewil|im just talking about a non-profit to fund development
1333560901|1|gavinandresen|I'm talking with somebody tomorrow about a non-profit for legal stuff about bitcoin
1333560925|1|freewil|gavinandresen, what about paying you to develop full time :)
1333560942|1|wumpus|that's good, as long as it doesn't become a central point of failure
1333560948|1|BlueMatt|gavinandresen pretty much does develop full-time
1333560954|1|gavinandresen|freewil: feel free.  TruCoin was paying me until their funding dried up...
1333560955|1|BlueMatt|(and we should pay him)
1333561003|1|gavinandresen|There are several workable models for funding open source projects, if I was more of a business person I'd spend more time thinking about which one makes sense for bitcoin
1333561040|1|freewil|the only ones i really know are donations and support-based revenue
1333561051|1|Blitzboom|satoshi should simply throw in a few hundred k BTC
1333561069|1|gavinandresen|throw in... where ?
1333561080|1|Graet|the "kitty"
1333561081|1|wumpus|in gavinandresens account
1333561094|1|Blitzboom|that non-profit’s bank
1333561140|128|Diapolo|Quit: Page closed
1333561143|1|Blitzboom|yeah, donations should work. there are plenty of large holders who have a healthy interest in it
1333561183|1|BlueMatt|luckily we are a "currency"
1333561192|1|BlueMatt|getting eg mtgox to donate a bit wouldnt be hard
1333561243|1|denisx|isnt deepbit the biggest profitmaker?
1333561248|1|wumpus|support-based sounds interesting, maybe we should add a payment to open issues :-)
1333561258|128|mmoya|Ping timeout: 244 seconds
1333561281|1|Joric|what do you think about blocking mtgox accounts due to 'tainted' coins? that bitcoin AIDS is making me nervous
1333561300|1|BlueMatt|Joric: welcome to the world of finance regulation
1333561306|32|[Tycho]|#bitcoin-dev
1333561321|1|wumpus|well mtgox can decide what they do for themselves right?
1333561340|1|Joric|it's the biggest exchange atm
1333561356|1|Joric|most coins end there
1333561389|1|BlueMatt|wumpus: sort of, though bitcoin isnt technically regulated as a currency, they still have to try to regulate it as if it were to avoid aml issues
1333561421|1|wumpus|BlueMatt: yes, that's the problem with it being so easy to trace
1333561455|1|jgarzik|bitcoin AIDS?
1333561464|1|wumpus|though a global ledger is probably the only way a distributed currency can work
1333561477|1|jgarzik|does mtgox have a list of tainted coins?
1333561482|1|wumpus|yes
1333561491|1|wumpus|they have a naughty list
1333561502|32|barmstrong|#bitcoin-dev
1333561588|1|wumpus|I think the bigger problem is not mtgox specifically but that bitcoin is so dependent on a few exchanges, they are centralized bottlenecks</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pieter_wuille_on_neutrality"><a class="anchor" href="#_pieter_wuille_on_neutrality"></a>1.6. Pieter Wuille On neutrality</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.stackexchange.com/a/92055/69518" class="bare">https://bitcoin.stackexchange.com/a/92055/69518</a></p>
</li>
<li>
<p>Author: Pieter Wuille</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>This is hard to answer, as "blockchain" isn&#8217;t a very well defined thing. Often the term refers to some use of cryptography in a distributed system, but what it means beyond that depends on who you ask. To those who use it as a generic term, it is usually little more than a marketing term.</p>
</div>
<div class="paragraph">
<p>If you assume that at least there is an actual chain of blocks being built, either by a permissionless set of participants based on economic incentive ("miners"), or by a permissioned set of signers with long-term identities, the question you&#8217;re asking actually does not make sense. Blockchain consensus algorithms do not compete with or replace databases as such. They are a mechanism for obtaining consensus on a global state, where multiple participants have authority to accept changes. Arguably, each of those participants <em>already</em> needs a database themselves - the blockchain is merely a log of all accepted updates to those databases. Even in Bitcoin, every node actually has a local database with the UTXO set. In Bitcoin Core, that is a LevelDB database, but there is no fundamental reason why another database couldn&#8217;t be used.</p>
</div>
<div class="paragraph">
<p>Of course, in some scenarios all you need is a single authority deciding on all changes to the database. In that case a database is indeed all you need. But that&#8217;s a silly comparison: there are plenty of use cases for distributed systems with multiple writers today, in production use, that have no relation with blockchains. Look up Paxos, or Google Spanner for example. The complexity is not in the database part, but in keeping the participants synchronized. That is what a consensus algorithm does. Most production instances I know of this use mutually trusting authorities (and a distributed system is used for performance/latency reasons rather than trust), but algorithms that permit distrusting participants are well known as well, e.g. PBFT.</p>
</div>
<div class="paragraph">
<p>Now, digging deeper: how does a private blockchain compare with such a system? The answer is trivial: it is effectively a new way of looking at the same thing. Private blockchains (i.e. there is a set of known identities that can approve changes) rely on running a traditional consensus algorithm (e.g. PBFT) between the block signers to make sure only a single chain emerges. Here the "blockchain" is literally the log of changes, as many of its properties (e.g. the ability to temporarily fork) aren&#8217;t even used. That log may be useful for auditing purposes, and if you structure it as a hash chain, you could indeed call it a blockchain. But there is no innovation here whatsoever. That doesn&#8217;t mean "blockchain technology" is necessecarily useless here, as some of the cryptography for e.g. transaction verification may still be applicable (depending on the use case), but, arguably, the blockchain as a datastructure itself not novel in any way here.</p>
</div>
<div class="paragraph">
<p>Things get much more interesting when you&#8217;re talking about a public blockchain (where anyone can become an authorizer of changes) but its use cases are very limited. I&#8217;m going to focus here on proof-of-work, as I don&#8217;t believe any solution that completely avoids PoW actually securely offers the same properties. What PoW does is replace the signing of blocks by known identities with betting on particular versions of history and paying for the bet. Everyone who consistently bets with the majority ("miners") gets paid, and those who diverge don&#8217;t. There are two fundamental changes here: (a) there must be something of value to pay miners, which typically implies that your blockchain needs to define its own currency, limiting the use cases to effectively just cryptocurrencies (b) you don&#8217;t get guaranteed convergence anymore, only probabilistically and under economical assumptions.</p>
</div>
<div class="paragraph">
<p>To summarize, the answer to your question really depends on what you mean by blockchain, and what kind of thing you&#8217;re comparing it to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cryptography used in blockchains may be widely applicable in a variety of settings, but doesn&#8217;t really have anything to do with blockchains or databases themselves.</p>
</li>
<li>
<p>Using consensus algorithms (private or public, including typical "blockchain based" ones) in situations where there is only a single authorizer is silly; you should use the database directly.</p>
</li>
<li>
<p>Using fault tolerant consensus algorithms (either traditional BFT like ones, or PoW) is overkill when your authorizers are trusted (e.g. because they&#8217;re all run by the same company). Use something like Paxos instead.</p>
</li>
<li>
<p>Using trustless consensus algorithms like PoW does add something no other construction gives you (permissionless participation, meaning there is no set group of participants that can censor your changes), but comes at a high cost, and its economic assumptions make it pretty much only useful for systems that define their own cryptocurrency. There is probably only place in the world for one or a few actually used ones of these.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_on_autonomy"><a class="anchor" href="#_gregory_maxwell_on_autonomy"></a>1.7. Gregory Maxwell on autonomy</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.reddit.com/r/Bitcoin/comments/s82t2n/comment/htdte7w/?utm_source=share&amp;utm_medium=web2x&amp;context=3" class="bare">https://www.reddit.com/r/Bitcoin/comments/s82t2n/comment/htdte7w/?utm_source=share&amp;utm_medium=web2x&amp;context=3</a></p>
</li>
<li>
<p>Author: Gregory Maxwell (nullc)</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Your prior understanding sounds correct.</p>
</div>
<div class="paragraph">
<p>Many people have a hard time understanding autonomous systems, there are many in their lives things like the english language-- but people just take them for granted and don&#8217;t even think of them as systems. They&#8217;re stuck in a centralized way of thinking where everything they think of as a 'thing' has an authority that controls it.</p>
</div>
<div class="paragraph">
<p>Bitcoin doesn&#8217;t focus on anything. Various people who have adopted Bitcoin chose of their own free will to promote it, and how they choose to do so is their own business. Authority fixated people may see these activities and believe they&#8217;re some operation by the bitcoin authority, but no such authority exists.</p>
</div>
<div class="paragraph">
<p>The article might just as well say "Meanwhile, English has recently introduced 'chatspeek'-- an informal abbreviated form of the language-- to attract a younger, more mobile, generation to its platform."</p>
</div>
</div>
<div class="sect2">
<h3 id="_radhika_nagpal_on_fish_schools"><a class="anchor" href="#_radhika_nagpal_on_fish_schools"></a>1.8. Radhika Nagpal on fish schools</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.ted.com/talks/radhika_nagpal_what_intelligent_machines_can_learn_from_a_school_of_fish" class="bare">https://www.ted.com/talks/radhika_nagpal_what_intelligent_machines_can_learn_from_a_school_of_fish</a></p>
</li>
<li>
<p>Author: Radhika Nagpal</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="videoblock">
<div class="content">
<video src="images/2017-radhika-nagpal-005-5000k.mp4" width="640" controls>
Your browser does not support the video tag.
</video>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trustlessness"><a class="anchor" href="#_trustlessness"></a>2. Trustlessness</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pieter_wuille_on_trustlessness"><a class="anchor" href="#_pieter_wuille_on_trustlessness"></a>2.1. Pieter Wuille on trustlessness</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.stackexchange.com/questions/45670/can-a-closed-source-wallet-ever-be-completely-trust-less/45674#45674" class="bare">https://bitcoin.stackexchange.com/questions/45670/can-a-closed-source-wallet-ever-be-completely-trust-less/45674#45674</a></p>
</li>
<li>
<p>Author: Pieter Wuille</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The term <em>trustless</em> is often misunderstood. I suspect you mean <em>not needing to trust anyone</em>, but if a program being open source helps for that, aren&#8217;t you implicitly relying on the people who are capable of reviewing the source code to have actually done so? Isn&#8217;t that also a form of trust? Of course it is. Every production system needs to trust various aspects of the infrastructure: the hardware it&#8217;s running on, the compiler that was used, the operating system, and last but not least the human operating it.</p>
</div>
<div class="paragraph">
<p>The trust we&#8217;re talking about in "trustless" is an abstract <strong>technical term</strong>. A distributed system is called trustless when it does not require any <strong>trusted parties</strong> to function correctly. In that sense, a "trustless wallet" does not make sense: wallets are an implementation aspect of a cryptocurrency, the design of which may or may not rely on trusted parties. The wallet software being open or closed source doesn&#8217;t change this.</p>
</div>
<div class="paragraph">
<p>Does that mean you should use a closed-source wallet? Hell no. Not because it&#8217;s "trustless" or not, but because there is no chance it&#8217;ll have been sufficiently <strong>reviewed</strong> (unless, perhaps, you have access to the source code under NDA and paid for thorough review yourself).</p>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_paper_2"><a class="anchor" href="#_bitcoin_paper_2"></a>2.2. Bitcoin paper</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.org/bitcoin.pdf" class="bare">https://bitcoin.org/bitcoin.pdf</a></p>
</li>
<li>
<p>Author: Satoshi Nakamoto</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="images/bitcoin.pdf">bitcoin.pdf</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_david_harding_full_validation_the_best_possible_decentralized_security"><a class="anchor" href="#_david_harding_full_validation_the_best_possible_decentralized_security"></a>2.3. David Harding: Full Validation, The best possible decentralized security</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.org/en/bitcoin-core/features/validation" class="bare">https://bitcoin.org/en/bitcoin-core/features/validation</a></p>
</li>
<li>
<p>Author: David Harding</p>
</li>
<li>
<p>Date copied: 2022-05-24</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Imagine a scientist reading about an experimental result and then
repeating the experiment for herself. Doing so allows her to <strong>trust the
result without having to trust the original scientists.</strong></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Bitcoin Core checks each block of transactions it receives to ensure
that everything in that block is fully valid—allowing it to trust the
block without trusting the miner who created it.</p>
</div>
<div class="paragraph">
<p>This prevents miners from tricking Bitcoin Core users into accepting
blocks that violate the 21 million bitcoin limit or which break other
important rules.</p>
</div>
<div class="paragraph">
<p>Users of other wallets don’t get this level of security, so miners can
trick them into accepting fabricated transactions or hijacked block
chains.</p>
</div>
<div class="paragraph">
<p>Why take that risk if you don’t have to? Bitcoin Core provides the <strong>best
possible security against dishonest miners</strong> along with additional
security against other easier attacks (see below for details).</p>
</div>
<div class="sect3">
<h4 id="_how_validation_protects_your_bitcoins"><a class="anchor" href="#_how_validation_protects_your_bitcoins"></a>How Validation Protects Your Bitcoins</h4>
<div class="paragraph">
<p>Bitcoin banks and lightweight (SPV) wallets put your bitcoins at
increased risk of being stolen. That risk may be acceptable for small
values of bitcoin on mobile wallets, but is it what you want for your
real wallet?</p>
</div>
<div class="sect4">
<h5 id="_direct_theft"><a class="anchor" href="#_direct_theft"></a>Direct theft</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Alice deposits 100 bitcoins to Bank.Example.com. The next day, the
owners of the site disappear with Alice’s money.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bitcoin bank</strong> users are vulnerable to direct theft because they don’t
control their own private keys.</p>
</li>
<li>
<p><strong>Lightweight (SPV) wallet</strong> users and <strong>Bitcoin Core</strong> users are not
vulnerable because they control their own private keys.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Direct theft is likely the leading cause of stolen bitcoins so far.</p>
</div>
<div class="sect5">
<h6 id="_real_example"><a class="anchor" href="#_real_example"></a>Real Example</h6>
<div class="paragraph">
<p>Bitcoin exchange Mt Gox reportedly had 650,000 bitcoins (worth $347
million USD) stolen from their customer deposits and their own operating
funds. They declared bankruptcy on 28 February 2014.</p>
</div>
<div class="paragraph">
<p>Even when the bankruptcy proceeding is complete, customers are unlikely
to recover more than a small fraction of the bitcoins they had on
deposit.</p>
</div>
<div class="paragraph">
<p><strong>Learn More:</strong> <a href="https://en.bitcoin.it/wiki/Collapse_of_Mt._Gox">Collapse of
Mt Gox</a></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_bait_and_switch"><a class="anchor" href="#_bait_and_switch"></a>Bait and switch</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Alice installs Example Wallet, whose open source code has been audited.
The next day, the authors of Example Wallet push new code to Alice’s
device and steal all her bitcoins.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bitcoin bank</strong> users are vulnerable because they can only spend their
bitcoins when they use the bank’s approved software.</p>
</li>
<li>
<p><strong>Lightweight (SPV) wallet</strong> users are vulnerable with most software
because auditors can’t easily verify the software you run (the
executable) is the same as the program source code, called a
deterministic build. However, some lightweight wallets are moving to
deterministic builds.</p>
</li>
<li>
<p><strong>Bitcoin Core</strong> is built deterministically. Cryptographic signatures
from build auditors—many of whom are well known to the community—are
<a href="https://github.com/bitcoin/gitian.sigs">released publicly</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bitcoin.org’s <a href="https://bitcoin.org/en/choose-your-wallet">Choose Your Wallet</a> page tells
you whether or not wallet builds are audited in the <em>Transparency</em> score
for each wallet.</p>
</div>
<div class="sect5">
<h6 id="_real_example_2"><a class="anchor" href="#_real_example_2"></a>Real Example</h6>
<div class="paragraph">
<p>In April 2013, the OzCoin mining pool was hacked. The thief stole 923
bitcoins (worth $135,000 USD), but online wallet StrongCoin modified
their wallet code to ‘steal back’ 569 of those bitcoins ($83,000) from
one of their users who was suspected of the theft.</p>
</div>
<div class="paragraph">
<p>Although this attack was done with good intentions, it illustrated that
the operators of StrongCoin could steal bitcoins from their users at any
time even though the users supposedly controlled their own private keys.</p>
</div>
<div class="paragraph">
<p><strong>Learn More:</strong>
<a href="https://bitcoinmagazine.com/4273/ozcoin-hacked-stolen-funds-seized-and-returned-by-strongcoin/">OzCoin
Hacked, Stolen Funds Seized and Returned by StrongCoin</a></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_fabricated_transactions"><a class="anchor" href="#_fabricated_transactions"></a>Fabricated transactions</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Mallory creates a transaction giving Alice 1,000 bitcoins, so Alice
gives Mallory some cash. Later Alice discovers the transaction Mallory
created was fake.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bitcoin bank</strong> users depend on the information reported by the bank,
so they can easily be fooled into accepting fabricated transactions.</p>
</li>
<li>
<p><strong>Lightweight (SPV) wallet</strong> users depend on full nodes and miners to
validate transactions for them. It costs nothing for dishonest full
nodes to send unconfirmed fabricated transactions to an SPV wallet.
Getting one or more confirmations of those fabricated transactions is
also possible with help from a dishonest miner.</p>
</li>
<li>
<p><strong>Bitcoin Core</strong> users don’t have to worry about fabricated transactions
because Bitcoin Core validates every transaction before displaying it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Currently the best defense against fabricated transactions, besides
using Bitcoin Core, is to wait for as many confirmations as possible.</p>
</div>
<div class="sect5">
<h6 id="_real_example_3"><a class="anchor" href="#_real_example_3"></a>Real Example</h6>
<div class="paragraph">
<p>On 4 August 2015, web wallet BlockChain.info began indicating that a
transaction had spent the earliest mined 250 bitcoins, coins that some
people believed were owned by Bitcoin creator Satoshi Nakamoto.</p>
</div>
<div class="paragraph">
<p>It was soon discovered that the transaction was invalid. BlockChain.info
was not validating transactions with Bitcoin Core and that transaction
had been
<a href="https://www.reddit.com/r/Bitcoin/comments/3fv42j/blockchaininfo_spoofed_transactions_problem_aug_4/">created
by a security researcher</a>.</p>
</div>
<div class="paragraph">
<p><strong>Learn more:</strong>
<a href="https://bitcoinj.github.io/security-model#pending-transactions">BitcoinJ
documentation about pending transaction safety</a></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_chain_hijacking"><a class="anchor" href="#_chain_hijacking"></a>Chain hijacking</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Alice believes that there should never be more than 21 million
bitcoins—but one day she’s tricked into buying “bitcoins” that are only
valid on a block chain with permanent 10% inflation.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bitcoin bank</strong> users have to use whatever block chain the bank uses.
Banks can even profit from switching their users to a new chain and
selling their users’ bitcoins from the old chain.</p>
</li>
<li>
<p><strong>Lightweight (SPV) wallet</strong> users accept the block chain they know
about with the most proof of work. This lets the hash rate majority of
miners force SPV wallet users off of Bitcoin.</p>
</li>
<li>
<p><strong>Bitcoin Core</strong> users don’t have to worry about chain hijacking because
Bitcoin Core validates every block using <em>all</em> of Bitcoin’s consensus
rules.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Preventing chain hijacking is one of Bitcoin Core’s most important jobs.
The alternative is to allow miners to do whatever they want.</p>
</div>
<div class="sect5">
<h6 id="_real_example_4"><a class="anchor" href="#_real_example_4"></a>Real Example</h6>
<div class="paragraph">
<p>In July 2015, several large Bitcoin miners accidentally produced an
invalid block chain several blocks longer than the correct block chain.
Some bank wallets and many SPV wallets accepted this longer chain,
putting their users’ bitcoins at risk.</p>
</div>
<div class="paragraph">
<p>Recent versions of Bitcoin Core never accepted any of the blocks from
the invalid chain and never put any bitcoins at risk.</p>
</div>
<div class="paragraph">
<p>It is believed that the miners at fault controlled more than 50% of the
network hash rate, so they could have continued to fool SPV wallets
indefinitely. It was only their desire to remain compatible with Bitcoin
Core users that forced them to abandon over $37,500 USD worth of mining
income.</p>
</div>
<div class="paragraph">
<p><strong>Learn more:</strong> <a href="https://en.bitcoin.it/wiki/July_2015_chain_forks">July 2015
chain forks</a></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_transaction_withholding"><a class="anchor" href="#_transaction_withholding"></a>Transaction withholding</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Mallory shows Alice $1,000 USD that he will pay her if she sends him
some bitcoins. Alice sends the bitcoins but the transaction never seems
to confirm. After waiting a long time, Alice returns Mallory’s cash. It
turns out the transaction did confirm, so Alice gave away her bitcoins
for nothing.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bitcoin bank</strong> users only see the transactions the bank choose to show
them.</p>
</li>
<li>
<p><strong>Lightweight (SPV) wallets</strong> users only see the transactions their full
node peers choose to send them, even if those transactions were included
in a block the SPV wallet knows about.</p>
</li>
<li>
<p><strong>Bitcoin Core</strong> users see all transactions included in received blocks.
If Bitcoin Core hasn’t received a block for too long, it displays a
catching-up progress bar in the graphical
<a href="https://bitcoin.org/en/bitcoin-core/features/user-interface">user interface</a> or a
warning message in the CLI/API user interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unless you use Bitcoin Core, you can never be sure that your bitcoin
balance is correct according to the block chain.</p>
</div>
<div class="sect5">
<h6 id="_real_example_5"><a class="anchor" href="#_real_example_5"></a>Real Example</h6>
<div class="paragraph">
<p>In March 2015, spy nodes run by the company Chainalysis accidentally
prevented some users of the lightweight BreadWallet from connecting to
honest nodes. Since the spy nodes didn’t relay transactions, BreadWallet
users stopped receiving notification of new transactions.</p>
</div>
<div class="paragraph">
<p><strong>Learn more:</strong>
<a href="http://www.coindesk.com/chainalysis-ceo-denies-launching-sybil-attack-on-bitcoin-network/">Chainalysis
CEO Denies ‘Sybil Attack’ on Bitcoin’s Network</a></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_chain_rewrites"><a class="anchor" href="#_chain_rewrites"></a>Chain rewrites</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Mallory gives Alice 1,000 bitcoins. When Alice’s wallet says the
transaction is confirmed, Alice gives Mallory some cash. Later Alice
discovers that Mallory has managed to steal back the bitcoins.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This attack applies to <strong>all Bitcoin wallets.</strong></p>
</div>
<div class="paragraph">
<p>The attack works because powerful miners have the ability to rewrite the
block chain and replace their own transactions, allowing them to take
back previous payments.</p>
</div>
<div class="paragraph">
<p>The cost of this attack depends on the percentage of total network hash
rate the attacking miner controls. The more centralized mining becomes,
the less expensive the attack for a powerful miner.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/en-confirmed-double-spend-cost.svg" alt="The cost of a chain rewrite">
</div>
</div>
<div class="sect5">
<h6 id="_real_example_6"><a class="anchor" href="#_real_example_6"></a>Real Example</h6>
<div class="paragraph">
<p>In September 2013, someone used centralized mining pool GHash.io to
steal an estimated 1,000 bitcoins (worth $124,000 USD) from the gambling
site BetCoin.</p>
</div>
<div class="paragraph">
<p>The attacker would spend bitcoins to make a bet. If he won, he would
confirm the transaction. If he lost, he would create a transaction
returning the bitcoins to himself and confirm that, invalidating the
transaction that lost the bet.</p>
</div>
<div class="paragraph">
<p>By doing so, he gained bitcoins from his winning bets without losing
bitcoins on his losing bets.</p>
</div>
<div class="paragraph">
<p>Although this attack was performed on unconfirmed transactions, the
attacker had enough hash rate (about 30%) to have profited from
attacking transactions with one, two, or even more confirmations.</p>
</div>
<div class="paragraph">
<p><strong>Learn more:</strong>
<a href="https://bitcointalk.org/index.php?topic=321630.msg3445371">GHash.IO and
double-spending against BetCoin Dice</a></p>
</div>
<div class="paragraph">
<p>Note that although all programs—including Bitcoin Core—are vulnerable to
chain rewrites, Bitcoin provides a defense mechanism: the more
confirmations your transactions have, the safer you are. <em>There is no
known decentralized defense better than that.</em></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_help_protect_decentralization"><a class="anchor" href="#_help_protect_decentralization"></a>Help Protect Decentralization</h4>
<div class="paragraph">
<p>The bitcoin currency only works when people accept bitcoins in exchange
for other valuable things. That means it’s the people accepting bitcoins
who give it value and who get to decide how Bitcoin should work.</p>
</div>
<div class="paragraph">
<p>When you accept bitcoins, you have the power to enforce Bitcoin’s rules,
such as preventing confiscation of any person’s bitcoins without access
to that person’s private keys.</p>
</div>
<div class="paragraph">
<p>Unfortunately, <strong>many users outsource their enforcement power</strong>. This
leaves Bitcoin’s decentralization in a weakened state where a handful of
miners can collude with a handful of banks and free services to change
Bitcoin’s rules for all those non-verifying users who outsourced their
power.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Users of Bitcoin banks</em><br>
<strong>Trust bankers</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Users of P2P lightweight wallets</em><br>
<strong>Trust miners</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Users of client lightweight wallets</em><br>
<strong>Trust “free” services</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Users of Bitcoin Core</em><br>
<strong>Enforce the rules</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Unlike other wallets, <strong>Bitcoin Core <em>does</em> enforce the rules</strong>—so if the
miners and banks change the rules for their non-verifying users, those
users will be unable to pay full validation Bitcoin Core users like you.</p>
</div>
<div class="paragraph">
<p>As long as there are many non-verifying users who want to be able to pay
Bitcoin Core users, miners and others know they can’t effectively change
Bitcoin’s rules.</p>
</div>
<div class="paragraph">
<p>But what if not enough non-verifying users care about paying Bitcoin
Core users? Then it becomes easy for miners and banks to take control of
Bitcoin, likely bringing to an end this 13 year experiment in
decentralized currency.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/history-of-bitcoin.svg?1652976465" alt="History of Bitcoin">
</div>
</div>
<div class="paragraph">
<p>If you think <strong>Bitcoin should remain decentralized,</strong> the best thing you
can do is <a href="#do-you-validate">validate every payment you receive</a>
using your own personal full node such as Bitcoin Core.</p>
</div>
<div class="paragraph">
<p>We don’t know how many full validation users and business are needed,
but it’s possible that for each person or business who validates their
own transactions, Bitcoin can remain decentralized even if there are ten
or a hundred other non-verifying users. If this is the case, <strong>your small
contribution can have a large impact</strong> towards keeping Bitcoin
decentralized.</p>
</div>
</div>
<div class="sect3">
<h4 id="do-you-validate"><a class="anchor" href="#do-you-validate"></a>Do You Validate Your Transactions?</h4>
<div class="paragraph">
<p>Some people confuse
<a href="https://bitcoin.org/en/bitcoin-core/features/network-support">supporting the network</a>
with helping to
<a href="https://bitcoin.org/en/bitcoin-core/features/validation#help-protect-decentralization">protect
Bitcoin’s decentralization</a>.</p>
</div>
<div class="paragraph">
<p>To
<a href="https://bitcoin.org/en/bitcoin-core/features/validation#how-validation-protects-your-bitcoins">improve
your security</a> and help protect decentralization, you must use a wallet
that fully validates received transactions. There are three ways to do
that with Bitcoin Core right now:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Use the built-in wallet’s graphical mode.</strong> If you request payment
using the following screen in Bitcoin Core, your received transactions
will be fully validated.</p>
<div class="imageblock">
<div class="content">
<img src="images/unique-invoice.png" alt="Bitcoin Core request payment">
</div>
</div>
</li>
<li>
<p><strong>Use Bitcoin Core as a trusted peer for certain lightweight wallets.</strong>
Learn more on the
<a href="https://bitcoin.org/en/bitcoin-core/features/user-interface#lightweight">user
interface</a> page. If you use a secure connection to your personal trusted
peer <em>every time</em> you use the wallet, your received transactions will be
fully validated.</p>
</li>
<li>
<p><strong>Use the built-in wallet’s CLI/API interface.</strong> This is meant for power
users, businesses, and programmers. The
<a href="https://bitcoin.org/en/bitcoin-core/features/user-interface">user interface</a> page
provides an overview, the <a href="https://bitcoin.org/en/full-node">installation instructions</a>
can help you get started, and the
<a href="https://developer.bitcoin.org/reference/rpc/">RPC</a>documentation can help
you find specific commands. If you’re using
<a href="https://developer.bitcoin.org/reference/rpc/getnewaddress.html"><code>getnewaddress</code></a>
to create receiving addresses, your received transactions will be fully
validated.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you have any questions, please ask on the
<a href="https://bitcoin.org/en/bitcoin-core/help#forums">forums</a> or
<a href="https://bitcoin.org/en/bitcoin-core/help#live">chatrooms</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_corallo_on_trustlessness"><a class="anchor" href="#_corallo_on_trustlessness"></a>2.4. Corallo on trustlessness</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/baltic-honeybadger/2018/trustlessness-scalability-and-directions-in-security-models/" class="bare">https://btctranscripts.com/baltic-honeybadger/2018/trustlessness-scalability-and-directions-in-security-models/</a></p>
</li>
<li>
<p>Author: Matt Corallo, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
<li>
<p>Video: <a href="https://youtu.be/66ZoGUAnY9s?t=3991" class="bare">https://youtu.be/66ZoGUAnY9s?t=3991</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>… Is everyone awake? Sure. Jumping jacks. Wow, that’s bright. I am more idealistic than Eric. I am going to talk about utility and why people use bitcoin and let’s see how that goes.</p>
</div>
<div class="paragraph">
<p>Trustlessness is much better than decentralization. I want to talk about trustlessness. People use the word decentralization a lot and I find that to be kind of useless because decentralization is a means to an end. We use bitcoin because we don’t want to trust a third party, and decentralization is a fuzzy word but trustlessness you can assign some meaning to this. There was a piece on linkedin that was a history of ecash and where bitcoin came out of from the community in the 80s and 90s and it clearly birthed bitcoin. He talks a lot about various attempts at building ecash systems and why they all failed, and at the end of the day you had to trust someone. There’s a lot of different forms of that- trusting someone to continue to exist and stay in business, to not seize your coins or whatever. They all failed for those reasons. In Eric’s posting of the original satoshi announcement, you saw that you didn’t have to trust anyone. It was at least a two sentence blurb. Let’s talk about what forms this trustlessness takes in bitcoin. Why do people care about this and how do they use bitcoin?</p>
</div>
<div class="paragraph">
<p>It’s nice to think about digital gold vs payments argument; I think this is useless for evaluating cryptocurrency, but it’s interesting to loo kat that for what it implies for trusting or why you care about bitcoin. There’s a digital gold aspect of secure settlement where you want to only trust your own node, you want to verify the chain hopefully without inflation, and you get this nice property that you can run your own node and verify the rules and see on your own node the hashrate. You can see it and add it up, and calculate how much hashrate went into confirming these transactions. Maybe you wait a week, or a month, there’s various other issues with mining today. So you wait a while, you can accept transactions and say okay I know for sure without trusting anyone, a central bank, the fed, I don’t trust any of these people, or the government of Venezuela or whatever form that takes.</p>
</div>
<div class="paragraph">
<p>On the other hand, we have a payments view of trust where people are trying to avoid trusting Paypal, Visa, or someone more direct. So you are looking at bitcoin from the lense of wanting faster payments, you care about not necessarily waiting a week… where the entire modern financial system is built on the idea of coming together nad having trust around Visa or whatever. If Visa says you have paid a dollar then that’s the case. Some people might not want this- maybe you’re censored because you’re a marijuana grower in the US or various other places in the world… maybe you’re in a place where Visa doesn’t work or wherever it is. You want to be able to use bitcoin without necessarily trusting someone like that.</p>
</div>
<div class="paragraph">
<p>There’s this interesting concept that comes up. There’s this wonderful bitcoin system, hashrate you can see, you can see transactions coming through. But is that enough? Ultimately, people like to use bitcoin for more than just “well I can see a transaction and if it confirms that’s great”- they care about not being censored, about censorship resistance and getting their transactions through hopefully without trusting anyone else. Where do we get this property from?</p>
</div>
<div class="paragraph">
<p>This is where the decentralization ubzzword comes in. I refer to the concept of consensus-group distribution.. It’s useful to talk about consensus group distribution because it applies not just to proof-of-work and proof-of-stake but other systems. Your system has people putting transactions into blocks. At bitcoin, we have an attempt at consensus group distribution with hashrate and hopefully it’s decentralized and it’s really not today– that’s a huge open question; can we build a system that is in the long-term censorship resistant? It’s unclear. There have been othe rattempts like proof-of-stake and it turns out that stake and wealth has always been incredibly centralized throughout human history. There are also other untested proposals. Bitcoin is still very experimental, as well. Can we build this censorship resistant system that people want?</p>
</div>
<div class="paragraph">
<p>Also, this comes back to community norms. Why does bitcoin today actually work and have censorship resistance if mining is so centralized? Turns out, that’s community norms. People use bitcoin for censorship resistance, and if miners started aggressively violating that, then bitcoin would have less value, and miners would have less value in their investment. There’s an expectation in the community and this has played a useful role in creaitng censorship resistance. I would argue this is only temporary. If you have the next generation of miners or government, eventually people are going to find pressure points and figure out how to violate censorship resistance and try to censor payments and transactions as government are want to do.</p>
</div>
<div class="paragraph">
<p>There’s an extension to this community norms concept– in bitcoin we talk about not wanting to trust anyone, but a clear violation of this is when the rules change out from undre you. This was the old 2x fork drama. Who should I have to trust to use bitcoin for the rules to change? I would argue bitcoin applied this new community norm and really grew out of it; this is where the fork happened. You had one part of the community that wanted different norms to change the rules more aggressively, and another part of the community that didn’t want to change rules without broad agreement. This has interestingly resulted in bitcoin being unique that there’s a norm that changes don’t get made easily. Because that is the expectation of bitcoin users, and people expect this to be a thing they rely on for them to continue using bitcoin; it becomes self-perpuating because the community expects it and you thus have this nice property where you don’t have to trust bitcoin for the rules. Other projects are more about the community and who is going to enforce these rules and enforce changes.</p>
</div>
<div class="paragraph">
<p>Who’s the tech guy in here?</p>
</div>
<div class="paragraph">
<p>What implications do these concepts of various types of not wanting to trust someone have on scalability and how we look to the future? Blockchains don’t scale. If anyone tells you that they have a blockchain that scales, they are lying to your face. They might be leaving out some tradeoffs they have made. There are a lot of different areas in this overarching concept of not trusting anyone that we can relax and get a more trust-centric system that is more highly scalable. These are all valid approaches, but they are not the approach that bitcoin takes.</p>
</div>
<div class="paragraph">
<p>We could give up on the decentralization of the consensus group. We could be Ripple or Paypal where there’s a single entity or a small federation that confirms transactions. Of course, you probalby give up some of your cnesorship resistance, and maybe you have programmable money. This is a valid approach. You can also experiment with other ones— proof-of-stake probably lands in this category where you have relatively centralized stake and you end up with a consensus group which is more centralized and maybe they can censor transactions more, or maybe you get other security guarantees. That’s fine, that’s a valid approach.</p>
</div>
<div class="paragraph">
<p>You could give up on hte concept of self-validation where you give up on everyone running a fully-validating node. Everyone could be a SPV client where they only do partial validation or only see some part of the network, and this encompasses a lot of things, like sidechains and other things and sharding and ohters also fall under this category. If you can only see part of the network, then things could go faster. Other things could be going on that are invalid or incorrect and this might come back to bite you later. You don’t have this digital gold use case anymore because something happening elsewhere– that attempt at not trusting others, well it goes out the window because something happened and now people are posting on reddit that hey don’t accept payments for the next week while we reorg the whole chain or whatever. Again, valid approach, but that’s not bitcoin.</p>
</div>
<div class="paragraph">
<p>You could also choose to build a centralized payment channel network, something the opposite of lightning network– something focused on centralization instead. You could build a bank. If someone only cares about bitcoin because they only care about not wanting to trust the Fed, then maybe they’re fine trusting coinbase.com and they should be able to use the cryptocurrency that is great for that purpose. It’s interesting, because other systems in the cryptocurrency space make decisions about this. Ethereum has been talking about building in sharding techniques at the base layer, giving up on self-validation as a tradeoff. They are building this for all their users; you’re required to use that trust model.</p>
</div>
<div class="paragraph">
<p>In bitcoin, we try to avoid making decisions for people. As a community, we have been encouraging people more to build systems on top of bitcoin that gives up some of the trustlessness. If a user wants to build a bank, then they can. If people want to build a sidechain on top, they can. But this doesn’t infect everyone else using the system. It’s not built in, it’s not baked in, it’s not required to force it on everyone else just because the developers or whatever have decided to try that.</p>
</div>
<div class="paragraph">
<p>What about the future of bitcoin? What does that mean for going forward? Each use-case has different trust models baked in. Encourage different trust tradeoffs for different use-cases. Many interoperable systems for different uses. If people want to use an ETF, then fine. Let them hedge. Reduce usability gaps for those with “stricter” trust models. Continue setting community precedent.</p>
</div>
<div class="paragraph">
<p>We have to describe how the trust model works to bitcoin users. We want them to pick the thing most optimal to them. This is a massive open challenge in the community of bitcoiners. We should find a way to build these different systems and allow users to use what they want.</p>
</div>
<div class="paragraph">
<p>We should also try to focus a little bit on the usability gaps between different trust models— centralized websites are going to be infinitely more user-friendly. We should try to reduce those differences when we can. Coinbase.com is always going to be more user friendly, and it’s always more user-friendly to have a trusted system than a completely trustless system. People who want to use bitcoin without trusting others should not be discouraged from doing so simply because the usability might be terrible. You can’t change the rules out from under me. You shouldn’t do that.</p>
</div>
</div>
<div class="sect2">
<h3 id="_brianddk_bitcoin_v22_0_and_guix_stronger_defense_against_the_trusting_trust_attack"><a class="anchor" href="#_brianddk_bitcoin_v22_0_and_guix_stronger_defense_against_the_trusting_trust_attack"></a>2.5. brianddk - Bitcoin v22.0 and Guix; Stronger defense against the "Trusting Trust Attack"</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.reddit.com/r/Bitcoin/comments/smj1ep/bitcoin_v220_and_guix_stronger_defense_against/?utm_source=share&amp;utm_medium=web2x&amp;context=3" class="bare">https://www.reddit.com/r/Bitcoin/comments/smj1ep/bitcoin_v220_and_guix_stronger_defense_against/?utm_source=share&amp;utm_medium=web2x&amp;context=3</a></p>
</li>
<li>
<p>Author: user brianddk on Reddit</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>TLDR; Bitcoin v22.0 moves to Guix so that we can "trust the compiler"
even less</p>
</div>
<div class="paragraph">
<p><code>&lt;tinfoil_hat_fud&gt;</code></p>
</div>
<div class="paragraph">
<p>With any software that handles finance or private keys, the question of
trust is important. Most have a general concept of this stuff, and that
is usually fine for most anyone&#8217;s needs. But there is always the rare
case where trust policies are too laxed and users get burned, like the
<a href="https://github.com/spesmilo/electrum/issues/4968">Electrum v3.3.3
phishing attack</a>. Here I&#8217;ll try to go through the minimal level of trust
all the way down to the theoretical limit of what can be done. At the
heart of the matter is the concept of extended trust. In most
trust-tests, we start with something that has more trust and see if we
can connect it to something with less trust. I&#8217;ll walk through a few
examples from the top down. In general we will go through the following
levels:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Trust the site</p>
</li>
<li>
<p>Trust the builders</p>
</li>
<li>
<p>Trust the compiler</p>
</li>
<li>
<p>Trust the kernel</p>
</li>
<li>
<p>Trust the hardware</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_trusting_the_site"><a class="anchor" href="#_trusting_the_site"></a>Trusting the site</h4>
<div class="paragraph">
<p>When downloading software such as bitcoin-core, at a minimum it is
important to ensure you download from <code>bitcoin.org</code> and not some site
like <code>download.com</code>. If you grab software from a sketchy site, it may
come packaged with code to steal your keys (See "Electrum phishing"
above).</p>
</div>
<div class="paragraph">
<p>In the realm of "trusting the site" there are those who trust the
browser to get you to <code>bitcoin.org</code> and others who are more paranoid
and will ensure that SSL is enforced. Unfortunately, unless the site
uses something like DNSSEC, DANE, or other cryptographic domain
verification, you can just never be sure. Attacks like bitsquatting and
dns-poisoning can get past even the best intentions of DNS security.
So&#8230;&#8203; sites can&#8217;t be trusted.</p>
</div>
</div>
<div class="sect3">
<h4 id="_trusting_the_builders"><a class="anchor" href="#_trusting_the_builders"></a>Trusting the builders</h4>
<div class="paragraph">
<p>In most cases, trusting the builders is the what most recommend. This
process completely ignores WHERE the binaries were taken from (even
<code>download.com</code>) and instead rely on a builder&#8217;s cryptographic
signature delivered with, or embedded in, the file. These are usually
either GPG signatures or CodeSigning certificates like Authenticode.
Main issues here is that many user&#8217;s don&#8217;t know WHO the builders are. In
many cases, most simply assume that a trusted product, must have a
trusted package owner / builder. A recent example of where this went
horribly wrong was when ownership of a popular JavaScript library was
left to a randome contributor. The new owner went about
<a href="https://www.theregister.com/2018/11/26/npm_repo_bitcoin_stealer/">crafting
back-doors to steal bitcoin</a>. Since JavaScript is interpretive, it was
quickly spotted, but it shows the danger of entrusting new package
builders or maintainers. Clever projects (like bitcoin) get around this
problem by having reproducible builds.</p>
</div>
<div class="paragraph">
<p>Reproducible builds are a way to design software so that many community
developers can each build the software and ensure that the final
installer built is identical to what other developers produce. With a
very public, reproducible project like bitcoin, no single developer
needs to be completely trusted. Many developers can all perform the
build and attest that they produced the same file as the one the
original builder digitally signed.</p>
</div>
<div class="paragraph">
<p>In most situations, those who are not developers are fine to stop here.
Just insist that the software you use is open-source, well audited,
reproducible, with multiple maintainers who all attest to the same
verified compiled binaries. Bitcoin meets this test on all counts</p>
</div>
</div>
<div class="sect3">
<h4 id="_trusting_the_compiler"><a class="anchor" href="#_trusting_the_compiler"></a>Trusting the compiler</h4>
<div class="paragraph">
<p>For those who may fear an evil cabal of developers, or feel their
project is not audited enough, the next level down is to trust nothing
but the compiler. These users will build the project from source code
removing the need to trust the project builders. Many may imagine that
this is the furthest down the "rabbit hole" this topic can go, but in
actuality it isn&#8217;t. In a 1984 award speech, the recipient, Ken Thompson,
posited the question "Should you trust your compiler?". He goes on to
outline a method called the
"<a href="https://dl.acm.org/doi/pdf/10.1145/358198.358210">Trusting Trust
Attack</a>". Since even the most paranoid users usually trust the compiler,
Ken suggested the compiler is the perfect place to put your Trojan.</p>
</div>
<div class="paragraph">
<p>The basics of this attack are due to the fact that to make a new
compiler binary, you generally use the last compiler binary. But what if
compiler binary had malicious code to infect new binaries. This is
particularly problematic since compilers building compliers goes back
pretty far. Android was made with Linux that was made from Minix. Apple
was made with BSD and BSD was made from Unix. These build genealogies go
back decades. So what if the original Unix back in the 60&#8217;s had a trojan
in the compiler that has been carried forward for the last 60 years?</p>
</div>
<div class="paragraph">
<p>As involved as this sounds, there have been many proof of concepts done
to prove the attack&#8217;s viability. And with distrust of state security
agencies getting worse year after year, it&#8217;s not hard to imagine that
some agency would want to pull off such attack. The main attack
"surface" here are what builders call the "seed binaries". These are the
previous versions of compiler and tools needed to build the next
compiler. If you can "seed" your build with a smaller set of binaries
then, in theory, you may get the set so small that examination, byte for
byte, could look for "bad code".</p>
</div>
<div class="paragraph">
<p>In version 22.0, bitcoin moved to the
<a href="https://github.com/bitcoin/bitcoin/blob/v22.0/contrib/guix/README.md">Guix
build system</a> for their official builds. This reduced the "weight" of
those seed binaries
<a href="https://guix.gnu.org/blog/2019/guix-reduces-bootstrap-seed-by-50/">from
550 MB down to 120 MB</a>. The Guix team is prototyping a new compiler
build with a reduced seed weight of
<a href="https://www.joyofsource.com/we-did-it.html">357 bytes</a>. That&#8217;s a
reduction of 99.999935% from the binary seed weight of Bitcoin v0.21.2</p>
</div>
<div class="paragraph">
<p>This claim is a bit hyperbolic, but less than you might think. The
complier build requires a proto-complier (mes) and a shell (guile). This
reduction is only for <code>mes</code> not <code>guile</code>. Though there is work to do
the same reduction on <code>guile</code> that was done on <code>mes</code>, but that may
still be a few years out.</p>
</div>
</div>
<div class="sect3">
<h4 id="_trusting_the_kernel"><a class="anchor" href="#_trusting_the_kernel"></a>Trusting the Kernel</h4>
<div class="paragraph">
<p>Implicit in the trust of the compiler is the trust of the kernel and OS
that the compiler is running on. So if a trusting-trust trojan decided
to propagate and infect in both a compiler and kernel, then reducing
your binary seed may not be enough. This is a harder attack to pull off
since a 357 byte seed build will likely be hand audited for the first
few iterations. The trojan would need to know to infect the process far
enough along to where it wasn&#8217;t visible any more.</p>
</div>
<div class="paragraph">
<p>The solution to this is to bootstrap your compiler build, without a
kernel. This can be done up until a point. The hex assembler and macro
assembler can be loaded directly out of a legacy bootloader (think
0x7C00) and work is ongoing in in the <code>stage0</code> project that helped in
the <code>mes</code> bootstrap. But realistically, I&#8217;m not sure how far they can
take this.</p>
</div>
</div>
<div class="sect3">
<h4 id="_trusting_the_hardware"><a class="anchor" href="#_trusting_the_hardware"></a>Trusting the Hardware</h4>
<div class="paragraph">
<p>Imagining if you could bootstrap without the kernel, there is still the
trust of the hardware. A builder is trusting that the processor and
instruction pipeline is not doing something malicious if it detects a
compiler bootstrap is in place. Although this is pretty deep paranoia,
people are still thinking about this stuff. The reduced <code>mes</code>
bootstrap is working to have a <code>x86</code> and <code>arm</code> bootstrap independent
of each other. Although one can be cross-compiled on the other, it was
thought to be better if <code>arm</code> software didn&#8217;t have to trust <code>x86</code>
hardware for a bootstrap, and vice-versa.</p>
</div>
<div class="paragraph">
<p><code>&lt;/tinfoil_hat_fud&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_references"><a class="anchor" href="#_references"></a>References</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.youtube.com/watch?v=nslY1s0U9_c">Youtube: ELI5
Bootstrapping</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=I2iShmUTEl8">Youtube: Reducing Bitcoin
Bootstrapping</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=XvVW80dDF8I">Youtube: Mes Bootstrapping
Reduction</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=mhopx8J2Z8s">Youtube: Mes Reduced
Binary Seed Bootstrap</a></p>
</li>
<li>
<p><a href="https://dl.acm.org/doi/pdf/10.1145/358198.358210">Ken Thompson:
Trusting Trust Attack</a></p>
</li>
<li>
<p><a href="https://web.mit.edu/6.033/2014/wwwdocs/assignments/quizzes/trust_stack_slides.pdf">MIT:
How to perform Trusting Trust Attack</a></p>
</li>
<li>
<p><a href="https://guix.gnu.org/blog/2019/guix-reduces-bootstrap-seed-by-50/">First
Reduction of Mes bootstrap to 120 MB</a></p>
</li>
<li>
<p><a href="https://www.joyofsource.com/we-did-it.html">Future Reduction of Mes
bootstrap to 357 B</a></p>
</li>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/blob/v22.0/contrib/guix/README.md">Bitcoin
Bootstrapping</a></p>
</li>
<li>
<p><a href="https://github.com/oriansj/stage0">Stage0 Project</a></p>
</li>
<li>
<p><a href="https://www.gnu.org/software/mes/">Mes Project</a></p>
</li>
<li>
<p><a href="https://guix.gnu.org/">Guix Project</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cve_2018_17144_full_disclosure"><a class="anchor" href="#_cve_2018_17144_full_disclosure"></a>2.6. CVE-2018-17144 Full Disclosure</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoincore.org/en/2018/09/20/notice/" class="bare">https://bitcoincore.org/en/2018/09/20/notice/</a></p>
</li>
<li>
<p>Author: Bitcoin Core team</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_full_disclosure"><a class="anchor" href="#_full_disclosure"></a>Full disclosure</h4>
<div class="paragraph">
<p>CVE-2018-17144, a fix for which was released on September 18th in Bitcoin Core versions 0.16.3 and 0.17.0rc4, includes both a Denial of Service component and a critical inflation vulnerability. It was originally reported to several developers working on Bitcoin Core, as well as projects supporting other cryptocurrencies, including ABC and Unlimited on September 17th as a Denial of Service bug only, however we quickly determined that the issue was also an inflation vulnerability with the same root cause and fix.</p>
</div>
<div class="paragraph">
<p>In order to encourage rapid upgrades, the decision was made to immediately patch and disclose the less serious Denial of Service vulnerability, concurrently with reaching out to miners, businesses, and other affected systems while delaying publication of the full issue to give times for systems to upgrade. On September 20th a post in a public forum reported the full impact and although it was quickly retracted the claim was further circulated.</p>
</div>
<div class="paragraph">
<p>At this time we believe over half of the Bitcoin hashrate has upgraded to patched nodes. We are unaware of any attempts to exploit this vulnerability.</p>
</div>
<div class="paragraph">
<p>However, it still remains critical that affected users upgrade and apply the latest patches to ensure no possibility of large reorganizations, mining of invalid blocks, or acceptance of invalid transactions occurs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_technical_details"><a class="anchor" href="#_technical_details"></a>Technical Details</h4>
<div class="paragraph">
<p>In Bitcoin Core 0.14, an optimization was added (Bitcoin Core PR #9049) which avoided a costly check during initial pre-relay block validation that multiple inputs within a single transaction did not spend the same input twice which was added in 2012 (PR #443). While the UTXO-updating logic has sufficient knowledge to check that such a condition is not violated in 0.14 it only did so in a sanity check assertion and not with full error handling (it did, however, fully handle this case twice in prior to 0.8).</p>
</div>
<div class="paragraph">
<p>Thus, in Bitcoin Core 0.14.X, any attempts to double-spend a transaction output within a single transaction inside of a block will result in an assertion failure and a crash, as was originally reported.</p>
</div>
<div class="paragraph">
<p>In Bitcoin Core 0.15, as a part of a larger redesign to simplify unspent transaction output tracking and correct a resource exhaustion attack the assertion was changed subtly. Instead of asserting that the output being marked spent was previously unspent, it only asserts that it exists.</p>
</div>
<div class="paragraph">
<p>Thus, in Bitcoin Core 0.15.X, 0.16.0, 0.16.1, and 0.16.2, any attempts to double-spend a transaction output within a single transaction inside of a block where the output being spent was created in the same block, the same assertion failure will occur (as exists in the test case which was included in the 0.16.3 patch). However, if the output being double-spent was created in a previous block, an entry will still remain in the CCoin map with the DIRTY flag set and having been marked as spent, resulting in no such assertion. This could allow a miner to inflate the supply of Bitcoin as they would be then able to claim the value being spent twice.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timeline"><a class="anchor" href="#_timeline"></a>Timeline</h4>
<div class="paragraph">
<p>Timeline for September 17, 2018: (all times UTC)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>14:57 anonymous reporter reports crash bug to: Pieter Wuille, Greg Maxwell, Wladimir Van Der Laan of Bitcoin Core, deadalnix of Bitcoin ABC, and sickpig of Bitcoin Unlimited.</p>
</li>
<li>
<p>15:15 Greg Maxwell shares the original report with Cory Fields, Suhas Daftuar, Alex Morcos and Matt Corallo</p>
</li>
<li>
<p>17:47 Matt Corallo identifies inflation bug</p>
</li>
<li>
<p>19:15 Matt Corallo first tries to reach slushpool CEO to have a line of communication open to apply a patch quickly</p>
</li>
<li>
<p>19:29 Greg Maxwell timestamps the hash of a test-case which demonstrates the inflation vulnerability (a47344b7dceddff6c6cc1c7e97f1588d99e6dba706011b6ccc2e615b88fe4350)</p>
</li>
<li>
<p>20:15 John Newbery and James O’Beirne are informed of the vulnerability so they can assist in alerting companies to a pending patch for a DoS vulnerability</p>
</li>
<li>
<p>20:30 Matt Corallo speaks with slushpool CTO and CEO and shares patch with disclosure of the Denial of Service</p>
</li>
<li>
<p>20:48 slushpool confirmed upgraded</p>
</li>
<li>
<p>21:08 Alert was sent to Bitcoin ABC that a patch will be posted publicly by 22:00</p>
</li>
<li>
<p>21:30 (approx) Responded to original reporter with an acknowledgment</p>
</li>
<li>
<p>21:57 Bitcoin Core PR 14247 published with patch and test demonstrating the Denial of Service bug</p>
</li>
<li>
<p>21:58 Bitcoin ABC publishes their patch</p>
</li>
<li>
<p>22:07 Advisory email with link to Bitcoin Core PR and patch goes out to Optech members, among others</p>
</li>
<li>
<p>23:21 Bitcoin Core version 0.17.0rc4 tagged</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>September 18, 2018:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>00:24 Bitcoin Core version 0.16.3 tagged</p>
</li>
<li>
<p>20:44 Bitcoin Core release binaries and release announcements were available</p>
</li>
<li>
<p>21:47 Bitcointalk and reddit have public banners urging people to upgrade</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>September 19, 2018:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>14:06 The mailing list distributes an additional message urging people to upgrade by Pieter Wuille</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>September 20, 2018:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>19:50 David Jaenson independently discovered the vulnerability, and it was reported to the Bitcoin Core security contact email.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_privacy"><a class="anchor" href="#_privacy"></a>3. Privacy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gregory_maxwell_on_privacy"><a class="anchor" href="#_gregory_maxwell_on_privacy"></a>3.1. Gregory Maxwell - on privacy</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcointalk.org/index.php?topic=334316.msg3588908#msg3588908" class="bare">https://bitcointalk.org/index.php?topic=334316.msg3588908#msg3588908</a></p>
</li>
<li>
<p>Author: Gregory Maxwell</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For those who wants complete anonymity, they can go for some altcoins supporting it. In my opinion, BTC is supposed to be used by everyone and everywhere as mainstream currency. So please stop doing things like this to push the majority away just for the sake of niche market.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; BitThink<br>
<cite>2013-11-15</cite>
</div>
</div>
<div class="paragraph">
<p>I can&#8217;t seem to find the link to your bank account records, mind posting them for us?</p>
</div>
<div class="paragraph">
<p>Luke is pretty much the last person you&#8217;d expect to give a crap about underground uses. But privacy is <em>not</em> only a consideration for them, or even primarily for them: dope dealers—or whatever you want your bogeyman to be—can buy their way to privacy even in a system which is very non-private.</p>
</div>
<div class="paragraph">
<p>Financial privacy is an essential element to fungibility in Bitcoin: if you can meaningfully distinguish one coin from another, then their fungibility is weak. If our fungibility is too weak in practice, then we cannot be decentralized: if someone important announces a list of stolen coins they won&#8217;t accept coins derived from, you must carefully check coins you accept against that list and return the ones that fail.  Everyone gets stuck checking blacklists issued by various authorities because in that world we&#8217;d all not like to get stuck with bad coins. This adds friction and transactional costs and makes Bitcoin less valuable as a money.</p>
</div>
<div class="paragraph">
<p>Financial privacy is an essential criteria for the efficient operation of a free market: if you run a business, you cannot effectively set prices if your suppliers and customers can see all your transactions against your will. You cannot compete effectively if your competition is tracking your sales.  Individually your informational leverage is lost in your private dealings if you don&#8217;t have privacy over your accounts: if you pay your landlord in Bitcoin without enough privacy in place, your landlord will see when you&#8217;ve received a pay raise and can hit you up for more rent.</p>
</div>
<div class="paragraph">
<p>Financial privacy is essential for personal safety: if thieves can see your spending, income, and holdings, they can use that information to target and exploit you. Without privacy malicious parties have more ability to steal your identity, snatch your large purchases off your doorstep, or impersonate businesses you transact with towards you&#8230;&#8203; they can tell exactly how much to try to scam you for.</p>
</div>
<div class="paragraph">
<p>Financial privacy is essential for human dignity: no one wants the snotty barista at the coffee shop or their nosy neighbors commenting on their income or spending habits. No one wants their baby-crazy in-laws asking why they&#8217;re buying contraception (or sex toys). Your employer has no business knowing what church you donate to. Only in a perfectly enlightened discrimination free world where no one has undue authority over anyone else could we retain our dignity and make our lawful transactions freely without self-censorship if we don&#8217;t have privacy.</p>
</div>
<div class="paragraph">
<p>Most importantly, financial privacy isn&#8217;t incompatible with things like law enforcement or transparency. You can always keep records, be ordered (or volunteer) to provide them to whomever, have judges hold against your interest when you can&#8217;t produce records (as is the case today).  None of this requires <em>globally</em> visible public records.</p>
</div>
<div class="paragraph">
<p>Globally visible public records in finance are completely unheard-of. They are undesirable and arguably intolerable. The Bitcoin whitepaper made a promise of how we could get around the visibility of the ledger with pseudonymous addresses, but the ecosystem has broken that promise in a bunch of places and we ought to fix it. Bitcoin could have coded your name or IP address into every transaction. It didn&#8217;t. The whitepaper even has a section on privacy. It&#8217;s incorrect to say that Bitcoin isn&#8217;t focused on privacy. Sufficient privacy is an essential prerequisite for a viable digital currency.</p>
</div>
<div class="paragraph">
<p>So, again, I ask—let&#8217;s see your bank records; I&#8217;m sure there is an export to CSV.  Mtgox transaction dumps? Stock trading accounts. Let&#8217;s see you—even just you—post all this before you presume to say that you think that&#8217;s what the public wants forced on everyone.</p>
</div>
</div>
<div class="sect2">
<h3 id="_andrew_poelstra_on_anonymity"><a class="anchor" href="#_andrew_poelstra_on_anonymity"></a>3.2. Andrew Poelstra - on anonymity</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.stackexchange.com/a/29473/69518" class="bare">https://bitcoin.stackexchange.com/a/29473/69518</a></p>
</li>
<li>
<p>Author: Andrew Poelstra</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I&#8217;ve been looking into Bitcoin recently and stumbled upon numerous notes how Bitcoin is not anonymous at all, or how it&#8217;s only partially anonymous and you can easily trace your funds.</p>
</div>
<div class="paragraph">
<p>So, this brings us to my question: is there any true anonymous cryptocurrencies which I can use and there will be no trace left.</p>
</div>
<div class="paragraph">
<p>I am a fairly new member to the cryptoworld, so please, keep it simple. :)</p>
</div>
</blockquote>
<div class="attribution">
&#8212; question by user HowardLoosingIt<br>
<cite>Bitcoin Stack Exchange</cite>
</div>
</div>
<div class="paragraph">
<p>The short answer is no. The long answer is split into three parts, each
headed by a bold word.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>I will talk about the existing privacy tools in Bitcoin.</p>
</li>
<li>
<p>I will talk about some pie-in-the-sky theoretical crypto which would
achieve full anonymity (but which can’t be done feasibly today).</p>
</li>
<li>
<p>I will talk about CryptoNote, its limitations, and feasible ways
around it that could be implemented today, specifically those that have
already been implemented by Monero.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Today, you can do a lot relative to stock Bitcoin in the direction of
privacy. Two strategies I should mention are
<a href="https://bitcointalk.org/index.php?topic=279249.0">CoinJoin</a> and
<a href="https://bitcointalk.org/index.php?topic=321228">CoinSwap</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>CoinJoin works by effectively pasting together transactions. In
Bitcoin, each transaction is a list of inputs tied (by digital
signature) to a list of outputs. The transaction is valid if the total
output value is less than or equal to the total input value (any
difference is a &#8220;transaction fee&#8221; claimed by miners), and if every
input is a valid (not already spent) output of an old transaction.
CoinJoin takes transactions from two or more users, combines the input
and output lists, and has both users sign the resulting transaction. The
result is that the standard flow analysis idiom of &#8220;all inputs are
owned by the same person&#8221; and &#8220;all outputs are owned by the same
person, except maybe for a change output&#8221; is broken. CoinJoin is tricky
to implement well: output values should be as uniform as possible to
avoid grouping them and matching them to input values; the resulting
outputs should not be spent at the same time, since this also groups
them; the join should involve two distinct parties, neither of whom is
some central server participating in every join. Currently there are no
good tools out there which satisfy all these requirements, but there are
several in development (such as DarkWallet). Keep an eye open.</p>
</li>
<li>
<p>CoinSwap does trustless mixing, even across different blockchains (as
long as each has a sufficiently rich scripting system). It is too
complex to summarize here, but the result is the same as if two parties
switched private keys in person, except that there is no room for
cheating. That is, coins are moved between parties but the blockchain
does not see this and therefore chain analysis cannot link them — except
to the extent that they look funny, so if there are almost no users
doing this, their transactions can be linked on this fact alone. To the
best of my knowledge, there are no tools which support this. I am
developing a Bitcoin wallet for experimental features such as this that
will support it, but it may be several months or years away.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Total anonymity, in the sense that when you spend money there is no
trace of where it came from or where it’s going, is theoretically
possible by using the cryptographic technique of
<a href="https://en.wikipedia.org/wiki/Zero-knowledge_proof">zero-knowledge
proofs</a>. As an extreme example, you could imagine that rather than
publishing blocks mapping old outputs to new ones (which is what
transactions are in Bitcoin), miners published zero-knowledge proofs
that they had a valid set of transactions which, in aggregate, mapped
the old set of all outputs to the new set of all outputs. You could
further obscure this by having the recipient choose the destination
address(es) and pass different ones to every miner. That way, only the
miner who gets the block (who is probably different for every block) and
the recipient knows where money is going.</p>
</div>
<div class="paragraph">
<p>In what I’ve described, the values of all coins would still be visible,
and perhaps tracking could be done by linking similarly-valued coins. We
can fix this with
<a href="https://bitcointalk.org/index.php?topic=305791.0">homomorphically-encrypted
values</a>, say.</p>
</div>
<div class="paragraph">
<p>The point of this musing is that there are no strong theoretical reasons
that what you want is impossible. But I’m going to burst the bubble I
just created and talk about practical problems: firstly, to do this kind
of general computation is zero-knowledge even remotely feasibly, you
need to use a system which has a
<a href="https://en.wikipedia.org/wiki/Common_reference_string_model">trusted
setup</a> (in cryptographic terms, the scheme is secure only in the CRS
(common reference string) model). This means that some party, the
scheme’s creator probably, has access to secret data which will allow
them to produce false proofs, effectively allowing them to undetectably
print money for all time. A recent example of such a thing is the paper
<a href="http://eprint.iacr.org/2013/507">SNARKs for C</a> by Eli Ben-Sasson et. al.,
which provides a lot of historical context.</p>
</div>
<div class="paragraph">
<p>Secondly, even with this fatal flaw, these schemes are not all that
computationally feasible. Zerocoin, now superceded by Zerocash, took
this approach and needed to create serious restrictions: all coins have
the same value, there is no scripting (even for multisignature
transactions, I believe), and even so some serious work went into
special optimizations to do whatever was left (such as hashing) in zero
knowledge. For ZeroCash research is going into doing the initial setup
in a
<a href="https://en.wikipedia.org/wiki/Secure_multiparty_computation">multi-party
computation</a> so that no individual has the secret material needed to
print coins; there would be several, and as long as even one securely
destroyed their data, the currency would be safe from forgery.</p>
</div>
<div class="paragraph">
<p>However, ZeroCash’s trusted setup is orders of magnitude more complex
than any other MPC that has ever been done. And the most efficient MPC
schemes known depend on a trusted-setup as well, so we haven’t gained
anything.</p>
</div>
<div class="paragraph">
<p>Having said that, we can get something weaker than total anonymity, and
it looks like we can do it in a feasible way. As has been mentioned,
<a href="https://cryptonote.org/inside.php">CryptoNote</a>-based currencies use
<a href="https://en.wikipedia.org/wiki/Ring_signature">ring signatures</a> (contrast
<a href="https://en.wikipedia.org/wiki/Group_signature">group signatures</a>, which
involve a trusted party) rather than plain old ECDSA signatures in the
proof-of-ownership part of their transaction signature scheme. Arguably
the most well-known cryptocurrency that was originally based on
CryptoNote is <a href="https://getmonero.org">Monero</a>. Whilst Monero has
subsequently deviated substantially from its CryptoNote origins, it
still implements many of the key concepts below, and additionally
improves a lot of the problem areas originally highlighted in this
answer.</p>
</div>
<div class="paragraph">
<p>To understand how CryptoNote works we must first recap how Bitcoin
transactions work. Essentially, in Bitcoin each transaction output has a
public key associated to it (identified, though not revealed, by the
Bitcoin address on the output), and to spend that output you need to
produce a small script including a digital signature using this key.
When everyone sees that transaction, they see that the old output(s) are
spent (so they can forget about it, except as far as keeping historical
blockchain data for new users) and that new unspent output(s) have been
created. Ring signatures, on the other hand, are associated to an
arbitrary set of public keys, and knowledge of only one is required to
make a signature. CryptoNote uses this by having each transaction input
be a set of potential unspent outputs of the same value, signed by a
ring signature using all those outputs’ associated keys. It is
impossible to determine which one is the &#8220;real&#8221; one that the signer is
actually spending.</p>
</div>
<div class="paragraph">
<p>You might ask, if it’s impossible to determine which outputs are being
spent, how can double-spending by prevented? CryptoNote solves this
using a special ring signature algorithm (which is a modified version of
existing signatures, so this is original cryptography and their security
proof should be scrutinized — fortunately it is not too complicated) in
which the real signing key has a key image associated to it, which must
be published alongside the signature. This key image cannot be reversed
to get the original key and deanonymize the sender, but if a
double-spend is attempted, users will see that the same key image is
used twice and reject the second attempt.</p>
</div>
<div class="paragraph">
<p>This provides good anonymity, but even with the improvements listed
presently, this is not a zero-knowledge scheme. This means that
linkability is confounded but an adversary with good analysis tools will
certainly be able to glean a non-zero (literally, infinity times as much
as zero) amount of information.</p>
</div>
<div class="paragraph">
<p>This is a very promising direction, and these signatures are feasible to
verify by ordinary computers (though they are more difficult, so scaling
will be worse than Bitcoin’s), but there are some serious limitations.
Fortunately, all are fixable. The following list is the result of
conversations between myself, Greg Maxwell, Peter Todd, Mark
Friedenbach, Adam Back and several others (who I’m sure will contact me
to be listed :)), and to the best of my knowledge hasn’t been published
anywhere. So aspiring anonymous altcoins developers, here is a wishlist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Bitcoin, because transaction outputs are incontrovertibly spent,
the total list of unspent outputs grows only very slowly. Nodes with
limited storage are able to store this, and basically nothing else: when
they see a new block, they verify it then update their list of unspent
outputs accordingly. In CryptoNote this is impossible since transaction
outputs are never definitely spent: there is a giant list of potentially
spendable outputs, and a giant list of spent key images, and both of
these grow very quickly and never shrink. Current CryptoNote
implementations, except for Monero, store this all in RAM, which puts a
pretty serious cap on their scalability today. One of Monero’s
scalability improvements is to store this set on disk in a
<a href="https://github.com/monero-project/bitmonero/releases/tag/v0.9.0">very
fast LMDB database</a>, but the set of mixable outputs is still unbounded
and is expected to grow faster than Bitcoin’s comparable utxoset.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, this can be further be improved by having users store only the
outputs whose keys they own (plus some extras for anonymity) and only a
subset of spent key images, which I will describe. The set of outputs
would be stored in an insertion-ordered Merkle tree (so a user storing
almost none of the tree can easily verifiably append new outputs, but
can’t detect duplicates, which is fine). The set of images would be
stored in a image-ordered Merkle tree (so a user storing almost none of
the tree can easily add a new key image and verify that it didn’t exist
before, given a proof of insertion, which is basically a path from the
new node to the root of the tree, along with the siblings of each node
along the way). To spend an output, the user provides a ring signature
including the output, with appropriate key image and
proof-of-new-insertion.</p>
</div>
<div class="paragraph">
<p>Note that to produce a proof of insertion for the new key image, the
user needs to store all its neighbors in the key image tree. Since key
images are random-looking, how can this be done without storing the
whole thing? The answer is prefix-filtering. When a user creates a new
key, he creates one whose first 10 bits (say) are a specific ten-bit
sequence that all his key images will have. He stores every key image
that starts these ten bits so that he can produce proof-of-insertion of
such images. The result is a reduction in anonymity (by a factor of
\(2^{10}\)) since everyone will know that nearby key images are
more likely to be owned by the same person than are far-away ones, but a
corresponding reduction in storage requirements (by a factor of
\(2^{10}\)) and an increase in key generation time (since on
average \(2^{10}\) keys will need to be generated before one
with the right prefix comes along). This is a tradeoff that every user
will have to make.</p>
</div>
<div class="paragraph">
<p>Peter Todd has suggested choosing a new prefix every few months or
years, and retiring those in which every known key image has been used.
This gets more privacy for the storage hit than simply decreasing the
prefix length, since two key images in different prefix sets don’t
reveal their common owner.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With ring signatures, the anonymity set is only as large as you make
it, probably just two or three potential keys per signature.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can improve this to effectively CoinJoin all transactions in each
block (with the caveats that (a) miners can deanonymize the CoinJoin,
reducing anonymity to the smaller set provided by the ring signatures,
and (b) it is possible to miners to detectably cheat, so there is a
small window after mining in which block content might be invalidated by
revealing its cheating, which increases complexity) (the complexity hit
is because it is important that the block content, not the block itself,
be invalidated, since otherwise miners could deliberately cheat then
reveal the cheating later, giving them a large window in which everyone
else is mining a bad chain). The exact scheme is described
<a href="https://download.wpsoftware.net/bitcoin/wizards/2014-06-22.html">at the
very top of this IRC log</a>.</p>
</div>
<div class="paragraph">
<p>(The same security can be provided with fancy cryptography, specifically
<a href="https://download.wpsoftware.net/bitcoin/wizardry/horasyuanmouton-owas.pdf">one-way
aggregatable signatures</a>
(&#8220;<a href="https://bitcointalk.org/index.php?topic=290971.msg3140972#msg3140972">just
the math</a>&#8221; by Greg Maxwell), which depends on pairing-based
cryptography, which is slow and requires new security assumptions that
make some people uncomfortable. The exact way these would be used is
described
<a href="https://download.wpsoftware.net/bitcoin/wizards/2014-06-19.html">from
21:24:58 onward in these IRC logs</a>. It is very cool that we can get the
same security with no new crypto.)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With ring signatures, your anonymity can be compromised after the fact
by others in your anonymity set. For example, if you spend an output
using a ring signature along with two other outputs, then those other
outputs’ owners spend them with a single-signature ring signature (so
they are incontrovertibly spent), it is now clear which of the three you
used is yours, since each can be spent only once. This can be done long
after the fact, which complicates analysis.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This can be fixed by requiring a minimum size of anonymity set, as
<a href="https://lab.getmonero.org/pubs/MRL-0004.pdf">Monero has done</a> on a
protocol level since March, 2016. But then we have a new problem — there
are only so many outputs of any given size, and since all outputs in an
anonymity set must be the same size (so the network knows how much you
are spending), this might not be possible. This can be fixed by allowing
outputs of any size in the anonymity set, and taking the minimum size to
be the spend amount. But then given a ring signature across several
outputs’ keys, people will know that the output with smallest size will
be the &#8220;real&#8221; one. This is because each output can only be spent once,
so if you mix it with smaller outputs, you are basically shrinking it to
the size of those outputs since the network will only recognize the
smaller value.</p>
</div>
<div class="paragraph">
<p>All these problems are addressed in the next point.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With ring signatures, you need all potential inputs to have same (or
similar) value, which greatly restricts your anonymity set.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In fact, Greg Maxwell and I found a way such that every single output
can be read as any uniform distribution of outputs (so 1BTC might be
spendable as a single 1BTC output, or two 0.5 BTC outputs, or three 0.33
BTC outputs, etc.) There is a single &#8220;real&#8221; distribution, but only the
creator of the output knows this, and it is not revealed except in the
case of leaked keys. Therefore, literally every single output size can
plausibly be claimed to be created by every output, and therefore all
outputs can participate in each anonymity set. This scheme is described
<a href="https://download.wpsoftware.net/bitcoin/wizardry/brs-arbitrary-output-sizes.txt">in
this writeup</a>.</p>
</div>
<div class="paragraph">
<p>With this is place, it is feasible to set a minimum anonymity set size,
preventing people from using keys with no anonymity set and compromising
their own and others’ anonymity. They can still do this compromise by
revealing their secret key, but it’s not clear to me that this is even
possible to prevent.</p>
</div>
<div class="paragraph">
<p>Monero has addressed this issue in a similarly powerful manner, by
implementing a scheme based on
<a href="https://people.xiph.org/%7Egreg/confidential_values.txt">Greg Maxwell’s
Confidential Transactions</a>. This novel scheme and implementation is
called <a href="https://lab.getmonero.org/pubs/MRL-0005.pdf">Ring Confidential
Transactions</a>. Because the value of outputs is no longer known under
this RingCT scheme, you are no longer forced to only mix with a small
subset of outputs (ie. those of the same denomination, which in
CryptoNote and pre-RingCT Monero are all ^10 denominated outputs). This
massively increases the potential anonymity set, and ensures that even
large outputs are not &#8220;stuck&#8221; with only a handful of matching, mixable
outputs.</p>
</div>
<div class="paragraph">
<p>And by the way, Dash (formerly Darkcoin) does not provide anonymity.
They attached a (broken) implementation of CoinJoin to the ordinary
Bitcoin client, and at least initially released it as a closed-source
software. I haven’t looked into Anoncoin, but the best advice I have for
folks looking into altcoins is to assume they are uninteresting (and
probably <a href="https://download.wpsoftware.net/bitcoin/alts.pdf">dangerously
broken</a>) until someone has demonstrated a concrete technical innovation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tim_s_on_pseudonyms"><a class="anchor" href="#_tim_s_on_pseudonyms"></a>3.3. Tim S. - on pseudonyms</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.stackexchange.com/a/25175/69518" class="bare">https://bitcoin.stackexchange.com/a/25175/69518</a></p>
</li>
<li>
<p>Author: User Tim S on Bitcoin Stack Exchange</p>
</li>
<li>
<p>Date copied: 2022-05-24</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Why does bitcoin use public keys as pseudonyms? Is there any reason for that? What are the advantages of using public key as the pseudonyms? Highly appreciate if someone can give me an answer.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; question by user tdumidu<br>
<cite>Bitcoin Stack Exchange</cite>
</div>
</div>
<div class="paragraph">
<p>More accurately, the pseudonyms most commonly used are addresses, which are derived from public keys (not the longer public keys themselves).</p>
</div>
<div class="paragraph">
<p>In order for Bitcoin&#8217;s idea to work, you must have coins that can only be spent by the owner of a given private key. This means that whatever you send to must be tied, in some way, to a public key.</p>
</div>
<div class="paragraph">
<p>Using arbitrary pseudonyms (e.g. user names) would mean that you&#8217;d have to then somehow link the pseudonym to a public key in order to enable public/private key crypto. This would remove the ability to securely create addresses/pseudonyms offline (e.g. before someone could send money to the user name "tdumidu", you&#8217;d have to announce in the blockchain that "tdumidu" is owned by public key "a1c&#8230;&#8203;", and include a fee so others have a reason to announce it), reduce anonymity (by encouraging you to reuse pseudonyms), and needlessly bloat the size of the blockchain. It would also create a false sense of security that you&#8217;re sending to who you think you are (if I take the name "Linus Torvalds" before he does, then it&#8217;s mine and people might send money thinking they&#8217;re paying the creator of Linux, not me).</p>
</div>
<div class="paragraph">
<p>Using a pseudonym that either is, or can be calculated from, the public key removes these problems: the mere act of sending the money also describes, in cryptographically secure detail, who can spend it. As the existence of <a href="https://en.bitcoin.it/wiki/Vanitygen">vanity addresses</a> shows, it also allows a small amount of customization.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_paper_3"><a class="anchor" href="#_bitcoin_paper_3"></a>3.4. Bitcoin paper</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.org/bitcoin.pdf" class="bare">https://bitcoin.org/bitcoin.pdf</a></p>
</li>
<li>
<p>Author: Satoshi Nakamoto</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="images/bitcoin.pdf">bitcoin.pdf</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_bad_privacy_contagious"><a class="anchor" href="#_gregory_maxwell_bad_privacy_contagious"></a>3.5. Gregory Maxwell - Bad privacy contagious</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcointalk.org/index.php?topic=334316.msg3589252#msg3589252" class="bare">https://bitcointalk.org/index.php?topic=334316.msg3589252#msg3589252</a></p>
</li>
<li>
<p>Author: Gregory Maxwell</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Could you provide a concrete example to explain why reusing addresses by A will affect B if B always carefully choosing address. and how both A and B never reusing addresses prevent it? I&#8217;m still not so clear about it.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; BitThink<br>
<cite>BitcoinTalk forum 2013-11-15</cite>
</div>
</div>
<div class="paragraph">
<p>A always reuses addresses. Blockchain.info uses this to display their name and IP address along with their transactions, everyone else they&#8217;ve ever transacted with knows who they are, anyone can identify who they are with a simple google search, etc. Because A reuses so often even if A sometimes doesn&#8217;t reuse, the coins they receive inevitably get mixed up with the non-reused one. A is entirely public.</p>
</div>
<div class="paragraph">
<p>Now B is super careful and paranoid&#8230;&#8203; and we&#8217;re not even in a world where blacklisting or whitelisting prevents B from comfortably using his paranoid practices. He never reuses.  Someone is trying to figure out who B is because they want to defraud him.  Initially they are thwarted by B&#8217;s pratices but then they see that B initially received his coins from A. Everyone knows who A is. Moreover, they see when they did so. From that alone they&#8217;ve learned a ton of information about B, beyond that they can now go ask A to tell them— they could coerce A, or just trick him, as we&#8217;ve already established that A is pretty happy go lucky and not very cautious.   Beyond that it isn&#8217;t just A,  B also transacts with other people who are not hygienic and those all potentially leak information too.</p>
</div>
<div class="paragraph">
<p>This actually works in practice, too&#8230;&#8203; A nice whitehat hacker on IRC was playing around with brainwallet cracking and hit a phrase with ~250 BTC in it.  We were able to identify the owner from just the address alone, because they&#8217;d been paid by a Bitcoin service that reused addresses and he was able to talk them into giving up the users contact information. He actually got the user on the phone, they were shocked and confused— but grateful to not be out their coin.  A happy ending there. (This isn&#8217;t the only example of it, by far &#8230;&#8203; but its one of the more fun ones).</p>
</div>
<div class="paragraph">
<p>Uh. We&#8217;ve gone pretty far offtopic here, perhaps these posts should be split from this thread?</p>
</div>
</div>
<div class="sect2">
<h3 id="_chris_belcher_bitcoin_wiki_page_on_privacy"><a class="anchor" href="#_chris_belcher_bitcoin_wiki_page_on_privacy"></a>3.6. Chris Belcher - Bitcoin wiki page on Privacy</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://en.bitcoin.it/Privacy" class="bare">https://en.bitcoin.it/Privacy</a></p>
</li>
<li>
<p>Author: Chris Belcher (and others)</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div id="mw-content-text" class="paragraph">
<p>While Bitcoin can support strong <strong>privacy</strong>, many ways of using it are
usually not very private. With proper understanding of the technology,
bitcoin can indeed be used in a very private and anonymous way.</p>
</div>
<div class="paragraph">
<p>As of 2019 most casual enthusiasts of bitcoin believe it is perfectly
traceable; this is completely false. Around 2011 most casual enthusiasts
believed it is totally private; which is also false. There is some
nuance - in certain situations bitcoin can be very private. But it is
not simple to understand, and it takes some time and reading.</p>
</div>
<div class="paragraph">
<p>This article was written in February 2019. A good way to read the
article is to <a href="#Examples_and_case_studies">skip to the examples</a> and
then come back to read the core concepts.</p>
</div>
<div class="sect3">
<h4 id="_summary"><a class="anchor" href="#_summary"></a><span id="Summary " class="mw-headline">Summary</span></h4>
<div class="paragraph">
<p>To save you reading the rest of the article, here is a quick summary of
how normal bitcoin users can improve their privacy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Think about what you&#8217;re hiding from, what is your threat model and
what is your adversary. Note that
<a href="/wiki/Transaction_surveillance_company">transaction surveillance
companies</a> exist which do large-scale surveillance of the bitcoin
ecosystem.</p>
</li>
<li>
<p>Do not <a href="/wiki/Address_reuse">reuse addresses</a>. Addresses should be
shown to one entity to receive money, and never used again after the
money is spent from them.</p>
</li>
<li>
<p>Try to reveal as little information as possible about yourself when
transacting, for example avoid AML/KYC checks and be careful when giving
your real life mail address.</p>
</li>
<li>
<p>Use a wallet backed by your own <a href="/wiki/Full_node">full node</a> or
<a href="/wiki/Client-side_block_filtering">client-side block filtering</a>,
definitely not a web wallet.</p>
</li>
<li>
<p>Broadcast on-chain transactions over <a href="/wiki/Tor">Tor</a>, if your
wallet doesn&#8217;t support it then copy-paste the transaction hex data into
a web broadcasting form over Tor browser.</p>
</li>
<li>
<p>Use <a href="/wiki/Lightning_Network">Lightning Network</a> as much as
possible.</p>
</li>
<li>
<p>If lightning is unavailable, use a wallet which correctly implements
<a href="/wiki/CoinJoin">CoinJoin</a>.</p>
</li>
<li>
<p>Try to avoid creating change addresses, for example when funding a
lightning channel spend an entire <a href="/wiki/UTXO">UTXO</a> into it without
any change (assuming the amount is not too large to be safe).</p>
</li>
<li>
<p>If <a href="#Digital_forensics">digital forensics</a> are a concern then use a
solution like <a href="https://tails.boum.org/">Tails Operating System</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also <a href="#Examples_and_case_studies">the privacy examples</a> for
real-life case-studies.</p>
</div>
</div>
<div class="sect3">
<h4 id="_introduction"><a class="anchor" href="#_introduction"></a><span id="Introduction " class="mw-headline">Introduction</span></h4>
<div class="paragraph">
<p>Users interact with bitcoin through <a href="/wiki/Software">software</a> which
may leak information about them in various ways that damages their
anonymity.</p>
</div>
<div class="paragraph">
<p>Bitcoin records <a href="/wiki/Transactions">transactions</a> on the
<a href="/wiki/Block_chain">block chain</a> which is visible to all and so
create the most serious damage to privacy. Bitcoins move between
<a href="/wiki/Address">addresses</a>; sender <a href="/wiki/Address">addresses</a> are
known, receiver <a href="/wiki/Address">addresses</a> are known, amounts are
known. Only the identity of each <a href="/wiki/Address">address</a> is not
known (see first image).</p>
</div>
<div class="paragraph">
<p>The linkages between addresses made by transactions is often called the
transaction graph. Alone, this information can&#8217;t identify anyone because
the addresses and transaction IDs are just random numbers. However, if
<em>any</em> of the addresses in a transaction&#8217;s past or future can be tied to
an actual identity, it might be possible to work from that point and
deduce who may own all of the other addresses. This identifying of an
address might come from network analysis, surveillance, searching the
web, or a variety of other methods. The encouraged practice of
<a href="/wiki/Address_reuse">using a new address for every transaction</a> is
intended to make this attack more difficult.</p>
</div>
<div class="sect4">
<h5 id="_example_adversary_controls_source_and_destination_of_coins"><a class="anchor" href="#_example_adversary_controls_source_and_destination_of_coins"></a><span id="Example_-_Adversary_controls_source_and_destination_of_coins " class="mw-headline">Example - Adversary controls source and destination of coins</span></h5>
<div class="paragraph">
<p>The second image shows a simple example. An adversary runs both a money
exchanger and a honeypot website meant to trap people. If someone uses
their exchanger to buy bitcoins and then transacts the coins to the trap
website, the block chain would show:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Transaction of coins on address A to address B. Authorized by
&lt;signature of address A&gt;.</p>
</li>
<li>
<p>Transaction of coins on address B to address C. Authorized by
&lt;signature of address B&gt;.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Say that the adversary knows that Mr. Doe&#8217;s bank account sent the
government currency which were used to buy the coins, which were then
transferred to address B. The adversary also knows the trap website
received coins on address C that were spent from address B. Together
this is a <strong>very strong indication</strong> that address B is owned by Mr. Doe
and that he sent money to the trap website. This assumption is not
always correct because address B may have been an address held on behalf
of Mr. Doe by a third party and the transaction to C may have been
unrelated, or the two transactions may actually involve a smart contract
(See <a href="/wiki/Off-Chain_Transactions">Off-Chain Transactions</a>) which
effectively teleports the coins off-chain to a completely different
address somewhere on the blockchain.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_non_anonymous_chinese_newspaper_buying"><a class="anchor" href="#_example_non_anonymous_chinese_newspaper_buying"></a><span id="Example_-_Non-anonymous_Chinese_newspaper_buying " class="mw-headline">Example - Non-anonymous Chinese newspaper buying</span></h5>
<div class="paragraph">
<p>In this example the adversary controls the destination and finds the
source from metadata.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You live in China and want to buy a "real" online newspaper for
Bitcoins.</p>
</li>
<li>
<p>You join the Bitcoin forum and use your address as a signature. Since
you are very helpful, you manage to get a modest sum as donations after
a few months.</p>
</li>
<li>
<p>Unfortunately, you choose poorly in who you buy the newspaper from:
you&#8217;ve chosen a government agent!</p>
</li>
<li>
<p>The government agent looks at the <a href="/wiki/Transaction">transaction</a>
used to purchase the newspaper on the <a href="/wiki/Block_chain">block
chain</a>, and searches the web every relevant address in it. He finds your
address in your signature on the Bitcoin forum. You&#8217;ve left enough
personal information in your posts to be identified, so you are now
scheduled to be "reeducated".</p>
</li>
<li>
<p>A major reason this happened is because of
<a href="/wiki/Address_reuse">address reuse</a>. Your forum signature had a
single bitcoin address that never changed, and so it was easy to find by
searching the web.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You need to protect yourself from both forward attacks (getting
something that identifies you using coins that you got with methods that
must remain secret, like the scammer example) and reverse attacks
(getting something that must remain secret using coins that identify
you, like the newspaper example).</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_a_perfectly_private_donation"><a class="anchor" href="#_example_a_perfectly_private_donation"></a><span id="Example_-_A_perfectly_private_donation " class="mw-headline">Example - A perfectly private donation</span></h5>
<div class="paragraph">
<p>On the other hand, here is an example of somebody using bitcoin to make
a donation that is completely anonymous.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The aim is to donate to some organization that accepts bitcoin.</p>
</li>
<li>
<p>You run a <a href="/wiki/Bitcoin_Core">Bitcoin Core</a> wallet entirely
through <a href="/wiki/Tor">Tor</a>.</p>
</li>
<li>
<p>Download some extra few hundred gigabytes of data over
<a href="/wiki/Tor">Tor</a> so that the total download bandwidth isn&#8217;t exactly
blockchain-sized.</p>
</li>
<li>
<p><a href="/wiki/Pool_vs._solo_mining">Solo-mine</a> a block, and have the
newly-mined coins sent to your wallet.</p>
</li>
<li>
<p>Send the entire balance to a donation address of that organization.</p>
</li>
<li>
<p>Finally you destroy the computer hardware used.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As your <a href="/wiki/Full_node">full node</a> wallet runs entirely over
<a href="/wiki/Tor">Tor</a>, your IP address is very well hidden.
<a href="/wiki/Tor">Tor</a> also hides the fact that you&#8217;re using bitcoin at
all. As the coins were obtained by <a href="/wiki/Mining">mining</a> they are
entirely unlinked from any other information about you. Since the
transaction is a donation, there are no goods or services being sent to
you, so you don&#8217;t have to reveal any delivery mail address. As the
entire balance is sent, there is no <a href="/wiki/Change">change address</a>
going back that could later leak information. Since the hardware is
destroyed there is no record remaining on any discarded hard drives that
can later be found. The only way I can think of to attack this scheme is
to be a
<a href="https://www.torproject.org/docs/faq.html.en#AttacksOnOnionRouting">global
adversary</a> that can exploit the known weaknessness of Tor.</p>
</div>
</div>
<div class="sect4">
<h5 id="_multiple_interpretations_of_a_blockchain_transaction"><a class="anchor" href="#_multiple_interpretations_of_a_blockchain_transaction"></a><span id="Multiple_interpretations_of_a_blockchain_transaction " class="mw-headline">Multiple interpretations of a blockchain transaction</span></h5>
<div class="paragraph">
<p>Bitcoin <a href="/wiki/Transaction">transactions</a> are made up of inputs and
outputs, of which there can be one or more. Previously-created outputs
can be used as inputs for later transactions. Such outputs are destroyed
when spent and new unspent outputs are usually created to replace them.</p>
</div>
<div class="paragraph">
<p>Consider this example transaction:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>1 btc  ----&gt;  1 btc
3 btc         3 btc</pre>
</div>
</div>
<div class="paragraph">
<p>This transaction has two inputs, worth 1 btc and 3 btc, and creates two
outputs also worth 1 btc and 3 btc.</p>
</div>
<div class="paragraph">
<p>If you were to look at this on the blockchain, what would you assume is
the meaning of this transaction? (for example, we usually assume a
bitcoin transaction is a payment but it doesn&#8217;t have to be).</p>
</div>
<div class="paragraph">
<p>There are <em>at least nine'</em> possible<sup><a href="#cite_note-1">[1</a>]</sup>
interpretations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://en.wikipedia.org/wiki/Alice_and_Bob">Alice</a> provides both
inputs and pays 3 btc to
<a href="https://en.wikipedia.org/wiki/Alice_and_Bob">Bob</a>. Alice owns the 1 btc
output (i.e. it is a <a href="/wiki/Change">change</a> output).</p>
</li>
<li>
<p>Alice provides both inputs and pays 1 btc to Bob, with 3 btc paid back
to Alice as the change.</p>
</li>
<li>
<p>Alice provides 1 btc input and Bob provides 3 btc input, Alice gets 1
btc output and Bob gets 3 btc output. This is a kind of
<a href="/wiki/CoinJoin">CoinJoin</a> transaction.</p>
</li>
<li>
<p>Alice pays 2 btc to Bob. Alice provides 3 btc input, gets the 1 btc
output; Bob provides 1 btc input and gets 3 btc. This would be a
<a href="/wiki/PayJoin">PayJoin</a> transaction type.</p>
</li>
<li>
<p>Alice pays 4 btc to Bob (but using two outputs for some reason).</p>
</li>
<li>
<p>Fake transaction - Alice owns all inputs and outputs, and is simply
moving coins between her own <a href="/wiki/Address">addresses</a>.</p>
</li>
<li>
<p>Alice pays Bob 3 btc and Carol 1 btc. This is a
<a href="/wiki/Techniques_to_reduce_transaction_fees#Change_avoidance">batched
payment with no change address</a>.</p>
</li>
<li>
<p>Alice pays 3, Bob pays 1; Carol gets 3 btc and David gets 1 btc. This
is some kind of <a href="/wiki/CoinJoin">CoinJoined</a>
<a href="/wiki/Techniques_to_reduce_transaction_fees#Change_avoidance">batched
payment with no change address</a>.</p>
</li>
<li>
<p>Alice and Bob pay 4 btc to Carol (but using two outputs).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Many interpretations are possible just from such a simple transaction.
Therefore it&#8217;s completely false to say that bitcoin
<a href="/wiki/Transaction">transactions</a> are always perfectly traceable, the
reality is much more complicated.</p>
</div>
<div class="paragraph">
<p>Privacy-relevant adversaries who analyze the blockchain usually rely on
<em>heuristics</em> (or <em>idioms of use</em>) where certain assumptions are made
about what is plausible. The analyst would then ignore or exclude some
of these possibilities. But those are only assumptions which can be
wrong. Someone who wants better privacy they can intentionally break
those assumptions which will completely fool an analyst.</p>
</div>
<div class="paragraph">
<p>Units of the bitcoin currency are not watermarked within a transaction
(in other words they don&#8217;t have little serial numbers). For example the
1 btc input in that transaction may end up in the 1 btc output or part
of the 3 btc output, or a mixture of both. Transactions are many-to-many
mappings, so in a very important sense it&#8217;s impossible to answer the
question of where the 1 btc ended up. This fungibility of bitcoin within
one transaction is an important reason for the different possibility
interpretations of the above transaction.</p>
</div>
</div>
<div class="sect4">
<h5 id="_threat_model"><a class="anchor" href="#_threat_model"></a><span id="Threat_model " class="mw-headline">Threat model</span></h5>
<div class="paragraph">
<p>When considering privacy you need to think about exactly who you&#8217;re
hiding from. You must examine how a hypothetical adversary could spy on
you, what kind of information is most important to you and which
technology you need to use to protect your privacy. The kind of
behaviour needed to protect your privacy therefore depends on your
threat model.</p>
</div>
<div class="paragraph">
<p>Newcomers to privacy often think that they can simply download some
software and all their privacy concerns will be solved. This is not so.
Privacy requires a change in behaviour, however slight. For example,
imagine if you had a perfectly private internet where who you&#8217;re
communicating with and what you say are completely private. You could
still use this to communicate with a social media website to write your
real name, upload a selfie and talk about what you&#8217;re doing right now.
Anybody on the internet could view that information so your privacy
would be ruined even though you were using perfectly private technology.</p>
</div>
<div class="paragraph">
<p>For details read the talk
<a href="https://www.slideshare.net/grugq/opsec-for-hackers">Opsec for Hackers by
grugq</a>. The talk is aimed mostly at political activists who need privacy
from governments, but much the advice generally applies to all of us.</p>
</div>
<div class="paragraph">
<p>Much of the time plausible deniability is not good enough because lots
of spying methods only need to work on a statistical level (e.g.
targeted advertising).</p>
</div>
</div>
<div class="sect4">
<h5 id="_method_of_data_fusion"><a class="anchor" href="#_method_of_data_fusion"></a><span id="Method_of_data_fusion " class="mw-headline">Method of data fusion</span></h5>
<div class="paragraph">
<p>Multiple privacy leaks when combined together can be far more damaging
to privacy than any single leak. Imagine if a receiver of a
<a href="/wiki/Transaction">transaction</a> is trying to deanonymize the sender.
Each privacy leak would eliminate many candidates for who the sender is,
two different privacy leaks would eliminate <em>different</em> candidates
leaving far fewer candidates remaining. See the diagram for a diagram of
this.</p>
</div>
<div class="paragraph">
<p>This is why even leaks of a small amount of information should be
avoided, as they can often completely ruin privacy when combined with
other leaks. Going back to the example of the non-anonymous Chinese
newspaper buyer, who was deanonymized because of a combination of
visible transaction information and his forum signature donation
address. There are many many transactions on the blockchain which on
their own don&#8217;t reveal anything about the transactor&#8217;s identity or
spending habits. There are many donation addresses placed in forum
signatures which also don&#8217;t reveal much about the owners identity or
spending habits, because they are just random cryptographic information.
But together the two privacy leaks resulted in a trip to the reeducation
camp. The method of data fusion is very important when understanding
privacy in bitcoin (and other situations).</p>
</div>
</div>
<div class="sect4">
<h5 id="_why_privacy"><a class="anchor" href="#_why_privacy"></a><span id="Why_privacy " class="mw-headline">Why privacy</span></h5>
<div class="paragraph">
<p>Financial privacy is an essential element to
<a href="/wiki/Fungibility">fungibility</a> in Bitcoin: if you can meaningfully
distinguish one coin from another, then their
<a href="/wiki/Fungibility">fungibility</a> is weak. If our
<a href="/wiki/Fungibility">fungibility</a> is too weak in practice, then we
cannot be decentralized: if someone important announces a list of stolen
coins they won&#8217;t accept coins derived from, you must carefully check
coins you accept against that list and return the ones that fail.
Everyone gets stuck checking blacklists issued by various authorities
because in that world we&#8217;d all not like to get stuck with bad coins.
This adds friction, transactional costs and allows the blacklist
provider to engage in censorship, and so makes Bitcoin less valuable as
a money.</p>
</div>
<div class="paragraph">
<p>Financial privacy is an essential criteria for the efficient operation
of a free market: if you run a business, you cannot effectively set
prices if your suppliers and customers can see all your transactions
against your will. You cannot compete effectively if your competition is
tracking your sales. Individually your informational leverage is lost in
your private dealings if you don&#8217;t have privacy over your accounts: if
you pay your landlord in Bitcoin without enough privacy in place, your
landlord will see when you&#8217;ve received a pay raise and can hit you up
for more rent.</p>
</div>
<div class="paragraph">
<p>Financial privacy is essential for personal safety: if thieves can see
your spending, income, and holdings, they can use that information to
target and exploit you. Without privacy malicious parties have more
ability to steal your identity, snatch your large purchases off your
doorstep, or impersonate businesses you transact with towards you&#8230;&#8203;
they can tell exactly how much to try to scam you for.</p>
</div>
<div class="paragraph">
<p>Financial privacy is essential for human dignity: no one wants the
snotty barista at the coffee shop or their nosy neighbors commenting on
their income or spending habits. No one wants their baby-crazy in-laws
asking why they&#8217;re buying contraception (or sex toys). Your employer has
no business knowing what church you donate to. Only in a perfectly
enlightened discrimination free world where no one has undue authority
over anyone else could we retain our dignity and make our lawful
transactions freely without self-censorship if we don&#8217;t have privacy.</p>
</div>
<div class="paragraph">
<p>Most importantly, financial privacy isn&#8217;t incompatible with things like
law enforcement or transparency. You can always keep records, be ordered
(or volunteer) to provide them to whomever, have judges hold against
your interest when you can&#8217;t produce records (as is the case today).
None of this requires <em>globally</em> visible public records.</p>
</div>
<div class="paragraph">
<p>Globally visible public records in finance are completely unheard-of.
They are undesirable and arguably intolerable. The Bitcoin whitepaper
made a promise of how we could get around the visibility of the ledger
with pseudonymous addresses, but the ecosystem has broken that promise
in a bunch of places and we ought to fix it. Bitcoin could have coded
your name or IP address into every transaction. It didn&#8217;t. The
whitepaper even has a section on privacy. It&#8217;s incorrect to say that
Bitcoin isn&#8217;t focused on privacy. Sufficient privacy is an essential
prerequisite for a viable digital currency<sup><a href="#cite_note-2">[2</a>]</sup>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_blockchain_attacks_on_privacy"><a class="anchor" href="#_blockchain_attacks_on_privacy"></a><span id="Blockchain_attacks_on_privacy " class="mw-headline">Blockchain attacks on privacy</span></h4>
<div class="paragraph">
<p>Bitcoin uses a <a href="/wiki/Block_chain">block chain</a>. Users can
<a href="/wiki/Full_node">download and verify the blockchain</a> to check that
all the rules of bitcoin were followed throughout its history. For
example, users can check that nobody printed infinite bitcoins and that
every coin was only spent with a <a href="/wiki/OP_CHECKSIG">valid signature</a>
created by its <a href="/wiki/Private_key">private key</a>. This is what leads
to <a href="/wiki/Bitcoin_as_a_medium_of_exchange">bitcoin&#8217;s unique value
proposition</a> as a form of electronic cash which requires
<a href="/wiki/Principles_of_Bitcoin#Low_trust">only small amounts of trust</a>.
But the same blockchain structure leads to privacy problems because
every <a href="/wiki/Transaction">transaction</a> must be available for all to
see, forever. This section discusses known methods an adversary may use
for analyzing the public blockchain.</p>
</div>
<div class="paragraph">
<p>Bitcoin uses a <a href="/wiki/Coin_analogy">UTXO model</a>.
<a href="/wiki/Transaction">Transactions</a> have inputs and outputs, they can
have one or more of each. Previous outputs can be used as inputs for
later transactions. An output which hasn&#8217;t been spent yet is called an
unspent transaction output (UTXO). UXTOs are often called
<a href="/wiki/Coin_analogy">"coins"</a>. UTXOs are associated with a bitcoin
<a href="/wiki/Address">address</a> and can be spent by creating a valid
signature corresponding to the scriptPubKey of the address.</p>
</div>
<div class="paragraph">
<p><a href="/wiki/Address">Addresses</a> are cryptographic information, essentially
random numbers. On their own they do not reveal much about the real
owner of any bitcoins on them. Usually an adversary will try to link
together multiple addresses which they believe belong to the same
wallet. Such address collections are called "clusters", "closures" or
"wallet clusters", and the activity of creating them is called "wallet
clustering". Once the clusters are obtained the adversary can try to
link them real-world identities of entities it wants to spy on. For
example, it may find wallet cluster A belonging to Alice and another
wallet cluster B belonging to Bob. If a bitcoin
<a href="/wiki/Transaction">transaction</a> is seen paying from cluster A to
cluster B then the adversary knows that Alice has sent coins to Bob.</p>
</div>
<div class="paragraph">
<p>It can be very difficult to fine-tune heuristics for wallet clustering
that lead to obtaining actually correct
information<sup><a href="#cite_note-3">[3</a>]</sup>.</p>
</div>
<div class="sect4">
<h5 id="_common_input_ownership_heuristic"><a class="anchor" href="#_common_input_ownership_heuristic"></a><span id="Common-input-ownership_heuristic " class="mw-headline"><a href="/wiki/Common-input-ownership_heuristic">Common-input-ownership heuristic</a></span></h5>
<div class="paragraph">
<p>This is a heuristic or assumption which says that if a transaction has
more than one input then all those inputs are owned by the same entity.</p>
</div>
<div class="paragraph">
<p>For example, consider this transaction with inputs A, B and C; and
outputs X and Y.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>A (1 btc) --&gt; X (4 btc)
B (2 btc)     Y (2 btc)
C (3 btc)</pre>
</div>
</div>
<div class="paragraph">
<p>This <a href="/wiki/Transaction">transaction</a> would be an indication that
<a href="/wiki/Address">addresses</a> B and C are owned by the same person who
owns <a href="/wiki/Address">address</a> A.</p>
</div>
<div class="paragraph">
<p>One of the purposes of <a href="/wiki/CoinJoin">CoinJoin</a> is to break this
heuristic. Nonetheless this heuristic is very commonly true and it is
widely used by <a href="/wiki/Transaction_surveillance_company">transaction
surveillance companies</a> and other adversaries as of 2019. The heuristic
is usually combined with <a href="/wiki/Address_reuse">address reuse</a>
reasoning, which along with the somewhat-centralized bitcoin economy as
of 2018 is why this heuristic can be unreasonably
effective<sup><a href="#cite_note-4">[4</a>]</sup>. The heuristic&#8217;s success also depends
on the wallet behaviour: for example, if a wallet usually receives small
amounts and sends large amounts then it will create many multi-input
transactions.</p>
</div>
</div>
<div class="sect4">
<h5 id="_change_address_detection"><a class="anchor" href="#_change_address_detection"></a><span id="Change_address_detection " class="mw-headline"><a href="/wiki/Change">Change</a> address detection</span></h5>
<div class="paragraph">
<p>Many bitcoin <a href="/wiki/Transaction">transactions</a> have
<a href="/wiki/Change">change outputs</a>. It would be a serious privacy leak if
the change address can be somehow found, as it would link the ownership
of the (now spent) inputs with a new output. Change outputs can be very
effective when combined with other privacy leaks like the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> or <a href="/wiki/Address_reuse">address reuse</a>. Change address
detection allows the adversary to cluster together newly created
address, which the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> and <a href="/wiki/Address_reuse">address reuse</a> allows past
addresses to be clustered.</p>
</div>
<div class="paragraph">
<p>Change addresses lead to a common usage pattern called the <strong>peeling
chain</strong>. It is seen after a large transactions from exchanges,
marketplaces, mining pools and salary payments. In a peeling chain, a
single address begins with a relatively large amount of bitcoins. A
smaller amount is then peeled off this larger amount, creating a
transaction in which a small amount is transferred to one address, and
the remainder is transferred to a one-time <a href="/wiki/Change">change</a>
address. This process is repeated - potentially for hundreds or
thousands of hops - until the larger amount is pared down, at which
point (in one usage) the amount remaining in the address might be
aggregated with other such addresses to again yield a large amount in a
single address, and the peeling process begins
again<sup><a href="#cite_note-5">[5</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>Now are listed possible ways to infer which of the outputs of a
transaction is the <a href="/wiki/Change">change</a> output:</p>
</div>
<div class="paragraph">
<p><strong><span id="Address_reuse " class="mw-headline">Address reuse</span></strong></p>
</div>
<div class="paragraph">
<p>If an output address has been <a href="/wiki/Address_reuse">reused</a> it is
very likely to be a payment output, not a change output. This is because
change addresses are created automatically by wallet software but
payment addresses are manually sent between humans. The
<a href="/wiki/Address_reuse">address reuse</a> would happen because the human
user reused an address out of ignorance or apathy. This heuristic is
probably the most accurate, as it is very hard to imagine how false
positives would arise (except by intentional design of wallets). This
heuristic is also called the "shadow heuristic".</p>
</div>
<div class="paragraph">
<p>Some very old software (from the 2010-2011 era which did not have
<a href="/wiki/Deterministic_wallet">Deterministic wallets</a>) did not use a
new address change but sent the change back to the input address. This
reveals the change address exactly.</p>
</div>
<div class="paragraph">
<p>Avoiding <a href="/wiki/Address_reuse">address reuse</a> is an obvious remedy.
Another idea is that those wallets could automatically detect when a
payment address has been used before (perhaps by asking the user) and
then use a reused address as their change address; so both outputs would
be reused addresses.</p>
</div>
<div class="paragraph">
<p>Also, most reused addresses are mentioned on the internet, forums,
social networks like Facebook, Reddit, Stackoverflow&#8230;&#8203;etc. These
addresses you can find and check on <a href="https://checkbitcoinaddress.com/" class="bare">https://checkbitcoinaddress.com/</a>
site. It&#8217;s like a little bit de-anonymization of pseudo-anonymized
blockchain.</p>
</div>
<div class="paragraph">
<p><strong><span id="Wallet_fingerprinting " class="mw-headline">Wallet fingerprinting</span></strong></p>
</div>
<div class="paragraph">
<p>A careful analyst sometimes deduce which software created a certain
<a href="/wiki/Transaction">transaction</a>, because the many different wallet
softwares don&#8217;t always create transactions in exactly the same way.
Wallet fingerprinting can be used to detect change outputs because a
change output is the one spent with the same wallet fingerprint.</p>
</div>
<div class="paragraph">
<p>As an example, consider five typical transactions that consume one input
each and produce two outputs. A, B, C, D, E refer to transactions. A1,
A2, etc refer to output addresses of those transactions</p>
</div>
<div class="literalblock">
<div class="content">
<pre>           --&gt; C1
A1 --&gt; B2  --&gt; C2
   --&gt; B2  --&gt; D1
           --&gt; D2 --&gt; E1
                  --&gt; E2</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>+</pre>
</div>
</div>
<div class="paragraph">
<p>If wallet fingerprinting finds that transactions A, B, D and E are
created by the same wallet software, and the other transactions are
created by other software, then the change addresses become obvious. The
same transactions with non-matching addresses replaced by X is shown.
The peel chain is visible, it&#8217;s clear that B2, D2, E1 are change
addresses which belong to the same wallet as A1.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>           --&gt; X
A1 --&gt; X   --&gt; X
   --&gt; B2  --&gt; X
           --&gt; D2 --&gt; E1
                  --&gt; X</pre>
</div>
</div>
<div class="paragraph">
<p>There are a number of ways to get evidence used for identifying wallet
software:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Address formats. Wallets generally only use one address type. If a
transaction has all inputs and one output of the same address type (e.g.
p2pkh), with the remaining output of a different type (p2sh), then a
reasonable assumption is that the same-address-format output (p2pkh) is
change and the different-address-format output (p2sh) is the payment
which belongs to someone else.</p>
</li>
<li>
<p><a href="/wiki/Script">Script</a> types. Each wallet generally uses only one
<a href="/wiki/Script">script</a>. For example, the sending wallet may be a
<a href="/wiki/P2SH">P2SH</a> 2-of-3 <a href="/wiki/Multisignature">multisignature</a>
wallet, which makes a transaction to two outputs: one 2-of-3
multisignature address and the other 2-of-2 multisignature address. The
different <a href="/wiki/Script">script</a> is a strong indication that the
output is payment and the other output is change.</p>
</li>
<li>
<p><a href="/wiki/BIP_0069">BIP69</a> Lexicographical Indexing of Transaction
Inputs and Outputs. This BIP describes a standard way for wallets to
order their inputs and outputs for privacy. Right now the wallet
ecosystem has a mixture of wallets which do and don&#8217;t implement the
standard, which helps with fingerprinting. Note that the common
one-input-two-output <a href="/wiki/Transaction">transaction</a> with random
ordering will follow BIP69 just by chance 50% of the time.</p>
</li>
<li>
<p>Number of inputs and outputs. Different users often construct
<a href="/wiki/Transaction">transactions</a> differently. For example,
individuals often make <a href="/wiki/Transaction">transaction</a> with just two
outputs; a payment and change, while high-volume institutions like
casinos or exchanges use
<a href="/wiki/Techniques_to_reduce_transaction_fees#Consolidation">consolidation</a>
and
link:/wiki/Techniques_to_reduce_transaction_fees#Payment_batching<sup class="batching"><a href="#cite_note-6">[6</a>]<a href="#cite_note-7">[7</a>]</sup>.
An output that is later use to create a batching transaction was
probably not the change. This heuristic is also called the "consumer
heuristic".</p>
</li>
<li>
<p>Transaction fields. Values in the <a href="/wiki/Transaction">transaction</a>
format which may vary depending on the wallet software:
<a href="/wiki/NLockTime">nLockTime</a> is a field in transactions set by some
wallets to make <a href="/wiki/Fee_sniping">fee sniping</a> less profitable. A
mixture of wallets in the ecosystem do and don&#8217;t implement this feature.
nLockTime can also be used as in certain privacy protocols like
<a href="/wiki/CoinSwap">CoinSwap</a>.
<a href="/wiki/Transaction#General_format_.28inside_a_block.29_of_each_input_of_a_transaction_-_Txin">nSequence</a>
is another example. Also the version number.</p>
</li>
<li>
<p>Low-R value signatures. The DER format used to encode Bitcoin
signatures requires adding an entire extra byte to a signature just to
indicate when the signature’s R value is on the top-half of the
elliptical curve used for Bitcoin. The R value is randomly derived, so
half of all signatures have this extra byte. As of July
2018<sup><a href="#cite_note-8">[8</a>]</sup><a href="/wiki/Bitcoin_Core">Bitcoin Core</a> only
generates signatures with a low-R value that don&#8217;t require this extra
byte. By doing so, Bitcoin Core transactions will save one byte per
every two signatures (on average). As of 2019 no other wallet does this,
so a high-R signature is evidence that <a href="/wiki/Bitcoin_Core">Bitcoin
Core</a> is not being used<sup><a href="#cite_note-9">[9</a>]</sup>.</p>
</li>
<li>
<p>Uncompressed and compressed public keys. Older wallet software uses
uncompressed public keys<sup><a href="#cite_note-10">[10</a>]</sup>. A mixture of
compressed and uncompressed keys can be used for fingerprinting.</p>
</li>
<li>
<p>Miner fees. Various wallet softwares may respond to block space
pressure in different ways which could lead to different kinds of miner
fees being paid. This might also be a way of fingerprinting wallets.</p>
</li>
<li>
<p>Coin Selection. Various wallet softwares may choose which UTXOs to
spend using different algorithms that could be used for fingerprinting.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If multiple users are using the same wallet software, then wallet
fingerprinting cannot detect the change address. It is also possible
that a single user owns two different wallets which use different
software (for example a hot wallet and cold wallet) and then
transactions between different softwares would not indicate a change of
ownership. Wallet fingerprinting on its own is never decisive evidence,
but as with all other privacy leaks it works best with data fusion when
multiple privacy leaks are combined.</p>
</div>
<div class="paragraph">
<p><strong><span id="Round_numbers " class="mw-headline">Round numbers</span></strong></p>
</div>
<div class="paragraph">
<p>Many payment amounts are round numbers, for example 1 BTC or 0.1 BTC.
The leftover change amount would then be a non-round number (e.g.
1.78213974 BTC). This potentially useful for finding the change address.
The amount may be a round number in another currency. The amount
2.24159873 BTC isn&#8217;t round in bitcoin but when converted to USD it may
be close to $100.</p>
</div>
<div class="paragraph">
<p><strong><span id="Fee_bumping " class="mw-headline"><a href="/wiki/Fee_bumping">Fee bumping</a></span></strong></p>
</div>
<div class="paragraph">
<p><a href="/wiki/BIP_0125">BIP 0125</a> defines a mechanism for replacing an
unconfirmed <a href="/wiki/Transaction">transaction</a> with another transaction
that pays a higher fee. In the context of the
<a href="/wiki/Miner_fees#The_market_for_block_space">market for block
space</a>, a user may find their transaction isn&#8217;t confirming fast enough
so they opt to <a href="/wiki/Fee_bumping">"fee bump"</a> or pay a higher miner
fee. However generally the new higher miner fee will happen by reducing
the change amount. So if an adversary is observing all unconfirmed
transactions they could see both the earlier low-fee transaction and
later high-fee transaction, and the output with the reduced amount would
be the change output.</p>
</div>
<div class="paragraph">
<p>This could be mitigated by some of the time reducing the amount of both
outputs, reducing the payment amount instead of change (in a
receiver-pays-for-fee model), or replacing both addresses in each RBF
transaction (this would require obtaining multiple payment addresses
from the receiver).</p>
</div>
<div class="paragraph">
<p><strong><span id="Unnecessary_input_heuristic " class="mw-headline">Unnecessary input heuristic</span></strong></p>
</div>
<div class="paragraph">
<p>Also called the "optimal change heuristic". Consider this bitcoin
transaction. It has two inputs worth 2 BTC and 3 BTC and two outputs
worth 4 BTC and 1 BTC.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>2 btc --&gt; 4 btc
3 btc     1 btc</pre>
</div>
</div>
<div class="paragraph">
<p>Assuming one of the outputs is <a href="/wiki/Change">change</a> and the other
output is the payment. There are two interpretations: the payment output
is either the 4 BTC output or the 1 BTC output. But if the 1 BTC output
is the payment amount then the 3 BTC input is unnecessary, as the wallet
could have spent only the 2 BTC input and paid lower
<a href="/wiki/Miner_fees">miner fees</a> for doing so. This is an indication
that the real payment output is 4 BTC and that 1 BTC is the change
output.</p>
</div>
<div class="paragraph">
<p>This is an issue for transactions which have more than one input. One
way to fix this leak is to add more inputs until the change output is
higher than any input, for example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>2 btc --&gt; 4 btc
3 btc     6 btc
5 btc</pre>
</div>
</div>
<div class="paragraph">
<p>Now both interpretations imply that some inputs are unnecessary.
Unfortunately this costs more in miner fees and can only be done if the
wallet actually owns other UTXOs.</p>
</div>
<div class="paragraph">
<p>Some wallets have a coin selection algorithm which violates this
heuristic. An example might be because the wallets want to
<a href="/wiki/Techniques_to_reduce_transaction_fees#Consolidation">consolidate
inputs</a> in times of cheap miner fees. So this heuristic is not decisive
evidence.</p>
</div>
<div class="paragraph">
<p><strong><span id="Sending_to_a_different_script_type " class="mw-headline">Sending to a different script type</span></strong></p>
</div>
<div class="paragraph">
<p>Sending funds to a different script type than the one you&#8217;re spending
from makes it easier to tell which output is the change.</p>
</div>
<div class="paragraph">
<p>For example, for a transaction with 1 input spending a p2pkh coin and
creating 2 outputs, one of p2pkh and one of p2sh, it is very likely that
the p2pkh output is the change while the p2sh one is the payment.</p>
</div>
<div class="paragraph">
<p>This is also possible if the inputs are of mixed types (created by
wallets supporting multiple script types for backwards compatibility).
If one of the output script types is known to be used by the wallet
(because the same script type is spent by at least one of the inputs)
while the other is not, the other one is likely to be the payment.</p>
</div>
<div class="paragraph">
<p>This has the most effect on early adopters of new wallet technology,
like p2sh or segwit. The more rare it is to pay to people using the same
script type as you do, the more you leak the identity of your change
output. This will improve over time as the new technology gains wider
adoption.</p>
</div>
<div class="paragraph">
<p><strong><span id="Wallet_bugs " class="mw-headline">Wallet bugs</span></strong></p>
</div>
<div class="paragraph">
<p>Some wallet software handles change in a very un-private way. For
example certain old wallets would always put the change output in last
place in the transaction. An old version of
<a href="/wiki/Bitcoin_Core">Bitcoin Core</a> would add input UTXOs to the
transaction until the change amount was around 0.1 BTC, so an amount of
slightly over 0.1 BTC would always be change.</p>
</div>
<div class="paragraph">
<p><strong><span id="Equal-output_CoinJoin " class="mw-headline">Equal-output <a href="/wiki/CoinJoin">CoinJoin</a></span></strong></p>
</div>
<div class="paragraph">
<p>Equal-output-<a href="/wiki/CoinJoin">CoinJoin</a> transactions trivially reveal
the change address because it is the outputs which are not equal-valued.
For example consider this equal-output-coinjoin:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>              A (1btc)
X (5btc) ---&gt; B (1btc)
Y (3btc)      C (4btc)
              D (2btc)</pre>
</div>
</div>
<div class="paragraph">
<p>There is a very strong indication that output D is change belongs to the
owner of input Y, while output C is change belonging to input X.
However, <a href="/wiki/CoinJoin">CoinJoin</a> breaks the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> and effectively hides the ownership of payment outputs (A and
B), so the tradeoffs are still heavily in favour of using coinjoin.</p>
</div>
<div class="paragraph">
<p><strong><span id="Cluster_growth " class="mw-headline">Cluster growth</span></strong></p>
</div>
<div class="paragraph">
<p>Wallet clusters created by using the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> usually grow (in number of addresses) slowly and
incrementally<sup><a href="#cite_note-11">[11</a>]</sup>. Two large clusters merging is
rare and may indicate that the heuristics are flawed. So another way to
deduce the change address is to find which output causes the clusters to
grow only slowly. The exact value for "how slowly" a cluster is allowed
to grow is an open question.</p>
</div>
</div>
<div class="sect4">
<h5 id="_transaction_graph_heuristic"><a class="anchor" href="#_transaction_graph_heuristic"></a><span id="Transaction_graph_heuristic " class="mw-headline">Transaction graph heuristic</span></h5>
<div class="paragraph">
<p>As described in the introduction, <a href="/wiki/Address">addresses</a> are
connected together by <a href="/wiki/Transaction">transactions</a> on the
<a href="/wiki/Block_chain">block chain</a>. The mathematical concept of a
<a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)">graph</a> can be
used to describe the structure where addresses are connected with
transactions. <a href="/wiki/Address">Addresses</a> are vertices while
<a href="/wiki/Transaction">transactions</a> are edges in this transaction
graph.</p>
</div>
<div class="paragraph">
<p>This is called a heuristic because <a href="/wiki/Transaction">transactions</a>
on the <a href="/wiki/Block_chain">block chain</a> do not necessarily correspond
to real economic transactions. For example the
<a href="/wiki/Transaction">transaction</a> may represent someone sending
bitcoins to themselves. Also, real economic transactions may not appear
on the <a href="/wiki/Block_chain">block chain</a> but be
<a href="/wiki/Off-Chain_Transactions">off-chain</a>; either via a custodial
entity like an exchange, or non-custodial off-chain like
<a href="/wiki/Lightning_Network">Lightning Network</a>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Taint_analysis " class="mw-headline">Taint analysis</span></strong></p>
</div>
<div class="paragraph">
<p><em>Taint analysis</em> is a technique sometimes used to study the flow of
bitcoins and extract privacy-relevant information. If an address A is
connected to privacy-relevant information (such as a real name) and it
makes a transaction sending coins to address B, then address B is said
to be <em>tainted</em> with coins from address A. In this way taint is spread
by "touching" via transactions<sup><a href="#cite_note-12">[12</a>]</sup>. It is unclear
how useful taint analysis is for spying, as it does not take into
account transfer of ownership. For example an owner of tainted coins may
donate some of them to some charity, the donated coins could be said to
be tainted yet the charity does not care and could not give any
information about the source of those coins. Taint analysis may only be
useful for breaking schemes where someone tries to hide the origin of
coins by sending dozens of fake transactions to themselves many times.</p>
</div>
</div>
<div class="sect4">
<h5 id="_amount"><a class="anchor" href="#_amount"></a><span id="Amount " class="mw-headline">Amount</span></h5>
<div class="paragraph">
<p>Blockchain <a href="/wiki/Transactions">transactions</a> contain amount
information of the transaction inputs and outputs, as well as an
implicit amount of the <a href="/wiki/Miner_fees">miner fee</a>. This is visible
to all.</p>
</div>
<div class="paragraph">
<p>Often the payment amount of a transaction is a round number, possibly
when converted to another currency. An analysis of round numbers in
bitcoin transactions has been used to measure the countries or regions
where payment have happened<sup><a href="#cite_note-13">[13</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Input_amounts_revealing_sender_wealth " class="mw-headline">Input amounts revealing sender wealth</span></strong></p>
</div>
<div class="paragraph">
<p>A mismatch in the sizes of available <a href="/wiki/Transaction#input">input</a>
vs what is required can result in a privacy leak of the total wealth of
the sender. For example, when intending to send 1 bitcoins to somebody a
user may only have an <a href="/wiki/Transaction#input">input</a> worth 10
bitcoins. They create a <a href="/wiki/Transaction">transaction</a> with 1
bitcoin going to the recipient and 9 bitcoins going to a
<a href="/wiki/Change">change address</a>. The recipient can look at the
<a href="/wiki/Transaction">transaction</a> on the blockchain and deduce that
the sender owned at least 10 bitcoins.</p>
</div>
<div class="paragraph">
<p>By analogy with paper money, if you hand over a 100 USD note to pay for
a drink costing only 5 USD the bartender learns that your balance is at
least 95 USD. It may well be higher of course, but it&#8217;s at least not
lower<sup><a href="#cite_note-14">[14</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Exact_payment_amounts_" class="28no_change 29  mw-headline">Exact payment amounts (no change)</span></strong></p>
</div>
<div class="paragraph">
<p>Payments that send exact amounts and take no change are a likely
indication that the bitcoins didn&#8217;t move hands.</p>
</div>
<div class="paragraph">
<p>This usually means that the user used the "send maximum amount" wallet
feature to transfer funds to her new wallet, to an exchange account, to
fund a lightning channel, or other similar cases where the bitcoins
remain under the same ownership.</p>
</div>
<div class="paragraph">
<p>Other possible reasons for sending exact amounts with no change is that
the coin-selection algorithm was smart and lucky enough to find a
suitable set of inputs for the intended payment amount that didn&#8217;t
require change (or required a change amount that is negligible enough to
waive), or advanced users using manual coin selection to explicitly
avoid change.</p>
</div>
</div>
<div class="sect4">
<h5 id="_batching"><a class="anchor" href="#_batching"></a><span id="Batching " class="mw-headline">Batching</span></h5>
<div class="paragraph">
<p><a href="/wiki/Techniques_to_reduce_transaction_fees#Payment_batching">Payment
batching</a> is a technique to reduce the <a href="/wiki/Miner_fees">miner fee</a>
of a payment. It works by batching up several payments into one
<a href="/wiki/Block_chain">block chain</a> <a href="/wiki/Transaction">transaction</a>.
It is typically used by exchanges, casinos and other high-volume
spenders.</p>
</div>
<div class="paragraph">
<p>The privacy implication comes in that recipients can see the amount and
address of recipients<sup><a href="#cite_note-15">[15</a>]</sup></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When you receive your withdrawal from Kraken, you can look up your
transaction on a block chain explorer and see the addresses of everyone
else who received a payment in the same transaction. You don’t know who
those recipients are, but you do know they received bitcoins from Kraken
the same as you.</p>
</div>
<div class="paragraph">
<p>That’s not good for privacy, but it’s also perhaps not the worst thing.
If Kraken made each of those payments separately, they might still be
connected together through the change outputs and perhaps also by
certain other identifying characteristics that block chain analysis
companies and private individuals use to fingerprint particular
spenders.</p>
</div>
<div class="paragraph">
<p>However, it is something to keep in mind if you’re considering batching
payments where privacy might be especially important or already somewhat
weak, such as making payroll in a small company where you don’t want
each employee to learn the other employees’ salaries.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_unusual_scripts"><a class="anchor" href="#_unusual_scripts"></a><span id="Unusual_scripts " class="mw-headline">Unusual scripts</span></h5>
<div class="paragraph">
<p>Most but not all bitcoin <a href="/wiki/Script">scripts</a> are
single-signature. Other scripts are possible with the most common being
<a href="/wiki/Multisignature">multisignature</a>. A script which is
particularly unusual can leak information simply by being so unique.</p>
</div>
<div class="paragraph">
<p>2-of-3 multisig is by far the most common non-single-signature script as
of 2019.</p>
</div>
</div>
<div class="sect4">
<h5 id="_mystery_shopper_payment"><a class="anchor" href="#_mystery_shopper_payment"></a><span id="Mystery_shopper_payment " class="mw-headline">Mystery shopper payment</span></h5>
<div class="paragraph">
<p>A <a href="/wiki/Mystery_shopper_payments">mystery shopper payment</a> is when
an adversary pays bitcoin to a target in order to obtain
privacy-relevant information. It will work even if
<a href="/wiki/Address_reuse">address reuse</a> is avoided. For example, if the
target is an online merchant then the adversary could buy a small item.
On the payment interface they would be shown one of the merchant&#8217;s
bitcoin <a href="/wiki/Address">addresses</a>. The adversary now knows that this
<a href="/wiki/Address">address</a> belongs to the merchant and by watching the
blockchain for later <a href="/wiki/Transaction">transactions</a> other
information would be revealed, which when combined with other techniques
could reveal a lot of data about the merchant. The
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> and change address detection could reveal other addresses
belonging to the merchant (assuming countermeasures like
<a href="/wiki/CoinJoin">CoinJoin</a> are not used) and could give a lower-bound
for the sales volume. This works because anybody on the entire internet
can request one of the merchant&#8217;s <a href="/wiki/Address">addresses</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_forced_address_reuse"><a class="anchor" href="#_forced_address_reuse"></a><span id="Forced_address_reuse " class="mw-headline">Forced address reuse</span></h5>
<div class="paragraph">
<p><strong>Forced <a href="/wiki/Address_reuse">address reuse</a></strong> is when an adversary
pays an (often small) amount of bitcoin to <a href="/wiki/Address">addresses</a>
that have already been used on the <a href="/wiki/Block_chain">block chain</a>.
The adversary hopes that users or their wallet software will use these
<em>forced payments</em> as inputs to a larger transaction which will reveal
other addresses via the the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> and thereby leak more privacy-relevant information. These
payments can be understood as a way to coerce the address owner into
unintentional link:/wiki/Address_reuse<sup class="address
reuse"><a href="#cite_note-16">[16</a>]<a href="#cite_note-17">[17</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>This attack is sometimes incorrectly called a <strong>dust
attack</strong><sup><a href="#cite_note-18">[18</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>If the forced-payment coins have landed on already-used <em>empty</em>
addresses, then the correct behaviour by wallets is to not spend those
coins ever. If the coins have landed on addresses which are not empty,
then the correct behaviour by wallets is to fully-spend all the coins on
that address in the same transaction.</p>
</div>
</div>
<div class="sect4">
<h5 id="_amount_correlation"><a class="anchor" href="#_amount_correlation"></a><span id="Amount_correlation " class="mw-headline">Amount correlation</span></h5>
<div class="paragraph">
<p>Amounts correlation refers to searching the entire
<a href="/wiki/Block_chain">block chain</a> for output amounts.</p>
</div>
<div class="paragraph">
<p>For example, say we&#8217;re using any black box privacy technology that
breaks the <a href="/wiki/Transaction">transaction</a> graph.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>V --&gt; [black box privacy tech] --&gt; V - fee</pre>
</div>
</div>
<div class="paragraph">
<p>The privacy tech is used to mix V amount of bitcoins, and it returns V
bitcoins minus fees back to the user. Amount correlation could be used
to unmix this tech by searching the blockchain for transactions with an
output amount close to V.</p>
</div>
<div class="paragraph">
<p>A way to resist amount correlation is to split up the sending of
bitcoins back to user into many transactions with output amounts (w0,
w1, w2) which together add up to V minus fees.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>V --&gt; [privacy tech]    --&gt; w0
            --&gt; w1
            --&gt; w2</pre>
</div>
</div>
<div class="paragraph">
<p>Another way of using amount correlation is to use it to find a starting
point. For example, if Bob wants to spy on Alice. Say that Alice happens
to mention in passing that she&#8217;s going on holiday costing $5000 with her
boyfriend, Bob can search all transactions on the blockchain in the
right time period and find transactions with output amounts close to
$5000. Even if multiple matches are found it still gives Bob a good idea
of which bitcoin addresses belong to Alice.</p>
</div>
</div>
<div class="sect4">
<h5 id="_timing_correlation"><a class="anchor" href="#_timing_correlation"></a><span id="Timing_correlation " class="mw-headline">Timing correlation</span></h5>
<div class="paragraph">
<p>Timing correlation refers to using the time information of transactions
on the blockchain. Similar to amount correlation, if an adversary
somehow finds out the time that an interesting transaction happened they
can search the blockchain in that time period to narrow down their
candidates.</p>
</div>
<div class="paragraph">
<p>This can be beaten by uniform-randomly choosing a time between now and
an appropriate time_period in which to broadcast the bitcoin
transaction. This forces an adversary to search much more of the
existing transactions; they have to equally consider the entire
anonymity set between now and time_period.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_non_blockchain_attacks_on_privacy"><a class="anchor" href="#_non_blockchain_attacks_on_privacy"></a><span id="Non-blockchain_attacks_on_privacy " class="mw-headline">Non-blockchain attacks on privacy</span></h4>
<div class="sect4">
<h5 id="_traffic_analysis"><a class="anchor" href="#_traffic_analysis"></a><span id="Traffic_analysis " class="mw-headline">Traffic analysis</span></h5>
<div class="paragraph">
<p>Bitcoin <a href="/wiki/Full_node">nodes</a> communicate with each other via a
<a href="/wiki/Network">peer-to-peer network</a> to transmit
<a href="/wiki/Transaction">transactions</a> and <a href="/wiki/Block">blocks</a>.
<a href="/wiki/Network#Standard_relaying">Nodes relay</a> these packets to all
their connections, which has good privacy properties because a connected
node doesn&#8217;t know whether the transmitted data originated from its peer
or whether the peer was merely relaying it.</p>
</div>
<div class="paragraph">
<p>An adversary able to snoop on your internet connection (such as your
government, ISP, Wifi provider or VPN provider) can see data sent and
received by your node. This would reveal that you are a bitcoin user.
Even if a connection is encrypted the adversary could still see the
timings and sizes of data packets. A block being mined results in a
largely synchronized burst of identically-sized traffic for every
bitcoin node, because of this bitcoin nodes are very vulnerable to
traffic analysis revealing the fact that bitcoin is being used.</p>
</div>
<div class="paragraph">
<p>If the adversary sees a <a href="/wiki/Transaction">transaction</a> or
<a href="/wiki/Block">block</a> coming out of your node which did not previously
enter, then it can know with near-certainty that the
<a href="/wiki/Transaction">transaction</a> was made by you or the
<a href="/wiki/Block">block</a> was mined by you. As internet connections are
involved, the adversary will be able to link the IP address with the
discovered bitcoin information.</p>
</div>
<div class="paragraph">
<p>A certain kind of <a href="/wiki/Weaknesses#Sybil_attack">sybil attack</a> can
be used to discover the source of a <a href="/wiki/Transaction">transaction</a>
or <a href="/wiki/Block">block</a> without the adversary entirely controlling
the victims internet connection. It works by the adversary creating many
of their own fake nodes on different IP addresses which aggressively
announce themselves in an effort to attract more nodes to connect to
them, they also try to connect to as many other listening nodes as they
can. This high connectivity help the adversary to locate the source
newly-broadcasted transactions and blocks by tracking them as they
propagate through the
<a href="/wiki/Network">network</a>.<sup><a href="#cite_note-19">[19</a>]<a href="#cite_note-20">[20</a>]<a href="#cite_note-21">[21</a>]<a href="#cite_note-22">[22</a>]</sup>.
Some wallets periodically rebroadcast their unconfirmed transactions so
that they are more likely to propagate widely through the network and be
<a href="/wiki/Confirmation">mined</a>.</p>
</div>
<div class="paragraph">
<p>Some wallets are not <a href="/wiki/Full_node">full nodes</a> but are
lightweight nodes which function in a different way. They generally have
far worse privacy properties, but how badly depends on the details of
each wallet. Some <a href="/wiki/Lightweight_node">lightweight wallets</a> can
be connected only to your own <a href="/wiki/Full_node">full node</a>, and if
that is done then their privacy with respect to traffic analysis will be
improved to the level of a full node.</p>
</div>
</div>
<div class="sect4">
<h5 id="_custodial_wallets"><a class="anchor" href="#_custodial_wallets"></a><span id="Custodial_Wallets " class="mw-headline">Custodial Wallets</span></h5>
<div class="paragraph">
<p>Some bitcoin wallets are just front-ends that connects to a back-end
server run by some company. This kind of wallet has no privacy at all,
the operating company can see all the user&#8217;s addresses and all their
transactions, most of the time they&#8217;ll see the user&#8217;s IP address too.
Users should not use web wallets.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/Browser-based_wallet">Browser-based wallet</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_wallet_history_retrieval_from_third_party"><a class="anchor" href="#_wallet_history_retrieval_from_third_party"></a><span id="Wallet_history_retrieval_from_third-party " class="mw-headline">Wallet history retrieval from third-party</span></h5>
<div class="paragraph">
<p>All bitcoin wallets must somehow obtain information about their balance
and history, which may leak information about which
<a href="/wiki/Address">addresses</a> and <a href="/wiki/Transaction">transactions</a>
belong to them.</p>
</div>
<div class="paragraph">
<p><strong><span id="Blockchain_explorer_websites " class="mw-headline">Blockchain explorer websites</span></strong></p>
</div>
<div class="paragraph">
<p><a href="/wiki/Block_chain_browser">Blockchain explorer websites</a> are
commonly used. Some users even search for their
<a href="/wiki/Transaction">transaction</a> on those websites and refresh it
until it reaches 3 <a href="/wiki/Confirmation">confirmations</a>. This is very
bad for privacy as the website can easily link the user&#8217;s IP address to
their bitcoin transaction (unless <a href="/wiki/Tor">tor</a> is used), and the
queries to their website reveal that the
<a href="/wiki/Transaction">transaction</a> or <a href="/wiki/Address">address</a> is of
interest to somebody who has certain behavioural patterns.</p>
</div>
<div class="paragraph">
<p>To get information about your <a href="/wiki/Transaction">transactions</a> it is
much better to use your wallet software, not some website.</p>
</div>
<div class="paragraph">
<p><strong><span id="BIP_37 " class="mw-headline">BIP 37</span></strong></p>
</div>
<div class="paragraph">
<p>Many <a href="/wiki/Lightweight_node">lightweight wallets</a> use the
<a href="/wiki/BIP_0037">BIP37</a> standard, which has serious design flaws
leading to privacy leaks. Any wallet that uses
<a href="/wiki/BIP_0037">BIP37</a> provides no privacy at all and is equivalent
to sending all the wallets addresses to a random server. That server can
easily spy on the wallet. Lessons from the failure of BIP37 can be
useful when designing and understanding other privacy solutions,
especially with the point about data fusion of combining BIP37 bloom
filter leaks with blockchain transaction information leaks.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/BIP37_privacy_problems">BIP37 privacy problems</a></p>
</div>
<div class="paragraph">
<p><strong><span id="Public_Electrum_servers " class="mw-headline">Public Electrum servers</span></strong></p>
</div>
<div class="paragraph">
<p><a href="/wiki/Electrum">Electrum</a> is a popular software wallet which works
by connecting to special purpose servers. These servers receive hashes
of the bitcoin addresses in the wallet and reply with
<a href="/wiki/Transaction">transaction</a> information. The Electrum wallet is
fast and low-resource but by default it connects to these servers which
can easily spy on the user. Some other software aside from
<a href="/wiki/Electrum">Electrum</a> uses the public Electrum servers. As of
2019 it is a faster and better alternative for
<a href="/wiki/Lightweight_node">lightweight wallets</a> than BIP37.</p>
</div>
<div class="paragraph">
<p>Servers only learn the hashes of addresses rather than addresses
themselves, in practice they only know the actual address and associated
transactions if it&#8217;s been used on the blockchain at least once.</p>
</div>
<div class="paragraph">
<p>It is not very difficult to <a href="/wiki/Electrum#Server_software">run your
own Electrum server</a> and point your wallet to use only it. This restores
<a href="/wiki/Electrum">Electrum</a> to have the same privacy and security
properties as a <a href="/wiki/Full_node">full node</a> where nobody else can
see which addresses or transactions the wallet is interested in. Then
<a href="/wiki/Electrum">Electrum</a> becomes a <a href="/wiki/Full_node">full node</a>
wallet.</p>
</div>
</div>
<div class="sect4">
<h5 id="_communication_eavesdropping"><a class="anchor" href="#_communication_eavesdropping"></a><span id="Communication_eavesdropping " class="mw-headline">Communication eavesdropping</span></h5>
<div class="paragraph">
<p>A simple but effective privacy leak. Alice gives Bob one of her
<a href="/wiki/Address">addresses</a> to receive a payment, but the
communication has been eavesdropped by Eve who saw the
<a href="/wiki/Address">address</a> and now knows it belongs to Alice. The
solution is to encrypt addresses where appropriate or use another way of
somehow hiding them from an adversary as per the threat model.</p>
</div>
<div class="paragraph">
<p>Sometimes the eavesdropping can be very trivial, for example some forum
users publish a bitcoin donation address on their website, forum
signature, profile, twitter page, etc where it can be picked up by
search engines. In the example of the non-anonymous Chinese newspaper
buyer from the introduction, his address being publicly visible on his
forum signature was a crucial part of his deanonymization. The solution
here is to show each potential donator a new address, for example
<a href="/wiki/Receiving_donations_with_bitcoin#Improving_privacy_by_avoiding_address_re-use">by
setting up a web server to hand out unique addresses to each visitor</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_revealing_data_when_transacting_bitcoin"><a class="anchor" href="#_revealing_data_when_transacting_bitcoin"></a><span id="Revealing_data_when_transacting_bitcoin " class="mw-headline">Revealing data when transacting bitcoin</span></h5>
<div class="paragraph">
<p>Sometimes users may voluntarily reveal data about themselves, or be
required to by the entity they interact with. For example many exchanges
require users to undergo Anti-Money Laundering and Know-Your-Customer
(AML/KYC) checks, which requires users to reveal all kinds of invasive
personal information such as their real name, residence, occupation and
income. All this information is then linked with the bitcoin
<a href="/wiki/Address">addresses</a> and <a href="/wiki/Transaction">transactions</a>
that are later used.</p>
</div>
<div class="paragraph">
<p>When buying goods online with bitcoin a delivery mail address is needed.
This links the bitcoin transaction with the delivery address. The same
applies to the user&#8217;s IP address (unless privacy technology like
<a href="/wiki/Tor">Tor</a> is used).</p>
</div>
</div>
<div class="sect4">
<h5 id="_digital_forensics"><a class="anchor" href="#_digital_forensics"></a><span id="Digital_forensics " class="mw-headline">Digital forensics</span></h5>
<div class="paragraph">
<p>Wallet software usually stores information it needs to operate on the
disk of the computer it runs on. If an adversary has access to that disk
it can extract bitcoin <a href="/wiki/Address">addresses</a> and
<a href="/wiki/Transactions">transactions</a> which are known to be linked with
the owner of that disk. The same disk might contain other personal
information (such as a scan of an ID card). Digital forensics is one
reason why all good wallet software encrypts wallet files, although that
can be beaten if a weak encryption password is used.</p>
</div>
<div class="paragraph">
<p>For example if you have a bitcoin wallet installed on your PC and give
the computer to a repair shop to fix, then the repair shop operator
could find the wallet file and records of all your transactions. Other
examples might be if an old hard disk is thrown away. Other software
installed on the same computer (such as malware) can also read from disk
or RAM to spy on the bitcoin transactions made by the user.</p>
</div>
<div class="paragraph">
<p>For privacy don&#8217;t leave data on your computer available to others.
Exactly how depends on your threat model. Encryption and physical
protection are options, as is using special operating systems like
<a href="https://tails.boum.org/">Tails OS</a> which does not read or write from the
hard drive but only uses RAM, and then deletes all data on shutdown.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_methods_for_improving_privacy_non_blockchain"><a class="anchor" href="#_methods_for_improving_privacy_non_blockchain"></a><span id="Methods_for_improving_privacy_" class="28non-blockchain 29  mw-headline">Methods for improving privacy (non-blockchain)</span></h4>
<div class="sect4">
<h5 id="_obtaining_bitcoins_anonymously"><a class="anchor" href="#_obtaining_bitcoins_anonymously"></a><span id="Obtaining_bitcoins_anonymously " class="mw-headline">Obtaining bitcoins anonymously</span></h5>
<div class="paragraph">
<p>If the adversary has not linked your bitcoin address with your identity
then privacy is much easier. Blockchain spying methods like the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, detecting <a href="/wiki/Change">change</a> addresses and amount
correlation are not very effective on their own if there is no starting
point to link back to.</p>
</div>
<div class="paragraph">
<p>Many exchanges require users to undergo Anti-Money Laundering and
Know-Your-Customer (AML/KYC) checks, which requires users to reveal all
kinds of invasive personal information such as their real name,
residence, occupation and income. All this information is then linked
with the bitcoin <a href="/wiki/Address">addresses</a> and
<a href="/wiki/Transaction">transactions</a> that are later used.</p>
</div>
<div class="paragraph">
<p>Avoiding the privacy invasion of AML/KYC is probably the single most
important thing an individual can do to improve their privacy. It works
far better than any actual technology like
<a href="/wiki/CoinJoin">CoinJoin</a>. Indeed all the cryptography and privacy
tricks are irrelevant if all users only ever transact between AML/KYC
institutions<sup><a href="#cite_note-23">[23</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Cash_trades " class="mw-headline">Cash trades</span></strong></p>
</div>
<div class="paragraph">
<p>Physical cash is an anonymous medium of exchange, so using it is a way
to obtain bitcoin anonymously where no one except trading partners
exchange identifying data.</p>
</div>
<div class="paragraph">
<p>This section won&#8217;t list websites to find such meetups because the
information can go out of date, but try searching the web with "buy
bitcoin for cash &lt;your location&gt;". Note that some services still require
ID so that is worth checking. Some services require ID only for the
trader placing the advert. As of late-2018 there is at least one
<a href="/wiki/Bisq">decentralized exchange open source project</a> in
development which aims to facilitate this kind of trading without a
needing a centralized third party at all but instead using a
peer-to-peer network.</p>
</div>
<div class="paragraph">
<p><strong>Cash-in-person</strong> trades are an old and popular method. Two traders
arrange to meet up somewhere and the buyer hands over cash while the
seller makes a bitcoin transaction to the buyer. This is similar to
other internet phenomena like Craigslist which organize meetups for
exchange. <a href="/wiki/Secure_Trading#Use_an_Escrow_Service">Escrow can be
used</a> to improve safety or to avoid the need to wait for
<a href="/wiki/Confirmation">confirmations</a> at the meetup.</p>
</div>
<div class="paragraph">
<p><strong>Cash-by-mail</strong> works by having the buyer send physical cash through the
mail. <a href="/wiki/Secure_Trading#Use_an_Escrow_Service">Escrow is always
used</a> to prevent scamming. The buyer of bitcoins can be very anonymous
but the seller must reveal a mail address to the buyer. Cash-by-mail can
work over long distances but does depend on the postal service
infrastructure. Users should check with their local postal service if
there are any guidelines around sending cash-by-mail. Often the cash can
also be insured.</p>
</div>
<div class="paragraph">
<p><strong>Cash deposit</strong> is a method where the buyer deposits cash directly into
the seller&#8217;s bank account. Again
<a href="/wiki/Secure_Trading#Use_an_Escrow_Service">escrow is used</a>, and
again the buyer of bitcoins can be near-anonymous but the seller must
sign up with a bank or financial institution and share with them rather
invasive details about one&#8217;s identity and financial history. This method
relies on the personal banking infrastructure so works over long
distances.</p>
</div>
<div class="paragraph">
<p><strong>Cash dead drop</strong> is a rarely used method. It is similar to a
cash-in-person trade but the traders never meet up. The buyer chooses a
location to hide the cash in a public location, next the buyer sends a
message to the seller telling them the location, finally the seller
picks up the cash from the hidden location.
<a href="/wiki/Secure_Trading#Use_an_Escrow_Service">Escrow is a requirement</a>
to avoid scamming. This method is very anonymous for the buyer as the
seller won&#8217;t even learn their physical appearance, for the seller it is
slightly less anonymous as the buyer can stalk the location to watch the
seller collect the cash.</p>
</div>
<div class="paragraph">
<p><strong><span id="Cash_substitute " class="mw-headline">Cash substitute</span></strong></p>
</div>
<div class="paragraph">
<p>Cash substitutes like gift cards, mobile phone credits or prepaid debit
cards can often be bought from regular stores with cash and then traded
online for bitcoin.</p>
</div>
<div class="paragraph">
<p><strong><span id="Employment " class="mw-headline">Employment</span></strong></p>
</div>
<div class="paragraph">
<p>Bitcoins accepted as payment for work done can be anonymous if the
employer does not request much personal information. This may work well
in a freelancing or contracting setting. Although if your adversary is
your own employer then obviously this is not good privacy.</p>
</div>
<div class="paragraph">
<p><strong><span id="Mining " class="mw-headline">Mining</span></strong></p>
</div>
<div class="paragraph">
<p>Mining is the most anonymous way to obtain bitcoin. This applies to
solo-mining as <a href="/wiki/Pooled_mining">mining pools</a> generally know the
hasher&#8217;s IP address. Depending on the size of operation mining may use a
lot of electrical power which may attract suspicion. Also the
<a href="/wiki/ASIC">specialized mining hardware</a> may be difficult to get
hold of anonymously (although they wouldn&#8217;t be linked to the resulting
mined bitcoins).</p>
</div>
<div class="paragraph">
<p><strong><span id="Stealing " class="mw-headline">Stealing</span></strong></p>
</div>
<div class="paragraph">
<p>In theory another way of obtaining anonymous bitcoin is to steal
them.<sup><a href="#cite_note-24">[24</a>]</sup></p>
</div>
<div class="paragraph">
<p>There is at least one situation where this happened. In May 2015 a
hacker known as Phineas Fisher<sup><a href="#cite_note-25">[25</a>]</sup> hacked a
spyware company that was selling surveillance products to
dictators<sup><a href="#cite_note-26">[26</a>]</sup>. The hacker used bitcoin stolen from
other people to anonymously rent infrastructure for later attacks.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spending_bitcoins_anonymously"><a class="anchor" href="#_spending_bitcoins_anonymously"></a><span id="Spending_bitcoins_anonymously " class="mw-headline">Spending bitcoins anonymously</span></h5>
<div class="paragraph">
<p>If you give up your delivery address (which you&#8217;ll have to if you&#8217;re
buying physical goods online) then that will be a data leak. Obviously
this is unavoidable in many cases.</p>
</div>
</div>
<div class="sect4">
<h5 id="_wallet_history_synchronization"><a class="anchor" href="#_wallet_history_synchronization"></a><span id="Wallet_history_synchronization " class="mw-headline">Wallet history synchronization</span></h5>
<div class="paragraph">
<p>Bitcoin wallets must somehow obtain information about their balance and
history. As of late-2018 the most practical and private existing
solutions are to use a <a href="/wiki/Full_node">full node</a> wallet (which is
maximally private) and
<a href="/wiki/Client-side_block_filtering">client-side block filtering</a>
(which is very good).</p>
</div>
<div class="paragraph">
<p>One issue with these technologies is that they always costs more
resources (time, bandwidth, storage, etc) than non-private solutions
like web wallets and centralized <a href="/wiki/Electrum">Electrum</a> servers.
There are measurements indicating that very few people actually use
<a href="/wiki/BIP_0037">BIP37</a> because of how slow it
is<sup><a href="#cite_note-27">[27</a>]</sup>, so even
<a href="/wiki/Client-side_block_filtering">client-side block filtering</a> may
not be used very much.</p>
</div>
<div class="paragraph">
<p><strong><span id="Full_node " class="mw-headline">Full node</span></strong></p>
</div>
<div class="paragraph">
<p><a href="/wiki/Full_node">Full nodes</a> download the entire blockchain which
contains every on-chain <a href="/wiki/Transaction">transaction</a> that has
ever happened in bitcoin. So an adversary watching the user&#8217;s internet
connection <a href="/wiki/Full_node#Privacy">will not be able to learn</a> which
transactions or addresses the user is interested in. This is the best
solution to wallet history synchronization with privacy, but
unfortunately it costs a significant amount in time and bandwidth.</p>
</div>
<div class="paragraph">
<p><strong><span id="Private_information_retrieval " class="mw-headline">Private information retrieval</span></strong></p>
</div>
<div class="paragraph">
<p>In cryptography, a private information retrieval (PIR) protocol is a
protocol that allows a user to retrieve an item from a server in
possession of a database without revealing which item is retrieved. This
has been proposed as a way to private synchronize wallet history but as
PIR is so resource-intensive, users who don&#8217;t mind spending bandwidth
and time could just run a <a href="/wiki/Full_node">full node</a> instead.</p>
</div>
<div class="paragraph">
<p><strong><span id="Client-side_block_filtering " class="mw-headline">Client-side block filtering</span></strong></p>
</div>
<div class="paragraph">
<p><a href="/wiki/Client-side_block_filtering">Client-side block filtering</a>
works by having filters created that contains all the
<a href="/wiki/Address">addresses</a> for every
<a href="/wiki/Transaction">transaction</a> in a <a href="/wiki/Block">block</a>. The
filters can test whether an element is in the set; false positives are
possible but not false negatives. A lightweight wallet would download
all the filters for every block in the blockchain and check for matches
with its own addresses. <a href="/wiki/Block">Blocks</a> which contain matches
would be downloaded in full from the <a href="/wiki/Network">peer-to-peer
network</a>, and those blocks would be used to obtain the wallet&#8217;s history
and current balance.</p>
</div>
<div class="paragraph">
<p><strong><span id="Address_query_via_onion_routing " class="mw-headline">Address query via onion routing</span></strong></p>
</div>
<div class="paragraph">
<p>Wallet histories can be obtained from centralized servers (such as
<a href="/wiki/Electrum">Electrum</a> servers) but using a new Tor circuit for
each address. A closely-related idea is to connect together
<a href="/wiki/Electrum">Electrum</a> servers in an onion-routing
network<sup><a href="#cite_note-28">[28</a>]</sup>. When creating such a scheme, care
should be taken to avoid timing correlation linking the addresses
together, otherwise the server could use the fact that the addresses
were requested close to each other in time.</p>
</div>
</div>
<div class="sect4">
<h5 id="_countermeasures_to_traffic_analysis"><a class="anchor" href="#_countermeasures_to_traffic_analysis"></a><span id="Countermeasures_to_traffic_analysis " class="mw-headline">Countermeasures to traffic analysis</span></h5>
<div class="paragraph">
<p><a href="/wiki/Bitcoin_Core">Bitcoin Core</a> and its forks have countermeasures
against <a href="/wiki/Weaknesses#Sybil_attack">sybil attack</a> and eclipse
attacks. Eclipse attacks are sybil attacks where the adversary attempts
to control all the peers of its target and block or control access to
the rest of the network<sup><a href="#cite_note-29">[29</a>]</sup>. Such attacks have
been extensively studied in a 2015 paper
<a href="https://eprint.iacr.org/2015/263.pdf">Eclipse Attacks on Bitcoin’s
Peer-to-Peer Network</a> which has led to new code written for
<a href="/wiki/Bitcoin_Core">Bitcoin Core</a> for
mitigation.<sup><a href="#cite_note-30">[30</a>]<a href="#cite_note-31">[31</a>]<a href="#cite_note-32">[32</a>]<a href="#cite_note-33">[33</a>]<a href="#cite_note-34">[34</a>]</sup></p>
</div>
<div class="paragraph">
<p><a href="/wiki/Bitcoin_Core">Bitcoin Core</a> and its forks use an algorithm
known as trickling when relaying unconfirmed transactions, with the aim
of making it as difficult as possible for sybil attackers to find the
source IP address of a <a href="/wiki/Transaction">transaction</a>. For each
peer, the node keeps a list of transactions that it is going to
<a href="/wiki/Network#Messages">inv</a> to it. It sends
<a href="/wiki/Network#Messages">inv&#8217;s</a> for transactions periodically with a
random delay between each <a href="/wiki/Network#Messages">inv</a>. Transactions
are selected to go into the <a href="/wiki/Network#Messages">inv</a> message
somewhat randomly and according to some metrics involving fee rate. It
selects a limited number of transactions to
<a href="/wiki/Network#Messages">inv</a>. The algorithm creates the possibility
that a peered node may hear about an unconfirmed transaction from the
creator&#8217;s neighbours rather than the creator node
itself<sup><a href="#cite_note-35">[35</a>]<a href="#cite_note-36">[36</a>]<a href="#cite_note-37">[37</a>]<a href="#cite_note-38">[38</a>]</sup>.
However adversaries can still sometimes obtain privacy-relevant
information.</p>
</div>
<div class="paragraph">
<p>Encrypting messages between peers as in
<a href="https://github.com/bitcoin/bips/blob/master/bip-0151.mediawiki">BIP 151</a>
would make it harder for a passive attacker such as an ISP or Wifi
provider to see the exact messages sent and received by a bitcoin node.</p>
</div>
<div class="paragraph">
<p><strong><span id="Tor_and_tor_broadcasting " class="mw-headline">Tor and tor broadcasting</span></strong></p>
</div>
<div class="paragraph">
<p>If a connection-controlling adversary is a concern, then bitcoin can be
run entirely over <a href="/wiki/Tor">tor</a>. <a href="/wiki/Tor">Tor</a> is encrypted
and hides endpoints, so an ISP or Wifi providers won&#8217;t even know you&#8217;re
using bitcoin. The other connected bitcoin nodes won&#8217;t be able to see
your IP address as <a href="/wiki/Tor">tor</a> hides it.
<a href="/wiki/Bitcoin_Core">Bitcoin Core</a> and its forks have features to
make setting up and using <a href="/wiki/Tor">tor</a> easier. Some
<a href="/wiki/Lightweight_node">lightweight wallets</a> also run entirely over
<a href="/wiki/Tor">tor</a>.</p>
</div>
<div class="paragraph">
<p>Running entirely over <a href="/wiki/Tor">tor</a> has the downside that
synchronizing the node requires downloading the entire blockchain over
tor, which would be very slow. Downloading <a href="/wiki/Block">blocks</a> over
Tor only helps in the situation where you want to hide the fact that
bitcoin is even being used from the internet service
provider<sup><a href="#cite_note-39">[39</a>]</sup>. It is possible to download
<a href="/wiki/Blocks">blocks</a> and unconfirmed
<a href="/wiki/Transaction">transactions</a> over clearnet but broadcast your
own <a href="/wiki/Transaction">transactions</a> over <a href="/wiki/Tor">tor</a>,
allowing a fast clearnet connection to be used while still providing
privacy when broadcasting.</p>
</div>
<div class="paragraph">
<p><a href="/wiki/Bitcoin_Core">Bitcoin Core</a> being configured with the option
<code>walletbroadcast=0</code> will stop <a href="/wiki/Transaction">transactions</a>
belonging to the user from being broadcast and rebroadcast, allowing
them to be broadcast instead via <a href="/wiki/Tor">tor</a> or another
privacy-preserving method<sup><a href="#cite_note-40">[40</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Dandelion " class="mw-headline">Dandelion</span></strong></p>
</div>
<div class="paragraph">
<p>Dandelion is another technology for private transaction broadcasting.
The main idea is that transaction propagation proceeds in two phases:
first the "stem" phase, and then "fluff" phase. During the stem phase,
each node relays the transaction to a <em>single</em> peer. After a random
number of hops along the stem, the transaction enters the fluff phase,
which behaves just like ordinary transaction flooding/diffusion. Even
when an attacker can identify the location of the fluff phase, it is
much more difficult to identify the source of the
stem.<sup><a href="#cite_note-41">[41</a>]<a href="#cite_note-42">[42</a>]<a href="#cite_note-43">[43</a>]<a href="#cite_note-44">[44</a>]</sup></p>
</div>
<div class="paragraph">
<p><strong><span id="Interactive_peer_broadcasting " class="mw-headline">Interactive peer broadcasting</span></strong></p>
</div>
<div class="paragraph">
<p>Some privacy technologies like <a href="/wiki/CoinJoin">CoinJoin</a> and
<a href="/wiki/CoinSwap">CoinSwap</a> require interactivity between many bitcoin
entities. They can also be used to broadcast transactions with more
privacy, because peers in the privacy protocols can send each other
unconfirmed transactions using the already-existing protocol they use to
interact with each other.</p>
</div>
<div class="paragraph">
<p>For example, in <a href="/wiki/JoinMarket">JoinMarket</a> market takers can send
<a href="/wiki/Transaction">transactions</a> to market makers who will broadcast
them and so improve the taker&#8217;s privacy. This can be a more convenient
for the taker than setting up <a href="/wiki/Tor">Tor</a> for use with
<a href="#Tor_and_tor_broadcasting">tor broadcasting</a>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Receiving_bitcoin_data_over_satellite " class="mw-headline">Receiving bitcoin data over satellite</span></strong></p>
</div>
<div class="paragraph">
<p>At least one bitcoin company offers a satellite bitcoin
service<sup><a href="#cite_note-45">[45</a>]</sup>. This is a free service where
satellites broadcast the bitcoin blockchain to nearly anywhere in the
world. If users set up a dish antenna pointing at a satellite in space,
then they can receive bitcoin blocks needed to run a
<a href="/wiki/Full_node">full node</a>. As the satellite setups are
receive-only nobody can detect that the user is even running bitcoin,
and certainly not which <a href="/wiki/Address">addresses</a> or
<a href="/wiki/Transaction">transactions</a> belong to them.</p>
</div>
<div class="paragraph">
<p>As of 2019 the company offers a paid-for API which allows broadcasting
any data to anywhere in the world via satellite, which seems to be how
they make their money. But it appears the base service of broadcasting
the blockchain will always be free.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="https://blockstream.com/satellite/" class="bare">https://blockstream.com/satellite/</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_methods_for_improving_privacy_blockchain"><a class="anchor" href="#_methods_for_improving_privacy_blockchain"></a><span id="Methods_for_improving_privacy_" class="28blockchain 29  mw-headline">Methods for improving privacy (blockchain)</span></h4>
<div class="paragraph">
<p>This section describes different techniques for improving the privacy of
<a href="/wiki/Transaction">transactions</a> related to the permanent record of
transactions on the blockchain. Some techniques are trivial and are
included in all good bitcoin wallets. Others have been implemented in
some open source projects or services, which may use more than one
technique at a time. Other techniques have yet to be been implemented.
Many of these techniques focus on breaking different heuristics and
assumptions about the blockchain, so they work best when combined
together.</p>
</div>
<div class="sect4">
<h5 id="_avoiding_address_reuse"><a class="anchor" href="#_avoiding_address_reuse"></a><span id="Avoiding_address_reuse " class="mw-headline">Avoiding <a href="/wiki/Address_reuse">address reuse</a></span></h5>
<div class="paragraph">
<p><a href="/wiki/Address">Addresses</a> being used more than once is very damaging
to privacy because that links together more blockchain
<a href="/wiki/Transaction">transactions</a> with proof that they were created
by the same entity. The most private and secure way to use bitcoin is to
send a brand new address to each person who pays you. After the received
coins have been spent the address should never be used again. Also, a
brand new bitcoin address should be demanded when sending bitcoin. All
good bitcoin wallets have a user interface which discourages
<a href="/wiki/Address_reuse">address reuse</a>.</p>
</div>
<div class="paragraph">
<p>It has been argued that the phrase "bitcoin address" was a bad name for
this object because it implies it can be reused like an email address. A
better name would be something like "bitcoin invoice".</p>
</div>
<div class="paragraph">
<p>Bitcoin isn&#8217;t anonymous but pseudonymous, and the pseudonyms are bitcoin
addresses. Avoiding <a href="/wiki/Address_reuse">address reuse</a> is like
throwing away a pseudonym after its been used.</p>
</div>
<div class="paragraph">
<p><a href="/wiki/Bitcoin_Core">Bitcoin Core</a> 0.17 includes an update to improve
the privacy situation with link:/wiki/Address_reuse<sup class="address
reuse"><a href="#cite_note-46">[46</a>]</sup>. When an address is paid multiple times
the coins from those separate payments can be spent separately which
hurts privacy due to linking otherwise separate addresses. A
-avoidpartialspends flag has been added (default=false), if enabled the
wallet will always spend existing UTXO to the same address together even
if it results in higher fees. If someone were to send coins to an
address after it was used, those coins will still be included in future
coin selections.</p>
</div>
<div class="paragraph">
<p><strong><span id="Avoiding_forced_address_reuse " class="mw-headline">Avoiding <a href="#Forced_address_reuse">forced address reuse</a></span></strong></p>
</div>
<div class="paragraph">
<p>The easiest way to avoid the privacy loss from
<a href="#Forced_address_reuse">forced address reuse</a> to not spend coins that
have landed on an already-used and empty addresses. Usually the payments
are of a very low value so no relevant money is lost by simply not
spending the coins.</p>
</div>
<div class="paragraph">
<p>Another option is to spend the coins individual directly to miner fees.
Here are instructions for how to do this with Electrum or Bitcoin Core:
<a href="https://gist.github.com/ncstdc/90fe6209a0b3ae815a6eaa2aef53524c" class="bare">https://gist.github.com/ncstdc/90fe6209a0b3ae815a6eaa2aef53524c</a></p>
</div>
<div class="paragraph">
<p>Dust-b-gone is an old project<sup><a href="#cite_note-47">[47</a>]</sup> which aimed to
safely spend forced-address-reuse payments. It signs all the UTXOs
together with other people&#8217;s and spends them to miner fees. The
<a href="/wiki/Transaction">transactions</a> use rare
<a href="/wiki/OP_CHECKSIG">OP_CHECKSIG</a> sighash flags so they can be easily
eliminated from the adversary&#8217;s analysis, but at least the forced
address reuse payments don&#8217;t lead to further privacy loss.</p>
</div>
</div>
<div class="sect4">
<h5 id="_coin_control"><a class="anchor" href="#_coin_control"></a><span id="Coin_control " class="mw-headline">Coin control</span></h5>
<div class="paragraph">
<p>Coin control is a feature of some bitcoin wallets that allow the user to
choose which <a href="/wiki/Coin_analogy">coins</a> are to be spent as inputs in
an outgoing <a href="/wiki/Transaction">transaction</a>. Coin control is aimed
to avoid as much as possible <a href="/wiki/Transaction">transactions</a> where
privacy leaks are caused by amounts, change addresses, the transaction
graph and the
link:/wiki/Common-input-ownership_heuristic<sup class="common-input-ownership
heuristic"><a href="#cite_note-48">[48</a>]<a href="#cite_note-49">[49</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>An example for avoiding a transaction graph privacy leak with coin
control: A user is paid bitcoin for their employment, but also sometimes
buys bitcoin with cash. The user wants to donate some money to a
charitable cause they feel passionately about, but doesn&#8217;t want their
employer to know. The charity also has a publicly-visible donation
address which can been found by web search engines. If the user paid to
the charity without coin control, his wallet may use
<a href="/wiki/Coin_analogy">coins</a> that came from the employer, which would
allow the employer to figure out which charity the user donated to. By
using coin control, the user can make sure that only
<a href="/wiki/Coin_analogy">coins</a> that were obtained anonymously with cash
were sent to the charity. This avoids the employer ever knowing that the
user financially supports this charity.</p>
</div>
</div>
<div class="sect4">
<h5 id="_multiple_transactions"><a class="anchor" href="#_multiple_transactions"></a><span id="Multiple_transactions " class="mw-headline">Multiple transactions</span></h5>
<div class="paragraph">
<p>Paying someone with more than one on-chain
<a href="/wiki/Transaction">transaction</a> can greatly reduce the power of
amount-based privacy attacks such as amount correlation and round
numbers. For example, if the user wants to pay 5 BTC to somebody and
they don&#8217;t want the 5 BTC value to be easily searched for, then they can
send two transactions for the value of 2 BTC and 3 BTC which together
add up to 5 BTC.</p>
</div>
<div class="paragraph">
<p>Privacy-conscious merchants and services should provide customers with
more than one bitcoin <a href="/wiki/Address">address</a> that can be paid.</p>
</div>
</div>
<div class="sect4">
<h5 id="_change_avoidance"><a class="anchor" href="#_change_avoidance"></a><span id="Change_avoidance " class="mw-headline">Change avoidance</span></h5>
<div class="paragraph">
<p>Change avoidance is where transaction inputs and outputs are carefully
chosen to not require a change output at all. Not having a change output
is excellent for privacy, as it breaks change detection heuristics.</p>
</div>
<div class="paragraph">
<p>Change avoidance is practical for high-volume bitcoin services, which
typically have a large number of inputs available to spend and a large
number of required outputs for each of their customers that they&#8217;re
sending money to. This kind of change avoidance also lowers
<a href="/wiki/Miner_fees">miner fees</a> because the transactions uses less
block space overall.</p>
</div>
<div class="paragraph">
<p>Main article:
<a href="/wiki/Techniques_to_reduce_transaction_fees#Change_avoidance">Techniques_to_reduce_transaction_fees#Change_avoidance</a></p>
</div>
<div class="paragraph">
<p>Another way to avoid creating a change output is in cases where the
exact amount isn&#8217;t important and an entire UTXO or group of UTXOs can be
fully-spent. An example is when opening a
<a href="/wiki/Lightning_Network">Lightning Network</a>
<a href="/wiki/Payment_channel">payment channel</a>. Another example would be
when sweeping funds into a <a href="/wiki/Cold_storage">cold storage</a> wallet
where the exact amount may not matter.</p>
</div>
</div>
<div class="sect4">
<h5 id="_multiple_change_outputs"><a class="anchor" href="#_multiple_change_outputs"></a><span id="Multiple_change_outputs " class="mw-headline">Multiple change outputs</span></h5>
<div class="paragraph">
<p>If <a href="#Change_avoidance">change avoidance</a> is not an option then
creating more than one change output can improve privacy. This also
breaks change detection heuristics which usually assume there is only a
single change output. As this method uses more block space than usual,
change avoidance is preferable.</p>
</div>
</div>
<div class="sect4">
<h5 id="_script_privacy_improvements"><a class="anchor" href="#_script_privacy_improvements"></a><span id="Script_privacy_improvements " class="mw-headline">Script privacy improvements</span></h5>
<div class="paragraph">
<p>The <a href="/wiki/Script">script</a> of each bitcoin output leaks
privacy-relevant information. For example as of late-2018 around 70% of
bitcoin addresses are single-signature and 30% are
link:/wiki/Multisignature<sup class="multisignature"><a href="#cite_note-50">[50</a>]</sup>.
Much research has gone into improving the privacy of scripts by finding
ways to make several different script kinds look the same. As well as
improving privacy, these ideas also improve the scalability of the
system by reducing storage and bandwidth requirements.</p>
</div>
<div class="paragraph">
<p><strong>ECDSA-2P</strong> is a cryptographic scheme which allows the creation of a
2-of-2 <a href="/wiki/Multisignature">multisignature</a> scheme but which
results in a regular single-sig
<a href="/wiki/Elliptic_Curve_Digital_Signature_Algorithm">ECDSA</a> signature
when included on the blockchain<sup><a href="#cite_note-51">[51</a>]</sup>. It doesn&#8217;t
need any consensus changes because bitcoin already uses
<a href="/wiki/Elliptic_Curve_Digital_Signature_Algorithm">ECDSA</a>.</p>
</div>
<div class="paragraph">
<p><strong><a href="/wiki/Schnorr">Schnorr</a></strong> is a digital signature scheme which has
many benefits over the status-quo
link:/wiki/Elliptic_Curve_Digital_Signature_Algorithm<sup class="ECDSA"><a href="#cite_note-52">[52</a>]<a href="#cite_note-53">[53</a>]</sup>.
One side effect is that any N-of-N<sup><a href="#cite_note-54">[54</a>]</sup> and M-of-N
<a href="/wiki/Multisignature">multisignature</a> can be easily made to look
like a single-sig when included on the blockchain. Adding
<a href="/wiki/Schnorr">Schnorr</a> to bitcoin requires a
<a href="/wiki/Softfork">Softfork</a> consensus change. As of 2019 a design for
the signature scheme has been proposed<sup><a href="#cite_note-55">[55</a>]</sup>. The
required <a href="/wiki/Softfork">softfork</a> consensus change is still in the
design stage as of early-2019.</p>
</div>
<div class="paragraph">
<p><strong><a href="/w/index.php?title=Scriptless_scripts&amp;action=edit&amp;redlink=1">Scriptless
scripts</a></strong> are a set of cryptographic protocols which provide a way of
replicating the logic of <a href="/wiki/Script">script</a> without actually
having the script conditions visible, which increases privacy and
scalability by removing information from the
blockchain<sup><a href="#cite_note-56">[56</a>]<a href="#cite_note-57">[57</a>]<a href="#cite_note-58">[58</a>]<a href="#cite_note-59">[59</a>]</sup>.
This is generally aimed at protocols involving
<a href="/wiki/Hash_Time_Locked_Contracts">Hash Time Locked Contracts</a> such
as <a href="/wiki/Lightning_Network">Lightning Network</a> and
<a href="/wiki/CoinSwap">CoinSwap</a>.</p>
</div>
<div class="paragraph">
<p>With scriptless scripts, nearly the only thing visible is the public
keys and signatures. More than that, in multi-party settings, there will
be a single public key and a single signature for all the actors.
Everything looks the same-- <a href="/wiki/Lightning_Network">lightning</a>
<a href="/wiki/Payment_channels">payment channels</a> would look the same as
single-sig payments, escrows, <a href="/wiki/Atomic_swap">atomic swaps</a>, or
sidechain federation pegs. Pretty much anything you think about that
people are doing on bitcoin in 2019, can be made to look essentially the
same<sup><a href="#cite_note-60">[60</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong>MAST</strong> is short for Merkelized Abstract Syntax Tree, which is a scheme
for hiding unexecuted branches of a <a href="/wiki/Script">script</a> contract.
It improves privacy and scalability by removing information from the
blockchain<sup><a href="#cite_note-61">[61</a>]<a href="#cite_note-62">[62</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong>Taproot</strong> is a way to combine Schnorr signatures with
MAST<sup><a href="#cite_note-63">[63</a>]</sup>. The Schnorr signature can be used to
spend the coin, but also a MAST tree can be revealed only when the user
wants to use it. The schnorr signature can be any N-of-N or use any
scriptless script contract. The consequence of taproot is a much larger
anonymity set for interesting smart contracts, as any contract such as
<a href="/wiki/Lightning_Network">Lightning Network</a>,
<a href="/wiki/CoinSwap">CoinSwap</a>,
<a href="/wiki/Multisignature">multisignature</a>, etc would appear
indistinguishable from regular single-signature on-chain transaction.</p>
</div>
<div class="paragraph">
<p>The taproot scheme is so useful because it is almost always the case
that interesting scripts have a logical top level branch which allows
satisfaction of the contract with nothing other than a signature by all
parties. Other branches would only be used where some participant is
failing to cooperate.</p>
</div>
<div class="paragraph">
<p><strong>Graftroot</strong> is a smart contract scheme similar to taproot. It allows
users to include other possible <a href="/wiki/Script">scripts</a> for spending
the coin but with less resources used even than taproot. The tradeoff is
that interactivity is required between the
participants<sup><a href="#cite_note-64">[64</a>]<a href="#cite_note-65">[65</a>]<a href="#cite_note-66">[66</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong><a href="/wiki/NLockTime">nLockTime</a></strong> is a field in the serialized
<a href="/wiki/Transaction">transaction</a> format. It can be used in certain
situations to create a more private <a href="/wiki/Timelock">timelock</a> which
avoids using <a href="/wiki/Script">script</a> opcodes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ecdh_addresses"><a class="anchor" href="#_ecdh_addresses"></a><span id="ECDH_addresses " class="mw-headline">ECDH addresses</span></h5>
<div class="paragraph">
<p><a href="/wiki/ECDH_address">ECDH addresses</a> can be used to improve privacy
by helping avoid <a href="/wiki/Address_reuse">address reuse</a>. For example, a
user can publish a <a href="/wiki/ECDH_address">ECDH address</a> as a
<a href="/wiki/Receiving_donations_with_bitcoin">donation address</a> which is
usable by people who want to donate. An adversary can see the ECDH
donation address but won&#8217;t be able to easily find any
<a href="/wiki/Transaction">transactions</a> spending to and from it.</p>
</div>
<div class="paragraph">
<p>However <a href="/wiki/ECDH_address">ECDH addresses</a> do not solve all privacy
problems as they are still vulnerable to
<a href="/wiki/Mystery_shopper_payments">mystery shopper payments</a>; an
adversary can donate some bitcoins and watch on the blockchain to see
where they go afterwards, using heuristics like the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> to obtain more information such as donation volume and final
destination of funds.</p>
</div>
<div class="paragraph">
<p>ECDH addresses have <a href="/wiki/ECDH_address">some practicality issues</a>
and are very closely equivalent to
<a href="/wiki/Receiving_donations_with_bitcoin#Improving_privacy_by_avoiding_address_re-use">running
a http website which hands out bitcoin addresses to anybody who wants to
donate</a> except without an added step of interactivity. It is therefore
unclear whether ECDH are useful outside the use-case of non-interactive
donations or a self-contained application which sends money to one
destination without any interactivity.</p>
</div>
</div>
<div class="sect4">
<h5 id="_centralized_mixers"><a class="anchor" href="#_centralized_mixers"></a><span id="Centralized_mixers " class="mw-headline">Centralized mixers</span></h5>
<div class="paragraph">
<p>This is an old method for breaking the
<a href="#Transaction_graph">transaction graph</a>. Also called "tumblers" or
"washers". A user would send bitcoins to a
<a href="/wiki/Mixing_service">mixing service</a> and the service would send
different bitcoins back to the user, minus a fee. In theory an adversary
observing the blockchain would be unable to link the incoming and
outgoing <a href="/wiki/Transaction">transactions</a>.</p>
</div>
<div class="paragraph">
<p>There are several downsides to this. The mixer it must be trusted to
keep secret the linkage between the incoming and outgoing transactions.
Also the mixer must be trusted not to steal coins. This risk of stealing
creates reputation effects; older and more established mixers will have
a better reputation and will be able to charge fees far above the
marginal cost of mixing coins. Also as there is no way to sell
reputation, the ecosystem of mixers will be filled with occasional exit
scams.</p>
</div>
<div class="paragraph">
<p>There is a better alternative to mixers which has essentially the same
privacy and custody risks. A user could deposit and then withdraw coins
from any regular bitcoin website that has a hot wallet. As long as the
bitcoin service doesn&#8217;t require any other information from the user, it
has the same privacy and custody aspects as a centralized mixer and is
also much cheaper. Examples of suitable bitcoin services are bitcoin
casinos, bitcoin poker websites, tipping websites, altcoin exchanges or
online marketplaces<sup><a href="#cite_note-67">[67</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>The problem of the service having full knowledge of the transactions
could be remedied by cascading several services together. A user who
wants to avoid tracking by passive observers of the blockchain could
first send coins to a bitcoin casino, from them withdraw and send
directly to an altcoin exchange, and so on until the user is happy with
the privacy gained.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/Mixing_service">Mixing service</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_coinjoin"><a class="anchor" href="#_coinjoin"></a><span id="CoinJoin " class="mw-headline">CoinJoin</span></h5>
<div class="paragraph">
<p><a href="/wiki/CoinJoin">CoinJoin</a> is a special kind of bitcoin transaction
where multiple people or entities cooperate to create a single
transaction involving all their inputs. It has the effect of breaking
the <a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> and it makes use of the
<a href="/wiki/Coin_analogy#Fungibility">inherent fungibility of bitcoin
within transactions</a>. The <a href="/wiki/CoinJoin">CoinJoin</a> technique has
been possible since the very start of bitcoin and cannot be blocked
except in the ways that any other bitcoin
<a href="/wiki/Transaction">transactions</a> can be blocked. Just by looking at
a transaction it is not possible to tell for sure whether it is a
coinjoin. CoinJoins are non-custodial as they can be done without any
party involved in a coinjoin being able to steal anybody else&#8217;s
bitcoins<sup><a href="#cite_note-68">[68</a>]</sup>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Equal-output_CoinJoin_2 " class="mw-headline">Equal-output CoinJoin</span></strong></p>
</div>
<div class="paragraph">
<p>Say this transaction is a <a href="/wiki/CoinJoin">CoinJoin</a>, meaning that
the 2 BTC and 3 BTC inputs were actually owned by different entities.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>2 btc --&gt; 3 btc
3 btc     2 btc</pre>
</div>
</div>
<div class="paragraph">
<p>This transaction breaks the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, because its inputs are not all owned by the same person but
it is still easy to tell where the bitcoins of each input ended up. By
looking at the amounts (and assuming that the two entities do not pay
each other) it is obvious that the 2 BTC input ends up in the 2 BTC
output, and the same for the 3 BTC. To really improve privacy you need
<a href="/wiki/CoinJoin">CoinJoin</a> transaction that have a more than one
equal-sized output:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>2 btc --&gt; 2 btc
3 btc     2 btc
          1 btc</pre>
</div>
</div>
<div class="paragraph">
<p>In this <a href="/wiki/Transaction">transaction</a> the two outputs of value 2
BTC cannot be linked to the inputs. They could have come from either
input. This is the crux of how <a href="/wiki/CoinJoin">CoinJoin</a> can be used
to improve privacy, not so much breaking the transaction graph rather
fusing it together. Note that the 1 BTC output has not gained much
privacy, as it is easy to link it with the 3 BTC input. The privacy gain
of these CoinJoins is compounded when the they are repeated several
times.</p>
</div>
<div class="paragraph">
<p>As of late-2018 <a href="/wiki/CoinJoin">CoinJoin</a> is the only decentralized
bitcoin privacy method that has been deployed. Examples of (likely)
<a href="/wiki/CoinJoin">CoinJoin</a> transactions IDs on bitcoin&#8217;s blockchain
are <code>402d3e1df685d1fdf82f36b220079c1bf44db227df2d676625ebcbee3f6cb22a</code>
and
<code>85378815f6ee170aa8c26694ee2df42b99cff7fa9357f073c1192fff1f540238</code>.
Note that these coinjoins involve more than two people, so each
individual user involved cannot know the true connection between inputs
and outputs (unless they collude).</p>
</div>
<div class="paragraph">
<p><strong><span id="PayJoin " class="mw-headline">PayJoin</span></strong></p>
</div>
<div class="paragraph">
<p><em>Main article: <a href="/wiki/PayJoin">PayJoin</a></em></p>
</div>
<div class="paragraph">
<p>The type of <a href="/wiki/CoinJoin">CoinJoin</a> discussed in the previous
section can be easily identified as such by checking for the multiple
outputs with the same value. It&#8217;s important to note that such
identification is always deniable, because somebody could make fake
<a href="/wiki/CoinJoin">CoinJoins</a> that have the same structure as a
coinjoin transaction but are made by a single person.</p>
</div>
<div class="paragraph">
<p>PayJoin (also called pay-to-end-point or
P2EP)<sup><a href="#cite_note-69">[69</a>]<a href="#cite_note-70">[70</a>]<a href="#cite_note-71">[71</a>]</sup>
is a special type of <a href="/wiki/CoinJoin">CoinJoin</a> between two parties
where one party pays the other. The <a href="/wiki/Transaction">transaction</a>
then doesn&#8217;t have the distinctive multiple outputs with the same value,
and so is not obviously visible as an equal-output
<a href="/wiki/CoinJoin">CoinJoin</a>. Consider this transaction:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>2 btc --&gt; 3 btc
5 btc     4 btc</pre>
</div>
</div>
<div class="paragraph">
<p>It could be interpreted as a simple transaction paying to somewhere with
leftover change (ignore for now the question of which output is payment
and which is <a href="/wiki/Change">change</a>). Another way to interpret this
transaction is that the 2 BTC input is owned by a merchant and 5 BTC is
owned by their customer, and that this transaction involves the customer
paying 1 BTC to the merchant. There is no way to tell which of these two
interpretations is correct. The result is a coinjoin transaction that
breaks the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> and improves privacy, but is also undetectable and
indistinguishable from any regular bitcoin transaction.</p>
</div>
<div class="paragraph">
<p>If PayJoin <a href="/wiki/Transaction">transactions</a> became even moderately
used then it would make the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> be completely flawed in practice. As they are undetectable we
wouldn&#8217;t even know whether they are being used today. As
<a href="/wiki/Transaction_surveillance_company">transaction surveillance
companies</a> mostly depend on that heuristic, as of 2019 there is great
excitement about the PayJoin idea<sup><a href="#cite_note-72">[72</a>]</sup>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_coinswap"><a class="anchor" href="#_coinswap"></a><span id="CoinSwap " class="mw-headline">CoinSwap</span></h5>
<div class="paragraph">
<p><em>Main article: <a href="/wiki/CoinSwap">CoinSwap</a></em></p>
</div>
<div class="paragraph">
<p><strong>CoinSwap</strong> is a non-custodial privacy technique for bitcoin based on the
idea of link:/wiki/Atomic_swap<sup class="atomic swaps"><a href="#cite_note-73">[73</a>]</sup>.
If Alice and Bob want to do a coinswap; then it can be understood as
Alice exchanging her bitcoin for the same amount (minus fees) of Bob&#8217;s
bitcoins, but done with <a href="/wiki/Contracts">bitcoin smart contracts</a> to
eliminate the possibility of cheating by either side.</p>
</div>
<div class="paragraph">
<p><a href="/wiki/CoinSwap">CoinSwaps</a> break the transaction graph between the
sent and received bitcoins. On the <a href="/wiki/Block_chain">block chain</a>
it looks like two sets of completely disconnected transactions:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Alice's Address ---&gt; escrow address 1 ---&gt; Bob's Address
Bob's Address   ---&gt; escrow address 2 ---&gt; Alice's Address</pre>
</div>
</div>
<div class="paragraph">
<p>Obviously Alice and Bob generate new <a href="/wiki/Address">addresses</a> each
to avoid the privacy loss due to <a href="/wiki/Address_reuse">address
reuse</a>.</p>
</div>
<div class="paragraph">
<p>It is possible to have CoinSwaps that are completely indistinguishable
from any other transaction on the blockchain. They could be said to
allow bitcoins to teleport undetectably to anywhere else on the
blockchain. Non-CoinSwap transactions would benefit because a
large-scale analyst of the blockchain like a
<a href="/wiki/Transaction_surveillance_company">transaction surveillance
company</a> could never be sure that ordinary transactions are not actually
<a href="/wiki/CoinSwap">CoinSwaps</a>. They also do not require much block
space compared to the amount of privacy they provide.</p>
</div>
<div class="paragraph">
<p>CoinSwaps require a lot of interaction between the involved parties,
which can make this kind of system tricky to design while avoiding
denial-of-service attacks. They also have a liveness requirement and
non-censorship requirement, meaning that the entities taking part must
always be able to freely access the bitcoin network; If the internet was
down for days or weeks then half-completed CoinSwaps could end with one
side having their money stolen.</p>
</div>
<div class="paragraph">
<p>As of May 2020, no CoinSwap implementation has been
deployed<sup><a href="#cite_note-74">[74</a>]<a href="#cite_note-75">[75</a>]</sup>, but in June
2020, the <a href="https://en.wikipedia.org/wiki/Human_Rights_Foundation">Human
Rights Foundation</a> (a New York-based nonprofit that promotes and
protects human rights globally) granted $50,000 to
<a href="https://en.bitcoin.it/wiki/User:Belcher">Chris Belcher</a> (one of the main
contributors to this very page) to work on the
project.<sup><a href="#cite_note-76">[76</a>]</sup></p>
</div>
</div>
<div class="sect4">
<h5 id="_coinjoinxt"><a class="anchor" href="#_coinjoinxt"></a><span id="CoinJoinXT " class="mw-headline">CoinJoinXT</span></h5>
<div class="paragraph">
<p>CoinJoinXT is non-custodial privacy technique which is closely related
to link:/wiki/CoinJoin<sup class="CoinJoin"><a href="#cite_note-77">[77</a>]</sup>. It allows
for any number of entities to between them create a so-called <em>proposed
transaction graph</em> (PTG) which is a list of connected transactions. In
the PTG the bitcoins belonging to the entities are sent to and fro in
all the transactions, but at the end of the PTG they are all returned to
their rightful owners. The system is set up so that the process of the
PTG being mined is atomic, so either the entire PTG is
<a href="/wiki/Confirmation">confirmed</a> on the blockchain or none of it is,
this means none of the participating entities can steal from each other.</p>
</div>
<div class="paragraph">
<p>The <em>proposed transaction graph</em> has the freedom to be any list of
transactions that obfuscate the transaction graph. For best results the
PTG would perfectly mimic the natural transaction graph due to normal
economic activity in bitcoin, and so an adversary would not know where
the PTG started or ended, resulting in a massive privacy gain.</p>
</div>
<div class="paragraph">
<p>Like <a href="/wiki/CoinJoin">CoinJoin</a>, CoinJoinXT is easy to make
DOS-resistant and doesn&#8217;t require a prohibitive number of interaction
steps. Unlike <a href="/wiki/CoinSwap">CoinSwap</a> there is no liveness or
non-censorship requirement so funds are secure even if bitcoin is under
temporary censorship. However CoinJoinXT uses a lot of block space
compared the privacy gain. And CoinJoinXT requires a malleability fix so
all the transactions in the PTG have to be
<a href="/wiki/Segregated_Witness">segwit</a>-only. As of 2019 only around 40%
of transactions are segwit, so an observer of the blockchain could
easily eliminate non-PTG transactions by checking whether they are
legacy or segwit.</p>
</div>
</div>
<div class="sect4">
<h5 id="_tumblebit"><a class="anchor" href="#_tumblebit"></a><span id="TumbleBit " class="mw-headline">TumbleBit</span></h5>
<div class="paragraph">
<p><a href="/wiki/TumbleBit">TumbleBit</a> is privacy technology which is
non-custodial and where the coordinating server cannot tell the true
linkage between input and output. This is achieved by a cryptographic
construct where the server facilitates a private exchange of digital
signatures. The protocol is very interesting to any privacy and bitcoin
enthusiast.</p>
</div>
<div class="paragraph">
<p>From the point of view of an observer of the blockchain, TumbleBit
transactions appear as two transactions with many (800 in the author&#8217;s
example) outputs and all transaction outputs must be of the same amount.</p>
</div>
</div>
<div class="sect4">
<h5 id="_off_chain_transactions"><a class="anchor" href="#_off_chain_transactions"></a><span id="Off-chain_transactions " class="mw-headline">Off-chain transactions</span></h5>
<div class="paragraph">
<p>Off-chain transactions refer to any technology which allows bitcoin
transactions on a layer above the blockchain. Bitcoin payments done
off-chain are not broadcast to every node in the network and are not
mined and stored forever on a public blockchain, this automatically
improves privacy because much less information is visible to most
adversaries. With <a href="/wiki/Off-Chain_Transactions">Off-Chain
Transactions</a> there are no public addresses, no address clusters, no
public transactions, no transaction amounts or any other
privacy-relevant attacks that happen with on-chain transactions.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/Off-Chain_Transactions">Off-Chain Transactions</a></p>
</div>
<div class="paragraph">
<p><strong><a href="/wiki/Lightning_Network">Lightning Network</a></strong> is a huge topic in
bitcoin privacy so it is <a href="#Lightning_Network">discussed in its own
section</a>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Blinded_bearer_certificates " class="mw-headline">Blinded bearer certificates</span></strong></p>
</div>
<div class="paragraph">
<p>This is another way of doing <a href="/wiki/Off-Chain_Transactions">Off-Chain
Transactions</a> which is based on blind signatures. The payments through
such a system would be very very private. It has been known about since
1983. But the system is custodial so as the issuing server is a central
point of failure which can steal all the money. However the concept may
still be useful in certain situations where Lightning is not, for
example blinded bearer certificates support payments where the receiver
is offline.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/Blinded_bearer_certificates">Blinded bearer
certificates</a></p>
</div>
<div class="paragraph">
<p><strong><span id="Sidechains " class="mw-headline">Sidechains</span></strong></p>
</div>
<div class="paragraph">
<p><a href="/wiki/Sidechain">Sidechains</a> are when another blockchain is created
which uses bitcoins as its currency unit. Bitcoins can be moved from the
main bitcoin blockchain onto the sidechain which allows them to transact
following different consensus rules. Sidechains can have different and
better privacy properties than the regular bitcoin blockchain.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/Sidechain">Sidechain</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_confidential_transactions"><a class="anchor" href="#_confidential_transactions"></a><span id="Confidential_transactions " class="mw-headline">Confidential transactions</span></h5>
<div class="paragraph">
<p><em>Main article: <a href="/wiki/Confidential_transactions">Confidential
transactions</a></em></p>
</div>
<div class="paragraph">
<p><a href="/wiki/Confidential_transactions">Confidential transactions</a> (CT) is
a cryptographic protocol which results in the amount value of a
transaction being encrypted. The encryption is special because it is
still possible to verify that no bitcoins can been created or destroyed
within a <a href="/wiki/Transaction">transaction</a> but without revealing the
exact transaction amounts. Confidential transactions requires a
<a href="/wiki/Softfork">softfork</a> consensus change to be added to bitcoin,
although they could be added to a <a href="/wiki/Sidechain">sidechain</a> too.</p>
</div>
</div>
<div class="sect4">
<h5 id="_discussion"><a class="anchor" href="#_discussion"></a><span id="Discussion " class="mw-headline">Discussion</span></h5>
<div class="paragraph">
<p><strong><span id="Privacy_vs_scalability " class="mw-headline">Privacy vs scalability</span></strong></p>
</div>
<div class="paragraph">
<p>Many of the previously-mentioned privacy technologies work by adding
extra data to the bitcoin blockchain which is used to hide
privacy-relevant information. This has the side-effect of degrading the
scalability of bitcoin by adding more data which must be handled by
system. This harms privacy because <a href="/wiki/Full_node">full nodes</a>
become more resource-costly to run and they are the most private way for
a user to learn their history and balance. Adding data to blocks also
<a href="/wiki/Full_node#Economic_strength">degrades the security of the
system</a>, and there isn&#8217;t much point in having a private bitcoin if the
poor security leads to it being successfully attacked and destroyed. The
resource cost of using more block space is shown to the user as a higher
<a href="/wiki/Miner_fees">miner fee</a>; so privacy technology which uses too
much block space may not even be used much if users find the fees too
expensive. During the
<a href="/wiki/Miner_fees#The_market_for_block_space">period of high block
space demand</a> in late-2017, low-value <a href="/wiki/JoinMarket">JoinMarket</a>
CoinJoin transactions mostly disappeared (as did most low-valued bitcoin
transactions).</p>
</div>
<div class="paragraph">
<p><a href="/wiki/Off-Chain_Transactions">Off-Chain Transactions</a> are one way to
avoid this trade-off between privacy and scalability. These kind of
solutions improve privacy by entirely removing data from the blockchain,
not by adding more decoy data. <a href="#Change_avoidance">Change avoidance</a>
and <a href="#Script_privacy_improvements">Script privacy improvements</a> also
reduce costs to the system while improving privacy.
<a href="/wiki/CoinJoinXT">CoinJoinXT</a>, equal-output
<a href="/wiki/CoinJoin">CoinJoin</a>, <a href="/wiki/TumbleBit">TumbleBit</a> use a lot
of block space relative to the privacy gain. <a href="/wiki/PayJoin">PayJoin</a>
does not use much extra block space over making an ordinary transaction;
relative to the gain of breaking the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> it is very space-efficent. <a href="/wiki/CoinSwap">CoinSwap</a> uses
very little block space relative to privacy, as it can be understood as
an <a href="/wiki/Off-Chain_Transactions">off-chain transaction</a> system which
makes a single transaction and then comes back on-chain.
<a href="/wiki/Confidential_transactions">Confidential transactions</a> requires
a lot of block space along with associated bandwidth and CPU costs, but
its privacy gain is substantial, so the debate on that topic could go
either way.</p>
</div>
<div class="paragraph">
<p>In the long term as bitcoin <a href="/wiki/Miner_fees">miner fees</a> go up,
resource-costly privacy technologies will be priced out and replaced by
resource-efficient ones.</p>
</div>
<div class="paragraph">
<p><strong><span id="Steganography " class="mw-headline">Steganography</span></strong></p>
</div>
<div class="paragraph">
<p>Steganography is used in cryptography to mean the act of hiding the fact
that something is being hidden. For example the content of an encrypted
message cant be read by an eavesdropper but it still shows that
something is being hidden. Steganographic encryption of a message can be
done by embedding an encrypted message into an audio file or image which
hides the message in the noise.</p>
</div>
<div class="paragraph">
<p>An equal-output <a href="/wiki/CoinJoin">CoinJoin</a> hides the source and
destination of a certain coin, but the structure of the transactions
reveals that something is being hidden. So even though coinjoin breaks
the <a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, the fact that equal-output coinjoins can be detected (even
if the detection is imperfect) allows them to be excluded from by the
adversary&#8217;s analysis. Also the distinguishability of the coinjoins may
attract suspicion and prompt more investigation.</p>
</div>
<div class="paragraph">
<p>The idea of steganography is a good thing to aim
for<sup><a href="#cite_note-78">[78</a>]</sup>. It greatly increases the privacy because
the transactions made by such technology cannot be distinguished from
regular transactions. Also it improves the privacy of users who don&#8217;t
even use the technology, as their transactions can always be confused
with actual private transactions.
<a href="/w/index.php?title=Scriptless_scripts&amp;action=edit&amp;redlink=1">Scriptless
scripts</a> are a great example of a steganographic privacy technology
where the privacy-relevant information is hidden in the random numbers
of the digital signatures. <a href="/wiki/PayJoin">PayJoin</a>,
<a href="/wiki/CoinSwap">CoinSwap</a> and <a href="/wiki/CoinJoinXT">CoinJoinXT</a> are
good steganographic privacy technologies because they can be made
indistinguishable from regular bitcoin transactions. Equal-output
coinjoins and <a href="/wiki/TumbleBit">TumbleBit</a> are not steganographic.
Also it is usually easy to see when a centralized
<a href="/wiki/Mixing_service">Mixing service</a> is being used with
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> analysis, but depositing and then withdrawing from a
high-volume bitcoin website like a casino or altcoin exchange is better
because its possible that the user simply wanted to gamble.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_lightning_network"><a class="anchor" href="#_lightning_network"></a><span id="Lightning_Network " class="mw-headline">Lightning Network</span></h4>
<div class="paragraph">
<p><a href="/wiki/Lightning_Network">Lightning Network</a> is an
<a href="/wiki/Off-Chain_Transactions">off-chain transaction</a> technology
based on <a href="/wiki/Payment_channels">payment channels</a>. It has nearly
the same security model as bitcoin on-chain transactions. It is not an
overstatement to say that Lightning Network is a revolution for bitcoin.
See the previous section on <a href="#Off-chain_transactions">#Off-chain
transactions</a>.</p>
</div>
<div class="paragraph">
<p>As well as greatly improving privacy,
<a href="/wiki/Lightning_Network">Lightning Network</a> transactions are also
much faster (usually instant) and cheaper than on-chain transactions.
Lightning nodes create two-way <a href="/wiki/Payment_channels">payment
channels</a> between them, and lightning transactions are routed from one
node to another. The source and destination node don&#8217;t need to have a
payment channel directly between them as transactions can be routed over
many intermediate nodes.</p>
</div>
<div class="paragraph">
<p>As <a href="/wiki/Lightning_Network">Lightning Network</a> transactions happen
off-chain, they are not broadcast to every node in the network and are
not stored forever in a publicly-visible blockchain. Adversaries cannot
look at a public permanent record of all transactions because there
isn&#8217;t one. Instead adversaries would possibly have to run intermediate
nodes and possibly extract information that way. On-chain privacy
attacks like the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, <a href="/wiki/Address_reuse">address reuse</a>, change address
detection, input amounts revealing sender wealth or mystery shopper
payments fundamentally don&#8217;t work because there are no
<a href="/wiki/Address">addresses</a> or transaction inputs/outputs that work in
the same way.</p>
</div>
<div class="paragraph">
<p>However <a href="/wiki/Lightning_Network">Lightning Network</a> may introduce
other privacy problems, mostly due to how the network is made up of
nodes having <a href="/wiki/Payment_channel">connections</a> between
them<sup><a href="#cite_note-79">[79</a>]</sup>. The parts of this network which can be
intermediate routing nodes are usually public, and this network
information could be overlaid with information about routed packets such
as their amount. Lightning nodes also reveal their IP addresses unless
run over Tor, and the payment channels are made up of on-chain
transactions which could be analyzed using regular blockchain analysis
techniques. Payment channels look like 2-of-2
<a href="/wiki/Multisignature">multisignature</a> on the blockchain. Bilaterial
closing transactions look like the 2-of-2 outputs have been spent, but
unilateral close transactions have a complicated
<a href="/wiki/Hash_Time_Locked_Contracts">HTLC</a> <a href="/wiki/Script">scripts</a>
that is visible on the blockchain.</p>
</div>
<div class="paragraph">
<p>As of 2019 Lightning is in beta and development continues; the
development community is still studying all its privacy properties.
Certainly its privacy is better than the privacy of on-chain
<a href="/wiki/Transaction">transactions</a>.</p>
</div>
<div class="sect4">
<h5 id="_onion_routing"><a class="anchor" href="#_onion_routing"></a><span id="Onion_routing " class="mw-headline">Onion routing</span></h5>
<div class="paragraph">
<p>The Lightning protocol uses onion
routing<sup><a href="#cite_note-80">[80</a>]<a href="#cite_note-81">[81</a>]</sup> to improve
privacy from the intermediate routing notes. The protocol is aimed to
prevent intermediate nodes along a payment route learning which other
nodes, besides their predecessor or successor, are part of the packet&#8217;s
route; it also aims to hide the length of the route and the node&#8217;s
position within it.</p>
</div>
<div class="paragraph">
<p><strong><span id="Onion_routing_overlaid_with_network_topology " class="mw-headline">Onion routing overlaid with network topology</span></strong></p>
</div>
<div class="paragraph">
<p>Lightning Network&#8217;s onion routing is usually compared with
<a href="/wiki/Tor">Tor</a> onion routing. However, Tor&#8217;s network is
fully-connected; every node on Tor is directly connected (or has the
potential to directly connect) with every other node, meaning that an
onion-routed packet can be relayed from and to potentially any other
node. This is not so in the Lightning Network, where
<a href="/wiki/Payment_channels">payment channels</a> do not fully-connect the
entire network, and where the network topology is publicly known for
routing nodes. Data fusion of the network topology and the small amount
of information from onion-routed packets may still be enough to uncover
information in certain
cirumstances<sup><a href="#cite_note-82">[82</a>]<a href="#cite_note-83">[83</a>]</sup>. For
example, if a Lightning node wallet has only a single
<a href="/wiki/Payment_channel">payment channel</a> connection going to one
intermediate node, then any payments sent to and from the node wallet
will have to pass through the intermediate node, which would be able to
obtain a lot of information about the wallet node&#8217;s payments regardless
of the onion-routing used.</p>
</div>
<div class="paragraph">
<p>A mitigation to this topology problem may be that the entire topology of
the Lightning Network is not known. Only nodes which intend to route
transactions need to be publicly announced. It is possible for "private
channels" to exist which are <a href="/wiki/Payment_channels">payment
channels</a> that exist, but whose existence is not published.</p>
</div>
<div class="paragraph">
<p>This doesn&#8217;t mean the onion routing used by
<a href="/wiki/Lightning_Network">Lightning Network</a> is useless, far from it,
but the privacy is not as strong as with <a href="/wiki/Tor">Tor</a>.</p>
</div>
<div class="paragraph">
<p><strong><span id="Rendez-vous_routing " class="mw-headline">Rendez-vous routing</span></strong></p>
</div>
<div class="paragraph">
<p>Onion routing from the sender still requires that the destination
Lightning node is known to the sender (along with all associated
information like channel UTXO). This would mean that a user cannot
receive Lightning payments without revealing one or more UTXOs
associated with their <a href="/wiki/Payment_channel">payment channels</a>. A
solution is rendez-vous
routing<sup><a href="#cite_note-84">[84</a>]<a href="#cite_note-85">[85</a>]</sup>, also called
Hidden Destinations<sup><a href="#cite_note-86">[86</a>]</sup>, which allow Lightning
payments to be sent from a source node to destination node without
either the source or destination needing to reveal their nodes and
associated information.</p>
</div>
<div class="paragraph">
<p>A good analogy is that source onion routing is like a
<a href="/wiki/Tor">Tor</a> connection going via a Tor exit node to its
destination, and rendez-vous onion routing is like a Tor connection
going to a Tor hidden service.</p>
</div>
</div>
<div class="sect4">
<h5 id="_atomic_multipath_payments"><a class="anchor" href="#_atomic_multipath_payments"></a><span id="Atomic_Multipath_Payments " class="mw-headline">Atomic Multipath Payments</span></h5>
<div class="paragraph">
<p>Atomic Multipath Payments (AMP) is a protocol in Lightning which allows
a single payment to be routed over multiple lightning network
transactions<sup><a href="#cite_note-87">[87</a>]</sup>. For example if a user has five
channels each with balance 2 btc, they can send a single payment of 7
btc using the AMP protocol over multiple lightning network paths. In
terms of privacy, AMP would result in intermediate nodes not observing
the full payment amount of 7 btc but only the partial payment amounts of
2 btc or 1 btc (or any other combination). This is positive for privacy
as routed payments would no longer leak the exact payment amount, but
only a lower bound.</p>
</div>
</div>
<div class="sect4">
<h5 id="_common_hashlock_value"><a class="anchor" href="#_common_hashlock_value"></a><span id="Common_hashlock_value " class="mw-headline">Common hashlock value</span></h5>
<div class="paragraph">
<p>For non-AMP payments, the payment hash is the same for all nodes along
the route of a payment. This could allow multiple nodes if they
co-operate to know that they routed the same payment based on this
common hash value. Although this could also be done using the timestamp
of each routed payment.</p>
</div>
<div class="paragraph">
<p><a href="/w/index.php?title=Scriptless_scripts&amp;action=edit&amp;redlink=1">Scriptless
scripts</a> used as a replacement to explicit
<a href="/wiki/Hash_Time_Locked_Contracts">hash time locked contracts</a> can be
used to solve the common hashlock problem. It is possible to add a
different random tweak value to the committed random value at each step,
as a result there can be a multi-hop path through payment channels in
which individual participants in the path wouldn&#8217;t be able to tell that
they&#8217;re in the same path unless they&#8217;re directly connected because of
this re-blinding<sup><a href="#cite_note-88">[88</a>]<a href="#cite_note-89">[89</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>A 2017 paper called Concurrency and Privacy with Payment-Channel
Networks<sup><a href="#cite_note-90">[90</a>]<a href="#cite_note-91">[91</a>]</sup> writes about
a scheme using zero-knowledge proofs which would allow each hash value
in the payment route to be different. The scheme is much more expensive
in terms of computation, but it may still be practical.</p>
</div>
</div>
<div class="sect4">
<h5 id="_custodial_wallets_2"><a class="anchor" href="#_custodial_wallets_2"></a><span id="Custodial_wallets_2 " class="mw-headline">Custodial wallets</span></h5>
<div class="paragraph">
<p>Lightning-enabled wallets can be of the custodial type, where the wallet
is just a front-end that connects to a back-end server run by some
company. This is the same situation for web wallets in the on-chain
bitcoin ecosystem.</p>
</div>
<div class="paragraph">
<p>This kind of setup would result in all the user&#8217;s
<a href="/wiki/Lightning_Network">Lightning Network</a> transactions being
visible to that company and so they would have no privacy, in the same
way that using a web wallet has no privacy for the on-chain bitcoin
space. As of 2019 Zap Wallet and Lightning Peach work on this model.
Peach wallet actually has checkboxes in its GUI saying "I agree to the
privacy policy" and looking through the privacy policy reveals the
wallet tracks all kinds of privacy-relevant stuff. Needless to say a
privacy-conscious user shouldn&#8217;t use these kind of lightning wallets but
use non-custodial lightning wallets instead<sup><a href="#cite_note-92">[92</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>Lightning-enabled wallets still need to interface with the underlying
bitcoin network, which can leak privacy-relevant information if done
incorrectly. For example, if the wallet obtains blockchain transaction
information from a centralized server then that server can spy on all
the channel opening and closing transaction. Privacy-aware lightweight
wallets usually make use of
<a href="/wiki/Client-side_block_filtering">Client-side block filtering</a>
which is a very good fit for <a href="/wiki/Lightning_Network">Lightning
Network</a>-enabled wallets.</p>
</div>
</div>
<div class="sect4">
<h5 id="_private_script_types"><a class="anchor" href="#_private_script_types"></a><span id="Private_script_types " class="mw-headline">Private script types</span></h5>
<div class="paragraph">
<p>Advances in script type privacy like <a href="/wiki/Schnorr">Schnorr</a>,
scriptless scripts, taproot and ECDSA-2P benefit
<a href="/wiki/Lightning_Network">Lightning Network</a> privacy by making its
<a href="/wiki/Payment_channel">payment channel</a> blockchain transactions
appear indistinguishable from regular single-signature blockchain
transactions.</p>
</div>
</div>
<div class="sect4">
<h5 id="_probing_payments_to_reveal_channel_states"><a class="anchor" href="#_probing_payments_to_reveal_channel_states"></a><span id="Probing_payments_to_reveal_channel_states " class="mw-headline">Probing payments to reveal channel states</span></h5>
<div class="paragraph">
<p>The balance state of each channel is hidden from the public and is only
known to the two entities making up the
<a href="/wiki/Payment_channel">payment channel</a>. This provides a lot of
privacy, as amounts and changes of the amounts are not visible to all. A
possible way to defeat this privacy is for an active adversary to send
probing payments until the balance is obtained. Such attack has been
proved possible, as described in a paper from the beginning of
2019<sup><a href="#cite_note-93">[93</a>]</sup>, due to the level of detail that
lightning implementations provide about routing errors. Although it
would seem that such attack would need to pay the routing fees for the
probing payments, the attacker may provide a fake invoice, so even when
the payment passes through all the route, the last node will send back
an error message and will not be able to execute the payment. So the
cost for such attack is reduced to the fees needed to open and close the
channels used for the attack.</p>
</div>
<div class="paragraph">
<p>Such an attack can be used for disclosing the balances of a single or a
selected group of nodes of the network and even on a large scale to
obtain the balance of each channel in the network. In case the adversary
repeats this procedure for every <a href="/wiki/Payment_channel">payment
channel</a> in the entire <a href="/wiki/Lightning_Network">Lightning Network</a>
and continues probing very frequently, then by watching the change in
channel states, they could observe payment being routed around the
network. A possible way to remedy this attack would be for routing nodes
to randomly (for example 1-out-of-20 times) return a routing error even
if the channel balance state is actually adequate. This likely would not
degrade the user experience of <a href="/wiki/Lightning_Network">Lightning
Network</a> much, but would impose a serious cost on the attacker.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_existing_privacy_solutions"><a class="anchor" href="#_existing_privacy_solutions"></a><span id="Existing_privacy_solutions " class="mw-headline">Existing privacy solutions</span></h4>
<div class="paragraph">
<p>This section is about bitcoin software which implements privacy features
as its main goal, especially avoiding the privacy leaks due to the
blockchain.</p>
</div>
<div class="paragraph">
<p>Privacy cannot be easily separated from any other aspect of bitcoin. It
is unusual to have entirely separate solutions only for privacy, the
dream is that one day all bitcoin wallets will include privacy tech
already built in. But as of late-2018 many privacy implementations are
separate applications.</p>
</div>
<div class="sect4">
<h5 id="_lightning_network_2"><a class="anchor" href="#_lightning_network_2"></a><span id="Lightning_Network_2 " class="mw-headline">Lightning Network</span></h5>
<div class="paragraph">
<p>There are several implementations of
<a href="/wiki/Lightning_Network">Lightning Network</a> as of early-2019; such
as <a href="/w/index.php?title=LND&amp;action=edit&amp;redlink=1">LND</a>,
<a href="/w/index.php?title=C-lightning&amp;action=edit&amp;redlink=1">c-lightning</a>,
<a href="/w/index.php?title=Eclair&amp;action=edit&amp;redlink=1">eclair</a>, etc.</p>
</div>
<div class="paragraph">
<p>The network itself can be used on bitcoin mainnet and several merchants
and other projects accept it. It is still not usable by the general
public. It is expected that one day every bitcoin wallet will be able to
send and receive lightning network transactions and so the massive
privacy benefits will be included in how regular users use bitcoin all
the time.</p>
</div>
<div class="paragraph">
<p><a href="/wiki/Lightning_Network">Lightning Network</a> wallets usually the
standard privacy tech like <a href="/wiki/Deterministic_wallet">Deterministic
wallets</a> and warnings against <a href="/wiki/Address_reuse">address reuse</a>.</p>
</div>
<div class="paragraph">
<p>Some LN wallets such as Zap Wallet and Lightning Peach are actually
custodial, they are backed by a centralized server which can spy on
everything the user does, so they should be avoided.</p>
</div>
</div>
<div class="sect4">
<h5 id="_handmade_coinjoin"><a class="anchor" href="#_handmade_coinjoin"></a><span id="Handmade_CoinJoin " class="mw-headline">Handmade CoinJoin</span></h5>
<div class="paragraph">
<p><a href="/wiki/CoinJoin">CoinJoin</a> transactions can be hand-made without a
special wallet just using <a href="/wiki/Raw_Transactions">Raw Transactions</a>.
This can be very flexible as the coinjoins can take any number of forms.
It might be practical in between bitcoin merchants, several of whom
might decide to coinjoin together some of their transactions so that the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> would imply they are all the same wallet cluster.</p>
</div>
</div>
<div class="sect4">
<h5 id="_joinmarket"><a class="anchor" href="#_joinmarket"></a><span id="JoinMarket " class="mw-headline">JoinMarket</span></h5>
<div class="paragraph">
<p><a href="/wiki/JoinMarket">JoinMarket</a> is an implementation of
<a href="/wiki/CoinJoin">CoinJoin</a> where the required liquidity is paid for
in a market. In JoinMarket terminology there are <em>liquidity taker</em> users
who can create a coinjoin for whatever amount they want at any time,
they also pay a small coinjoin fee. <em>Liquidity makers</em> are online 24
hours a day and are ready to create a coinjoin at any time for any
amount they can, in return they earn coinjoin fees from liquidity
takers. Because of this market for coinjoins, JoinMarket users can
create coinjoins at any time and for any amount (up to a limit based on
available liquidity).</p>
</div>
<div class="paragraph">
<p>Other people are always available for coinjoining because they earn
fees, and coinjoins can be of any amount and happen at any time.
<a href="/wiki/JoinMarket">JoinMarket</a> can also be a small source of income
for operators of liquidity maker bots, who earn coinjoin fees by
allowing other people to create coinjoins with their bitcoins.</p>
</div>
<div class="paragraph">
<p>Privacy is greatly improved by repeating coinjoins many times, for this
reason the <a href="/wiki/JoinMarket">JoinMarket</a> project includes the
tumbler script where coinjoins are automatically created at random times
and for random amounts. Bitcoins can be deposited into the JoinMarket
<a href="/wiki/Deterministic_wallet">HD wallet</a> and the tumbler script will
send them via many coinjoins to three or more destination
<a href="/wiki/Address">addresses</a>. This feature of using more than one
destination address is required to beat amount correlation. For example
a user who wants to deposit coins into an exchange would make use of the
<em>Generate New Deposit Address</em> button to obtain more than one
destination <a href="/wiki/Address">address</a>, the exchange may then combine
those coins with deposits from other customers which should resist any
tracking based on amounts.</p>
</div>
<div class="paragraph">
<p>JoinMarket can interface with a <a href="/wiki/Bitcoin_Core">Bitcoin Core</a>
full node in order to privately obtain the history of its own wallet.
There is also an option to use <a href="/wiki/Electrum">Electrum</a> server, but
users are discouraged from using it. There are plans to replace the
Electrum interface with one that uses
<a href="/wiki/Client-side_block_filtering">Client-side block filtering</a>.</p>
</div>
<div class="paragraph">
<p>The software is an open source project with a community based around it.
Unfortunately JoinMarket can be difficult to install for people not used
to Linux or the command line interface. It is hoped one day there may be
work done to make this easier, but as all development is done by
volunteers there can be no roadmap for this.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/JoinMarket">JoinMarket</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_wasabi_wallet"><a class="anchor" href="#_wasabi_wallet"></a><span id="Wasabi_Wallet " class="mw-headline">Wasabi Wallet</span></h5>
<div class="paragraph">
<p><strong>Wasabi Wallet</strong> is an open-source, non-custodial, <strong>privacy-focused</strong>
Bitcoin wallet for Desktop, that implements trustless
<strong><a href="/wiki/CoinJoin">CoinJoin</a></strong>. The CoinJoin coordinator (run by
zkSNACKs Ltd., the company that is sponsoring the development of Wasabi)
cannot steal from, nor breach the privacy of the participants.</p>
</div>
<div class="paragraph">
<p>The package includes built-in <a href="/wiki/Tor">Tor</a> and, by default, all
traffic between the clients and the server goes through it, so IP
addresses are hidden and privacy of the users is respected. Under normal
conditions, Wasabi Wallet never leaves Tor onion network and it never
uses Tor exit relays, significantly decreasing the network attack
surface.</p>
</div>
<div class="paragraph">
<p>Wasabi also includes all standard privacy tech like a Hierarchical
<a href="/wiki/Deterministic_wallet">Deterministic wallet</a> and
<a href="/wiki/Address_reuse">address reuse</a> avoidance, as well as mandatory
coin control and labeling. The wallet uses BIP-158
<a href="/wiki/Client-side_block_filtering">Client-side block filtering</a> to
obtain its own transaction history in a private way and it has a
one-click partial full node integration as it ships with Bitcoin Knots.
If the user already has a Bitcoin full node on a local or remote device,
then it is possible to specify the IP address and port, or the Tor onion
service, and Wasabi will use it to verify and enforce rules of Bitcoin.</p>
</div>
<div class="paragraph">
<p>In addition to this, it has advanced cutting-edges features like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Opt-in <a href="/wiki/PayJoin">PayJoin</a></p>
</li>
<li>
<p>Dust attack protections</p>
</li>
<li>
<p>Custom change address</p>
</li>
<li>
<p>Anti wallet fingerprinting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Wasabi also has a <a href="https://docs.wasabiwallet.io/">complete and detailed
documentation</a> containing explanations on the architecture of the
program, on its functioning and tutorials on how to use it.</p>
</div>
<div class="paragraph">
<p>Main article: <a href="/wiki/Wasabi_Wallet">Wasabi Wallet</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_samourai_wallet"><a class="anchor" href="#_samourai_wallet"></a><span id="Samourai_Wallet " class="mw-headline">Samourai Wallet</span></h5>
<div class="paragraph">
<p>Samourai Wallet is a smartphone wallet which implements some privacy
features. Stowaway is an implementation of <a href="/wiki/PayJoin">PayJoin</a>.
Stonewall is a scheme which creates transactions that look like
<a href="/wiki/CoinJoin">CoinJoins</a> but actually involve only one person;
these fake coinjoins are intended to create false positives in
algorithms used by a hypothetical
<a href="/wiki/Transaction_surveillance_company">transaction surveillance
company</a>. StonewallX2 is a scheme that creates transactions that are
identical to Stonewall but involve two participants, making it an actual
<a href="/wiki/CoinJoin">CoinJoin</a> transaction. PayNyms are an implementation
of <a href="/wiki/ECDH_address">ECDH addresses</a>. The wallet also has a
feature called like-type change outputs where it generates a
<a href="/wiki/Change">change</a> address which is of the same type as the
payment address; this avoids <a href="#Wallet_fingerprinting">wallet
fingerprinting</a> using address types which leads to change address
detection.</p>
</div>
<div class="paragraph">
<p>By default, Samourai Wallet obtains information about the user&#8217;s history
and balance by querying their own server. This server knows all the
user&#8217;s addresses and transactions, and can spy on them. Therefore using
the default configuration of Samourai Wallet is only useful in a threat
model where the adversary can analyze the blockchain but cannot access
this server. In June 2019 with the release and open sourcing of the
Samourai Wallet server, Dojo, users may now host their own server
privately and direct their Samourai Wallet to connect to it.</p>
</div>
</div>
<div class="sect4">
<h5 id="_liquid_sidechain"><a class="anchor" href="#_liquid_sidechain"></a><span id="Liquid_sidechain " class="mw-headline">Liquid sidechain</span></h5>
<div class="paragraph">
<p>As of 2018 the Liquid <a href="/wiki/Sidechain">sidechain</a> implements
Confidential Transaction (CT) which allows bitcoins to be transferred on
that sidechain while keeping the transaction amounts hidden. The product
is developed by the Blockstream company and is aimed at exchanges and
traders. It allows fast transfer of bitcoin in a very private way.</p>
</div>
<div class="paragraph">
<p>As Liquid is a federated sidechain, users generally need to pass AML
checks and give up their personal data in order to use it. Its security
model is quite close to having bitcoins on an exchange, because if
enough of the functionaries get hacked then all the bitcoins on the
sidechain could be stolen. However within that security model you get
excellent privacy, and the <a href="/wiki/Sidechain">sidechain</a> itself is
marketed towards traders and hedgers who certainly want to keep their
trading activities private to stop other traders front-running them.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_examples_and_case_studies"><a class="anchor" href="#_examples_and_case_studies"></a><span id="Examples_and_case_studies " class="mw-headline">Examples and case studies</span></h4>
<div class="paragraph">
<p>Privacy is a very multifaceted and practical topic, it is helpful to
follow examples to better understand how all the concepts are related.</p>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_exchange_front_running"><a class="anchor" href="#_bad_privacy_example_exchange_front_running"></a><span id="Bad_privacy_example_-_Exchange_front_running " class="mw-headline">Bad privacy example - Exchange front running</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You are a trader and have an account on a bitcoin
<a href="/wiki/Exchange">exchange</a>.</p>
</li>
<li>
<p>You want to deposit some bitcoins to sell.</p>
</li>
<li>
<p>You send bitcoins to the same exchange deposit address you have used
in the past.</p>
</li>
<li>
<p>Because of the <a href="/wiki/Address_reuse">address reuse</a>, its easy to
see on the blockchain that some bitcoins are being sent to the exchange.</p>
</li>
<li>
<p>The exchange requires 3 <a href="/wiki/Confirmation">confirmations</a> before
crediting your account, but in that time the price has already moved
against you as other traders become aware of your deposit transaction.</p>
</li>
<li>
<p>You sell the bitcoins for a less attractive price than you otherwise
would have.</p>
</li>
<li>
<p>This is easily avoided by clicking the <strong>Generate New Deposit Address</strong>
button on the exchange&#8217;s website and depositing there.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: <a href="/wiki/Address_reuse">Address reuse</a> is terrible for privacy.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_savings_revealed_with_address_reuse"><a class="anchor" href="#_bad_privacy_example_savings_revealed_with_address_reuse"></a><span id="Bad_privacy_example_-_Savings_revealed_with_address_reuse " class="mw-headline">Bad privacy example - Savings revealed with <a href="/wiki/Address_reuse">address reuse</a></span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You save in bitcoin, using a <a href="/wiki/Paper_Wallet">single-address
paper wallet</a> which results in <a href="/wiki/Address_reuse">address reuse</a>.</p>
</li>
<li>
<p>All your bitcoin savings to this same address, let&#8217;s say it contains
$1 million worth.</p>
</li>
<li>
<p>You buy a small amount of bitcoins to add to your savings, depositing
in the paper wallet.</p>
</li>
<li>
<p>The person who sold you the bitcoins follows their trail on the
blockchain and finds your paper wallet containing $1 million.</p>
</li>
<li>
<p>He mentions it to someone in a cafe or bar.</p>
</li>
<li>
<p>Word gets around. A burglar raids your home and holds you hostage
until $1 million in bitcoin is handed over<sup><a href="#cite_note-94">[94</a>]</sup>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: <a href="/wiki/Address_reuse">Address reuse</a> is terrible for privacy.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_savings_revealed_with_data_collection"><a class="anchor" href="#_bad_privacy_example_savings_revealed_with_data_collection"></a><span id="Bad_privacy_example_-_Savings_revealed_with_data_collection " class="mw-headline">Bad privacy example - Savings revealed with data collection</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You save in bitcoin. Trading on an exchange which you
<a href="#Revealing_data_when_transacting_bitcoin">reveal all your data to</a>.</p>
</li>
<li>
<p>Mostly you buy coins but sometimes you sell. You only ever use this
one exchange.</p>
</li>
<li>
<p>Regardless of any blockchain privacy technology you use, the exchange
still knows all your trades and can find exactly how much bitcoin you
hold at any time.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_example_evading_sanctions"><a class="anchor" href="#_example_evading_sanctions"></a><span id="Example_-_Evading_sanctions " class="mw-headline">Example - Evading sanctions</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You live in a country that is under international trade sanctions from
other countries.</p>
</li>
<li>
<p>Because of this you cannot buy the online newspaper you want.</p>
</li>
<li>
<p>You navigate to the newspaper website with Tor so that they can&#8217;t tell
your origin country from your IP address.</p>
</li>
<li>
<p>You buy bitcoins with cash and send them to wallet software on your
computer, then use the bitcoins to buy the newspaper.</p>
</li>
<li>
<p>Bitcoin transactions don&#8217;t have geographical information about them,
so your payment is not discovered as coming from a sanctioned country.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_example_transacting_with_your_online_poker_buddies_without_revealing_your_real_name"><a class="anchor" href="#_example_transacting_with_your_online_poker_buddies_without_revealing_your_real_name"></a><span id="Example_-_Transacting_with_your_online_poker_buddies_without_revealing_your_real_name " class="mw-headline">Example - Transacting with your online poker buddies without revealing your real name</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You play online poker with some people (for real money).</p>
</li>
<li>
<p>You win big. Lots of money goes to you and your buddies are annoyed.</p>
</li>
<li>
<p>The stakes are in bitcoin which you receive. You sell the coins for
cash or via an <a href="/wiki/Exchange">exchange</a>, or use them to directly
buy goods and services.</p>
</li>
<li>
<p>Your irritated poker buddies can&#8217;t find your real name.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This example has a very mild threat model where the adversary can&#8217;t
access the exchange&#8217;s AML/KYC records (if you didn&#8217;t trade with cash),
and they are not your ISP so cannot easily link your bitcoin addresses
with your IP address (in the case that you used a
<a href="/wiki/Lightweight_node">lightweight node</a> instead of a
<a href="/wiki/Full_node">full node</a>).</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_donation_without_your_employer_knowing"><a class="anchor" href="#_example_donation_without_your_employer_knowing"></a><span id="Example_-_Donation_without_your_employer_knowing " class="mw-headline">Example - Donation without your employer knowing</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You earn money in bitcoin, your employer has sent you bitcoins as
salary.</p>
</li>
<li>
<p>You want to support X charity or political group with a donation of
0.1 BTC, but don&#8217;t want your employer knowing.</p>
</li>
<li>
<p>Deposit 0.3 BTC into a bitcoin casino, altcoin exchange or another
bitcoin service website that allows anonymous bitcoin deposit and
withdrawals from the general public.</p>
</li>
<li>
<p>Withdraw 0.1 BTC and put the desired donation address as the
withdrawal address.</p>
</li>
<li>
<p>Withdraw the remaining 0.2 BTC back into your own wallet (to a brand
new address, avoiding <a href="/wiki/Address_reuse">address reuse</a>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If your employer casually analyses the blockchain they will think you
are a gambler instead of a supporter of group X. The bitcoin casino
doesn&#8217;t care who you donate to. The employer also can&#8217;t correlate the
amounts, because they see you deposit 0.3 BTC but only 0.1 BTC is sent
to the group. Privacy comes from mixing your coins with the coins of
everybody else who uses that casino in the time period that your coins
were deposited.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_donation_without_anyone_knowing"><a class="anchor" href="#_example_donation_without_anyone_knowing"></a><span id="Example_-_Donation_without_anyone_knowing " class="mw-headline">Example - Donation without anyone knowing</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You want to support X charity or political group without anyone
knowing.</p>
</li>
<li>
<p>Download and install a wallet which is backed by a
<a href="/wiki/Full_node">full node</a> such as <a href="/wiki/Bitcoin_Core">Bitcoin
Core</a>.</p>
</li>
<li>
<p>Buy the exact amount of bitcoin for cash (get slightly more because of
transaction fees and volatility), have the coins sent to your wallet.</p>
</li>
<li>
<p>Send the coins to the group to donation. The
<a href="/wiki/Transaction">transaction</a> should be broadcasted over
<a href="/wiki/Tor">Tor</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Instead of direct cash trading, the user could have also bought a cash
substitute like a gift card and traded it online for bitcoin that wasn&#8217;t
link to their identity.</p>
</div>
<div class="paragraph">
<p>The <a href="/wiki/Full_node">full node</a> is required in this threat model,
because otherwise your ISP or another adversary could likely spy on
<a href="/wiki/Lightweight_node">lightweight node</a> communications and
discover the user&#8217;s bitcoin addresses. Broadcasting the transaction over
Tor is required to stop your ISP or a
<a href="/wiki/Transaction_surveillance_company">transaction surveillance
company</a> from learning that your IP address broadcast the transaction.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_receiving_donations_privately"><a class="anchor" href="#_example_receiving_donations_privately"></a><span id="Example_-_Receiving_donations_privately " class="mw-headline">Example - Receiving donations privately</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You have a <a href="/wiki/Address_reuse">single</a> donation address for your
group or project, anybody can see all donations and their amounts by
putting your donation address into a blockchain explorer.</p>
</li>
<li>
<p>You want to spend the donations without anyone on the internet
knowing.</p>
</li>
<li>
<p>The donation address is part of a wallet backed by a
<a href="/wiki/Full_node">full node</a> such as <a href="/wiki/Armory">Armory</a>.</p>
</li>
<li>
<p>Broadcast a transaction over <a href="/wiki/Tor">Tor</a> to deposit the
donation money into a bitcoin website which allows anonymous deposits
and withdrawals.</p>
</li>
<li>
<p>Withdraw the money straight into another similar bitcoin service
website.</p>
</li>
<li>
<p>Take care to use different transactions in order to stop the amounts
being correlated.</p>
</li>
<li>
<p>Make sure to wait a little while to stop the timings being used to
link together transactions</p>
</li>
<li>
<p>Repeat this for many different bitcoin
websites<sup><a href="#cite_note-95">[95</a>]</sup> before finally sending the coins back
to your own wallet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Take an example with 1 BTC. Each arrow &#8594; is a new withdrawal
transaction.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Wallet    Casino1           Altcoin Exchange          Casino2            Futures Exchange   Wallet
1btc  -&gt;  1addrA  1btc      -&gt;  1addrB 0.1btc     -&gt;  1addrE 0.1btc  -&gt;  1addrG 0.4btc  -&gt;  1addrH 0.25btc
                            -&gt;  1addrC 0.2btc     -&gt;  1addrF 0.9btc  -&gt;  1addrF 0.6btc  -&gt;  1addrI 0.25btc
                            -&gt;  1addrD 0.7btc                                           -&gt;  1addrJ 0.25btc
                                                                                        -&gt;  1addrK 0.25btc</pre>
</div>
</div>
<div class="paragraph">
<p>As before the <a href="/wiki/Full_node">full node</a> wallet allows your wallet
to learn its own history privately, while Tor broadcasting hides your IP
address used when sending a <a href="/wiki/Transaction">transaction</a>. Using
many different amounts stops <a href="#Amount_correlation">amount
correlation</a> from providing clues that can ruin your privacy. Using
multiple bitcoin websites means a single website which co-operates with
the adversary won&#8217;t be enough to completely ruin your privacy. There is
custodial risk as each website has the power to steal your money, but in
this example the bitcoin amount is relatively low so the risk is
acceptable.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_storing_savings_privately"><a class="anchor" href="#_example_storing_savings_privately"></a><span id="Example_-_Storing_savings_privately " class="mw-headline">Example - Storing savings privately</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You want to <a href="/wiki/Bitcoin_as_an_investment">store value in
bitcoin</a> without anybody else knowing what you do with that value, or
even that you own bitcoin.</p>
</li>
<li>
<p>Buy the coins in some way and have them sent to your
<a href="/wiki/JoinMarket">JoinMarket</a> wallet which you&#8217;ve configured to use
your own <a href="/wiki/Full_node">full node</a>, all of which run entirely over
<a href="/wiki/Tor">Tor</a>.</p>
</li>
<li>
<p>Run JoinMarket&#8217;s tumbler script which has it create many
<a href="/wiki/CoinJoin">CoinJoin</a> transactions with the aim to break the
link between addresses.</p>
</li>
<li>
<p>Have the coins sent to another wallet which will be used for
<a href="/wiki/Storing_bitcoins">storing the bitcoins</a> long term. The wallet
should be backed by a <a href="/wiki/Full_node">full node</a> such as
<a href="/wiki/Electrum">Electrum</a> pointed to your own
<a href="/wiki/Electrum#Server_software">Electrum server</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that bitcoin privacy technology like
<a href="/wiki/JoinMarket">JoinMarket</a> can hide private-relevant information
from your <a href="/wiki/Transactions">transactions</a> but it cant add privacy
in other places; for example if you buy the bitcoins in a non-anonymous
way such as using an AML/KYC exchange then that exchange will know that
your real-life identity bought bitcoins at that time.</p>
</div>
<div class="paragraph">
<p>Using <a href="/wiki/JoinMarket">JoinMarket</a> is non-custodial unlike the
previous method which sends bitcoin through many bitcoin service
websites, so it is useful where the custody risk is unacceptably high
(such as where you&#8217;re anonymizing all your hard-earned savings). All the
wallets are backed by <a href="/wiki/Full_node">full nodes</a> in this example
to stop a third-party service being able to link together your addresses
or link them with your IP address. The full node is run entirely over
<a href="/wiki/Tor">Tor</a> to stop your internet service provider or any
network-level adversary from seeing that you run a bitcoin node.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_stopping_incoming_payments_from_different_sources_from_being_linked_together"><a class="anchor" href="#_example_stopping_incoming_payments_from_different_sources_from_being_linked_together"></a><span id="Example_-_Stopping_incoming_payments_from_different_sources_from_being_linked_together " class="mw-headline">Example - Stopping incoming payments from different sources from being linked together</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you had both payments in the same wallet they may be linked
together with the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>.</p>
</li>
<li>
<p>You have a job as a nurse, you also moonlight as a stripper for extra
income. Both jobs pay in bitcoin and you don&#8217;t want them to be linked
together.</p>
</li>
<li>
<p>You send the nurse income into one <a href="/wiki/JoinMarket">JoinMarket</a>
mixdepth and the stripper income into another mixdepth.</p>
</li>
<li>
<p>You run the JoinMarket tumbler script which will combine both balances
without linking them together.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Another way to do this (but with custodial risk) is to deposit the nurse
income into a bitcoin service website (like a casino) and then deposit
the stripper income but to a different deposit address. After you
withdraw both with be combined with all the other deposits of other
users of the casino. Probably the best way to do this is to receive one
or both of the income streams over
<a href="/wiki/Lightning_Network">Lightning Network</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_withdrawing_casino_winnings_to_a_bitcoin_exchange_without_either_entity_knowing_the_source_or_destination_of_funds"><a class="anchor" href="#_example_withdrawing_casino_winnings_to_a_bitcoin_exchange_without_either_entity_knowing_the_source_or_destination_of_funds"></a><span id="Example_-_Withdrawing_casino_winnings_to_a_bitcoin_exchange_without_either_entity_knowing_the_source_or_destination_of_funds " class="mw-headline">Example - Withdrawing casino winnings to a bitcoin exchange without either entity knowing the source or destination of funds</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You have won 10 BTC at a bitcoin casino, you want withdraw them to a
bitcoin exchange to sell without either party knowing (maybe because
online gambling is blocked in your jurisdiction).</p>
</li>
<li>
<p>Install <a href="/wiki/JoinMarket">JoinMarket</a> and point it at your own
<a href="/wiki/Full_node">full node</a>.</p>
</li>
<li>
<p>Have the casino winnings sent to your JoinMarket wallet in three
different payments of 5btc + 2btc + 3btc, they should go to seperate
mixdepths.</p>
</li>
<li>
<p>Run the JoinMarket tumbler script to mix the coins and have them sent
to three different deposit address of the exchange with amounts (for
example) 1btc + 2btc + 7btc.</p>
</li>
<li>
<p>Then neither the online casino nor the exchange can use amount
correlation to figure out the source or destination. The coinjoin
transactions stop them using the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, and the other JoinMarket features stop
<a href="/wiki/Address_reuse">address reuse</a> and analysis of the transaction
graph<sup><a href="#cite_note-96">[96</a>]</sup>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_using_a_blockchain_explorer"><a class="anchor" href="#_bad_privacy_example_using_a_blockchain_explorer"></a><span id="Bad_privacy_example_-_Using_a_blockchain_explorer " class="mw-headline">Bad privacy example - Using a blockchain explorer</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You receive a payment of bitcoin at one of your
<a href="/wiki/Address">addresses</a>.</p>
</li>
<li>
<p>You copy and paste the address into a
<a href="/wiki/Block_chain_browser">blockchain explorer website</a> and press
<em>Refresh</em> until the incoming transaction reaches 3
<a href="/wiki/Confirmation">confirmations</a>.</p>
</li>
<li>
<p>The blockchain explorer website now knows that your IP address is very
interested in that particular bitcoin address.</p>
</li>
<li>
<p>This is best avoided by using your own bitcoin wallet (backed by a
<a href="/wiki/Full_node">full node</a>) to tell you when payments have arrived
and how many <a href="/wiki/Confirmation">confirmations</a> they have, without
any other entity knowing.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This privacy break can be almost entirely fixed by navigating to the
blockchain explorer website over <a href="/wiki/Tor">Tor</a>. It still reveals
that <em>somebody</em> is interested in that <a href="/wiki/Address">bitcoin
address</a> but doesn&#8217;t reveal their IP address, and does not reveal any
other bitcoin addresses controlled by the same user.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_privacy_altcoin_mixing_failing_due_to_amount_correlation"><a class="anchor" href="#_bad_privacy_example_privacy_altcoin_mixing_failing_due_to_amount_correlation"></a><span id="Bad_privacy_example_-_Privacy_altcoin_mixing_failing_due_to_amount_correlation " class="mw-headline">Bad privacy example - Privacy altcoin mixing failing due to amount correlation</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You own 1.456225 BTC for which some privacy-relevant information has
been leaked (maybe you bought it from a AML/KYC exchange) and want to
send it to another address while breaking the link between the two.</p>
</li>
<li>
<p>You trade the bitcoins for an altcoin which implements some blockchain
privacy technology, a so-called "privacy coin", then you trade the
altcoin back to bitcoin after making a few altcoin transactions.</p>
</li>
<li>
<p>You send the bitcoins back to your wallet in one transaction.</p>
</li>
<li>
<p>Because the transaction amount is very close to the initial 1.456225
BTC, its not very hard for an adversary to search the entire blockchain
and link the two similar-amount transaction going into and out of the
altcoin exchange you used.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: Transactions have amounts visible to all which must be treated
with care for privacy.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_privacy_altcoin_mixing"><a class="anchor" href="#_example_privacy_altcoin_mixing"></a><span id="Example_-_Privacy_altcoin_mixing " class="mw-headline">Example - Privacy altcoin mixing</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Similar to the previous example, you have bitcoins you want to mix.
You trade into and out of a privacy altcoin to do it.</p>
</li>
<li>
<p>When trading back into bitcoin you deposit the privacy altcoin into an
exchange to sell, you use several transactions so that the exchange and
any observer of the blockchain cannot easily use amounts to link
together the before and after addresses.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This method may still fail because privacy altcoins have fewer
transactions than bitcoin by a factor of a few hundred, so the anonymity
set may be lower. Also there are custodial risks with using exchanges so
this method may not be appropriate for large amounts of coin. As privacy
altcoins are usually much less scalable than bitcoin, their
<a href="/wiki/Full_node">full node</a> wallets may be more resources-costly to
run than bitcoin&#8217;s. Privacy altcoins are likely to have a more volatile
price than bitcoin which increases the risk of losing part of the money
due to price movements.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_daily_commerce_with_lightning_network"><a class="anchor" href="#_example_daily_commerce_with_lightning_network"></a><span id="Example_-_Daily_commerce_with_Lightning_Network " class="mw-headline">Example - Daily commerce with Lightning Network</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You have some bitcoin and want to spend it on regular goods and
services. (Coffee, phone credit, VPN, hosting, hotel and apartment
rentals, flights, food, drinks, clothes, etc etc) and you want to be as
private as possible.</p>
</li>
<li>
<p>You download and install a <a href="/wiki/Lightning_Network">Lightning
Network</a> wallet and use that for all purchases.</p>
</li>
<li>
<p>Privacy attacks like
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, <a href="/wiki/Address_reuse">address reuse</a> and change address
detection fundamentally don&#8217;t work on any
<a href="/wiki/Off-Chain_Transactions">Off-Chain Transactions</a> technology.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_sending_to_a_static_donation_address_without_precautions"><a class="anchor" href="#_bad_privacy_example_sending_to_a_static_donation_address_without_precautions"></a><span id="Bad_privacy_example_-_Sending_to_a_static_donation_address_without_precautions " class="mw-headline">Bad privacy example - Sending to a static donation address without precautions</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You own bitcoin and keep it in a custodial wallet.</p>
</li>
<li>
<p>You want to donate to charity or political group X.</p>
</li>
<li>
<p>You create a <a href="/wiki/Transaction">transaction</a> on the custodial
wallet&#8217;s website sending some money to the group&#8217;s donation address.</p>
</li>
<li>
<p>The custodial wallet server can see where you&#8217;re sending it
(especially easily if the group uses a static donation address).</p>
</li>
<li>
<p>They disagree with your views and then they close your account.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: Using a custodial wallet is bad for privacy because the
custodian can see everything you do. <a href="/wiki/Address_reuse">Address
reuse</a> is harmful to privacy (but common with donation addresses).</p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_receiving_donations_spied_on_with_mystery_shopper_payments"><a class="anchor" href="#_bad_privacy_example_receiving_donations_spied_on_with_mystery_shopper_payments"></a><span id="Bad_privacy_example_-_Receiving_donations_spied_on_with_mystery_shopper_payments " class="mw-headline">Bad privacy example - Receiving donations spied on with <a href="/wiki/Mystery_shopper_payments">mystery shopper payments</a></span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You want to accept bitcoin donations but don&#8217;t want to reveal the
total donated amount.</p>
</li>
<li>
<p>You set up a web server to give out unique addresses for each visitor.</p>
</li>
<li>
<p>An adversary who wants to get an idea of your total donation income
donates a small amount of bitcoin to you.</p>
</li>
<li>
<p>You combine all donations to use as inputs one transaction, thereby
linking them together with the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>.</p>
</li>
<li>
<p>The adversary now has a good idea of your total donation income.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: <a href="/wiki/Mystery_shopper_payments">mystery shopper payments</a>
can be used to spy on people, even then they avoid
<a href="/wiki/Address_reuse">address reuse</a>. Be mindful of what is being
revealed with the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_bitcoin_stealing_malware_using_static_addresses"><a class="anchor" href="#_real_life_example_bitcoin_stealing_malware_using_static_addresses"></a><span id="Real_life_example_-_Bitcoin-stealing_malware_using_static_addresses " class="mw-headline">Real life example - Bitcoin-stealing malware using static addresses</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You are a creator of stealware (malware that steals money from its
victim).</p>
</li>
<li>
<p>You hardcode some bitcoin address into your malware where the
ill-gottens are sent to.</p>
</li>
<li>
<p>Any malware researcher can now see how many bitcoins you have stolen
simply by putting the addresses into a blockchain explorer.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This has been done in many cases including: the Wannacry
malware<sup><a href="#cite_note-97">[97</a>]<a href="#cite_note-98">[98</a>]</sup> and Electrum
stealware<sup><a href="#cite_note-99">[99</a>]<a href="#cite_note-100">[100</a>]</sup></p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_bitcoin_stealing_malware_spied_on_with_mystery_shopper_payments"><a class="anchor" href="#_bad_privacy_example_bitcoin_stealing_malware_spied_on_with_mystery_shopper_payments"></a><span id="Bad_privacy_example_-_Bitcoin-stealing_malware_spied_on_with_mystery_shopper_payments " class="mw-headline">Bad privacy example - Bitcoin-stealing malware spied on with <a href="/wiki/Mystery_shopper_payments">mystery shopper payments</a></span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You are an infosec researcher studying bitcoin-stealing malware.</p>
</li>
<li>
<p>The malware author has coded a <a href="/wiki/ECDH_address">ECDH address
scheme</a> into their malware.</p>
</li>
<li>
<p>Your analysis of the malware only reveals the ECDH public key rather
than bitcoin <a href="/wiki/Address">addresses</a>, so the malware author thinks
he is private.</p>
</li>
<li>
<p>You send a small amount of bitcoin to an <a href="/wiki/Address">address</a>
derived from the ECDH public key as a
<a href="/wiki/Mystery_shopper_payments">mystery shopper payment</a>.</p>
</li>
<li>
<p>The malware author sends all their received stolen coins to an
exchange in one <a href="/wiki/Transaction">transaction</a>, including your
payment.</p>
</li>
<li>
<p>You can now look on the blockchain and use the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> to get an idea of total amount of bitcoins stolen by the
malware.</p>
</li>
<li>
<p>Also you can now contact the exchange who will tell you the real life
identity of the malware author, who can now be put in jail.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: <a href="/wiki/Mystery_shopper_payments">mystery shopper payments</a>
along with the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> can be used to deanonymize even people who avoid
<a href="/wiki/Address_reuse">address reuse</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_example_single_use_lightweight_wallet_over_tor"><a class="anchor" href="#_example_single_use_lightweight_wallet_over_tor"></a><span id="Example_-_Single-use_lightweight_wallet_over_Tor " class="mw-headline">Example - Single-use lightweight wallet over Tor</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You want to anonymously buy something or donate to something online.</p>
</li>
<li>
<p>You install <a href="/wiki/Electrum">Electrum</a> wallet and configure it to
use <a href="/wiki/Tor">Tor</a>, or use <a href="https://tails.boum.org">Tails OS</a>.</p>
</li>
<li>
<p>You buy bitcoins anonymously with cash and have them sent to your
Electrum wallet.</p>
</li>
<li>
<p>You spend the entire balance of bitcoins buying or donating to the
thing you want.</p>
</li>
<li>
<p>After you&#8217;re done you delete the wallet and never use it again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your <a href="/wiki/Electrum">Electrum</a> wallet used a third-party server
which can see all your bitcoin addresses and transaction. As you&#8217;ve
connected to it over <a href="/wiki/Tor">Tor</a>, the server does not learn your
real IP address. As you only use a single bitcoin
<a href="/wiki/Address">address</a> once and never again, the server isn&#8217;t able
to cluster together any other addresses. As you spent the entire balance
there is no <a href="/wiki/Change">change address</a> which can leak
information. This setup actually results in strong privacy even though a
third-party server is used.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_lightweight_wallet_over_tor_used_multiple_times"><a class="anchor" href="#_bad_privacy_example_lightweight_wallet_over_tor_used_multiple_times"></a><span id="Bad_privacy_example_-_Lightweight_wallet_over_Tor_used_multiple_times " class="mw-headline">Bad privacy example - Lightweight wallet over Tor used multiple times</span></h5>
<div class="paragraph">
<p>Very similar to the previous example, but more than one
<a href="/wiki/Address">address</a> and <a href="/wiki/Transaction">transaction</a> is
used.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You want to use bitcoin for more than one use-case, for example buying
a novelty hat and paying for a VPN.</p>
</li>
<li>
<p>You install <a href="/wiki/Electrum">Electrum</a> wallet and configure it to
use <a href="/wiki/Tor">Tor</a>.</p>
</li>
<li>
<p>You pay for the novelty hat and have it sent to your mail address.</p>
</li>
<li>
<p>You pay for the VPN to improve your web browsing privacy.</p>
</li>
<li>
<p>As the Electrum wallet queries a third-party Electrum server, that
server can link together the two transactions and knows which address is
the <a href="/wiki/Change">change address</a>.</p>
</li>
<li>
<p>Therefore the server can easily see that the same person who bought
the hat also paid for the VPN. As the hat purchase required revealing
your mail address, your mail address can now be linked with the VPN
account. So much for anonymous web browsing!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: The third-party Electrum server was able to link together your
two <a href="/wiki/Transaction">transactions</a>. Avoid this by
<a href="/wiki/Electrum#Server_software">running your own Electrum server</a>
which is backed by your own <a href="/wiki/Full_node">full node</a>.</p>
</div>
<div class="paragraph">
<p>Lesson 2: Note that <a href="https://tails.boum.org">TailsOS</a> as of 2018 uses this
privacy model for Electrum(!)</p>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_public_donation_address_combined_with_the_common_input_ownership_heuristic"><a class="anchor" href="#_real_life_example_public_donation_address_combined_with_the_common_input_ownership_heuristic"></a><span id="Real_life_example_-_Public_donation_address_combined_with_the_common-input-ownership_heuristic " class="mw-headline">Real life example - Public donation address combined with the <a href="/wiki/Common-input-ownership_heuristic">common-input-ownership heuristic</a></span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to a website which accepts bitcoin donations like the
<a href="https://tails.boum.org/donate/">Tails OS donation page</a>.</p>
</li>
<li>
<p>Take their donation address (in this case
<code>1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2</code>) and search it in the
www.walletexplorer.com site.</p>
</li>
<li>
<p>The site uses the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, <a href="/wiki/Address_reuse">address reuse</a> and possibly other
techniques to cluster together addresses.</p>
</li>
<li>
<p>We can see the amount and volume of donations to the Tails OS project:
<a href="https://www.walletexplorer.com/wallet/04d3d17f766c4e53?from_address=1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2" class="bare">https://www.walletexplorer.com/wallet/04d3d17f766c4e53?from_address=1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2</a>
The amounts look realistic so we&#8217;re probably on the right lines.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_digital_forensics_aids_with_investigation_of_the_mtgox_exchange"><a class="anchor" href="#_real_life_example_digital_forensics_aids_with_investigation_of_the_mtgox_exchange"></a><span id="Real_life_example_-_Digital_forensics_aids_with_investigation_of_the_MtGox_exchange " class="mw-headline">Real life example - <a href="#Digital_forensics">Digital forensics</a> aids with investigation of the MtGox exchange</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="/wiki/Mt._Gox">Mt. Gox</a> is a now-defunct bitcoin exchange which
shut down in 2013 due to insolvency.</p>
</li>
<li>
<p>Its internal database was leaked in March 2014, from which it was
possible to build up a near-complete picture of the deposits and
withdrawals of its wallets.</p>
</li>
<li>
<p><a href="/wiki/Address_reuse">Address reuse</a> was also a big factor. The
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> was less of a factor because that heuristic was broken by
mtgox&#8217;s import private key feature.</p>
</li>
<li>
<p>Analysis information was also cross-checked by searching the web for
all forum posts where a customer writes something like: <em>Help! I made a
deposit to MtGox of amount 0.12345 BTC. As I write my transaction has 20
<a href="/wiki/Confirmation">confirmations</a> but the deposit hasn&#8217;t appeared
in the exchange.</em> The forum posts include a date and time. These posts
include enough information to search for the corresponding blockchain
<a href="/wiki/Transaction">transaction</a>.</p>
</li>
<li>
<p>The analysis revealed that there were multiple thefts from mtgox and
the exchange was insolvent for most of its existence.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Full talk: <a href="https://www.youtube.com/watch?v=l70iRcSxqzo">Breaking Bitcoin
2017 conference. Kim Nilsson - Cracking MtGox</a>
<a href="https://breaking-bitcoin.com/slides/CrackingMtGox.pdf">Slides</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_flawed_use_of_the_common_input_ownership_heuristic_exaggerates_donation_income"><a class="anchor" href="#_real_life_example_flawed_use_of_the_common_input_ownership_heuristic_exaggerates_donation_income"></a><span id="Real_life_example_-_Flawed_use_of_the_common-input-ownership_heuristic_exaggerates_donation_income " class="mw-headline">Real life example - Flawed use of the <a href="/wiki/Common-input-ownership_heuristic">common-input-ownership heuristic</a> exaggerates donation income</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to a website which accepts bitcoin donations like ThePirateBay.</p>
</li>
<li>
<p>Take their donation address (in this case
<code>1z8Tep4BNS79W3kYH8CHA8tWj6nuHYcCM</code>) and search it in the
www.walletexplorer.com site.</p>
</li>
<li>
<p>The site uses the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, <a href="/wiki/Address_reuse">address reuse</a> and possibly other
techniques to cluster together addresses.</p>
</li>
<li>
<p>We can see most of the amount and volume of donations to ThePirateBay:
<a href="https://www.walletexplorer.com/wallet/00005c945dba011c?from_address=1z8Tep4BNS79W3kYH8CHA8tWj6nuHYcCM" class="bare">https://www.walletexplorer.com/wallet/00005c945dba011c?from_address=1z8Tep4BNS79W3kYH8CHA8tWj6nuHYcCM</a></p>
</li>
<li>
<p>The results indicate that ThePirateBay is making hundreds of millions
of dollars in donations per day, which is not believable.</p>
</li>
<li>
<p>A possible explanation of what&#8217;s actually happening is ThePirateBay
accepts donations straight into its account at a bitcoin
<a href="/wiki/Exchange">exchange</a>, which would result that analysis based on
the <a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> gives highly exaggerated figures because it actually finds
all deposits to that entire exchange. This has a danger for ThePirateBay
that the custodial exchange could block or censor incoming donations.</p>
</li>
<li>
<p>Another possibility is that ThePirateBay is using
<a href="/wiki/CoinJoin">CoinJoin</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_incorrect_clusters_found_by_the_common_input_ownership_heuristic"><a class="anchor" href="#_real_life_example_incorrect_clusters_found_by_the_common_input_ownership_heuristic"></a><span id="Real_life_example_-_Incorrect_clusters_found_by_the_common-input-ownership_heuristic " class="mw-headline">Real life example - Incorrect clusters found by the <a href="/wiki/Common-input-ownership_heuristic">common-input-ownership heuristic</a></span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The www.walletexplorer.com website uses the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>, <a href="/wiki/Address_reuse">address reuse</a> and possibly other
techniques to cluster together addresses.</p>
</li>
<li>
<p>It has a big named cluster called
<a href="https://www.walletexplorer.com/wallet/MtGoxAndOthers">MtGoxAndOthers</a>
which has 8.6 million transactions and 3.6 million addresses associated
with it as of January 2019.</p>
</li>
<li>
<p>The old <a href="/wiki/Mt._Gox">Mt. Gox</a> exchange had a feature where users
could import bitcoin private keys from their personal wallet straight
into the website<sup><a href="#cite_note-101">[101</a>]</sup>. There it would be merged
with UTXOs from MtGox&#8217;s own wallet.</p>
</li>
<li>
<p>It seems some <a href="/wiki/CoinJoin">CoinJoin</a> transactions have also
ended up in the cluster<sup><a href="#cite_note-102">[102</a>]</sup>.</p>
</li>
<li>
<p>For example the transaction
<code>5ac0210febf7ce07a737bae8c32f84c1c54d131c21a16ca6b02b6f1edcad15c3</code>
which is probably a <a href="/wiki/JoinMarket">JoinMarket</a> transaction
belongs to the MtGoxAndOthers cluster<sup><a href="#cite_note-103">[103</a>]</sup>.</p>
</li>
<li>
<p>Another example is the transaction
<code>52757ed33a235ce8e48aeaabab7f6dd9cd3445c3642630123103b154ee59f3f5</code>
which is a coinjoin created by the old SharedCoin centralized
service<sup><a href="#cite_note-104">[104</a>]</sup>, it is also in the MtGoxAndOthers
cluster according to walletexplorer.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_handmade_coinjoin_mislead_a_bitcoin_analyist"><a class="anchor" href="#_real_life_example_handmade_coinjoin_mislead_a_bitcoin_analyist"></a><span id="Real_life_example_-_Handmade_coinjoin_mislead_a_bitcoin_analyist " class="mw-headline">Real life example - Handmade coinjoin mislead a bitcoin analyist</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The inventor of <a href="/wiki/CoinJoin">CoinJoin</a> Greg Maxwell posted a
thread on <a href="https://bitcointalk.org/index.php?topic=139581.0">bitcointalk
forums called "I taint rich!"</a> which aimed to demonstrate coinjoin and
how the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> is not always correct.</p>
</li>
<li>
<p>The thread invited forum readers to create
<a href="/wiki/CoinJoin">CoinJoins</a> by hand with Greg Maxwell&#8217;s vanity
<a href="/wiki/Address">address</a>, which he hopes would be a strong
demonstration of the flaws of the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>.</p>
</li>
<li>
<p>Many years later, a bitcoin <a href="/wiki/Transaction">transaction</a> worth
40000 BTC was broadcasted and mined which caused some
<a href="https://www.reddit.com/r/Bitcoin/comments/6tvwr5/someone_moved_40000_btc_is_it_from_silkroad/">speculation
on bitcoin forums</a>. The handmade coinjoins caused some to come to the
wrong conclusion that Greg Maxwell was the owner of the 40000 BTC.</p>
</li>
<li>
<p>A quote from the analyst:</p>
</li>
</ol>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><em>Originally looks like they were owned by someone with the vanity
address of GMaxweLL:
14947302eab0608fb2650a05f13f6f30b27a0a314c41250000f77ed904475dbb</em></p>
</div>
<div class="paragraph">
<p><em>If you follow the 40k from that transaction (click the outputs), you
get to the transaction you linked to. It&#8217;s a short series of
transactions.</em></p>
</div>
<div class="paragraph">
<p><em>Basically, someone who owns that address was able to unlock coins from
that address, as well as another address that held the 40,000, in the
same transaction. So they must have owned both (at least 4 years ago
anyway).</em></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Lesson: The
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> isn&#8217;t always right.</p>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_the_quadrigacx_exchange_wallet_analysis"><a class="anchor" href="#_real_life_example_the_quadrigacx_exchange_wallet_analysis"></a><span id="Real_life_example_-_The_QuadrigaCX_exchange_wallet_analysis " class="mw-headline">Real life example - The QuadrigaCX exchange wallet analysis</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In early 2019 the exchange QuadrigaCX shut down and many of its
customers were left unable to access their bitcoin deposits, likely
forever.</p>
</li>
<li>
<p>A customer wanted to analyze the blockchain to find information about
QuadrigaCX&#8217;s wallet.</p>
</li>
<li>
<p>They asked on internet forums for other customers to reveal their
deposit <a href="/wiki/Address">addresses</a> and
<a href="/wiki/Transaction">transactions</a>, many customers did so.</p>
</li>
<li>
<p>Using www.walletexplorer.com the analyst was able to find a big wallet
cluster containing all those addresses, it is likely this is the
QuadrigaCX hot wallet. The hot wallet made many transactions, often
involve <a href="/wiki/Address_reuse">reused addresses</a> and didn&#8217;t use
<a href="/wiki/CoinJoin">CoinJoin</a>; so it&#8217;s likely that this analysis is
correct.</p>
</li>
<li>
<p>The walletexplorer cluster called MtGoxAndOthers mislead the analyst
into believing the QuadrigaCX had something to do with MtGox, when in
reality that cluster arises because of <a href="/wiki/CoinJoin">CoinJoin</a>.</p>
</li>
<li>
<p>The analyst was unable to find a single cluster with a significant
amount of bitcoins which could be the <a href="/wiki/Cold_storage">cold
storage</a> wallet. However cold storage wallets are likely to create few
transactions and never reuse addresses; so its possible such a cluster
would never appear on walletexplorer.com which uses the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a>. However its also possible that the exchange is insolvent and
so there is no <a href="/wiki/Cold_storage">cold storage</a> wallet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Main article:
<a href="https://blog.zerononcense.com/2019/02/04/quadrigacx-chain-analysis-report-pt-1-bitcoin-wallets/" class="bare">https://blog.zerononcense.com/2019/02/04/quadrigacx-chain-analysis-report-pt-1-bitcoin-wallets/</a></p>
</div>
<div class="paragraph">
<p>Reddit comments:
<a href="https://www.reddit.com/r/Bitcoin/comments/amut05/investigation_proves_an_exchange_quadriga_ran_a/" class="bare">https://www.reddit.com/r/Bitcoin/comments/amut05/investigation_proves_an_exchange_quadriga_ran_a/</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_stopping_bustabit_casino_customers_getting_banned_from_coinbase_com"><a class="anchor" href="#_real_life_example_stopping_bustabit_casino_customers_getting_banned_from_coinbase_com"></a><span id="Real_life_example_-_Stopping_Bustabit_casino_customers_getting_banned_from_Coinbase" class="com  mw-headline">Real life example - Stopping Bustabit casino customers getting banned from Coinbase.com</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Coinbase.com is a bitcoin <a href="/wiki/Exchange">exchange</a>. Bustabit is
an online casino that uses bitcoin.</p>
</li>
<li>
<p>In the United States online gambling is illegal (although state
government often operates their own lotteries, and meatspace gambling
like in Vegas is legal). Coinbase.com enforces this policy by warning
and ultimately banning their customers who use online bitcoin casinos.</p>
</li>
<li>
<p>Some of Bustabit&#8217;s customers were being warned and banned by
Coinbase.com.</p>
</li>
<li>
<p>Bustabit implemented
link:/wiki/Techniques_to_reduce_transaction_fees#Change_avoidance<sup class="change
avoidance"><a href="#cite_note-105">[105</a>]</sup> so many of their withdrawal
transactions did not have a change output.</p>
</li>
<li>
<p>Bustabit also imported many thousands of
<a href="/wiki/Address_reuse">re-used addresses</a> into
<a href="/wiki/JoinMarket">JoinMarket</a> and made them be used as inputs in
many <a href="/wiki/CoinJoin">CoinJoin</a> transactions.</p>
</li>
<li>
<p>No more Bustabit customers were ever warned or banned</p>
</li>
<li>
<p>It seems the combination of both methods broke the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> and reduced the privacy-relevant information leaked by change
outputs, enough that Coinbase.com&#8217;s
<a href="/wiki/Transaction_surveillance_company">transaction surveillance
company</a> partner was unable to identify Bustabit&#8217;s wallet addresses
anymore.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_rare_multisignature_scripts"><a class="anchor" href="#_real_life_example_rare_multisignature_scripts"></a><span id="Real_life_example_-_Rare_multisignature_scripts " class="mw-headline">Real life example - Rare multisignature scripts</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>As of January 2019 <a href="/wiki/Multisignature">multisignature</a> contracts
are visible to any observer of the blockchain.</p>
</li>
<li>
<p>This includes their m-of-n values, the most common by far are 2-of-3
multisig<sup><a href="#cite_note-106">[106</a>]</sup>.</p>
</li>
<li>
<p>Some very unusual scripts such as 12-of-14 multisignature has been
used a handful of times on the blockchain. These are easily visible as
someone&#8217;s wallet who received some money and then spent it.</p>
</li>
<li>
<p>The bitcoin vault of the Xapo company used a 3-of-5 multisignature
scheme. At one point when they moved it which resulted in 90% of the
coins held on 3-of-5 multisig addresses moving on the blockchain. This
revealed the amount of bitcoin in Xapo&#8217;s
wallet<sup><a href="#cite_note-107">[107</a>]</sup>.</p>
</li>
<li>
<p>In 2016 the exchange Bitfinex was hacked and part of its wallet was
stolen. Bitfinex used 2-of-3 multisignature addresses to store its
coins. As the thief moved the hacked coins to regular non-multisignature
addresses, the movement of 120,000 bitcoins out of 2-of-3 multisig was
visible on the blockchain, and it revealed the size of the
theft<sup><a href="#cite_note-108">[108</a>]</sup>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_freelance_it_contractor_has_his_co_workers_figure_out_his_salary"><a class="anchor" href="#_real_life_example_freelance_it_contractor_has_his_co_workers_figure_out_his_salary"></a><span id="Real_life_example_-_Freelance_IT_contractor_has_his_co-workers_figure_out_his_salary " class="mw-headline">Real life example - Freelance IT contractor has his co-workers figure out his salary</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A user posted on the bitcoin reddit forum<sup><a href="#cite_note-109">[109</a>]</sup>
about his experience with co-workers figuring out his salary because of
<a href="/wiki/Address_reuse">address reuse</a>.</p>
</li>
<li>
<p><em>"As a freelance IT contractor, I had one incident where an on-site
specialist found out my daily rate. Surely, he was a bit upset and
complained to his manager about the lack of his own compensation. My
agency fined me for 50% of the monthly rate. Needless to say, I now
create a unique receive address for every invoice, and use another set
of addresses for the daily personal-use expenditure."</em></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: <a href="/wiki/Address_reuse">Address reuse</a> is terrible for privacy.</p>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_hacker_hides_destination_of_445_btc_with_coinjoin"><a class="anchor" href="#_real_life_example_hacker_hides_destination_of_445_btc_with_coinjoin"></a><span id="Real_life_example_-_Hacker_hides_destination_of_445_btc_with_CoinJoin " class="mw-headline">Real life example - Hacker hides destination of 445 btc with <a href="/wiki/CoinJoin">CoinJoin</a></span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In May 2017 a reddit user posted a thread saying they kept 445 btc on
blockchain.info&#8217;s web wallet, and their coins were
stolen<sup><a href="#cite_note-110">[110</a>]</sup>.</p>
</li>
<li>
<p>They offered a 50% bounty for any help or information leading to
finding their bitcoins again</p>
</li>
<li>
<p>The stolen coins turned out to have been mixed through
<a href="/wiki/JoinMarket">JoinMarket</a>. It seems the hacker put the coins in
a JoinMarket yield generator script and allowed them to be used for
coinjoins a large number of times. A CoinJoin peeling chain can be seen.</p>
</li>
<li>
<p>All traces are lost from what anybody has been able to tell.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For good advice on how to store bitcoins without having them stolen by
hackers see the <a href="/wiki/Storing_bitcoins">Storing bitcoins</a> article on
this wiki.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_data_fusion_of_blockchain_data_and_web_cookies_when_online_shopping_with_bitcoin"><a class="anchor" href="#_bad_privacy_example_data_fusion_of_blockchain_data_and_web_cookies_when_online_shopping_with_bitcoin"></a><span id="Bad_privacy_example_-_Data_fusion_of_blockchain_data_and_web_cookies_when_online_shopping_with_Bitcoin " class="mw-headline">Bad privacy example - Data fusion of blockchain data and web cookies when online shopping with Bitcoin</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Online shopping has several potential privacy leaks. Examples are
third-party tracking cookies (such as from sites Doubleclick, Google
Analytics or Facebook), or data given intentionally to merchants such as
name, delivery address or email address.</p>
</li>
<li>
<p>Bitcoin&#8217;s blockchain leaks a lot of privacy-relevant information.</p>
</li>
<li>
<p>Data fusion of these two categories of leaks can reveal a lot of
information about people using Bitcoin for online shopping. This is the
topic of a 2018 paper called When The Cookie Meets The
Blockchain<sup><a href="#cite_note-111">[111</a>]</sup>.</p>
</li>
<li>
<p>For example, if a bitcoin user buys a novelty hat and has it shipped
to their home and then later the same bitcoin wallet donates to
Wikileaks, then the hat merchant and third-party trackers (who know the
user&#8217;s real name and mail address) can figure out that the same user
donated to Wikileaks.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This is example of the power of data fusion, where two or more privacy
leaks which when combined reveal far more information than each
individual leak.</p>
</div>
<div class="paragraph">
<p>The privacy problems of third-party web tracking cookies have been known
for nearly a decade but the situation has not improved much. Privacy can
be regained in practice in this situation by 1) Using browser extensions
such as uBlock Origin, Adblock Plus or Ghostery to block third-party
tracking cookies, and/or 2) Using
<a href="/wiki/Off-Chain_Transactions">off-chain transaction methods</a> to make
payments where much less privacy-relevant information is leaked. Most
practically as of 2019 would be using
<a href="/wiki/Lightning_Network">Lightning Network</a> for online shopping.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_centralized_mixers_being_easily_unmixed_with_amount_correlation"><a class="anchor" href="#_bad_privacy_example_centralized_mixers_being_easily_unmixed_with_amount_correlation"></a><span id="Bad_privacy_example_-_Centralized_mixers_being_easily_unmixed_with_amount_correlation " class="mw-headline">Bad privacy example - Centralized mixers being easily unmixed with amount correlation</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>BitcoinFog is a centralized bitcoin mixer, it charges 1-3% for a mix.</p>
</li>
<li>
<p>Someone on reddit easily unmixes many BitcoinFog mixes using
link:#Amount_correlation<sup class="Amount correlation"><a href="#cite_note-112">[112</a>]</sup></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_bad_privacy_example_data_fusion_of_blockchain_data_and_ip_address_transaction_broadcasting_data"><a class="anchor" href="#_bad_privacy_example_data_fusion_of_blockchain_data_and_ip_address_transaction_broadcasting_data"></a><span id="Bad_privacy_example_-_Data_fusion_of_blockchain_data_and_IP_address_transaction_broadcasting_data " class="mw-headline">Bad privacy example - Data fusion of blockchain data and IP address transaction broadcasting data</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A 2018 paper<sup><a href="#cite_note-113">[113</a>]</sup> uses blockchain analysis and
the tracking of transaction broadcasts to deanonymize bitcoin users.</p>
</li>
<li>
<p>The researchers use <a href="/wiki/Address_reuse">address reuse</a> and the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> (the paper authors do not mention the possibility of
<a href="/wiki/CoinJoin">CoinJoin</a>)</p>
</li>
<li>
<p>The researchers connect to every single listening bitcoin node, and
attempt to track transactions as they broadcast. This gives them an idea
of the originating IP address.</p>
</li>
<li>
<p>The paper identifies about 22,000 bitcoin users by linking their IP
address and bitcoin <a href="/wiki/Address">addresses</a>. About 20,000 of these
users come from one IP address which is probably a popular web wallet.</p>
</li>
<li>
<p>The paper collected data during late-2013, but the Bitcoin Core
transaction relay algorithm has been changed significantly in the
meantime to improve privacy. So the method used should work less well
today.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lesson: Private transaction broadcasting (for example over
<a href="/wiki/Tor">tor</a>) is necessary for privacy.</p>
</div>
</div>
<div class="sect4">
<h5 id="_real_life_example_2018_paper_on_analysis_of_bitcoin_ransomware_transactions"><a class="anchor" href="#_real_life_example_2018_paper_on_analysis_of_bitcoin_ransomware_transactions"></a><span id="Real_life_example_-_2018_paper_on_analysis_of_bitcoin_ransomware_transactions " class="mw-headline">Real life example - 2018 paper on analysis of bitcoin ransomware transactions</span></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A 2018 paper uses tracking techniques to study bitcoin
ransomware<sup><a href="#cite_note-114">[114</a>]</sup>.</p>
</li>
<li>
<p>Some ransomware uses static addresses (which implies
<a href="/wiki/Address_reuse">address reuse</a>) while other ransomware requires
victims to connect to a http server that hands out new bitcoin
addresses.</p>
</li>
<li>
<p>To find ransomware <a href="/wiki/Address">addresses</a> the researchers found
online reports by victims and reverse-engineered ransomware binaries to
find addresses within.</p>
</li>
<li>
<p>They also used <a href="/wiki/Mystery_shopper_payments">mystery shopper
payments</a>, sending 0.001 BTC to ransomware addresses and watching where
that coin is sent to. Two ransomware operators (Cerber and Locky) took
the bait but one operator (Sage) did not and so his cluster was never
found.</p>
</li>
<li>
<p>The researchers use the
<a href="/wiki/Common-input-ownership_heuristic">common-input-ownership
heuristic</a> to find clusters of <a href="/wiki/Address">addresses</a>. They know
that <a href="/wiki/CoinJoin">CoinJoin</a> breaks this assumption and so search
for detectable <a href="/wiki/CoinJoin">CoinJoin</a> transactions within the
clusters which would indicate a break. This was before the invention or
implementation of <a href="/wiki/PayJoin">PayJoin</a> so it is assumed that all
coinjoins can be detected.</p>
</li>
<li>
<p>The researchers try to match incoming payments to the ransomware
clusters with spikes in Google searches for that ransomware, and uploads
of the ransomware binary to malware-tracking websites. If there are
spikes in google searches or binary uploads without a corresponding
increase in incoming bitcoin payments, then that indicates that the
researchers have missed some clusters belonging to the ransomware
wallets. This is <a href="#Timing_correlation">Timing correlation</a> in use.
The researchers conclude they are in fact missing most clusters for
CryptoDefense, CryptoLocker, and CryptoWall, but probably have all the
clusters for the other ransomware they study.</p>
</li>
<li>
<p>A <a href="/wiki/Transaction_surveillance_company">transaction surveillance
company</a> called Chainalysis is used to find the ownership of certain
addresses. It works particularly well for exchanges which share their
data with Chainalysis. With this the destination of ransomware funds can
be tracked. The largest known destination is the BTC-E, a now-shut-down
Russian bitcoin exchange with lax controls that was widely known to be
used by criminals. However the vast majority of funds is sent to Unknown
destinations. One ransomware called CryptoXXX is ~95% sent to Unknown,
WannaCry had 100% unknown. The researchers write BTC-E in the paper&#8217;s
abstract and conclusion because that&#8217;s the biggest destination they
could find, but in reality most of the ransomware money could not be
tracked</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The paper is an excellent example of transaction tracking. The
researchers take great care in their conclusions, as in blockchain
analysis it is sometimes easy to trick yourself into thinking you know
more than you do. It is worth reading by anyone interested in bitcoin
privacy.</p>
</div>
<div class="paragraph">
<p>Ransomware is a threat. Always keep good backups of your important data.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adam_back_and_matt_corallo_fungibility_overview"><a class="anchor" href="#_adam_back_and_matt_corallo_fungibility_overview"></a>3.7. Adam Back and Matt Corallo - Fungibility Overview</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/scalingbitcoin/milan-2016/fungibility-overview/" class="bare">https://btctranscripts.com/scalingbitcoin/milan-2016/fungibility-overview/</a></p>
</li>
<li>
<p>Author: Adam Back and Matt Corallo, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-05-24</p>
</li>
<li>
<p>Video: <a href="https://youtu.be/AvS3tp0qqgA?t=56" class="bare">https://youtu.be/AvS3tp0qqgA?t=56</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_introduction_2"><a class="anchor" href="#_introduction_2"></a>Introduction</h4>
<div class="paragraph">
<p>Alright. So let’s get started. Okay. Why fungibility? Let’s start. What
does fungibility mean? Bitcoin is like cash. The hope is that it’s for
immediate and final payments. To add some nuiance there, you might have
to wait for some confirmations. Once you receive a bitcoin, you have a
bitcoin and that’s final. So even with banks and PayPal, who sometimes
shutdown accounts for trivial reasons or sometimes no reason at all,
it’s typically not the case that it’s someone who sent you money… if you
were selling something on ebay, and someone bought an item from you, and
that person had an account shutdown, the money you received will not be
removed from your account. This effects– the multiple hops of people
sending you bitcoin, if they are associated with som trade on Silk Road
or something like that, it turns out that some exchanges and wallets are
using taint-tracing services and up to 4 hops away from you, if
something is associated with Silk Road, they will ask you to freeze your
funds and take your funds elsewhere. The reality is that for people
using bitcoin on those services, the fungibility in bitcoin is actually
worse than Paypal, because other people’s actions unrelated to you– and
4 hops away is a very long way away– and potentially anyone who has done
any trades with bitcoin is 4 hops away; it’s a very interconnected
system. There’s a social networking theory that everyone is within 13
hops globally of everyone else. Paypal doesn’t freeze your funds if your
customer’s customer’s do something bad; and in bitcoin this is happening
because of companies…</p>
</div>
<div class="paragraph">
<p>Your lack of fungibility impacts everyone else. So fungibility costs are
externalized. Everyone needs fungibility, or nobody has it. “Nothing
hide nothing to fear” doesn’t work because while you might have nothing
to hide, you don’t necessarily know how the data is going to be
interpreted in the future. This impacts the value of the coin because it
becomes worse money.</p>
</div>
<div class="paragraph">
<p>Fungibility can impact permissionlessness. It’s a critical feature of
bitcoin that we have this permissionless. You need fungibility for
bitcoin to function. If you receive coins and can’t spend them, then you
start to doubt whether you can spend them. If there are doubts about
coins you receive, then people are going to go to taint services and
check whether “are these coins blessed” and then people are going to
refuse to trade. What this does is it transitions bitcoin from a
decentralized permissionless system into a centralized permissioned
system where you have an “IOU” from the blacklist providers. Obviously,
we don’t want this to happen. If you don’t have permission to
transaction, then you wouldn’t have bitcoin. If someone had to go to a
central service to check if their coins are invalid, then this could
eventually lead to collapse and lapse of confidence. There is precidence
in physical money that there are court cases in the distant pass where
there were concepts about for money to be functional, it has to be
fungible. So there are rules against… if you unknowingly received lost
property, and it turns out it’s stolen, then you lose and have to give
it back. But with cash and paper money, that’s not the case,by law in
most countries in the world. That’s because of this issue where if you
can’t have confidence about receiving money, then it makes the currency
non-functional and it impacts the economy.</p>
</div>
<div class="paragraph">
<p><a href="http://diyhpl.us/wiki/transcripts/bitcoin-adam3us-fungibility-privacy/" class="bare">http://diyhpl.us/wiki/transcripts/bitcoin-adam3us-fungibility-privacy/</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_taint_tracing"><a class="anchor" href="#_taint_tracing"></a>Taint tracing</h4>
<div class="paragraph">
<p>Taint tracing is backwards looking. It’s not so much “who is receiving
the money” but rathr backwards up to 4-hops. Who was involved in the
money? It’s primarily focused on grouping transactions from individual
groups of senders, or the UTXOs and who owns those. This is in part….
there are a series of academic papers that look at network analysis, and
there are factors about the way bitcoin is used that makes taint
analysis easier. Most inputs tend to come from a single donor, so that
correlates UTXOs to the belonigng to the same person.</p>
</div>
<div class="paragraph">
<p>Address reuse is bad.</p>
</div>
<div class="paragraph">
<p>Another type of attack is network address taint tracing. When someone
broadcasts a transaction, then people connect to nodes on the network
and try to identify the IP address of the sender by looking at trickle
on the network.</p>
</div>
<div class="paragraph">
<p>Different wallets send slightly different network transactions too,
because of differences in parameters. This reduces the anonymity set,
where the anonymity set is the set potential of senders.</p>
</div>
<div class="paragraph">
<p>Transaction censorship is another attack.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scalability"><a class="anchor" href="#_scalability"></a>Scalability</h4>
<div class="paragraph">
<p>Fungibility can be a tradeoff with scalability. In some cases,
fungibility can hurt scalability. Sometimes fungibility can bring a
large scalability improvement. The reason why fungibility impacts
scalability s because fungibility aims to reduce information leakage– so
this means that sometimes less information goes into the blockchain. And
conversely, if we have extremely high scalability, like transaction
throughput and bandwidth, this can also in the other direction help
fungibility because we can use some types of fungibility that use more
data like
<a href="http://diyhpl.us/~bryan/papers2/bitcoin/Borromean%20ring%20signatures.pdf">ring
signatures</a> and
<a href="https://people.xiph.org/~greg/confidential_values.txt">confidential
transactions</a> (see also
<a href="http://diyhpl.us/wiki/transcripts/gmaxwell-confidential-transactions/">this
talk</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_transaction_graph_privacy_address_reuse"><a class="anchor" href="#_transaction_graph_privacy_address_reuse"></a>Transaction graph privacy: Address reuse</h4>
<div class="paragraph">
<p>Address reuse, most wallets are using hierarchical deterministic
wallets, which has advantages for backup scenarios. Another type of
address privacy is the “stealth address” which hasn’t been so much used
because it’s difficult to find payments. So you have to be a full node
or you have to rely on a third party service to scan the network for
you.</p>
</div>
</div>
<div class="sect3">
<h4 id="_transaction_graph_privacy_inputs_and_outputs"><a class="anchor" href="#_transaction_graph_privacy_inputs_and_outputs"></a>Transaction graph privacy: inputs and outputs</h4>
<div class="paragraph">
<p>I think this transaction graph privacy refers to the concept of peope
being able to scan th eblockchain and being able to analyze the flow of
transactions, that’s probably what people think of the most for
fungibility. So the most obvious thing to solve fungibility is
<a href="https://bitcointalk.org/index.php?topic=279249.0">coinjoin</a>. It’s great.
Depending on how coinjoin is done, it can be a slight improvement in
scalability. It can reduce the size of transactions, some. It primarily
focuses on increasing your anonymity set, making it more private as to
which inputs correlate to which outputs, which makes transaction graph
analysis a bit harder. It’s not a massive win, but we will talk about
that in a second.</p>
</div>
<div class="paragraph">
<p>Tumblebit authors are going to present soon
(<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/milan/tumblebit/">tumblebit
presentation</a>). I’m going to leave this out. It’s a big scalability win.</p>
</div>
<div class="paragraph">
<p>Lightning is obviously a massive scalability improvement. It came out of
being a scalability solution; it was not designed to be for fungibility.
However, it has onion routing for pamyents, so if your goal is to
increase privacy about where coins are going and where they came from,
then onion routing is one of the big things that everyone hopes for.</p>
</div>
<div class="paragraph">
<p>Another thing that people think about is
<a href="http://diyhpl.us/~bryan/papers2/bitcoin/Ring%20CT%20for%20Monero.pdf">ring
signatures</a>, which was pioneered by Monero. People like to talk about
Monero as a more private bitcoin. Monero, the way it accomplishes better
privacy is to for each input spending a given output, you spend an
output but you don’t identify which one, but you can validate that the
transaction is valid, fi you try to double spend the network can detect
it. You can increase your anonymity set here. You can’t say “this output
was directly related to this input” you can’t do that.</p>
</div>
<div class="paragraph">
<p>The next solution that we have kinda for input-output privacy is
<a href="http://diyhpl.us/~bryan/papers2/bitcoin/Increasing%20anonymity%20in%20bitcoin%20using%20one-way%20aggregatable%20signatures.pdf">one-way
aggregate signatures</a>. I don’t think an altcoin has implemented this
yet. It’s a good idea. The effect on fungibility is that it’s coinjoin
for every block. A block becomes a single large transaction. You can’t
correlate inputs and outputs other than they appeared in the same block.
There’s still some analysis you can do on the p2p network layer, but
it’s great for fungibility in consensus history. It has some additional
cryptographic assumptions, though. The way that people have proposed
doing OWAS is perhaps a little weaker in crypto assumption terms; it has
been less studied than the other forms of cryptography. So it is hard to
bet a lot of money in it immediately.</p>
</div>
<div class="paragraph">
<p>Zcash is a bigger step towards fungibility– it hides essentially
everything about a transaction, you can only see that a transaction
happened at all. It has much different cryptographic assumptions.
zkSNARKs are very new and have been studied much less. It’s awesome
technology, however it’s highly… it’s laughably large blocks, it’s
unscalable. Large transactions. Takes a long time to validate
transactions.</p>
</div>
<div class="paragraph">
<p><a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/milan/mimblewimble/">Andrew
Poelstra will be talking about mimblewimble later</a>. It has OWAS-like
protection, ring signature-like protection, and has awesome scaling as
well.</p>
</div>
<div class="paragraph">
<p>So let’s move on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_balance_privacy"><a class="anchor" href="#_balance_privacy"></a>Balance privacy</h4>
<div class="paragraph">
<p>A big way which people identify transactions as from the same sender is
able to group and split transactions according to different groups of
senders. This is balance privacy. The biggest example is that in a given
transaction you can see the inputs and outputs and it’s often easy to
correlate which output is the change, just based on the output value. A
way that people fix this in coinjoin is balance discretization, so that
every output is 0.1 BTC or 1 BTC. This is obviously expensive in terms
of scalability. You need more transaction outputs to represent the same
value.</p>
</div>
<div class="paragraph">
<p>This is where confidential transactions (CT) comes in. It’s much more
expensive cryptographically– more operations, longer to validate, bigger
signatures on the inputs, but it’s essentially giving you the same
zcash-style privacy of balances where you can see nothing about the
balance other than it was a valid spend of the previous output without
needing to do any discretization where you have a number of outputs per
value.</p>
</div>
<div class="paragraph">
<p>Mimblewimble of course again, it’s kind of an extended version of
confidential transactions. I’ll let Andrew Poelstra get to that.</p>
</div>
<div class="paragraph">
<p>Zcash also again, it has the same properties where you can’t see
anything about the transaction going in or out, but again terrible
scaling.</p>
</div>
</div>
<div class="sect3">
<h4 id="_network_attacks"><a class="anchor" href="#_network_attacks"></a>Network attacks</h4>
<div class="paragraph">
<p>Let’s talk about network attacks. They are kind of the biggest way that
we see fungibility loss today. Across the netwrk, if you have a node
online for a short period of time, there’s some Chainanalysis firm that
makes 50 connections to your nodes instantly. They claim to be Android
wallet but they don’t even have the same behavior. So they connect to
everyone and do this heavily to correlate transactions and where they
came from, which happens to be a good indicator of who sent the
transaction.</p>
</div>
<div class="paragraph">
<p>Big issue in the network stoday and privacy of the users is
<a href="https://github.com/bitcoin/bips/blob/master/bip-0037.mediawiki">bip37
bloom filters</a>. I’m sorry. I wrote that. It’s terribly not private.
There have been a bunch of posts, one in 2015 and a few before that,
essentially the way that the “SPV” wallets do blockchain sync today is
they send your addresses to all the peers, and if you’re a Chainanalysis
service, then this is massively detrimental because you’re telling them
the exact set of addresses, so they can connect which address and which
IP addresses are connected to you in the future and they can watch as
you move across the network. There’s a few solutions we have for that,
like committed bloom filters are maybe a solution. There has been some
work in the mailing list regarding flipping away that people do scanning
of the chain for addresses in a private way.</p>
</div>
<div class="paragraph">
<p>Connect-to-everyone attacks. They make 50 connections to everyone. This
is terrible. Luckily this is one fo the few slides where I can say
there’s not just lots of ways we can fix fungibility but Bitcoin Core
has been putting work into how it relays transaction, so that it doesn’t
say when you receive a transaction. This will improve the trickle
analysis defense. Someone coming from a Chainalysis service opened a
pull request against Bitcoin Classic asking this change to be reverted
so they could do “better more compliant tracking” and this was obviously
rejected from Bitcoin Classic as well.</p>
</div>
<div class="paragraph">
<p>There has been a lot of effor t randomizing the order in which
transactions are sent to your peers. Randomness is not sufficient. Some
various anonymity software like tor and such fought hard to learn that
randomness is not sufficient protection for anonymity. If you have
enough points, you can plot them and then see whether they match the
random curve and then group transactions based on that. So it’s not
great.</p>
</div>
<div class="paragraph">
<p>In Bitcoin Core 0.14 and later, there’s some work going in. But
randomness has got a lot of work.</p>
</div>
<div class="paragraph">
<p>Improving transaction relay across the network is a good start. It’s
still the case though that man-in-the-middle attacks, like a global
passive adversary, can identify where transactoins come from. The bip151
talk tomorrow will be interesting on this front. In Bitcoin Core, there
has been some research about how to do really private relay, like if
you’re willing to wait for transaction relay using mixnets, where you
can run an external daemon and you can handle some transactions to the
daemon and then it does some crazy mixnet…. it would be deeply
appreciated if someone would go finish that work.</p>
</div>
</div>
<div class="sect3">
<h4 id="_transaction_features_identifications"><a class="anchor" href="#_transaction_features_identifications"></a>Transaction features identifications</h4>
<div class="paragraph">
<p>A lot of chain analysis anti-fungibility services have become good at
identifying which transactions come from which wallets. Coin selection
is one way to determine who you are. A lot of coin selection algorithms
give away which output is your chain output, and which wallet you were
using based on the change output amount. Many of the coin selection
methods are deterministic, so if someone wants to guess, then they can
confirm whether they were right based on watching your transactions.</p>
</div>
<div class="paragraph">
<p>Finally, fee selection– which fee are you using? This could give away
whih wallet you’re using.</p>
</div>
<div class="paragraph">
<p>Another issue is which scripts are used. These scripts are identifiabe.
<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/milan/schnorr-signatures/">Pieter
will talk about Schnorr signatures</a>. People have also thought about
using …
<a href="https://github.com/bitcoin/bips/blob/master/bip-0114.mediawiki">MAST</a>..
using a <a href="https://en.wikipedia.org/wiki/Merkle_tree">merkle tree</a> over the
script to reveal only part of the script. This is wonderful because you
can say either a multisig of all the participants, or we run whatever
contract we were attempting to do, so every transaction looks like a
multisig in the default case.</p>
</div>
<div class="paragraph">
<p>Finally, <a href="https://github.com/scipr-lab/libsnark">zkSNARK-based systems</a>…
this would be kind of gold standard in that all scripts would look the
same.</p>
</div>
<div class="paragraph">
<p>So finally there’s some non-script transaction features, like in Bitcoin
Core, there is incentive compatibility where it sends all transactions
with a locktime of the current blockheight so that it can only confirm
at the next blockheight. This unfortunately gives away the fact that you
are using Bitcoin Core.</p>
</div>
</div>
<div class="sect3">
<h4 id="_transaction_censorship"><a class="anchor" href="#_transaction_censorship"></a>Transaction censorship</h4>
<div class="paragraph">
<p>If someone can successfully censor your coins or any transaction that
spends your coins, then your coins are less valuable. If they take 1 day
to confirm or 6 hours to confirm, or they can’t confirm, then that’s
really nasty because your coins are now worth much less than other
coins. Right now there’s no evidence that miners are doing anything
gnarly here. However, it would be better if we could always make sure of
this. In the near term, if miners continue to be honest, we would like
software to notify people that miners have gone bad if they are coerced
(perhaps by the US government) or something…</p>
</div>
<div class="paragraph">
<p>The final one is encrypted transactions. There has been a lot of work
thinking about this. You commit to a transaction, the chain knows
nothing about the transaction or which coins were moving. This is great
for preventing transaction censorship. If the miners don’t know what
they were mining, then they can’t censor you.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conclusions"><a class="anchor" href="#_conclusions"></a>Conclusions</h4>
<div class="paragraph">
<p>If you were paying close attention, you might have noticed that a lot of
layer 2 solutions like <a href="http://lightning.network/">Lightning</a>, a lot of
fungibility solutions involve moving transfers off-chain. As Adam
mentioned, this is incredibly powerful because there’s less knowledge of
all the data moving around. So it’s much harder to attack fungibility.
Sometimes having more transactions improves your anonymity set size.</p>
</div>
<div class="paragraph">
<p>Most of these things have not been implemented or don’t have heavy use–
but we do know how to fix bitcoin and make it act like what we want it
to be, rather than the traceable asset it acts like today.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_qa_privacy_tips"><a class="anchor" href="#_bitcoin_qa_privacy_tips"></a>3.8. Bitcoin Q+A - Privacy tips</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/scalingbitcoin/milan-2016/fungibility-overview/" class="bare">https://btctranscripts.com/scalingbitcoin/milan-2016/fungibility-overview/</a></p>
</li>
<li>
<p>Author: Adam Back and Matt Corallo, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-05-24</p>
</li>
<li>
<p>Video: <a href="https://youtu.be/AvS3tp0qqgA?t=56" class="bare">https://youtu.be/AvS3tp0qqgA?t=56</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_10_tips_to_interact_with_bitcoin_more_privately"><a class="anchor" href="#_10_tips_to_interact_with_bitcoin_more_privately"></a><strong>10 Tips to Interact with Bitcoin More Privately</strong></h4>
<div class="paragraph">
<p>As incredible as Bitcoin is, it still comes with some tradeoffs that
users need to contend with. Depending on how you interact with the
protocol, there are many pot holes that can trip up new users which can
result in information leaks which can, quite frankly, be dangerous. I’ve
put together a short 10 step guide to help newcomers improve their
privacy when interacting with Bitcoin. This isn’t designed to be a ‘must
have’ list for everyone to live by from day 1, everyone has different
skill levels and priorities, so understanding and implementing all of
this from the start just isn’t going to happen.</p>
</div>
<div class="paragraph">
<p>The steps list the simplest and most important first, then get more
technical the further down you go. Obviously you don’t have to do them
in order, but look at the later steps as something to work towards
longer term as you look to really lock down your privacy. Listed
underneath each step will be the tradeoffs that come with each.</p>
</div>
<div class="paragraph">
<p>I am by no means a privacy expert and continue to learn from other, far
more experienced bitcoiners than myself, so if you think I’ve missed
anything please let me know!</p>
</div>
<div class="sect4">
<h5 id="_step_1_dont_tell_anyone"><a class="anchor" href="#_step_1_dont_tell_anyone"></a>Step 1 - Don’t tell anyone</h5>
<div class="paragraph">
<p>I told you the steps start simple… This may seem obvious but I feel like
it needs to be said anyway. The less people that know you have bitcoin,
the better. There have been numerous accounts of people being either
assaulted physically or hacked online resulting in them losing bitcoin.
Think about it, are you really gaining anything by posting a screenshot
on Twitter of your latest bitcoin purchase?</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - You can’t flex on Twitter you may find it difficult to
help onboard others without giving away the fact you own Bitcoin.</p>
</div>
</div>
<div class="sect4">
<h5 id="step-2---control-your-own-keys--practice-coin-control"><a class="anchor" href="#step-2---control-your-own-keys--practice-coin-control"></a>Step 2 - Control your own keys + Practice coin control</h5>
<div class="paragraph">
<p>Hopefully something you learned early on in your bitcoin career, not
your keys, not your coins. If someone else has custody of your bitcoin,
you essentially have zero privacy. They know your complete balance, so
look to move those coins into a wallet where you control the private
keys as quickly as possible.</p>
</div>
<div class="paragraph">
<p>When selecting a wallet look to use one that offers full coin control.
Coin control allows you to label and manage the specific pieces of
bitcoin (called UTXO’s) you receive. This can be very useful when you
come to spend so that you don’t unwittingly combine UTXO’s from
undesirable sources. If all of your bitcoin are coming from the same
source eg a KYC exchange then you could possibly place less of an
emphasis on this aspect but it’s a good habit to get into.</p>
</div>
<div class="paragraph">
<p><a href="/wallet">Here</a> is a website I created to help you compare the
different types of Bitcoin wallets.</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - You need to remember to label your UTXO’s so you can
easily identify their source when you come to spend.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_3_be_anonymous_online"><a class="anchor" href="#_step_3_be_anonymous_online"></a>Step 3 - Be anonymous online</h5>
<div class="paragraph">
<p>This is a trend that dates back almost to the start of the internet.
Create an online persona and keep it completely separate from your real
identity. You can create accounts on Twitter and Telegram etc without
supplying any personal details. Obviously you need to ensure that when
using your online alias you do not give away any sensitive information
that could be linked to your real identity, which links back to step 1.
The less people know about you, the better.</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - You need to take extra care when online. Some accounts
require a phone number so think about obtaining a separate sim.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_4_use_encryption_tools"><a class="anchor" href="#_step_4_use_encryption_tools"></a>Step 4 - Use encryption tools</h5>
<div class="paragraph">
<p>You might think this is a strange one to include at step 4, but there
are plenty of tools out there now that use encryption but still have a
simple user interface. Scenarios such as getting a bitcoin address from
one device to another can leak sensitive info to third parties. Using
encryption prevents helps this.</p>
</div>
<div class="paragraph">
<p>Look for encrypted alternatives to your usual apps such as…</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Email</strong> - <a href="https://tutanota.com/">Tutanota</a> or
<a href="https://protonmail.com/">Proton Mail</a></p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Messaging</strong> - <a href="https://signal.org/en/">Signal</a>,
<a href="https://keybase.io/">Keybase</a> or <a href="https://wire.com/en/">Wire</a></p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Notes</strong> - <a href="https://standardnotes.org/">Standard Notes</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - While the UX of encrypted services like those listed above
has improved drastically, they still have a way to go to match up with
their less secure counterparts</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_5_use_torvpn_services"><a class="anchor" href="#_step_5_use_torvpn_services"></a>Step 5 - Use Tor/VPN Services</h5>
<div class="paragraph">
<p>When browsing online, your internet service provider can see all of your
web traffic. Whether it’s searching for ‘bitcoin wallet’, querying an
explorer like <a href="https://www.kycp.org/#/">kycp.org</a> or connecting to your
hardware wallet’s online interface, they can see it all. The aim here is
to not tie your bitcoin related information to your network IP.</p>
</div>
<div class="paragraph">
<p>Now if you were to do those activities listed above via the
<a href="https://www.torproject.org/download/">Tor</a> browser, your ISP would not
see any of that traffic. The Tor network bounces your traffic off
different ‘relays’ across its network before it reaches its final
destination. If using a mobile wallet, you should look to use one with
integrated Tor for additional privacy. How tor browser works A VPN acts
slightly differently. It provides privacy by ‘tunneling’ your web
traffic to a different server which is generally located somewhere in a
different country. Whilst this does prevent your ISP from spying on your
online activity, you do place some trust in the VPN server you are
connecting to. <a href="https://mullvad.net/en/">Mullvad</a> is a good option that
allows you to pay in bitcoin and does not require any personal
information whatsoever upon signup.</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - Tor can sometimes be slow and certain websites don’t work
great. VPN’s require a level of trust in the VPN provider.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_6_buy_non_kyc"><a class="anchor" href="#_step_6_buy_non_kyc"></a>Step 6 - Buy non-KYC</h5>
<div class="paragraph">
<p>To buy bitcoin from a KYC exchange, you will need to provide personal
information. Usually this info is in the form of name, address, drivers
license, and in some cases a selfie holding a piece of paper with the
name of the exchange and the date. KYC information not only ties your
personal identity to any bitcoin you purchase, but also creates a huge
honey pot of sensitive information at risk of being stolen due to
incompetent security practices at some of these companies.</p>
</div>
<div class="paragraph">
<p>Once you purchase bitcoin via KYC, no amount of coinjoining or elaborate
spending techniques will erase the fact that on X date and at X time,
this person bought X amount of bitcoin from this exchange. Visit
<a href="https://kycnot.me/">kycnot.me</a> for a great list of ways to purchase KYC
free bitcoin. Buying bitcoin in person at a meet up or event is also an
option but then you risk what we covered in Step 1. As always, there are
tradeoffs.</p>
</div>
<div class="paragraph">
<p>My personal favourite is <a href="https://bisq.network/">Bisq</a> and I’ve written a
step by step
<a href="https://www.bitcoinqna.com/post/10-steps-to-your-first-non-kyc-bitcoin">guide</a>
on how to make your first purchase. Bisq trade video by KIS Bitcoin
Those of you wanting to take it one step further and gain the ultimate
in KYC free bitcoin, by mining. Check out
<a href="https://twitter.com/DiverterNoKYC">@DiverterNoKYC</a> article
‘https://keybase.pub/diverterbtc/Mining%20for%20the%20Streets.doc[Mining
for the Streets]’ where he discusses how to set up your own miner at
home.</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - You generally pay a premium above the ‘spot price’ to
purchase KYC free. (A small price to pay if you ask me). The liquidity
is can sometimes be problematic and the UX still needs some work.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_7_run_your_own_node"><a class="anchor" href="#_step_7_run_your_own_node"></a>Step 7 - Run your own node</h5>
<div class="paragraph">
<p>You cannot send or receive over the Bitcoin network without interacting
with a node. If that node is not yours then you are trusting someone
else’s. Let’s say you use the Trezor web interface to interact with your
hardware wallet. When you send or receive using the interface, your
transaction goes through Trezor’s node which means that they know the
balance of all of your addresses and they also know the addresses of
every entity you send bitcoin to via their app.</p>
</div>
<div class="paragraph">
<p><a href="/node">Here</a> is a website I created to help you understand why
running a node is important and to also enable you to compare the
different types of Bitcoin nodes.</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - You will need to invest some time and energy into setting
up our node and ensuring it is kept up to date with the latest software.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_8_transact_off_chain"><a class="anchor" href="#_step_8_transact_off_chain"></a>Step 8 - Transact off chain</h5>
<div class="paragraph">
<p>Just like with physical cash, moving bitcoin off chain is much less
traceable. There are two main options when transacting away from the
Bitcoin base layer…</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use <a href="https://www.bitcoinqna.com/post/opendime-101">Opendime</a>, a USB
stick made by <a href="https://coinkite.com">Coinkite</a> that allows you to transact
bitcoin in the same way you would a dollar bill, by physically handing
it from one person to the next.</p>
</li>
<li>
<p>Use <a href="https://www.bitcoinqna.com/lightning">Lightning</a>. After you open a
lightning channel you can pay as many other users on the Lightning
network as your balance permits without creating an on-chain footprint
like a traditional transaction would. Lightning channel open and closes
still take place on chain and there are ways you can still leak your
privacy so it is by no means the magic bullet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - Both methods come with added friction and complexity.
Particularly Lightning which requires channel management.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_9_coinjoin"><a class="anchor" href="#_step_9_coinjoin"></a>Step 9 - Coinjoin</h5>
<div class="paragraph">
<p>The Bitcoin blockchain is completely public, so if you have bitcoin that
is tied to your personal identity (say from a KYC exchange) you can be
followed on chain by anyone with the right resources that is surveilling
the blockchain. This problem gets worse if you inadvertently combine
bitcoin from different sources when making a transaction.</p>
</div>
<div class="paragraph">
<p>There are different types of Coinjoin implementations, each with their
own take on the same basic idea. Two or more users pool their UTXO’s
together into a collaborative transaction. The way the transaction is
constructed makes it very difficult for surveillance firms to know
exactly which transaction output belongs to which of the input owners.
At best anyone looking at the transaction can come up with a number of
possible scenarios as to who owns which piece of bitcoin, but they can
never be 100% sure.</p>
</div>
<div class="paragraph">
<p>One thing worth noting here is that Coinjoin does not erase your KYC
purchase history, it simply stops those coins being tracked from then
on. Providing you practice good post mix spending habits!</p>
</div>
<div class="paragraph">
<p>Samourai Wallet offer, in my opinion, the best and easiest to use
Coinjoin implementation and by far the best post mix spend toolset on
offer today. <a href="https://samouraiwallet.com/whirlpool">Whirlpool</a> coinjoins
can be done on your Android phone or via a desktop application that
links to your phone wallet. Here is a step by step
<a href="/mobilecoinjoin">guide</a> to your first Coinjoin using Samourai.</p>
</div>
<div class="paragraph">
<p>Non Android users should look into
<a href="https://github.com/JoinMarket-Org/joinmarket-clientserver">Joinmarket</a> as
an alternative although it’s worth noting that it’s a little more
difficult to use.</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - All coinjoin implementations come with varying degrees of
complexity and fee structures.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_10_go_google_free"><a class="anchor" href="#_step_10_go_google_free"></a>Step 10 - Go Google free</h5>
<div class="paragraph">
<p>This one seems especially timely given the recent automatic roll out of
the ‘contact tracing’ apps that are now baked into both Apple and
Android phone operating systems. The issue raises some serious questions
on how this software could be used for dragnet surveillance in the not
too distant future.</p>
</div>
<div class="paragraph">
<p>There are now teams of people such as <a href="https://grapheneos.org/">Graphene</a>
and <a href="https://copperhead.co/">Copperhead</a> who have created stripped down
and secured versions of the Android operating system. They come with all
Google Play services removed which takes with it a raft of tracking and
data collection software. Thanks to F-Droid, Aurora Store or direct APK
downloads you can still access your favourite apps, but do so with
caution, each extra app you install broadens the phone’s ‘attack
surface’ slightly. Be cut throat and only install what you absolutely
need to.</p>
</div>
<div class="paragraph">
<p><a href="https://youtu.be/oO0UFZjuotg">Here</a> is a guide from Matt Odell showing a
full installation of Graphene OS in just 20 minutes.</p>
</div>
<div class="paragraph">
<p>It’s also good advice to go as
<a href="https://www.investopedia.com/terms/f/faang-stocks.asp">FAANG</a> free as you
can. All of these companies profit from selling your personal data.
Linux operating systems are free, open source and have come a long way
recently in terms of user experience. Linux operating systems are a
great, private alternative and can be installed on pretty much any
laptop or desktop.</p>
</div>
<div class="paragraph">
<p>There are lots to choose from but <a href="https://ubuntu.com/">Ubuntu</a> is one of
the most popular and easy to use.</p>
</div>
<div class="paragraph">
<p><strong>Tradeoffs</strong> - Graphene/Copperhead only run on specific phones and
require some technical skills to install safely and correctly. Getting
to grips with Linux after years of Apple/Windows use make take a little
perseverance.</p>
</div>
<hr>
<div class="paragraph">
<p>The steps listed here are not gospel and can change as technology and
Bitcoin evolve. Nor do they need to be completed in any specific order,
carrying out any of them should help, if only a small amount. In my
opinion, perfect privacy doesn’t exist in Bitcoin. It’s a spectrum on
which we all move along. Hopefully this article will help you make at
least one step in the right direction.</p>
</div>
<div class="paragraph">
<p>One final thing to remember, <strong>it only takes a split second to undo years
of good privacy practices.</strong> Move slow and ask questions.</p>
</div>
<div class="paragraph">
<p>Want to learn more on bitcoin privacy? Check out these two podcasts…</p>
</div>
<div class="paragraph">
<p><a href="https://www.whatbitcoindid.com/podcast/the-beginners-guide-to-bitcoin-part-12-bitcoin-privacy-opsec">What
Bitcoin Did</a> with Jameson Lopp</p>
</div>
<div class="paragraph">
<p><a href="https://stephanlivera.com/episode/117/">Stephan Livera</a> with Pura Vida</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you need help getting started with improving your privacy, I offer
private <a href="/support">support calls</a> for those that benefit from more
personalised tuition.</p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><a href="https://twitter.com/BitcoinQ_A">By Bitcoin Q+A</a> |
<a href="https://tips.bitcoiner.guide">Support</a> | <a href="/articles">More articles</a><br>
<br></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_chris_belcher_breaking_bitcoin_privacy"><a class="anchor" href="#_chris_belcher_breaking_bitcoin_privacy"></a>3.9. Chris Belcher - Breaking Bitcoin Privacy</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/breaking-bitcoin/2019/breaking-bitcoin-privacy/" class="bare">https://btctranscripts.com/breaking-bitcoin/2019/breaking-bitcoin-privacy/</a></p>
</li>
<li>
<p>Author: Chris Belcher, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-05-24</p>
</li>
<li>
<p>Video: <a href="https://www.youtube.com/watch?v=9mvm-tdxv7o" class="bare">https://www.youtube.com/watch?v=9mvm-tdxv7o</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_introduction_3"><a class="anchor" href="#_introduction_3"></a>Introduction</h4>
<div class="paragraph">
<p>Hello everybody. I invented and created joinmarket, the first really
popular coinjoin implementation. A couple months ago I wrote
<a href="https://en.bitcoin.it/wiki/Privacy">a big literature review on privacy</a>.
It has everything about anything in privacy in bitcoin, published on the
bitcoin wiki. This talk is about privacy and what we can do to improve
it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_why_privacy_2"><a class="anchor" href="#_why_privacy_2"></a>Why privacy?</h4>
<div class="paragraph">
<p>Privacy is essential for fungibility, a necessary property of money
where one unit is always equal to any other unit. When you receive a
coin, you shouldn’t need to do any additional checking about the coin
other than validity. It would be a nightmare to have to check a
centralized blacklist or some government-run blacklist or whatever. If
that happened, that would destroy the decentralization of bitcoin
because it would be centralized.</p>
</div>
<div class="paragraph">
<p>Another reason we’re interested in privacy is censorship resistance. If
your transactions are visible to the world, then you could be
discriminated against. Similarly, if your landlord could see your coins
then your landlord would be able to hit you up for more rent if he sees
your increase in salary or income. If you run a business, then
competitors might be able to undercut you or compete with you.</p>
</div>
<div class="paragraph">
<p>We live in a world now where advertisers and social media accesses your
data and collects your information. It would be nice if we could avoid
that.</p>
</div>
<div class="paragraph">
<p>When I talk about privacy, I want to say that privacy is something where
you can voluntarily reveal information if you want to. If you’re an
exchange, you could do proof-of-reserves. You can still reveal things if
you want to. Privacy is the act of choosing what you reveal to the world
and to whom.</p>
</div>
<div class="paragraph">
<p>When we talk about privacy and security, we have to talk about threat
models. The threat model is the bitcoin transaction surveillance
companies like Chainalysis and Elliptic. These companies have a business
model based on breaking the privacy of bitcoin, getting transaction data
and tracking everything and selling the data to governments and
businesses that want to do surveillance. If you run a business and you
think your competitors don’t have the skills to spy on you, but really
they could just pay a company that offers the service.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_chain_wallet_clustering"><a class="anchor" href="#_on_chain_wallet_clustering"></a>On-chain wallet clustering</h4>
<div class="paragraph">
<p>A big way that privacy is broken on the blockchain is wallet clustering.
You find bitcoin addresses, and then you find certain evidence that the
addresses are owned by the same person. This is called wallet
clustering. You use a bunch of heuristics and assumptions. You find
clusters that you believe are owned by the same person; when the
adversary sees transactions going between clusters they can get all
kinds of privacy-relevant information like transaction time, amounts,
where it’s going, which cluster made the transaction, which cluster
received it. The clustering is usually based on heuristics or
assumptions based on what the adversary thinks is happening. That’s how
we can obtain more privacy.</p>
</div>
<div class="paragraph">
<p>When someone sees a bitcoin transaction on the blockchain, there’s
actually multiple interpretations. Someone might be paying themselves or
paying a change address or paying someone else. If you want to gain
privacy, you have to specifically do the thing that nobody expects you
to do. I think that’s how you find privacy. It’s a constant arm race
between people making these assumptions, people trying to track, and
people interested in privacy trying to break those assumptions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_heuristic_address_reuse"><a class="anchor" href="#_heuristic_address_reuse"></a>Heuristic: Address reuse</h4>
<div class="paragraph">
<p>This is a major privacy leak known since the whitepaper. Bitcoin is
pseudoynmous, not anonymous. If you use the same address again and
again, then your address is your identity. Suppose you’re using an
exchange and you want to sell some amount of bitcoin on an exchange and
you send them to a deposit address that you have used many times before.
Your unconfirmed transaction gets broadcasted to the network, and
because you have used it before everyone in the world can see that
you’re depositing to an exchange. They will see that instantly as soon
as you are broadcasting it. But the confirmations will take a while, and
within that time of a few hours or whatever, the price will move against
you. Other traders will see these transactoins and they will open shorts
because they know your sell is about to come. So when you do sell, you
sell at a less attractive price. So your privacy leak has cost you a
real amount of money. All you need to do is use a new deposit address,
and then the leak is completely avoided.</p>
</div>
<div class="paragraph">
<p>About 30-40% of all bitcoin transactions involve an address that has
been used before. There’s only one suggestion I’ve heard for fixing
this: maybe the name “address” tells the wrong mental model to users.
It’s like using an email address or postal address that you use again
and again. Bitcoin addresses aren’t like that at all. So we should
instead change it to “bitcoin invoice address” and then 15 years later
change it to “bitcoin invoice”. Then you would say, please send money to
my bitcoin invoice. Maybe that would help the situation?</p>
</div>
</div>
<div class="sect3">
<h4 id="_common_input_ownership_heuristic_2"><a class="anchor" href="#_common_input_ownership_heuristic_2"></a>Common-input-ownership heuristic</h4>
<div class="paragraph">
<p>A really useful heuristic for the bad guys is the common input ownership
heuristic. You look at three inputs and they pay to two outputs. The
heuristic is that all three are owned by the same person. So if you
imagine the adversary sees this transaction on the blockchain, they can
from that deduce a likelihood that the other inputs belong to the same
person. In practice, this heuristic is very powerful and you can link
many addresses together on the blockchain. The reason it’s so powerful
is that in any kind of money it has to be divisible. Most people
transact in amounts that aren’t matching the amounts they had received,
so they have to join coins together to create the output amount they
want.</p>
</div>
<div class="paragraph">
<p>This common input ownership heuristic was mentioned in the whitepaper.
It was one of the few things wrong in the whitepaper. He said that the
common input ownership heuristic gives evidence that the inputs are
owned by the same person. But you can make a transaction where people
come together and contribute inputs to one transaction and it’s called
coinjoin. It’s a powerful technique we can use to improve our privacy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_coinjoin_2"><a class="anchor" href="#_coinjoin_2"></a>Coinjoin</h4>
<div class="paragraph">
<p>There are two kinds of coinjoin we have today. There’s equal-output
coinjoins. Another is payjoins where the peers pay each other. In
equal-output coinjoin, it would be like an input of 5 BTC and an input
of 3 BTC, with outputs 1 BTC, 1 BTC, 4 BTC and 2 BTC. We trick anyone
using the common-ownership heuristic. In payjoins, this is where you
have a coinjoin where users in the coinjoin are paying each other. Say
you have 2 BC and 5 BTC, and they pay 3 BTC and 4 BTC. What’s happening
there is that someone is receiving money and someone is spending money.
The inputs are owned by different people, but the money has changed
hands. There’s a few toy implementations of payjoin. This could be used
today to create coinjoins for customer-merchant relationships. When you
pay a merchant, you could do a coinjoin at the same time.</p>
</div>
<div class="paragraph">
<p>It’s important to emphasize that coinjoins are deniable. I’ve made these
example transactions, but someone can make fake ones where all the
inputs and outputs are owned by the same person, and you can’t really
tell just by looking at them on the blockchain.</p>
</div>
</div>
<div class="sect3">
<h4 id="_change_address_detection_2"><a class="anchor" href="#_change_address_detection_2"></a>Change address detection</h4>
<div class="paragraph">
<p>So we have address reuse and common-input-ownership heuristic is about
looking backwards. But change addresses are about going forwards. If you
know someone’s inputs, then maybe you can tell which of the outputs is
the change and which is the payment. There’s a few ways to do this.
Normally the payment amount is reused, and the change address is
generated newly. If you see a transaction on the blockchain where one
output is a reused address then that’s certainly the payment address,
and the other one not used before is probably the change address.</p>
</div>
<div class="paragraph">
<p>Another leak is a mismatch between address formats. If all the inputs
are P2SH and one output is P2SH and one is P2PKH then it’s almost
certain that the address type that matches is the change address because
wallets generally use the same address type. But there is one or two
wallets that use different key types for change addresses to break this.
Script types the same thing; say if you have two inputs that are
multisig and one output is multisig and the other one isn’t, then you
can tell the one isn’t is probably a payment.</p>
</div>
<div class="paragraph">
<p>Consolidation and batching is about how users create transactions.
Inherent to how an economy works, merchants have lots of incoming
payments and they merge together the coins when fees are cheap on Sunday
night and then they do payouts by batching. You can detect change
addresses in this way. If you see something you think is a payment, and
later the outputs go into a big consolidation and later the other output
went to a later payment, then you could say that the business was the
likely party that did the consolidation.</p>
</div>
<div class="paragraph">
<p>Replace-by-fee is another easy leak. It replaces a transaction with one
that pays a higher fee, but it reduces the change output amount to pay a
higher fee. So that leaks information.</p>
</div>
<div class="paragraph">
<p>Unnecessary inputs can suggest change outputs. Also, round numbers can
indicate change outputs. If one of the outputs is a round number, then
that’s probably a payment, and the other one is probably the change
output if it is not a whole round number. Also, you can convert the BTC
amount to another currency based on the market price and you can tell
which amount is probably the change address because the payment is
probably a round number in some currency if not BTC.</p>
</div>
<div class="paragraph">
<p>A paper came out where someone was able to analyze the blockchain and
analyze what fiat currencies people are probably doing. It’s linked on
my privacy wiki page. It’s really interesting.</p>
</div>
</div>
<div class="sect3">
<h4 id="_most_common"><a class="anchor" href="#_most_common"></a>Most common</h4>
<div class="paragraph">
<p>The most common are common-input-ownership heuristic and address reuse.
The paper “unreasonable effectiveness of address clustering” finds the
three reasons for why clustering is so effective. If you have these two,
address reuse and the common-input-ownership heuristic, you can be very
effective. It finds that about 0.2% of non-coinjoin clusters contain 22%
of all addresses and 23% of all transaction outputs. When you correlate
the big transactions, they correspond to big businesses, mining pools
and markets and so on. These super-clusters correspond to major
exchanges, casinos, mining pools, marketplaces, etc. If you make a
bitcoin payment to some business, then anyone who does this simple
analysis can generally figure out that you transacted to this business
or whatever it might be.</p>
</div>
<div class="paragraph">
<p>I think the best solution here is payjoin. What would happen with
payjoin– remember, it is a coinjoin where in a merchant-customer
relationship you merge the two clusters into one cluster. The two wallet
clusters get merged together. Even if you just have 5% of all
transactions being payjoin, but they were spread around roughly equally
in the bitcoin economy, then you could get to a situation where all the
wallet clusters are just merging into one giant wallet cluster and this
would break the common-input-ownership heuristic.</p>
</div>
</div>
<div class="sect3">
<h4 id="_identifying_clusters"><a class="anchor" href="#_identifying_clusters"></a>Identifying clusters</h4>
<div class="paragraph">
<p>There’s a few ways to put identities to the clusters. There’s mystery
shopping payments. If you have a shop, sometimes you have mystery
shoppers that come around and see how the shop is doing. You go to the
casino, you deposit some money, and then you wait and see in your
analysis where those coins end up and in which cluster it is. Then you
can identify that cluster as this casino or that exchange. There’s also
AML/KYC– if you open an account on an exchange, they ask your name and
other private information. When you upload those, they end up in a
database like those transaction surveillance company’s databases. They
will link your name to those clusters and identify who is making those.
If they ever get hacked, then that data will end up in the hands of
hackers who will do something with the information.</p>
</div>
<div class="paragraph">
<p>Forced address reuse, or dust attack. It’s when an adversary sees some
addresses on the blockchain and send an amount of money, and they hope
the wallet will automatically spend that coin and merge it into other
transactions. This will leak some information and identify the cluster.</p>
</div>
<div class="paragraph">
<p>Then you have timing analysis… there’s a few papers where people have
analyzed certain kinds of clusters and you can match it with timezones
and google trends and get some evidence of what country a transaction
is. Another one is eavesdropping and wire tapping. If you’re sending a
transaction or an address to someone in cleartext, then anyone on the
wiretap can link that to you on the cluster that they find in the
blockchain. It doesn’t have to be wiretapping, it could also be if
you’re communicating publicly on a forum. You can avoid this by using
encryption to encrypt any of your addresses.</p>
</div>
<div class="paragraph">
<p>Sometimes you can just ask users to give up their information. They are
very happy to do that sometimes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_quadrigacx_exchange"><a class="anchor" href="#_example_quadrigacx_exchange"></a>Example: QuadrigaCX exchange</h4>
<div class="paragraph">
<p>Earlier this year Quadriga went down and lost a lot of customer’s money.
Some users on the internet asked, is there a way to get this
information? So they asked users, could you tell us the addresses and
let us know? The customers were happy to do this because their money was
missing and they want to recover it. So they posted the addresses on a
forum. There’s a site called walletexplorer.com that does some basic
wallet clustering. They found what was almost certainly the hot wallet
of Quadriga. What made this work was that people kept depositing to the
same deposit addresses. The hot wallet also did a lot of merging
together of inputs. It was fairly easy to find.</p>
</div>
<div class="paragraph">
<p>The analyst also tried to find the Quadriga cold wallet. They said they
didn’t have a cold wallet. The cold wallets can be harder to find
because cold wallets almost never do address reuse and they actually
make very few transactions. They generally depending on the person who
owns them, they often merge all their inputs at once without a change
address, and that could do a lot to help privacy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_bustabit_casino"><a class="anchor" href="#_example_bustabit_casino"></a>Example: Bustabit casino</h4>
<div class="paragraph">
<p>This is another example from about a year and a half ago. They were a
bitcoin casino. Online gambling is not allowed in the US. Any customers
of Coinbase that deposited straight to Bustabit would have their
accounts shutdown because Coinbase was monitoring for this. Bustabit did
a few things. They did something called change avoidance where you go
through– and you see if you can construct a transaction that has no
change output. This saves miner fees and also hinders analysis. Also,
they imported their heavily-used reused deposit addresses into
joinmarket. At this point, coinbase.com customers never got banned. It
seems Coinbase’s surveillance service was unable to do the analysis
after this, so it is possible to break these algorithms.</p>
</div>
</div>
<div class="sect3">
<h4 id="_securityprivacy_tradeoff_trap"><a class="anchor" href="#_securityprivacy_tradeoff_trap"></a>Security/privacy tradeoff trap</h4>
<div class="paragraph">
<p>We’ve been talking about using coinjoins to improve privacy. The most
decentralized and most secure systems are things like basic bitcoin
transactions, where you make a payment with an output and a change
output and sometimes you merge together inputs. The next level down is
joinmarket or Wasabi wallet. They break the common-ownership heuristic
and they break the graph. But they have higher miner fees because the
transactions are so large, and the system can’t support as many of those
transactions. But they are more private, as you saw in the last example.
Monero is more private than joinmarket and wasabi but full nodes aren’t
prunable… so Monero’s system doesn’t know when a coin has been spent, so
they can’t delete coins that are spent. They have a perpetually growing
data structure. The transaction output set can’t ever be deleted and
every full node has to carry it forever. The system is private, but much
less scalable, and therefore less decentralized and less secure. Then
there’s zcash which uses zero-knowledge proofs and doesn’t have a
transaction graph. The amounts aren’t visible, so it’s more private than
monero. But zcash has a trusted setup which has certain cryptographic
information that if ever revealed would destroy their system and let
users be spied on or cause inflation. It’s even more private, but even
less secure or decentralized. There was also Digicash in the 1990s and
it used blind signatures. It had information-theoretic privacy, which
meant that even if you had an infinitely powerful computer you couldn’t
break the privacy. It’s the most private system you could imagine. But
unfortunately, it was the most centralized, it had a central server and
it could be turned off and in fact it was.</p>
</div>
<div class="paragraph">
<p>If we’re not careful, you can design a system that trades off security
for privacy. We want a system that is both secure and private. There’s
no point in having security when you can just turn it off. So what’s the
solution?</p>
</div>
</div>
<div class="sect3">
<h4 id="_off_chain_transactions_2"><a class="anchor" href="#_off_chain_transactions_2"></a>Off-chain transactions</h4>
<div class="paragraph">
<p>Lightning network and coinswap are possible solutions. Instead of adding
decoy data, they remove transactions from the blockchain. They are more
private because less data is being transmitted. It’s similar to change
avoidance too. The next generation of privacy improvements would be
something that also improves the scalability of the system. It should
work by removing data, not by adding decoys.</p>
</div>
</div>
<div class="sect3">
<h4 id="_lightning_network_3"><a class="anchor" href="#_lightning_network_3"></a>Lightning network</h4>
<div class="paragraph">
<p>I think lightning network is very promising for privacy. All the
blockchain-based privacy leaks simply don’t work for lightning. There’s
no common-input-ownership heuristic because there are no inputs. There’s
no address reuse, because it doesn’t have them. There’s no change
addresses, none of that. But there are other leaks. For example, on the
bottom is a diagram of roughly how lightning works where payments get
routed through multiple hops on the network. You can imagine a
transaction surveillance company that sets up lots of lightning nodes
and channels and then sees the payments. One thing they can see is that
the amount is leaked. That can be fixed if we had atomic multi-path
payments, which is a lightning payment that is split up and goes over
many routes and finally ends at the place it is paying. Then the amount
wouldn’t be leaked, you only leak the lower bound. That would be really
great.</p>
</div>
<div class="paragraph">
<p>Another leak in lightning is that today lightning payments work by
having a common HTLC value, the R value. If a payment route involves two
or three sybil nodes then they could tell the same payment was routed
through them. This could be fixed with scriptless scripts to replace the
hashlock technique but with cryptographic magic- this is the wrong talk
to go over it; if you search for it, you will find it. The way it works
is that the Schnorr public keys have a different tweak, a value added to
them at each hop, and different nodes can’t tell they are part of the
same scriptless script scheme.</p>
</div>
<div class="paragraph">
<p>Lightning channels still rely on channel UTXOs and they are often
revealed. Private channels can help fix this. If you use private
channels, you have to reveal your UTXO when you’re receiving a payment.
If the adversary sees a UTXO then they can use blockchain-analysis
methods to maybe get some information about you.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ln_probe_payments_attacks"><a class="anchor" href="#_ln_probe_payments_attacks"></a>LN probe payments attacks</h4>
<div class="paragraph">
<p>There was a paper a few months ago about “On the difficulty of hiding
the balance of lightning network channels”. The balance is only known to
the participants because an adversary can track a payment going through
and seeing the amounts changing at each point…. Adversary opens 624
channels at a total cost of $47 USD (current as of January 2019) and can
see all channel states. It’s an attack for discovering channel states
around the network. If the channels don’t have enough capacity, they
send back a different error message that says “insufficient funds”.
Using this, the adversary can send payments through a slowly increasing
payment amount until they get back an error message about insufficient
funds. By doing that, they can recover information about channel state.
They are using a fake payment hash, so their payments never succeed, and
they don’t lose money. The only cost is opening up the initial channels.
You don’t need to open a channel with every node, just every other node
because most nodes are well connected and you only need one side of a
channel. Using this technique, you can watch payments go through
channels and that would be a privacy leak.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conclusions_2"><a class="anchor" href="#_conclusions_2"></a>Conclusions</h4>
<div class="paragraph">
<p>ON-chain privacy is really not great right now, and it can be broken
fairly easily by anyone on their laptop if they are a fairly good
programmer. There’s a privacy/security tradeoff. We need to target both
privacy and security. Payjoin is probably the best thing to work on to
merge all the wallet clusters. The lightning network greatly improves
privacy, although there are still some problems that can be improved. If
you want more information about this, review my privacy wiki page that I
worked on and give that a read if you’re interested in this stuff. Thank
you.</p>
</div>
</div>
<div class="sect3">
<h4 id="_qa"><a class="anchor" href="#_qa"></a>Q&amp;A</h4>
<div class="paragraph">
<p>Q: In World War 2, the Germans didn’t know that enigma was broken. They
were so sure that it wasn’t broken, and this was a cause of their
defeat. How do you contemplate that we don’t know, like what Chainalysis
or Elliptic do know? They might not disclose certain research. How do we
understand what the adversary is doing?</p>
</div>
<div class="paragraph">
<p>A: For these transaction surveillance companies, they can have customers
who are anyone. So you can leak information from the company and see
what information they share with their customers. It can also be
observed by the behavior of exchanges and which transactions they ban
you for. These surveillance companies publish papers. You can read their
papers on Google Scholar. They tell you how it works. This is where I
got most of this information from. A lot of these heuristics weren’t
invented by them themselves. The common-ownership heuristic is actually
in the bitcoin whitepaper and they were mentioned back in 2010 and 2011
on the bitcointalk forums. I think the leaks that exist today are scary
enough and we should do something about them. That’s my view.</p>
</div>
<div class="paragraph">
<p>Wallet fingerprinting is a technique where wallets usually have
differences in how they construct transactions, like a different
nsequence value or different locktimes or they might choose their inputs
differently or how they compose the transaction. You can tell which
wallet made a transaction.</p>
</div>
<div class="paragraph">
<p>Q: What about confidential transactions on Liquid?</p>
</div>
<div class="paragraph">
<p>A: Confidential transactions are a technology where the amounts are
hidden. Any kind of analysis about round numbers or unnecessary input
heuristic, those things can’t work. The downside is that far fewer
people use Liquid. It’s the same with Monero and zcash- because fewer
people use it, you might have a lower anonymity set. I could see some
people doing some transactions in Liquid, doing confidential
transactions, and then withdrawing over a few transactions and that
might be enough to break the link between their addresses. That could
work.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_qa_nokyc_only"><a class="anchor" href="#_bitcoin_qa_nokyc_only"></a>3.10. Bitcoin Q+A - noKYC only</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoiner.guide/nokyconly/" class="bare">https://bitcoiner.guide/nokyconly/</a></p>
</li>
<li>
<p>Author: Bitcoin Q+A</p>
</li>
<li>
<p>Date copied: 2022-05-24</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nokyc_only_avoid_the_creep"><a class="anchor" href="#_nokyc_only_avoid_the_creep"></a>noKYC only, Avoid the creep</h4>
<div class="paragraph">
<p>KYC or ‘Know your customer’ is a regulation that any businesses with a
banking relationship has to abide by. Bitcoin exchanges are no
different. These rules are imposed worldwide and are geared towards
ensuring that a business acting as a money exchange and/or transmitter
has ‘suitable’ information on every customer they serve.</p>
</div>
<div class="paragraph">
<p>Within the Bitcoin space, ‘creeping KYC’ is a disease that is slowly
spreading. If you purchase through one of these regulated entities, you
essentially tag your bitcoin addresses to your personal identity. This
makes it trivial for chain surveillance firms, the companies they work
with, or worse, governments, to potentially…</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Track your spending habits</p>
</li>
<li>
<p>Prevent you from using other regulated services</p>
</li>
<li>
<p>Confiscate your bitcoin</p>
</li>
<li>
<p>Come after you for tax liabilities</p>
</li>
<li>
<p>Generally know more about you than they should</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We get it, auto DCA from a Bitcoin only company makes ‘stacking sats’
super simple and easy. We aren’t saying these companies are bad actors,
far from it. We merely want you to think about what you have to give up
or risk for this simplicity. Read on and come to your own conclusion…</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_information_will_i_have_to_provide"><a class="anchor" href="#_what_information_will_i_have_to_provide"></a>What information will I have to provide?</h4>
<div class="paragraph">
<p>To buy bitcoin from a KYC exchange, users will need to provide personal
information. How much you need to supply varies from one to the next,
some may require a simple name for small amounts (you could easily
supply an alias) and others may require them all. Most will ask for any
combination of the following…</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>Address</p>
</li>
<li>
<p>Phone number</p>
</li>
<li>
<p>Drivers license</p>
</li>
<li>
<p>Government ID</p>
</li>
<li>
<p>A selfie holding a piece of paper with the name of the exchange and
the date</p>
</li>
<li>
<p>A video call with the exchange</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_why_is_providing_this_information_a_risk"><a class="anchor" href="#_why_is_providing_this_information_a_risk"></a>Why is providing this information a risk?</h4>
<div class="sect4">
<h5 id="_data_leaks"><a class="anchor" href="#_data_leaks"></a>Data leaks</h5>
<div class="paragraph">
<p>KYC information ties your personal identity to any bitcoin you purchase.
The exchange knows…</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How much you bought</p>
</li>
<li>
<p>When you bought it</p>
</li>
<li>
<p>Your banking information</p>
</li>
<li>
<p>Where you withdraw to</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A central party holding millions of people’s sensitive and personal
information creates a huge honey pot at risk of being stolen due to
incompetent security practices at some of these companies. How would you
feel if your name, address, photo and exactly how much Bitcoin you own
was stolen from an exchange and being sold to the highest bidder on a
darknet market? This sounds like scaremongering but data leaks happen
all too
<a href="https://twitter.com/search?q=reminder%20from%3A%40bitcoinq_a&amp;src=typed_query&amp;f=live">often</a>!</p>
</div>
</div>
<div class="sect4">
<h5 id="_censorship"><a class="anchor" href="#_censorship"></a>Censorship</h5>
<div class="paragraph">
<p>Most of these exchanges work, in some shape or form, directly with chain
surveillance firms (and some, directly with government agencies!) to
remain compliant in their chosen jurisdiction. The completely
transparent nature of the Bitcoin blockchain means that anyone with the
correct toolset (such as a chain surveillance firm) can follow your
activity. If you withdraw to, or deposit from an entity that the
exchange does not like, they can freeze or even close your account. Not
exactly fitting with the censorship resistant properties that Bitcoin is
renowned for!</p>
</div>
</div>
<div class="sect4">
<h5 id="_6102_type_order"><a class="anchor" href="#_6102_type_order"></a>6102 type order</h5>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Executive_Order_6102">Executive Order 6102</a>
is an executive order signed on April 5, 1933, by US President Franklin
D. Roosevelt “forbidding the hoarding of gold coin, gold bullion, and
gold certificates within the continental United States.”</p>
</div>
<div class="paragraph">
<p>If the government in your country were to exercise a similar order
against Bitcoin, anyone who bought bitcoin via a KYC source would be an
easy target for confiscation. The excuse that you ‘lost it in a boating
accident’ isn’t going to get you far when under duress from a three
letter agency. Tax agencies worldwide put the onus on the individual to
prove innocence, it isn’t for them to prove that you haven’t paid tax.</p>
</div>
<div class="paragraph">
<p>Not to mention the fact that they will know the addresses you withdrew
to and could watch those for any movements (The blockchain is completely
transparent don’t forget).</p>
</div>
<div class="paragraph">
<p>Coinjoin can obfuscate the final address of your coins if you practice
good postmix spending habits, but this does not change the fact that
they know exactly how much you bought and when you bought it.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_do_i_have_any_other_options"><a class="anchor" href="#_do_i_have_any_other_options"></a>Do I have any other options?</h4>
<div class="paragraph">
<p>Thankfully there are some options out there to purchase Bitcoin via no
KYC sources. These are all P2P (peer to peer) exchanges where you are
trading directly with another individual and not a centralised third
party. Unfortunately some sell other coins as well as bitcoin so we urge
you to take care.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://hodlhodl.com/"><strong>Hodl Hodl</strong></a></p>
</li>
<li>
<p><a href="https://bisq.network"><strong>Bisq</strong></a></p>
</li>
<li>
<p><a href="https://localcryptos.com/"><strong>LocalCryptos</strong></a></p>
</li>
<li>
<p><a href="https://localcoinswap.com/"><strong>Local Coin Swap</strong></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find more at <a href="http://kycnot.me">KYC, not me!</a> and
<a href="https://github.com/cointastical/P2P-Trading-Exchanges/">here</a></p>
</div>
<div class="sect4">
<h5 id="_bitcoin_atms"><a class="anchor" href="#_bitcoin_atms"></a>Bitcoin ATMs</h5>
<div class="paragraph">
<p>ATM’s are another great option, but use with caution as some still
require varying levels of identification depending on the amount being
purchased. A lot will just require a phone number so ensure you use one
that is not tagged to your personal identity. Check out
<a href="https://coinatmradar.com/">Coin ATM Radar</a> for a great overview of what
is available in your local area.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_doesnt_buying_no_kyc_bitcoin_come_with_a_hefty_premium"><a class="anchor" href="#_doesnt_buying_no_kyc_bitcoin_come_with_a_hefty_premium"></a>Doesn’t buying no-KYC bitcoin come with a hefty premium?</h4>
<div class="paragraph">
<p>It is absolutelty true that you will see some offers to purchase bitcoin
on P2P exchanges for some <strong>very</strong> high premiums over the spot price.
However if you are patient enough you can pick some up at spot or just
marginally (1-4%) above. Both Bisq and Hodl Hodl allow you to create a
‘Buy offer’ which is essentially, you telling the market that you want
to buy ‘X’ amount of bitcoin at ‘X%’ relative to the spot price. All you
need to do then is wait for a seller to accept your offer and complete
the trade.</p>
</div>
<div class="paragraph">
<p>We personally take this approach and have never waited for more than a
day for someone to accept the offer of around 2-4% premium, which we are
all too happy to pay for the vast increase in privacy gained.</p>
</div>
</div>
<div class="sect3">
<h4 id="_a_thought_experiment_regarding_the_no_kyc_premium"><a class="anchor" href="#_a_thought_experiment_regarding_the_no_kyc_premium"></a>A thought experiment regarding the no-KYC ‘premium’</h4>
<div class="paragraph">
<p>If you ever sell KYC bitcoin, depending on your jurisdiction, you will
likely pay around 20% of your gain in Capital Gains Tax (or equivalent
VAT/GST obligations). If you buy a 1 BTC at $10,000 and sell at $20,000,
you are liable to pay around $2000 in taxes.</p>
</div>
<div class="paragraph">
<p>If you bought that same 1 BTC with a 4% premium over the $10,000 spot
price you would have paid $10,400 for the same amount of sats and the
only person who knows you own them is your trade counterparty.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_else_can_i_get_some_no_kyc_bitcoin"><a class="anchor" href="#_how_else_can_i_get_some_no_kyc_bitcoin"></a>How else can I get some no-KYC bitcoin?</h4>
<div class="paragraph">
<p>There are a number of ways, each with varying levels of difficulty and
complexity…</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Earn it</p>
</li>
<li>
<p>Sell unwanted goods for it</p>
</li>
<li>
<p>Buy it from a friend or at a local meetup</p>
</li>
<li>
<p>Provide value to others and have a
<a href="https://bqa.duckdns.org:20486/apps/96ZvtoJQr9bz5QyeDoUfhkmNTLZ/pos">donations</a>
page</p>
</li>
<li>
<p>Pay for dinner when out with friends and ask them to reimburse you via
bitcoin (perhaps for a slight discount?)</p>
</li>
<li>
<p>Mine it (check out
<a href="https://diverter.hostyourown.tools/mining-for-the-streets/">this</a> great
piece on garage mining)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_what_is_shotgun_kyc"><a class="anchor" href="#_what_is_shotgun_kyc"></a>What is ‘shotgun’ KYC?</h4>
<div class="paragraph">
<p>This is where an exchange offers account signup without KYC and
subsequently requests it from users when they try to withdraw funds. You
can avoid this by steering clear of centralised exchanges with a single
point of failure and sticking with P2P options listed above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_can_i_un_kyc_myself"><a class="anchor" href="#_can_i_un_kyc_myself"></a>Can I un-KYC myself?</h4>
<div class="paragraph">
<p>Once you have purchased Bitcoin from a KYC source you can <strong>never</strong> undo
that. Not even with advanced techniques like Coinjoin that create
forward looking privacy. You have three main options…</p>
</div>
<div class="sect4">
<h5 id="_go_back_out_the_way_you_came_and_start_fresh"><a class="anchor" href="#_go_back_out_the_way_you_came_and_start_fresh"></a>Go back out the way you came and start fresh</h5>
<div class="paragraph">
<p>Sell your KYC bought coins back at the exchange you bought them from.
Depending on your jurisdiction, this will likely create a taxable event
that you will need to contend with but you will then have a paper trail
to prove you no longer own those coins. This process provides you with a
‘clean start’ from which you can begin obtaining bitcoin via a non-KYC
source, safe in the knowledge that you are no longer at vulnerable to
the risks outlined above (apart from the data leaks as the regulated
entities are required by law to hold these records for a while).</p>
</div>
</div>
<div class="sect4">
<h5 id="_keep_two_stacks"><a class="anchor" href="#_keep_two_stacks"></a>Keep two stacks</h5>
<div class="paragraph">
<p>Cease purchasing bitcoin via KYC sources immediately and completely
segregate and label those funds. Start obtaining bitcoin via a non-KYC
source, ensuring you maintain complete segregation. This option still
leaves you vulnerable to some of the risks outlined above but may be
more paletable for those with smaller KYC amounts or those not wanting
to sell and deal with taxable events.</p>
</div>
<div class="paragraph">
<p>You should also consider coinjoining your KYC stack. This will not erase
your KYC history but it would give forward looking privacy for future
transactions. Whirlpool is by far the easiest and most effective
coinjoin implementation, learn more
<a href="https://www.bitcoinqna.com/post/whirlpool-faq">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_move_jurisdictions"><a class="anchor" href="#_move_jurisdictions"></a>Move jurisdictions</h5>
<div class="paragraph">
<p>This is more on the extreme end of the spectrum, but moving
jurisdictions could be an option to free you from future obligations. Of
course this is not a 100% guarantee as certain jurisdictions may have
information sharing agreements (the EU for example).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="kyc-is-dangerous-ineffective-and-puts-people-at-risk"><a class="anchor" href="#kyc-is-dangerous-ineffective-and-puts-people-at-risk"></a>KYC is dangerous, ineffective and puts people at risk.</h4>
<div class="sect4">
<h5 id="avoid-the-creep"><a class="anchor" href="#avoid-the-creep"></a>Avoid the creep.</h5>

</div>
<div class="sect4">
<h5 id="no-kyc-only"><a class="anchor" href="#no-kyc-only"></a>no-KYC only.</h5>
<div class="paragraph">
<p><span class="image"><img src="images/logodark.png" alt="logodark" width="250" height="250"></span></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_finite_supply"><a class="anchor" href="#_finite_supply"></a>4. Finite supply</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pieter_wuille_will_there_be_21_million_bitcoins_eventually"><a class="anchor" href="#_pieter_wuille_will_there_be_21_million_bitcoins_eventually"></a>4.1. Pieter Wuille - Will there be 21 million bitcoins eventually?</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.stackexchange.com/a/38998/69518" class="bare">https://bitcoin.stackexchange.com/a/38998/69518</a></p>
</li>
<li>
<p>Author: Pieter Wuille</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>People say the total will be <strong>21000000</strong> BTC.</p>
</div>
<div class="paragraph">
<p>... however:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The 1st 210000 blocks each allow creating 50 BTC.</p>
</li>
<li>
<p>The 2nd 210000 blocks each allow creating 25 BTC.</p>
</li>
<li>
<p>The 3rd 210000 blocks each allow creating 12.5 BTC.</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
<li>
<p>The 10th 210000 blocks each allow creating 0.09765625 BTC.</p>
</li>
<li>
<p>The 11th 210000 blocks each allow creating 0.04882812 BTC, and not 0.048828125 BTC, because only 8 decimals of precision are supported.</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
<li>
<p>The 33rd 210000 blocks each allow creating 0.00000001 BTC.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After that, the reward is 0.</p>
</div>
<div class="paragraph">
<p>If you sum all these numbers together, you get <strong>20999999.9769</strong> BTC.</p>
</div>
<div class="paragraph">
<p>... however, either due to an oversight or intentionally, the coins created in the genesis block cannot be spent.</p>
</div>
<div class="paragraph">
<p>This leaves us with <strong>20999949.9769</strong> BTC.</p>
</div>
<div class="paragraph">
<p>... however, due to an early problem in Bitcoin, fixed by BIP30, it was possible to create a coinbase transaction identical to a previous coinbase. This caused the coins created by that older coinbase to be irreversibly "overwritten". This happened in block 91842 (overwriting the coinbase of block 91812) and 91880 (overwriting the coinbase of block 91722). Each time, 50 BTC was lost.</p>
</div>
<div class="paragraph">
<p>This leaves us with <strong>20999849.9769</strong> BTC.</p>
</div>
<div class="paragraph">
<p>... however, the protocol rules allow creating up to the amounts listed above. Due to various bugs and miners experimenting with code, some blocks claim less than allowed. Those coins can never be recovered.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Block <a href="https://bitcointalk.org/index.php?topic=7253.msg184414#msg184414">124724</a> tried to intentionally claim 0.00000001 BTC less than allowed, but accidentally also failed to claim the fees, losing 0.01000001 BTC.</p>
</li>
<li>
<p>Between block 162705 and block 169899, 193 blocks claimed less than allowed due to a bug, resulting in a total loss of 9.66184623 BTC.</p>
</li>
<li>
<p>Between block 180324 and block 249185, another 836 blocks claimed less than allowed, resulting in a total loss of 0.52584193 BTC.</p>
</li>
<li>
<p>Block 501726 had no transaction outputs (except a 0-value commitment), losing the entire 12.5 BTC subsidy.</p>
</li>
<li>
<p>Block 526591 didn&#8217;t claim half of the block reward, losing 6.25 BTC.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This leaves us with 20999821.02921183 BTC.</p>
</div>
<div class="paragraph">
<p>... however, since recently there is a concept of provably unspendable coins. Coins can be sent to an "address" which provably burns them (using OP_RETURN). Bitcoin Core tracks these and removes them from its database, so they are easily accounted for. At least 3.71612692 BTC were burned this way.</p>
</div>
<div class="paragraph">
<p>This leaves us with <strong>20999817.31308491</strong> BTC (taking everything up to block 528333 into account)</p>
</div>
<div class="paragraph">
<p>... However, various wallets have been lost or stolen, transactions have been sent to the wrong address, people forgot they owned bitcoin. The totals of this may well be millions. People have tried to tally known losses up <a href="https://bitcointalk.org/index.php?topic=7253.0">here</a>.</p>
</div>
<div class="paragraph">
<p>This leaves us with: <strong>???</strong> BTC.</p>
</div>
</div>
<div class="sect2">
<h3 id="_satoshi_nakamoto_on_lost_coinst"><a class="anchor" href="#_satoshi_nakamoto_on_lost_coinst"></a>4.2. Satoshi Nakamoto - on lost coinst</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcointalk.org/index.php?topic=198.0;all" class="bare">https://bitcointalk.org/index.php?topic=198.0;all</a></p>
</li>
<li>
<p>Author: Satoshi Nakamoto</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
		<table width="90%" cellpadding="0" cellspacing="0" border="0">
			<tr>
				<td>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Dying bitcoins</b><br />
					Post by: <b>virtualcoin</b> on <b>June 21, 2010, 01:22:35 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Hello,<br /><br />if somebody&#039;s loosing his wallet (e.g. due to disk crash) he&#039;s not able to get back his coins, is he?<br />So every time a person looses coins, they&#039;re lost forever? So the bitcoin network will slowly shrink over time? (Because there will always be people who loose wallets!)<br /><br />TIA<br />virtualcoin<br /><br />edit: Forgot to mention the coins of users that are try out bitcoin and then never use it again.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>laszlo</b> on <b>June 21, 2010, 01:54:29 PM</b>
					<hr />
					<div style="margin: 0 5ex;">They are lost for good.&nbsp; Think of it like someone losing their wallet in the ocean.&nbsp; It seems like it would be a problem but it&#039;s really not that significant.&nbsp; People lose their gold jewelry all the time but it doesn&#039;t make much of a difference to the value of gold.<br /><br />I wonder though, is there a point where the difficulty of generating a new coinbase is so high that it would make more sense to try to recover keys for lost coins or steal other people&#039;s coins instead?&nbsp; The difficulty of that is really high so for now it makes a lot more sense to generate but I just wonder what the real figures are.. would that ever become more productive?&nbsp; Maybe Satoshi can address this..</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>virtualcoin</b> on <b>June 21, 2010, 02:33:31 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1640#msg1640">Quote from: laszlo on June 21, 2010, 01:54:29 PM</a></div><div class="quote">They are lost for good. &nbsp;Think of it like someone losing their wallet in the ocean. &nbsp;It seems like it would be a problem but it&#039;s really not that significant. &nbsp;People lose their gold jewelry all the time but it doesn&#039;t make much of a difference to the value of gold.</div><br />But loosing 1 bitcoin in the ocean of a maximum of 21.000.000 coins seems significant to me, so not comparable to gold and jewelry.<br />So only 21000 losses of 1000 coins can happen. That&#039;s not much!</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Gavin Andresen</b> on <b>June 21, 2010, 03:01:44 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1641#msg1641">Quote from: virtualcoin on June 21, 2010, 02:33:31 PM</a></div><div class="quote">But loosing 1 bitcoin in the ocean of a maximum of 21.000.000 coins seems significant to me, so not comparable to gold and jewelry.<br />So only 21000 losses of 1000 coins can happen. That&#039;s not much!<br /></div>But remember that each bitcoins can be divided into 100 million pieces, as needed.<br /><br />And the more valuable they become, the more careful people will be not to lose them.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>virtualcoin</b> on <b>June 21, 2010, 03:54:43 PM</b>
					<hr />
					<div style="margin: 0 5ex;">So how am I able to transfer less than BC0.01 without getting the message &quot;error in amount&quot; from the bitcoin program?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>laszlo</b> on <b>June 21, 2010, 04:33:00 PM</b>
					<hr />
					<div style="margin: 0 5ex;">The current user interface doesn&#039;t support smaller than 0.01 increments but it is possible to support it in a future revision.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>satoshi</b> on <b>June 21, 2010, 05:48:26 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Lost coins only make everyone else&#039;s coins worth slightly more.&nbsp; Think of it as a donation to everyone.<br /><br /><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1640#msg1640">Quote from: laszlo on June 21, 2010, 01:54:29 PM</a></div><div class="quote">I wonder though, is there a point where the difficulty of generating a new coinbase is so high that it would make more sense to try to recover keys for lost coins or steal other people&#039;s coins instead?&nbsp; The difficulty of that is really high so for now it makes a lot more sense to generate but I just wonder what the real figures are.. would that ever become more productive?&nbsp; Maybe Satoshi can address this..<br /></div>Computers have to get about 2^200 times faster before that starts to be a problem.&nbsp; Someone with lots of compute power could make more money by generating than by trying to steal.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>summy</b> on <b>June 22, 2010, 11:51:25 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Last but not least one can make tons of backups. Once could also setup a bank, even insurance could be made. You could also put your a wallet onto a media (cdrom, tape, whatever) and put it into a safe, like you would to it with money or gold. Then you can have a small wallet.<br /><br />In most regards bitcoin is just like any other currency. If you are stupid enough to not keep it save it&#039;s your fault. It&#039;s like walking on the beach with all your money. Simply don&#039;t do it!<br /><br />Maybe I could create a bank, but I&#039;d have to think about away to make myself trustworthy. ;)<br /><br />If you put your money onto a bank account you also have to trust them. If they mess up their system and nobody knows who was the owner of the money it&#039;s exactly the same. Inside the bank your money only exists in a virtual way. Most of the time (not always, because they invest your money) it is backed up by something physical, but if you loose the data to link the physical with the virtual stuff the system is completely messed up.<br /><br />To make it short: BitCoin is just money, so don&#039;t think of it as something too abstract. You can secure it, like every other money.<br /><br />In most situations it&#039;s easier. It isn&#039;t that easy to encrypt your money before you put it in your safe, is it?&nbsp; ;D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>SmokeTooMuch</b> on <b>June 23, 2010, 07:41:14 PM</b>
					<hr />
					<div style="margin: 0 5ex;">last weak my hard drive crashed, good thing i backed up my wallet :)<br />as soon as i got my hard drive exchanged by western digital i will be back in the bitcoin system.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Come-from-Beyond</b> on <b>September 18, 2012, 05:39:47 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Wouldn&#039;t it be good to modify the protocol, so any coins that weren&#039;t moved for 1000 days (for example) could be returned back into the system and mined again? We would get rid of some issues this way (lost coins, wasted space). Anyone who hoards bitcoins should just transfer the coins from wallet to wallet once a year.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>FreeMoney</b> on <b>September 18, 2012, 05:43:51 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Network size is not determined by the number of units. If it was we could have been ten times bigger now for the cost of one extra &quot;0&quot;!</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Kupsi</b> on <b>September 18, 2012, 05:54:37 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201451#msg1201451">Quote from: Come-from-Beyond on September 18, 2012, 05:39:47 PM</a></div><div class="quote">Wouldn&#039;t it be good to modify the protocol, so any coins that weren&#039;t moved for 1000 days (for example) could be returned back into the system and mined again? We would get rid of some issues this way (lost coins, wasted space). Anyone who hoards bitcoins should just transfer the coins from wallet to wallet once a year.<br /></div>So if I&#039;m going to jail for 10 years, my coins will be stolen from me? Bad idea.<br /><br />Two other threads on the topic from within the last month:<br /><br />https://bitcointalk.org/index.php?topic=104422.0 (https://bitcointalk.org/index.php?topic=104422.0)<br />https://bitcointalk.org/index.php?topic=109117.0 (https://bitcointalk.org/index.php?topic=109117.0)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>hazek</b> on <b>September 18, 2012, 06:15:22 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Come-from-Beyond you do realize that you can take the Bitcoin source code, modify it how ever you like and start your own crypto currency that will follow the rules you want it to follow..<br /><br />If you aren&#039;t happy with Bitcoin the way it is, why not do that? We&#039;ll all be thankful and move to your currency if it turns out better than Bitcoin!</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Technomage</b> on <b>September 18, 2012, 06:21:40 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I don&#039;t get where this argument comes from. I&#039;ve seen it many times. Making this argument requires a fatal flaw in logical thinking. Let me explain this in a simple way:<br /><br />People lose bitcoins -&gt; value of remaining bitcoins go up -&gt; average bitcoin user has less bitcoins -&gt; people lose less bitcoins on average -&gt; price still goes up -&gt; average bitcoin user has again less bitcoins -&gt; people lose less bitcoins on average.<br /><br />So in the long term this will only cause the price of bitcoins to go up a bit and for people to lose less bitcoins after that. Even in <b>a million years</b> we wouldn&#039;t reach 0 bitcoins and as you all should know, bitcoins can be divided to smaller pieces quite effectively.<br /><br />This argument is broken even without taking into account how educated people are in using Bitcoin. That is entirely irrelevant for countering this argument. Taking care of your bitcoins is a smart thing to do though, so I&#039;m all for it. :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Come-from-Beyond</b> on <b>September 18, 2012, 06:24:16 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201525#msg1201525">Quote from: hazek on September 18, 2012, 06:15:22 PM</a></div><div class="quote">Come-from-Beyond you do realize that you can take the Bitcoin source code, modify it how ever you like and start your own crypto currency that will follow the rules you want it to follow..<br /><br />If you aren&#039;t happy with Bitcoin the way it is, why not do that? We&#039;ll all be thankful and move to your currency if it turns out better than Bitcoin!<br /></div><br />Ok. I&#039;ll send u personal invitation. It&#039;s almost ready, just tuning minting algo. Should take 2-3 months.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Come-from-Beyond</b> on <b>September 18, 2012, 06:27:08 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201485#msg1201485">Quote from: Kupsi on September 18, 2012, 05:54:37 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201451#msg1201451">Quote from: Come-from-Beyond on September 18, 2012, 05:39:47 PM</a></div><div class="quote">Wouldn&#039;t it be good to modify the protocol, so any coins that weren&#039;t moved for 1000 days (for example) could be returned back into the system and mined again? We would get rid of some issues this way (lost coins, wasted space). Anyone who hoards bitcoins should just transfer the coins from wallet to wallet once a year.<br /></div>So if I&#039;m going to jail for 10 years, my coins will be stolen from me? Bad idea.<br /><br />Two other threads on the topic from within the last month:<br /><br />https://bitcointalk.org/index.php?topic=104422.0 (https://bitcointalk.org/index.php?topic=104422.0)<br />https://bitcointalk.org/index.php?topic=109117.0 (https://bitcointalk.org/index.php?topic=109117.0)<br /></div><br />This thread is better. It was started quite earlier. :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>DannyHamilton</b> on <b>September 18, 2012, 06:34:46 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201538#msg1201538">Quote from: Technomage on September 18, 2012, 06:21:40 PM</a></div><div class="quote">I don&#039;t get where this argument comes from. &lt;snip&gt;<br /></div><br />I&#039;m pretty sure it comes from over 2 years ago. <br /><br /><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1638#msg1638">Quote from: virtualcoin on June 21, 2010, 01:22:35 PM</a></div><div class="quote">Hello,<br />&lt;snip&gt;<br /></div><br />You know, back when Satoshi himself (or herself? or themselves?) was/were still participating in dicsussions.<br /><br /><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1647#msg1647">Quote from: satoshi on June 21, 2010, 05:48:26 PM</a></div><div class="quote">Lost coins only make everyone else&#039;s coins worth slightly more. &nbsp;Think of it as a donation to everyone.<br /></div></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Kupsi</b> on <b>September 18, 2012, 06:49:59 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201549#msg1201549">Quote from: Come-from-Beyond on September 18, 2012, 06:27:08 PM</a></div><div class="quote">This thread is better. It was started quite earlier. :)<br /></div>Yes, if you&#039;re not looking for updated information...</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Gabi</b> on <b>September 18, 2012, 07:47:54 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201451#msg1201451">Quote from: Come-from-Beyond on September 18, 2012, 05:39:47 PM</a></div><div class="quote">Wouldn&#039;t it be good to modify the protocol, so any coins that weren&#039;t moved for 1000 days (for example) could be returned back into the system and mined again? We would get rid of some issues this way (lost coins, wasted space). Anyone who hoards bitcoins should just transfer the coins from wallet to wallet once a year.<br /></div>No<br /><br />No it&#039;s not a good idea. It&#039;s a shitty idea<br /><br />In case it is not clear: NO<br /><br />Why the hell every week someone must come up with the same fail idea? </div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>justusranvier</b> on <b>September 18, 2012, 07:52:31 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201764#msg1201764">Quote from: Gabi on September 18, 2012, 07:47:54 PM</a></div><div class="quote">Why the hell every week someone must come up with the same fail idea?</div>Because the idea of not being able to steal other people&#039;s money fills them with great anxiety.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Gabi</b> on <b>September 18, 2012, 07:53:26 PM</b>
					<hr />
					<div style="margin: 0 5ex;">True that&nbsp; :D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>nameface</b> on <b>September 18, 2012, 08:13:43 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1642#msg1642">Quote from: Gavin Andresen on June 21, 2010, 03:01:44 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1641#msg1641">Quote from: virtualcoin on June 21, 2010, 02:33:31 PM</a></div><div class="quote">But loosing 1 bitcoin in the ocean of a maximum of 21.000.000 coins seems significant to me, so not comparable to gold and jewelry.<br />So only 21000 losses of 1000 coins can happen. That&#039;s not much!<br /></div>But remember that each bitcoins can be divided into 100 million pieces, as needed.<br /><br />And the more valuable they become, the more careful people will be not to lose them.<br /><br /></div><br />AMEN!<br />By the time 1,000,000 coins have been lost, one coin might be worth $1,000,000 :) People don&#039;t tend to lose $1,000,000 worth of anything very often. There will forever be 20 million+ BTC in existence.<br />IMO if things continue to progress well it&#039;ll get harder and harder for people to lose coins as there will always be more and more technological innovation happening to prevents this. </div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Come-from-Beyond</b> on <b>September 18, 2012, 08:38:46 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201764#msg1201764">Quote from: Gabi on September 18, 2012, 07:47:54 PM</a></div><div class="quote">Why the hell every week someone must come up with the same fail idea? <br /></div><br />It&#039;s not exactly the same. Most of my recent topics were made to find an answer for one important question. And I think I got it.<br /><br />It&#039;s impossible to have consensus regarding protocol changes in Bitcoin. It&#039;s a win-or-lose game, no anything in between allowed. So next-gen coin should have a protocol that could be adjusted by anyone without breaking the whole system.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>hazek</b> on <b>September 18, 2012, 09:00:47 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201918#msg1201918">Quote from: Come-from-Beyond on September 18, 2012, 08:38:46 PM</a></div><div class="quote">So next-gen coin should have a protocol that could be adjusted by anyone without breaking the whole system.<br /></div><br />We have that, it&#039;s called central banking and fiat currencies (FED + dollar, ECB + euro, and so on..)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Desolator</b> on <b>September 19, 2012, 05:12:10 AM</b>
					<hr />
					<div style="margin: 0 5ex;">The subdivision thing cures this entire problem.&nbsp; Let&#039;s say 90% of all BTC are destroyed.&nbsp; Now the value of 0.1BTC is approximately the value that 1 BTC used to be, since there are only that many floating around.&nbsp; Life goes on.&nbsp; We&#039;re not in trouble of &quot;running out&quot; until like 99.999% of all BTC are destroyed because then there actually wouldn&#039;t be enough to go around.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Come-from-Beyond</b> on <b>September 19, 2012, 05:17:46 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201969#msg1201969">Quote from: hazek on September 18, 2012, 09:00:47 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201918#msg1201918">Quote from: Come-from-Beyond on September 18, 2012, 08:38:46 PM</a></div><div class="quote">So next-gen coin should have a protocol that could be adjusted by anyone without breaking the whole system.<br /></div><br />We have that, it&#039;s called central banking and fiat currencies (FED + dollar, ECB + euro, and so on..)<br /></div><br />Really? I&#039;d like to increase emission of new dollar banknotes. What should I do?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>kjj</b> on <b>September 19, 2012, 02:55:06 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1203062#msg1203062">Quote from: Come-from-Beyond on September 19, 2012, 05:17:46 AM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201969#msg1201969">Quote from: hazek on September 18, 2012, 09:00:47 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1201918#msg1201918">Quote from: Come-from-Beyond on September 18, 2012, 08:38:46 PM</a></div><div class="quote">So next-gen coin should have a protocol that could be adjusted by anyone without breaking the whole system.<br /></div><br />We have that, it&#039;s called central banking and fiat currencies (FED + dollar, ECB + euro, and so on..)<br /></div><br />Really? I&#039;d like to increase emission of new dollar banknotes. What should I do?<br /></div><br />Wait a few minutes.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Gabi</b> on <b>September 19, 2012, 02:58:31 PM</b>
					<hr />
					<div style="margin: 0 5ex;">+1 what hazek and kjj said</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Come-from-Beyond</b> on <b>September 19, 2012, 03:23:11 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1204066#msg1204066">Quote from: Gabi on September 19, 2012, 02:58:31 PM</a></div><div class="quote">+1 what hazek and kjj said<br /></div><br />-1, coz no usefull info were provided.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>kjj</b> on <b>September 19, 2012, 03:28:24 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1204134#msg1204134">Quote from: Come-from-Beyond on September 19, 2012, 03:23:11 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1204066#msg1204066">Quote from: Gabi on September 19, 2012, 02:58:31 PM</a></div><div class="quote">+1 what hazek and kjj said<br /></div><br />-1, coz no usefull info were provided.<br /></div><br />You said you wanted to &quot;increase emission of new dollar banknotes&quot;.&nbsp; This is something that congress already does <b>to</b> you today.&nbsp; If you aren&#039;t happy with the current rate of emission, just wait a few minutes and it will be higher.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Phinnaeus Gage</b> on <b>September 19, 2012, 03:39:12 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1642#msg1642">Quote from: Gavin Andresen on June 21, 2010, 03:01:44 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1641#msg1641">Quote from: virtualcoin on June 21, 2010, 02:33:31 PM</a></div><div class="quote">But loosing 1 bitcoin in the ocean of a maximum of 21.000.000 coins seems significant to me, so not comparable to gold and jewelry.<br />So only 21000 losses of 1000 coins can happen. That&#039;s not much!<br /></div>But remember that each bitcoins can be divided into 100 million pieces, as needed.<br /><br />And the more valuable they become, the more careful people will be not to lose them.<br /><br /></div><br />Exactly, for if all twenty-one million coins were lost, sans one, that one bitcoin can still be divisible even beyond the hundred millionth mark.<br /><br />~Bruno~<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Dying bitcoins</b><br />
					Post by: <b>Come-from-Beyond</b> on <b>September 19, 2012, 04:31:41 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=198.msg1204144#msg1204144">Quote from: kjj on September 19, 2012, 03:28:24 PM</a></div><div class="quote">You said you wanted to &quot;increase emission of new dollar banknotes&quot;.&nbsp; This is something that congress already does <b>to</b> you today.&nbsp; If you aren&#039;t happy with the current rate of emission, just wait a few minutes and it will be higher.<br /></div><br />I expected other scenario. Without mediators. But thx anyway.</div>
					<br /><br />
					<div align="center" class="smalltext">
		<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://www.simplemachines.org/" title="Simple Machines Forum" target="_blank">Powered by SMF 1.1.19</a> |
<a href="http://www.simplemachines.org/about/copyright.php" title="Free Forum Software" target="_blank">SMF &copy; 2006-2009, Simple Machines</a>
		</span></div>
				</td>
			</tr>
		</table>
</div>
<div class="sect2">
<h3 id="_chytrik_how_can_we_trust_supply_wont_be_increased_in_2140_by_just_a_few_lines_of_code"><a class="anchor" href="#_chytrik_how_can_we_trust_supply_wont_be_increased_in_2140_by_just_a_few_lines_of_code"></a>4.3. chytrik - How can we trust supply won&#8217;t be increased in 2140 by just a few lines of code?</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.stackexchange.com/a/106830/69518" class="bare">https://bitcoin.stackexchange.com/a/106830/69518</a></p>
</li>
<li>
<p>Author: User chytrik on Bitcoin Stack Exchange</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The bitcoin network is composed of 'bitcoin full nodes', which are computers located all around the world, each one running independently to verify the state of the network.</p>
</div>
<div class="paragraph">
<p>Part of that verification includes making sure that the right number of coins are being created with each passing block, such that the total number of coins in existence is known, and predictable.</p>
</div>
<div class="paragraph">
<p>To change this 'coin issuance schedule', you would have to change the code running on all of those computers, so that they would all independently agree on some new issuance schedule, and could all continue to verify which blocks are valid (or not), in independent consensus. If you could only change the code on some of those computers, then those computers would start to follow blocks which the remaining bitcoin network nodes would consider invalid, effectively creating an altcoin-fork of the network (similar to what happened with 'bitcoin cash').</p>
</div>
<div class="paragraph">
<p>Anybody, at any point in time, could create some software that changes the issuance schedule. Thats easy. The hard part is convincing everyone that is running a bitcoin full node to switch to this new code, which creates more coins. Nobody has the authority to push such a change onto the network (top-down governance), rather it is the independent choices of all of the network&#8217;s nodes (bottom-up governance) that defines the network.</p>
</div>
<div class="paragraph">
<p>So the answer is that you <em>don&#8217;t have to trust someone</em> to not increase the supply. You just have to run some code that will <em>verify that they haven&#8217;t</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_paul_sztorc_security_budget_in_the_long_run"><a class="anchor" href="#_paul_sztorc_security_budget_in_the_long_run"></a>4.4. Paul Sztorc - Security Budget in the Long Run</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.truthcoin.info/blog/security-budget/" class="bare">https://www.truthcoin.info/blog/security-budget/</a></p>
</li>
<li>
<p>Author: Paul Sztorc</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A discussion of Bitcoin’s ability to resist 51% attacks (ie, its
“security budget”). Competition makes it difficult for one network to
collect enough fees – instead, we should try to collect fees from all
networks.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This post is a somewhat more-empirical sequel to
<a href="http://www.truthcoin.info/blog/blockspace-demand/">“Two Types of
Blockspace Demand”</a>. And to my
<a href="http://www.drivechain.info/literature/index.html#bob">Building-on-Bitcoin
talk</a>.</p>
</div>
<div class="sect3">
<h4 id="_1_the_security_budget"><a class="anchor" href="#_1_the_security_budget"></a>1. The “Security Budget”</h4>
<div class="paragraph">
<p>Bitcoin’s
<a href="https://medium.com/coinmonks/bitcoin-security-in-one-chart-694ee3ed8c2d">“security
budget”</a> is the total amount of money we pay to miners (or, if you
prefer, the total amount spent <em>on</em> mining – they are the same thing).
When this value is low, 51% attacks are cheap. In 2018, BTC’s security
budget was
<a href="https://www.blockchain.com/charts/miners-revenue?timespan=2years&amp;daysAverageString=7">about
$7 million per day</a>. So, the suppression of BTC (via a never-ending
campaign of 51% attacks) would cost –at most– $2.6 billion per year.</p>
</div>
<div class="paragraph">
<p>$2.6 B is pretty low – by comparison, the 2017 annual US Military Budget
was $590 billion, and the
<a href="https://www.federalreserve.gov/publications/2017-ar-federal-system-budgets.htm">FED’s
annual operating expenses</a> totaled $5.7 billion.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_the_block_subsidy"><a class="anchor" href="#_2_the_block_subsidy"></a>2. The Block Subsidy</h4>
<div class="paragraph">
<p>Fortunately, we can expect the <em>block subsidy</em> to give us more security
in the future. Even though it “halves” once every four years
(effectively falling by a factor of 0.84 per year), it hits for full
force no matter how high the BTC exchange rate climbs. As long as annual
appreciation 19%, it fully compensates for the PP lost to the
halvening. Historically, the rate has been _much_ higher than 19% (more
like 70%), and so the security budget has increased substantially over
time, and will continue to do so for a while.</p>
</div>
<div class="paragraph">
<p>Of course, eventually the exchange rate must stop appreciating. Even
<a href="https://coinjournal.net/research-paper-makes-case-5-8-million-bitcoin-price/">if
Bitcoin is outrageously successful</a>, it will apparently reach a point
where it simply cannot grow faster than 1.077 per
year<sup><a href="https://www.truthcoin.info/blog/security-budget/#fn:1">1</a></sup> , as this
is apparently the growth in the nominal value of all the world’s money.</p>
</div>
<div class="paragraph">
<p>Here I show the growth, and ultimate decline of the security budget:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-budget-nofees.png" alt="security budget nofees">
</div>
</div>
<div class="paragraph">
<p>Above: Bitcoin’s security budget over time. Each row refers to a
different year. Theoretical max exchange rate from the
<a href="https://coinjournal.net/research-paper-makes-case-5-8-million-bitcoin-price/">Game
and Watch paper</a>. Imputed exchange rate is historical rates and growth
factors, with some manual “blending in” so as to more rapidly approach
the theoretical maximum. Defense budget extrapolated from
<a href="https://en.wikipedia.org/wiki/Military_budget_of_the_United_States">wikipedia
data</a>. “Safety Ratio” is the percentage of military budget that would be
needed to disable Bitcoin. All numbers are in nominal dollars.</p>
</div>
<div class="paragraph">
<p>The “indifference” epoch is one where Bitcoin is vulnerable, but few
adversaries squander their opportunity to attack because they are not
paying attention. The “healthy” epoch is one where BTC should be able to
deter 51% attacks even from ultra-wealthy motivated adversaries. But the
“decline” epoch shows us a bleak future, in which 51% attacks on Bitcoin
are easy again.</p>
</div>
</div>
<div class="sect3">
<h4 id="_transaction_fees"><a class="anchor" href="#_transaction_fees"></a>Transaction Fees</h4>
<div class="sect4">
<h5 id="i-the-desired-fee-pressure"><a class="anchor" href="#i-the-desired-fee-pressure"></a>i. The Desired “Fee Pressure”</h5>
<div class="paragraph">
<p>As is commonly known, <em>transaction fees</em> are expected to come to the
rescue. As
<a href="https://web.archive.org/web/20171207201015/https://botbot.me/freenode/bitcoin-wizards/2016-01-17/?msg=58099943&amp;page=1">Greg
Maxwell remarked</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-highlight" data-lang="highlight">fee pressure is an intentional part of the system
design and to the best of the current understanding
essential for the system's long term survival</code></pre>
</div>
</div>
<div class="paragraph">
<p>He
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-December/015455.html">later
famously wrote</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-highlight" data-lang="highlight">Personally, I'm pulling out the champaign that market
behaviour is indeed producing activity levels that can
pay for security without inflation.</code></pre>
</div>
</div>
<div class="paragraph">
<p>This view, (of a needed “fee pressure”), is common. Roger Ver has
<a href="https://www.docdroid.net/NG1sbVq/pantera-march-2017.pdf">compiled similar
quotes</a> from other Bitcoin intelligentsia. Roger did this in order to
discredit them politically, but the quotes are nonetheless accurate.</p>
</div>
</div>
<div class="sect4">
<h5 id="ii-the-dual-nature"><a class="anchor" href="#ii-the-dual-nature"></a>ii. The Dual Nature</h5>
<div class="paragraph">
<p>The <strong>dual nature</strong> of Bitcoin (as both a money-unit, and a payment-rail)
has confused people since Bitcoin was first invented.</p>
</div>
<div class="paragraph">
<p>In general, monetary theorists and economics ignored the payment-rail
(and dismissed Bitcoin as supposedly having “no intrinsic value”).
Businessmen and bankers ignored the money-unit (and regarded purchases
<em>of BTC</em> as hopelessly naive), and instead tried hopelessly to rip-off
the “blockchain technology”.</p>
</div>
<div class="paragraph">
<p>The confusion persists today in the “scaling debate”, in the form of a
discussion over whether or not the “medium of exchange” use-cases are
more valuable than the “store of value” use-cases.</p>
</div>
<div class="paragraph">
<p>And I think it persists in long-run security budget analysis, as well.
Consider the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Revenue Source</strong></th>
<th class="tableblock halign-left valign-top"><strong>Block Subsidy (12.5 BTC)</strong></th>
<th class="tableblock halign-left valign-top"><strong>Transaction Fees</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Market’s Units</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">…of BTC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">…of block space</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Price Units</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">… $ (PPP) per BTC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ (PPP) per byte</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>If BTC price = moon…</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">…SB Goes Up</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">…SB <em>Unaffected</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Meme</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store of Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium of Exchange</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Slogan</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">“Digital Gold”</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">“P2P Electronic Cash”</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>While the two are mixed into the same “security budget”, the <strong>block
subsidy and txn-fees are utterly and completely different</strong>. They are as
different from each other, as “VISA’s total profits in 2017” are from
the “total increase in <a href="https://www.investopedia.com/terms/m/m2.asp">M2</a>
in 2017”.</p>
</div>
<div class="paragraph">
<p>VISA’s profits are a function of how cost-effectively VISA provides
value to its customers, relative to its competitors (MasterCard, ACH,
WesternUnion, etc). Changes in M2 are a function of other things
entirely, such as: election outcomes, public opinion, business cycles,
and FED decisions. There is some sense in which M2 “competes” with the
Japanese Yen, but there are really no senses in which it competes with
MasterCard.</p>
</div>
</div>
<div class="sect4">
<h5 id="iii-are-fees-truly-paid-in-btc"><a class="anchor" href="#iii-are-fees-truly-paid-in-btc"></a>iii. Are fees truly paid “in BTC”?</h5>
<div class="paragraph">
<p>Transaction fees are explicitly priced in BTC. But, unlike the block
reward, they <em>do</em> react to changes in the exchange rate. As the exchange
rate rises, a given satoshi/byte fee rate becomes more onerous, and
people shy away from paying it.</p>
</div>
<div class="paragraph">
<p>And so tx-fees are not really “priced in BTC”, despite the protocol’s
attempt to mislead us into thinking that they are. They are actually
priced in <a href="http://www.truthcoin.info/images/true-money/">purchasing
power</a>, which –these days (pre-hyper-bitcoinization)– is best expressed
in US Dollars.</p>
</div>
<div class="paragraph">
<p>So, it is entirely appropriate
<a href="https://www.cnbc.com/2017/12/19/big-transactions-fees-are-a-problem-for-bitcoin.html">to
say</a>, for example, that “in Dec 2017, BTC had tx-fees as high as
<em>twenty-eight dollars</em>”. And it would be inappropriate to say that the
tx-fees were “as high as .0015,0000 BTC”. For if the BTC price had been
10x higher<sup><a href="https://www.truthcoin.info/blog/security-budget/#fn:2">2</a></sup>,
the tx-fees would have only reached .0001,5000 BTC.</p>
</div>
</div>
<div class="sect4">
<h5 id="iv-stimulating-production"><a class="anchor" href="#iv-stimulating-production"></a>iv. Stimulating Production</h5>
<div class="paragraph">
<p>Whenever prices rise, entrepreneurs are induced to produce. (Owners are
also induced to sell, but we are not interested in that right now.)</p>
</div>
<div class="paragraph">
<p>The supply of BTC is famously capped at 21 million. The <em>produced</em>
supply (aka the “new” supply) is currently capped at 12.5 BTC per block,
until the next halving.</p>
</div>
<div class="paragraph">
<p>The supply of a completely different good, “btc-block-bytes”, is also
capped. It was first (in)famously capped at 1 MB per block, and now is
capped at
<a href="https://en.bitcoinwiki.org/wiki/Block_weight#Conversion_to_real_sizes">something-like</a>
2.3 MB per block.</p>
</div>
<div class="paragraph">
<p>As was just said: whenever blocks become more valuable, entrepreneurs
search for ways to produce more of them.</p>
</div>
<div class="paragraph">
<p>One way is to reactivate older, marginally unprofitable mining hardware.
Production then hastens…temporarily. Of course, after the next
difficulty adjustment, block-production will return to its equilibrium
rate (of 1 block per 10 minutes).</p>
</div>
<div class="paragraph">
<p>Alternatively, entrepreneurs can create, and mine, Altcoins.</p>
</div>
</div>
<div class="sect4">
<h5 id="v-altcoins-as-substitute-goods"><a class="anchor" href="#v-altcoins-as-substitute-goods"></a>v. Altcoins as Substitute Goods</h5>
<div class="paragraph">
<p>Alt-“coins” are <em>very poor</em> substitutes for Bit-“coins”. Each form of
money, is necessarily in competition with all other forms: money has
strong network effects; the recognizability property has super-linear
returns to scale; exchange rates are transaction frictions that are
inconvenient; etc. What people wanted was a BTC. They wanted to <em>get rid
of</em> all their other forms of money!</p>
</div>
<div class="paragraph">
<p>But it is the reverse when we consider transaction fees and
“btc-block-bytes”: Altcoin-blockspace is a pretty good substitute for
Bitcoin-blockspace. Remember that this type of demand has <em>nothing to
do</em> with obtaining BTC. Users merely wish to buy something using the
Bitcoin payment-rail. This image from
<a href="https://www.fincen.gov/news/testimony/statement-jennifer-shasky-calvery-director-financial-crimes-enforcement-network-0">2013
FINCEN Congressional testimony</a> hopefully makes it clear:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/round-trip.png" alt="round trip">
</div>
</div>
<div class="paragraph">
<p>Since the amount of coin sent in a blockchain payment is always
configurable, it will always be possible to send someone “twenty
dollars” worth of LTC; or “one BTC” worth of DOGE; or “one sandwich”
worth of EOS. All of this is made much easier by the “exchangers” (ie:
Coinbase, ShapeShift, SideShift, BitPay, LocalBitcoins, multi-currency
wallets, CC ATMs, etc) which now take numerous forms and are easy to
use.</p>
</div>
<div class="paragraph">
<p>Furthermore, this (true) premise –that Altcoin-payments are indeed
substitutes for Bitcoin-payments– is occasionally explicitly
admitted<sup><a href="https://www.truthcoin.info/blog/security-budget/#fn:3">3</a></sup>, even
by hardcore maximalists. Especially during the last fee run-up in late
2017:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://twitter.com/Excellion/status/926908067521761280">Samson Mao</a></p>
</li>
<li>
<p><a href="https://twitter.com/mikeinspace/status/1078546356476628992">Francis
Pouliot</a></p>
</li>
<li>
<p><a href="https://litecoin-foundation.org/product/understanding-litecoin-the-digital-currency-for-payments/">“The
digital currency for payments”</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="vi-competitive-demand-for-the-payment-rail"><a class="anchor" href="#vi-competitive-demand-for-the-payment-rail"></a>vi. Competitive Demand for the Payment Rail</h5>
<div class="paragraph">
<p>The supposedly-essential “fee pressure” has, for the moment, deserted
us.</p>
</div>
<div class="paragraph">
<p>See this graph (from <a href="https://core.jochen-hoenicke.de/queue/#0,all">this
page</a>) for BTC-priced fees:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/pending-btc-fees.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>And this graph (from <a href="https://bitcoinfees.info/">this page</a>) for
USD-priced fees:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/pending-btc-fees-usd.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>We see that fee pressure has crumbled. Today,
<a href="https://www.buybitcoinworldwide.com/fee-calculator/">a typical
transaction will cost</a> 30-40 cents – much cheaper than a VISA txn.</p>
</div>
<div class="paragraph">
<p>Compare the
<a href="https://bitinfocharts.com/comparison/transactionfees-btc-sma90.html#log">historical
data, given in 90-day moving-average</a>…</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/btc-fees-alltime-ma.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>…to the two graphs below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/btc-decline.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>We see that BTC’s crossing of the “1 USD per transaction line”, in May
of 2017, coincides with the rise of Altcoins. We also see that the
“pressure” of late 2017 quickly canceled itself out, and then some.
Finally, we see that this release-of-pressure coincided with a sudden
(and unprecedented) decline in BTC-transactions.</p>
</div>
<div class="paragraph">
<p>To me, this data refutes the theory that users will pay high BTC fees
willingly. In fact, they seem to have only ever paid high fees
<em>unwillingly</em> – during a brief “bubble” time (of relative panic and
FOMO).</p>
</div>
<div class="paragraph">
<p>If that theory is indeed false, then total fees will not be any higher
–in USD terms– than they are today.</p>
</div>
<div class="paragraph">
<p>According to
<a href="https://www.blockchain.com/charts/transaction-fees-usd?timespan=2years">blockchain.info</a>,
fees in the last 12 months totaled $70 million. (In the 12 months before
<em>that</em>, they were $770 million).</p>
</div>
<div class="paragraph">
<p>Revisit the
<a href="https://www.truthcoin.info/blog/security-budget/www.truthcoin.info/blog/security-budget#2-the-block-subsidy">chart
above</a>, and you will see that this barely registers. After all, when $70
M is priced in the units of the chart (billions), it is just $0.07.</p>
</div>
<div class="paragraph">
<p>If the consumer is cost-conscious, and will only pay the lowest tx-fees,
then how can we get those numbers up?</p>
</div>
</div>
<div class="sect4">
<h5 id="vii-alternative-fee-sources"><a class="anchor" href="#vii-alternative-fee-sources"></a>vii. Alternative Fee-Sources</h5>
<div id="a-lightning-network" class="paragraph">
<p><strong>a. Lightning Network</strong></p>
</div>
<div class="paragraph">
<p>The Lightning Network (if successful) will allow very many “real-life
transactions” to be fit into just two on-chain txns.</p>
</div>
<div class="paragraph">
<p>The immediate effect of this, is to <em>lower</em> on-chain transaction fees;
but the ultimate effect is increase them. LN boosts on-chain fees by
increasing the utility of each on-chain txn (by allowing each to do the
work of many txns), and by therefore making high on-chain fees more
tolerable to the end user.</p>
</div>
<div class="paragraph">
<p>Exactly how much will LN boost fees?</p>
</div>
<div class="paragraph">
<p>At this point – it is anyone’s guess. But <em>my</em> guess is that they cannot
realistically increase by more than two orders of magnitude.</p>
</div>
<div class="paragraph">
<p>First, on-chain txns are needed to create, and periodically maintain,
the LN. So LN-users will still be paying on-chain fees; and will still
prefer to minimize these costs. Meanwhile, Altcoins will have their own
Lightning Network (they will copy LN, just as they’ve copied everything
else). All of these LNs will compete with each other, the same way that
different blockchains compete with each other.</p>
</div>
<div class="paragraph">
<p>Keep in mind, that the fees paid to
LN-hubs<sup><a href="https://www.truthcoin.info/blog/security-budget/#fn:n">4</a></sup> will,
by definition, <em>not</em> be paid to miners. So, there is no sense in which
LN-fees “accumulate” into one big on-chain txn-fee (in contrast to how
<em>the economic effect</em> of each LN-txn <em>does</em> accumulate into a single net
on-chain txn).</p>
</div>
<div class="paragraph">
<p>Second, the LN user-experience will probably always be worse than the
on-chain user-experience. LN is <em>interactive</em>, meaning that users must
be online, and do something [sign a transaction] in order to receive
money. It also means that your LN-counterparties can inconvenience you
(for example if they stop replying, or if their computers catch fire) or
outright harass you. LN also comes with new risks – the LN-design is
very clever at minimizing these risks, but they are still there and will
still be annoying to users. Users will prefer not to put up with them.
So they will tend to prefer an Altcoin on-chain-txn over a
mainchain-LN-txn.</p>
</div>
<div id="b-merged-mined-sidechains" class="paragraph">
<p><strong>b. Merged-Mined Sidechains</strong></p>
</div>
<div class="paragraph">
<p>Merged-Mined Sidechains do whatever Altcoins can do, but without the
need to purchase a new token. So they have infinitely lower exchange
rate risk, and are more convenient for users.</p>
</div>
<div class="paragraph">
<p>On top of that, MM SCs send all txn-fees they collect to Bitcoin miners.
Under <a href="http://www.truthcoin.info/blog/blind-merged-mining/">Blind Merged
Mining</a>, they do this without requiring any users or miners to run the
sidechain node software.</p>
</div>
<div class="paragraph">
<p>A set of <a href="http://www.truthcoin.info/blog/gigachain/">largeblock
sidechains</a> could process very many transactions. In the next section, I
will assume that the total Sidechain Network replaces VISA, (and VISA
alone), and captures all of its transaction fee revenues. VISA is only a
small percentage of the total payments market (which includes checks,
WesternUnion, ApplePay, etc), but it is a good first look.</p>
</div>
</div>
<div class="sect4">
<h5 id="viii-visas-transaction-fee-revenues"><a class="anchor" href="#viii-visas-transaction-fee-revenues"></a>viii. VISA’s Transaction Fee Revenues</h5>
<div class="paragraph">
<p>Contrary to what I believed just moments before looking this up, VISA
does not earn any money off of the interest that it charges its
customers.</p>
</div>
<div class="paragraph">
<p>Observe page 40 of
<a href="http://www.annualreports.com/HostedData/AnnualReports/PDF/NYSE_V_2017.pdf">their
most recent annual report</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-highlight" data-lang="highlight">Our operating revenues are primarily generated from
payments volume on Visa products for purchased goods
and services, as well as the number of transactions
processed on our network. We do not earn revenues
from, or bear credit risk with respect to, interest
or fees paid by account holders on Visa products.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead VISA’s revenue comes from transaction fees. This perfectly
facilitates our comparison.</p>
</div>
<div class="paragraph">
<p>Total revenues were 18,538 $M in 2017, up from 11,778 $M in 2013. This
corresponds to quite an annual growth rate – 12% per year.</p>
</div>
<div class="paragraph">
<p>If we assume that current trends holds, we get the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-budget-fees.png" alt="security budget fees">
</div>
</div>
<div class="paragraph">
<p><a href="https://www.truthcoin.info/images/long-run-security-budget.xlsx">Link to
Excel sheet</a>.</p>
</div>
<div class="paragraph">
<p>Above: The ‘security budget table’ from earlier in this post, plus a new
column: VISA transaction fees. These fees are added to the base block
subsidy amounts, to get a new total security budget.</p>
</div>
<div class="paragraph">
<p>This security budget <em>does</em> seem to be much safer in the long run, and
safer in general.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h4>
<div class="paragraph">
<p>To deter 51% attacks, Bitcoin needs a high “security budget”. Today’s
tx-fee revenues are not high enough; we must ensure that they are
“boosted” in the future.</p>
</div>
<div class="paragraph">
<p>Higher prices (ie, higher satoshi/byte fee-rates) are one way of
boosting revenue. Unfortunately, competition from rival chains acts to
suppress the market-clearing fee-rate.</p>
</div>
<div class="paragraph">
<p>A better way, is to attempt to devour the entire payments market, and
claim all of its fee revenues. This can be done using Merge Mined
Sidechains, without any decentralization loss.</p>
</div>
</div>
<div class="sect3">
<h4 id="_updates"><a class="anchor" href="#_updates"></a>Updates</h4>
<div class="paragraph">
<p>Update (4/2020):
<a href="https://twitter.com/Truthcoin/status/1247177271267467265?s=20">Tweetstorm
14 months later</a></p>
</div>
<div class="paragraph">
<p>Update (12/2020): Yet more evidence that I am right:
<a href="https://twitter.com/MattAhlborg/status/1330926883643469826?s=20">“As BTC
fees have gone up recently…LTC, not lightning, has been seeing increased
payments”</a>.</p>
</div>
<div class="paragraph">
<p>Plus, see an updated chart:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2020-updated-fee-chart.png" alt="2020 updated fee chart">
</div>
</div>
<div class="paragraph">
<p>Update (2/2021): A table to address the argument that “Altcoins are
sometimes hard to use”.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fee-elasticity-table.png" alt="image">
</div>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_footnotes"><a class="anchor" href="#_footnotes"></a>Footnotes</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div id="fn:1" class="paragraph">
<p>The math is that 1.077 = (25.94/5.85)^(1/20). And note that 1.077 is
below the required “stasis rate” of
1.19. <a href="https://www.truthcoin.info/blog/security-budget/#fnref:1">↩</a></p>
</div>
</li>
<li>
<p></p>
<div id="fn:2" class="paragraph">
<p>I mean that if the USD/BTC price had been 10x higher, throughout the
“bubble” of late-2017. In other words, if Bitcoin had started Jan 2017
at around 9,000 USD/BTC and then risen to 190,000
USD/BTC. <a href="https://www.truthcoin.info/blog/security-budget/#fnref:2">↩</a></p>
</div>
</li>
<li>
<p></p>
<div id="fn:3" class="paragraph">
<p>I do remember there being much more of this, but I could only find a few
examples (before giving up). Please message me if you can find/remember
any other examples. I guess I will eventually remove this paragraph if I
never find any
more. <a href="https://www.truthcoin.info/blog/security-budget/#fnref:3">↩</a></p>
</div>
</li>
<li>
<p></p>
<div id="fn:n" class="paragraph">
<p>By “fees paid to LN-hubs”, I mean the fees that you would pay, (off
chain), to any Lightning Node that your LN-payment routes
through. <a href="https://www.truthcoin.info/blog/security-budget/#fnref:n">↩</a></p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_david_harding_fee_sniping"><a class="anchor" href="#_david_harding_fee_sniping"></a>4.5. David Harding - Fee sniping</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoinops.org/en/topics/fee-sniping/" class="bare">https://bitcoinops.org/en/topics/fee-sniping/</a></p>
</li>
<li>
<p>Author: David Harding</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><em>Also covering Anti fee sniping</em></p>
</div>
<div class="paragraph">
<p><strong>Fee sniping</strong> occurs when a miner deliberately re-mines one or more
previous blocks in order to take the fees from the miners who originally
created those blocks. Although re-mining a previous block is less likely
to succeed than simply extending the chain with a new block, it can be
more profitable if the previous block is worth much more in transaction
fees than the transactions currently in the miner’s mempool.</p>
</div>
<div class="paragraph">
<p>Fee sniping is a problem that may occur as Bitcoin’s subsidy continues
to diminish and transaction fees begin to dominate Bitcoin’s block
rewards. If transaction fees are all that matter, then a miner with
<code>x</code> percent of the hash rate has a <code>x</code> percent chance of mining the
next block, so the expected value to them of honestly mining is <code>x</code>
percent of the
<a href="/en/newsletters/2021/06/02/#candidate-set-based-csb-block-template-construction">best
feerate set of transactions</a> in their mempool.</p>
</div>
<div class="paragraph">
<p>Alternatively, a miner could dishonestly attempt to re-mine the previous
block plus a wholly new block to extend the chain. This behavior is
referred to as fee sniping, and the dishonest miner’s chance of
succeeding at it if every other miner is honest is <code>(x/(1-x))^2</code>. Even
though fee sniping has an overall lower probability of success than
honest mining, attempting dishonest mining could be the more profitable
choice if transactions in the previous block paid significantly higher
feerates than the transactions currently in the mempool—a small chance
at a large amount can be worth more than a large chance at a small
amount.</p>
</div>
<div class="paragraph">
<p>The problem is actually worse than described above because every miner
who chooses to mine dishonestly reduces the number of honest miners
trying to extend the chain. The smaller the share of hash rate
controlled by honest miners, the greater the probability that a
dishonest miner will be successful, so a single large miner rationally
choosing to mine dishonestly can set off a cascade of ever smaller
miners also rationally defecting to dishonest mining. If that persists
for an extended period of time, confirmation scores cease to be a proxy
for transaction finality and Bitcoin becomes unusable until the problem
is resolved. We expect the most likely resolution would be
centralization of mining—a cartel representing a majority of hash rate
agreeing to never reorg each others’ blocks can restore stability to the
system, but that comes with the increased risk that they’ll later censor
certain transactions.</p>
</div>
<div class="sect3">
<h4 id="_mitigations"><a class="anchor" href="#_mitigations"></a>Mitigations</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Block transaction limit:</strong> without a
limit on the number of transactions that can be contained within a
block, such as a block size or block weight limit, dishonest miners
could take all the transactions they know about now and try to put them
into the oldest block they’re working to re-mine. All other blocks would
be empty, with miners only creating them to bury their re-mined block
under as much proof of work as possible.</p>
<div class="paragraph">
<p><span class="image"><img src="images/2021-06-sniping-size-limit.png" alt="Illustration of fee sniping without block limits"></span></p>
</div>
<div class="paragraph">
<p>Limiting the number of transactions that can be contained within a
Bitcoin block produces two desirable effects:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It tends to prevent any new block at the tip of the chain from
containing all pending transactions, leaving some transactions for the
next block. If the amount of transaction fee expected from honestly
mining the next block is close to the amount of transaction fee
available from dishonestly re-mining the previous block, all rational
miners will behave honestly.</p>
</li>
<li>
<p>It ensures that, even if dishonest miners do re-mine blocks, they
won’t be able to achieve maximum revenue by leaving the blocks near the
tip empty—those blocks will need to contain fee-paying transactions.
Other dishonest miners may attempt themselves to fee snipe those
transactions, reducing the revenue of the initial fee sniping miner and
possibly discouraging them from fee sniping in the first place.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Rearrangement
protection (anti fee sniping):</strong> even with a block size limit, a
dishonest miner doesn’t need to use the exact same set of transactions
included in the block that they’re attempting to re-mine. They can
replace any low feerate transactions in that block with higher feerate
transactions from their mempool. This has the benefit of burying higher
feerate transactions further back in the chain where other dishonest
miners will have to work harder to re-mine them a second time.</p>
<div class="paragraph">
<p><span class="image"><img src="images/2021-06-afs.png" alt="Illustration of honest mining compared to fee sniping"></span></p>
</div>
<div class="paragraph">
<p>It’s possible to limit this abuse by preventing miners from being able
to include pending high-feerate transactions in the re-mined version of
any previous block. Miners would only be allowed to include pending
transactions in blocks after the current chain tip. In other words, in
an ideal situation, there wouldn’t be any difference between the regular
transactions in blocks created by economically rational dishonest miners
and blocks created by honest miners. This can reduce the revenue
available to the dishonest miner and make them more vulnerable to fee
sniping by other dishonest miners—again reducing the initial dishonest
miner’s expected rewards possibly enough to keep them mining honestly in
the first place.</p>
</div>
<div class="paragraph">
<p>This rearrangement protection is commonly called <strong>anti fee sniping.</strong>
Originally <a href="https://github.com/bitcoin/bitcoin/issues/2340">implemented</a>
in Bitcoin Core, anti fee sniping is now also used by several other
wallets.</p>
</div>
<div class="paragraph">
<p>All wallets that implement anti fee sniping today use nLockTime height
locks to prevent a transaction from being included in the re-mined
version of a previous block. It’s also
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-June/019048.html">possible</a>
to implement the same protection using
<a href="https://github.com/bitcoin/bips/blob/master/bip-0068.mediawiki">BIP68</a>
nSequence height locks, which could help make regular wallet
transactions look like contract protocol transactions and vice versa.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>We’re unaware of any developers who think the above mechanisms are a
complete solution to the fee sniping problem, but every other mitigation
that has been proposed so far seems to have significant downsides. None
of those alternatives appears to be an active area of research and
development.</p>
</div>
</div>
<div class="sect3">
<h4 id="_primary_code_and_documentation"><a class="anchor" href="#_primary_code_and_documentation"></a>Primary code and documentation</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/pull/2340">Bitcoin Core #2340:
discourage fee sniping with nLockTime</a></p>
</li>
<li>
<p><a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-June/019048.html">Anti-fee-sniping
protection with nSequence in taproot transactions</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_optech_newsletter_and_website_mentions"><a class="anchor" href="#_optech_newsletter_and_website_mentions"></a>Optech newsletter and website mentions</h4>
<div class="paragraph">
<p><strong>2022</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/en/newsletters/2022/03/16/#bips-1269">BIPs #1269 assigns BIP326
to a recommendation for default taproot anti fee sniping</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>2021</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/en/newsletters/2021/06/16/#bip-proposed-for-wallets-to-set-nsequence-by-default-on-taproot-transactions">BIP
proposed for wallets to set nSequence by default on taproot
transactions</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>2020</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/en/newsletters/2020/02/12/#c-lightning-3465">C-Lightning #3465
implements anti fee sniping for withdrawal transactions</a></p>
</li>
<li>
<p><a href="/en/newsletters/2020/02/05/#interactive-construction-of-ln-funding-transactions">Suggestion
to use anti fee sniping for interactive LN funding transactions</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>2018</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/en/newsletters/2018/10/23/#lnd-1978">LND #2063 updates sweeper to
use nLockTime anti fee sniping</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_peter_todd_the_essence_of_bitcoin"><a class="anchor" href="#_peter_todd_the_essence_of_bitcoin"></a>4.6. Peter Todd - The Essence of Bitcoin</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.whatbitcoindid.com/podcast/peter-todd-on-the-essence-of-bitcoin" class="bare">https://www.whatbitcoindid.com/podcast/peter-todd-on-the-essence-of-bitcoin</a></p>
</li>
<li>
<p>Author: Peter Todd, interviewed by Peter McCormack</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Hi there,
Peter. How are you?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I’m great, thanks.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Thank you for
coming on the podcast. I’ve wanted to talk to you for quite a long time.
I followed a lot of your work. And, one of the things that really stood
out for me is when I went on your blog, and not only did I not
understand the content of your articles, I didn’t even understand what
they were about.</p>
</div>
<div class="paragraph">
<p>Like there’s a certain level of technical competence that I think you
have to have to kind of understand this work. And, I then read about a
story that you were emailing Hal Finney and Adam Back when you were at
like 15?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yep.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I’ve got to
ask about this. What’s the background? How does a 15-year-old start
talking to Hal Finney and Adam Berk about Hashcash? What’s the journey
to that?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, the great thing
with the Internet is, no one knows that you’re dark, and even when they
do, they don’t care. And I mean, if you go back far enough, as a young
kid, I watched a lot of Star Trek and thought the ideals of democracy
and freedom of speech, they’re all said and well and good.</p>
</div>
<div class="paragraph">
<p>And, my dad’s an economist by training. So initially, really early on, I
got interested in the freedom project, which is a decentralised
censorship resistant publication network. Long story short is, it lets
you make a website that no one can take down, lets you publish.</p>
</div>
<div class="paragraph">
<p>And I thought, “Oh! That’s really cool.” And, got interested in it, did
a little bit of work on it. So actually, first time I kind of worked on
creating an exploit, was actually against Freenet. The work I created a
tool to go and map out the interconnections of different nodes, so those
are all well and interesting.</p>
</div>
<div class="paragraph">
<p>But, I think the big issue with Freenet network, was, as I was thinking
to myself, “Well, obviously the next step is you need decentralised
money. Just being able to publish your thoughts isn’t enough. Political
movements need money. Take a look, political movements for the
marginalised, the poor.</p>
</div>
<div class="paragraph">
<p>If you’re a rich person, you have the way of funding the things you need
to fund to make your political movement happen, whereas the poor don’t
have that. We are often kind of talking about it in reverse, the rich
will gain politics, and so on. And, reality, I mean you can’t kind of
stop that. But, for the disadvantage, you definitely need that option to
be able to move money around. You need to be able to without
surveillance.</p>
</div>
<div class="paragraph">
<p>So, I think long story short is, somehow or another, I wanted upon a
mailing list, the Blue Sky mailing list, which if I remember correctly,
it was advertised on the Freenet mailing lists. So, I signed up, we
started talking about stuff, and I spent a lot of time trying to invent
Bitcoin, and like many people completely failed at it.</p>
</div>
<div class="paragraph">
<p>And, it’s really interesting looking back and seeing just how wrong I
was, in almost 180 degrees offset what was the right answer. And, a lot
of people, I think, had that experience.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So you tried
to invent a Bitcoin?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. I was one of
many, many people trying to create decentralised currency. And, really
failed at us.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> What was
version?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, I think … I
mean, I didn’t have a proposal, ’cause I realised all my thoughts on it
weren’t going to work. But, I think what I caught so wrong was I had
thought about Hashcash in terms of the thing that controls the creation
of money. And, that’s not actually an important thing. The creation of
money is not the important thing. It’s preventing double-spending that
is.</p>
</div>
<div class="paragraph">
<p>The creation is just a onetime event. Allowing money to be moved
consistently, and accurately without double spend, is actually the
critical thing. And, unfortunately, because I tied proof of works to the
creation so tightly, I never really came up with the concept of, “Well
hang on.” No, no. We tied proof of work to the changes in the ledger, to
make sure it’s difficult three or at the changes.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> And, my thinking on my
kind of solution where we have some kind of decentralised database, how
do you do that? I don’t know. It can be attacked, it can be civil
attacked. And, I just constantly shot down ideas, and could never figure
out, how do you make this work, when the answer was juts so simple. But,
it was 180 degrees opposite what I was working on.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> But, I’m
guessing you’re saying it’s simple ’cause the answer was Bitcoin, right?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, literally
someone could have sat down … Like honestly, it’s to the point where one
tweet from the future, saying how Bitcoin works, would probably have
been enough info for me to have created Bitcoin.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> But, what is
the key, the one key element then?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Using proof of work to
make changes to the ledger difficult. That one sentence, I think,
encapsulates the key part of Bitcoin that we were missing back then.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, it’s more
the game theory than the code?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I don’t even … The
point is, I don’t even think the game theory part is a really critical
thing. Like, absolute core of it that you must have is tying proof work
to changes to the ledger, to make it expensive to change. You could
probably have Bitcoin without even a financial reward. It would still
work far better than any of the crazy ideas people had come up back
then.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, the
Bitcoin white paper comes out, you’re obviously are aware of it, you
read it. Is it obvious at the time or?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Absolutely.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Oh,
immediately you could?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. For me, I
believe I read the Bitcoin white paper for the first time, like late
2009. And, I remember, you know when I read it, I was like, “Oh, shit! I
should’ve thought of that.” It was actually, for me, it was opposite
many people.</p>
</div>
<div class="paragraph">
<p>For me, I read it, and this is obviously gonna work. And, only later did
I come up with reasons why it wouldn’t.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Whereas, for many
people, they read and think, “How would this ever work?” And then, later
they’re convinced it does. But, I’d been primed, ’cause I’d already
worked on this and tried very hard. So, when I saw it that’s … It just
was so obvious to me. “Oh, I was wrong. This was the missing piece”</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> How, as a
15-year-old, do you make the leap from realising that there is a need
for money to finance certain projects and things, to it must be having
to be a decentralised type of money that doesn’t already exist? How do
you make that leap?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, the idea of
e-money and cypherpunk stuff around that was not exactly like an unknown
concept. I partly even read Sci Fi stories at the time talking about
that. The notion of credits is really sort of a common term in Sci Fi
stories. I mean. it’s just …</p>
</div>
<div class="paragraph">
<p>And also, money itself has a property. I mean, sure, it’s issued by the
government, but paper money I can give to you, and no one can stop me.
The idea that money would have to be controlled on transaction basis is
this very new thing, pushed by big companies who want to go make money
off this, and Law enforcement who would like to surveil everyone. This
is the opposite of how money should work. This is not the status quo.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, this
Bitcoin worked then, or is it working?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, in terms of
doing what money should do, it’s a hell of a lot closer than say PayPal.
It’s a lot closer to what PayPal was meant to be. I mean, people who
started PayPal wanted to create censorship resistant e-currencies. They
didn’t have the tech to do it, and they didn’t have the legal frameworks
to get away with it.</p>
</div>
<div class="paragraph">
<p>So, they didn’t. But, that was the initial concept with PayPal. So,
Bitcoin’s a lot close to that. I mean, Bitcoin has scaled boldy
problems. But, the core thing of what Bitcoin does is much closer to
that than alternatives, certainly closer to things like Liberty Reserve,
which of course got shut down.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah, I guess
there’s always been the centralised problem, right?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. Centralisation
kills things if they have adversaries. Often centralisation’s way to go.
I mean, I have approached it myself, called Open TimeStamps, which is
absolutely centralised. There are four calendars of the Open timeStamps
system. I run two of them, two other people run another two.</p>
</div>
<div class="paragraph">
<p>It’s a centralised system. But, Open TimeStamps doesn’t really have
adversaries in this way that Bitcoin does. And, no one’s going to profit
by shutting down Open TimeStamps in the way you would with Bitcoin.</p>
</div>
<div class="paragraph">
<p>And also, because Open TimeStamps relies on Bitcoin for the truth of the
timestamps, the central third parties on a position to fake things.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay. So, I
wanna … I should’ve asked this at the start. I love asking this
question, ’cause it’s so simple. And, the first time I heard it was when
Epicenter asked Adam Berk, and it also blew my mind, just hearing it set
out. So, I’m just gonna ask you again. What is Bitcoin? The answers are
always different as well.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, I’ll give you a
different answer.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Which is, Bitcoin is a
shared data structure, that we make artificially expensive to change, by
destroying energy every time we update it.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. I’ve
heard that one like four times. No. I’m joking. Yeah. I’m only joking.
Okay. Okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Bitcoin is an
elephant, and it’s pink with like little spots.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I love the
energy angle. So, you’ve been around since the start, right? It’s 10
years and-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Not quite.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Pretty much.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, I’ve known
about Bitcoin, since nearly the start. But, I actually got more active
into it a bit later. And, the reason is, I mean, relative to many other
developers, but the reason is because when I first learned about
Bitcoin, well, I’d just started a new job at a crazy startup. And then,
I was crazy enough to then also try to do a physics degree, while I was
at the startup. So, I didn’t exactly have a lot of free time.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> But, I mean,
I’ve gone through the exercise of going through old mailing lists, and
old Bitcoin talk forums. And, there’s a number of names I recognise. A
number I don’t. And, I’ve seen you in there commenting and talking. So,
you were there like pretty much since the start.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, I started
working on this stuff full time 2014.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> 2014.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Which is a lot earlier
than many people.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> But, having
been there, through the whole experience, how do you take it all in,
because even though you knew it would work, there’s a difference between
knowing theoretically it would work.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, remember, I
thought it would work.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> You thought
it would work?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> And then, I started
realising, hang on, this isn’t as good as it sounds.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right. Okay.
We’re going to come back to those things. But, 10 years on is still
exists. It holds billions of dollars in value. At one point, hundreds of
billions. There is the talk of ETS. We have futures. We have so much
happened. Did you foresee all this?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean to be perfectly
honest, this it doesn’t really surprise me that much. I mean, you always
gotta be a bit careful. I mean, your memory of what you thought five
years ago can be a bit vague. But, I don’t think if you’d asked me that
many years ago, would it? Could it get to where it is now? I would have
said no.</p>
</div>
<div class="paragraph">
<p>I think I would have said, “Yeah, I mean, this is plausible. It is an
obvious utility. Digital gold is obviously useful. So, if things don’t
fail and it continues to grow, I mean, surely could get to this point.”</p>
</div>
<div class="paragraph">
<p>I think the more interesting question is, well, how big could it get?
And, I would actually put relatively small limits on it. We’re not gonna
see … First time I bought Bitcoin, I bought it for 20 cents of a
Bitcoin.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> And, I tell you, that
was the best financial decision of my life. The worst financial decision
of my life was only buying $20 worth.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Hold on. What
is that? That’s like a hundred Bitcoin. Yeah. But, we won’t have
hindsight.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> But, the thing with
that is looking at how that grows. I mean, how many zeros is that times?
Call it 10000 times growth or whatever, depending on what price you
pick. We’re not going to get another 10000. The world economy is too
small for that. We’re not that far away from having more money in
Bitcoin than in the US dollar and gold combined.</p>
</div>
<div class="paragraph">
<p>Yeah. That’s if I remember correctly, it’s like a hundred X. That’s
pretty … That’s a lot smaller than 10000X.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. But,
I’m not convinced you care that much about price beyond the wider kind
of a PR [inaudible 00:12:17] and brings people into the system. I don’t
think you’re that. I don’t see you as somebody that is incentivised by
the price.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, I mean price is
a funny thing, ’cause people often say, the price doesn’t matter. And,
that’s definitely not true. Bitcoin security model relies on it being
valuable. There is no getting around that. And, it probably would not
work, if the price was said a thousand times less. Someone would
probably attack it for kicks and giggles.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, you were
saying you started to look at the reasons why it won’t work. What were
the main issues that you found, and where the things you attempted to
try and break?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, really, like the
one big thing for me was when I realised, “Oh yeah. Scalability really
matters, and this stuff doesn’t scale.”</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I figured that out,
you kind of says embarrassingly late. But, in terms of like how long I
was looking at Bitcoin seriously, fairly early. From the time I started
looking at Bitcoin seriously, to when I realise this, and how important
it was, we’re probably talking like three or four months.</p>
</div>
<div class="paragraph">
<p>And, that was while I was at a startup, doing a university career at the
same time. Simple truth is, I just didn’t pay that much attention to it
for quite a few years. And, when I realised that, well, I got very
active and tried to solve this problem. And, also importantly got very
active in debating people who thought it wasn’t an issue.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, were you
debating Rodger?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Oh, he wasn’t around
but around then.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Like you were
going about earlier, okay. So, who would be debating this?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Gavin Andresen, and
actually literally debating Gavin Andresen on Bitcoin talk forums was
probably the thing that got my name up there.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right, okay.
Because-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> There is a thread on
Bitcoin talk where I disagree with Gavin Andresen, and it just
spiralled.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> And what? The
disagreement was what? Block size?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Exactly.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay. What
did he want?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> His viewpoint was,
yeah, he can … If I remember correctly, his exact viewpoint was you can
have an unlimited block size. And, that was just such an extreme
position. I laid out, very carefully, why this did not work. And, it
wasn’t the first time there’d been a disagreement on that, but at least
for me personally, that was the timeline when, “Hey, this is Peter Todd,
the guy who disagrees with Gavin Andresen on this. And, these seem are a
good point.</p>
</div>
<div class="paragraph">
<p>That’s really why my name got known. And, things just built on there.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> But, there
are different reasons why … Well, people give different reasons for why
a larger block size won’t work. Some people I’ve heard discuss it
because it doesn’t scale in computer power, ’cause of nodes.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Remember, the notes
Gavin’s view there was an unlimited block size. He thought the
incentives were such that miners would voluntarily restrict the size of
their blocks, even though they could make the biggest blocks if they
want. And, I laid out basically with a bit of math and game theory why
this is a bad idea.</p>
</div>
<div class="paragraph">
<p>That wasn’t even like a bigger picture. It’s just this is broken,
because miners can do this when they create a bigger block, they’re
going to push out the competitors. That’s kind of the arguments in a
nutshell. And, the simple reality was, I was right on that. And, that’s
just so well supported by academic research since. And, Gavin was just
dead wrong.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> And, has he
ever come back and said, “You were right”?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Nope.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, there’s a
reason why he’s no longer involved in Bitcoin in any real sense. He just
wasn’t competent enough to do it.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. There’s
probably more than one reason as well, right?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Supporting Craig
Wright was probably not the best move. But, all that stems from the fact
he just isn’t that competent at what he was doing.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> And, I guess
it requires a certain level of competency to be able to work at that
level. And, it doesn’t feel like there’s a lot of people at that level.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> No, definitely not.
No. Most programmers in general, do you not have the capability to work
on this stuff, because they don’t think it adversarially. It’s a tough
thing for people to imagine. Most people are just not used to imagining,
“All right, what are the bad things that could happen?”</p>
</div>
<div class="paragraph">
<p>Whereas for whatever reason, I, and a few other people, are good at
that. I’m quite happy to imagine all the ways people could screw people
over.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> What do you
make of Luke’s ideas around a smaller block? Is it 300K?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I think his technical
arguments for that are good, but I think he doesn’t understand the
social side of that, which essentially makes it impossible. And after
all, I mean, let’s face it, Luke is a crazy evangelical Catholic. He has
very, very, very strong beliefs that are ultimately driven by very
strongly held principles.</p>
</div>
<div class="paragraph">
<p>He is, to us, an evangelical crazy Catholic. But, that comes from him
having very well defined beliefs and very strongly held principles. And,
the logical conclusion of that is his belief system.</p>
</div>
<div class="paragraph">
<p>And, I think what Luke … I’m not even sure I could say that he fails to
see, ’cause he may very well understand this perfectly, but you know why
Luke would say something like that is, he has the principles, and he
takes it to his conclusion. Whereas the way I’d put is, “Yeah. I mean,
he’s not wrong, but it just ain’t gonna happen.”</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right. Okay.
Where do you envisage the block size being in the future? Do you think
it was gonna stay as it is, or do you think at some point there’ll be a
change?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Oh, I think it’s
plausible actually for the rest of life of Bitcoin, we’re not going to
see another block size increase. And, the reason why I say that’s
plausible is ultimately things lightning and whatnot work pretty well.
And, what would it be right now? Like 15 transactions per second or
something is actually a fair amount.</p>
</div>
<div class="paragraph">
<p>And, the way people use Bitcoin, like after all, for Bitcoins be wildly
successful, it doesn’t necessarily mean that people are actually making
payments on it. Bitcoin as a store of value can be an incredible success
story.</p>
</div>
<div class="paragraph">
<p>I think the bigger threat we would have is actually Bitcoin’s inflation
schedule, ’cause in the long run … And, this isn’t a short term thing,
but this is like 10, 20 years down in the future, there might not be
enough inflation to pay for security.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I just wrote
that down, actually. So, I’ve got a couple of questions about that. So,
if it’s just a store of value, and there wasn’t enough Bitcoin being
moved around for fees, and the mine of rewards have dropped, that’s a
huge risk for the security of Bitcoin, right?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Absolutely.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> And-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> But, that’s a risk
like 10, 20 years in the future. That is a very long time. And, by then,
who the hell knows what the risks are?</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> But Peter
Todd thinks adversarially, and I think that goes into the basket of
things that you probably are thinking about now.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yep. Well, let me look
this way. If I were able to go back in time, and redo Bitcoin, ’cause of
course, I am Satoshi as is everyone else.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I’ve read it.
I’ve read you invented Bitcoin at 12.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah, yeah. If I was
able to go back in time and create Bitcoin from scratch, I would have
made it have a perpetual say 0.5% or 1% inflation rate.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay. That’s
controversial, for some people.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I’ll put it this way
if you can’t afford like a 0.1% or 0.5, or even a 1% inflation rate,
what the fuck are you doing with your life? It’s 1% a year. So what?</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, who have
you discussed that with? And, like you don’t have to name names. But,
have you discussed that with people? What’s the general reaction?
Because there’s no reason for that not to be introduced in the future,
right? I mean …</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I think the general
reaction is … Well, first of all, Bitcoin right now has what a 4%
inflation rate. We’re a long way from any of this discussion being
relevant. So, I think the general reaction right now is, it&#8217;s pushing it
to the future. It’s just not a discussion worth having right now.</p>
</div>
<div class="paragraph">
<p>It’s drama, and of course, you look at my twitter account, and I don’t
shy away from that. But, most of the development community wouldn’t
really wanna touch the issue. And, I think they’re right. There is no
reason to touch this issue until it actually matters.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> What about if
Lightning Network is hugely successful? And, people stop using the base
chain, because Lightning is fast, and it’s cheap, is instant. Could we
get to the point where there’s no argument to use the basechain, because
Lightning is as trusted as the base chain? Do you see what I’m getting
at?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, I mean,
Lightning security model is riskier than the base chain. It just
doesn’t … Lightning, there’s a good reason to use it beyond scale. I
mean, Lightning has much better UI experience. But, the simple reality
is the Lightning security model is more dangerous than Bitcoin itself,
assuming that you’re able to wait for confirmations.</p>
</div>
<div class="paragraph">
<p>Under certain cases, Lightning can actually be much more secure. I mean,
if I go pay you with Lightning, the security of that payment from the
point of view of being reversed 10 seconds from now is far better than
the main chain ever could be. In effects, it will be better probably
what an hour or two into the future.</p>
</div>
<div class="paragraph">
<p>But overall, if you’re making big payments that aren’t time sensitive,
main chain has better security. On the other hand, this idea of
Lightning taking my transaction fees, that’s not unique to lightning.
Tons of things do this. Exchanges do this. Probably the most payment
volume that happens is actually on exchanges. Liquid side chain does
this as well. Liquid takes transaction fees away from the main chain.</p>
</div>
<div class="paragraph">
<p>There’s no end of things that take transaction fees away from the main
chain. And, the inflation arguments I would give is very simple. It’s,
well, make sure you always have this mechanism to ensure that the chain
keeps marching forward.</p>
</div>
<div class="paragraph">
<p>Even with transaction fees, you actually need this for a kind of subtle
to game theory technical reasons. The simple reality is, Bitcoin without
an inflation subsidy has a much worse security argument than Bitcoin
with an inflation subsidy, even if you have transaction fees paying for
things.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I haven’t
heard you talk about this a lot though, right? So, are you waiting? Is
it a case of priorities? Deal with what needs to be dealt with now? And,
you’ll bring this up in 10 years?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. It’s just isn’t
relevant for literally like another 10 years or so.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> What about
10-minute blocks across the solar system though? When is that going to
be a precedent? I read that.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, yes. I did a
talk, actually. I believe the title of the talk was a solar powered
space miner. Yeah. Solar Powered Space Pirates, a Threat to Bitcoin.
And, the simple answer to that is yes, if space travel becomes cheap
enough that big mining operations are operating far enough away from
earth that the speed of light gets people out of consensus, yeah,
Bitcoin’s fucked, and we’ll probably have to increase the block control.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> And, say are
you general evil?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yes, I’m a bad person
capable of love.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay. Outside
of Bitcoin, ’cause other Bitcoiners are very Maximalist in nature. But,
I have seen you talk about Zcash and a theory. Like, what’s your
position on alternative coins and alternative currencies?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, the thing is,
I’m not a Bitcoin Maximalist. I’m a Maximalist. Anyone who understands
economics and finance, and how markets work will be a Maximalist because
it is more efficient to have one currency than a whole bunch of
different ones. That’s just not a controversial opinion. And, it’s a
controversial opinion amongst scammers who want you to go by their ICO.</p>
</div>
<div class="paragraph">
<p>But, standard non-scam driven, economic thinking, this is not a
controversial opinion. This is how the Euro got created. And, there are
certainly downsides to not having multiple currencies. The one world
currency thing has a lot of very real economic problems. But, they’re
not problems that apply to things like Bitcoin.</p>
</div>
<div class="paragraph">
<p>For digital payments in a decentralised environment, it’s just natural
to end up with one coin. Whether or not it’s actually Bitcoin, who the
heck knows? But, Bitcoin’s technical design and sort of technical ethos
currently are definitely the most suitable for being the one currency
everyone uses.</p>
</div>
<div class="paragraph">
<p>That’s just a matter of like simplicity, reliability, of disinterest in
making deep dangerous changes. And, there’s just … Conservatism is a
good thing for that store of value. It’s just a pretty obvious set of
combinations that mean Bitcoin’s kind of the default there.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> But
therefore, is it good to have competing alternative currencies?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, it’s not going
to hurt things. But, for the most part, the competing alternative
currencies are scams.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Every single
one?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, some are more
scammy than others.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Is Ethereum a
scam?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Ethereum is a funny
example, because the way it was launched, and the way it was promoted,
that’s much more of a scam than any of the surf currency itself. Had
Ethereum, for instance, been launched. I mean, it’s hard to kind of come
up with an example of where this would be possible.</p>
</div>
<div class="paragraph">
<p>Let’s suppose, hypothetically, somehow launch Ethereum, where it was
just an add on to Bitcoin, where somehow the people behind Ethereum were
making money off of it. This isn’t really technically feasible, but
let’s assume for the sake of argument was. It would still wind up being
a scam, even without a separate currency, because they were advertising
things that they knew would not be possible.</p>
</div>
<div class="paragraph">
<p>Ethereum is just a bed of lies if you will. And, I think it’s very
unfortunate, ’cause it also means a lot of academics, because they can
get grant money from this, and because Ethereum is easy to experiment
on. I think it’s pulled down ethical standards of academia.</p>
</div>
<div class="paragraph">
<p>And, it’s just an unfortunate position to be in. And, this is also … I
mean, maybe a good way to explain this is the private chain side of
things. Well, some of that’s perfectly reasonable. A lot of the more
grandiose claims made are effectively scams. And, it’s sort of a new
interesting category of scam where it’s not like we’re directly ripping
people off, but rather were lying about what our products can actually
do, and we’re getting away with it because it’s security.</p>
</div>
<div class="paragraph">
<p>And, in security, well I can sell you a magical rock that keeps lions
away. How do you know it doesn’t work? There are no lions around.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, what are
the main claims for Ethereum then that you think of false?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, it’s a funny
one, ’cause it’s tough to pin down because the main claims were designed
to be vague. Claims like this is a world … A great example is the world
computer thing. What does that actually mean?</p>
</div>
<div class="paragraph">
<p>When you start thinking about any reasonable interpretation of it is,
no, this is total bullshit. But, it’s presented in a way which is vague
enough, it’s tough to argue against. You’ve got to play pin people down
on what does a world computer mean? What’s it actually computing?</p>
</div>
<div class="paragraph">
<p>Now, you ask a normal person, I think, “Oh yeah, computations done
somehow on Ethereum.” And, it’s no, that’s not how it works at all. Your
Ethereum node redoes the computation. It’s not a computer, it’s a
verifier, whereas the sort of general way of building consensus
applications I push is client-side verification, which is quite
explicit.</p>
</div>
<div class="paragraph">
<p>Yes, we have this big dataset that your computer verifies. And, other
people don’t even have to verify the data. They don’t even necessarily
know what it means. They may never even have a copy of it. But, if I
want to convince you that something’s true, like I just sold you a
house, I give you the data to prove it’s true, and you verify that data
yourself, and you come to a conclusion that yes, you now own a house, or
no, I’m trying to defraud you.</p>
</div>
<div class="paragraph">
<p>That is a sane way to talk about block chains. A world computer is not.
A world computer is a pie in the sky scam material. And, even Vitalik, I
mean he’s kind of admitted, “Well, the world computer stuff was a bit of
a red herring.” I’m sorry. The moment you say red herring, and please go
and invest in my thing, you’re probably scamming someone.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I don’t get
the feeling he intentionally scammed somebody.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> You know about his
quantum computing thing?</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> No, tell me.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, just prior to
Ethereum, he was involved in a quantum computing scam.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> And, essentially what
the scam was was they would do simulated quantum computing that would
somehow be better than anything else. It just didn’t make any sense.
And, his claim is, “Oh! I kind of young, and just had higher hopes for
it. That’s all.” No, you weren’t that stupid.</p>
</div>
<div class="paragraph">
<p>First of all, you were like 19, at university. You knew what this was.
You knew this was bullshit. Yeah. The guy’s got the mind of a scammer,
basically. He’s got the intentions of a scammer.</p>
</div>
<div class="paragraph">
<p>He’s very clever about it. He’s not someone who is careless. He’s not
someone who gets himself clearly involved in a scam in the way that you
can prosecute. But, he’s pushing dishonest stuff. I mean, that’s what
scammers do.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, ETH 2.0,
I’m guessing you’ve read some of the specs.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, it’s one of
those things where he just go put up a whole bunch of complex shit on
the wall to try to be resistant to criticism. I think I believe Greg
Maxwell was the one who deserves credit for this. But, he’s pointed out
how the general approach of Ethereum crowd is, they put something out,
it gets shot down because it doesn’t work. So, rather than go back and
fix the problems, they make it more complex.</p>
</div>
<div class="paragraph">
<p>And, if you keep repeating this, eventually you appear to be secure, not
because you’ve actually created something secure, but rather, you’ve
created something sufficiently complex, it’s just too much work to
criticise.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. I mean,
I’ve read James Press, which is medium posts recently looking at ETH
2.0. I don’t know if you saw it.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I might have.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I mean, the
only thing I could think of when I was reading this is, “This just seems
an insanely complicated way of creating a distributed database.” I was
written about sharding, and then I was reading about state rent, and
that certain things would be on chains. And, I was just thinking,
“What’s this for?” I just can’t get my head around it.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> It is designed to be
sufficiently complex that you can’t criticise it. Now, on the other
hand, if I wanted to explain to you how Open TimeStamps works, I could
do that in a morning, including the part where I explain how hash
functions work. It is dead simple.</p>
</div>
<div class="paragraph">
<p>If I wanna explain to you how my proof Marshall Project works, I’d
probably have to go spend the afternoon as well. This stuff is designed
to be dead simple. I mean, this is why, on my twitter profile for a long
time, the pinned tweet was, “A blockchain is a chain of blocks.”</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I knew that
was coming.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. Blockchains are
not complex things. People try to make them complex things, so they can
go sell stuff, or in the case of academic skill, write papers and make
them relevant. But, they just aren’t that complex.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yup. And,
they have one purpose. Like, Jimmy talks about this a lot. The
blockchain has a really good purpose for Bitcoin and money. Nothing else
really. And, I’ve tried-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I actually disagree on
that.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Well, that’s
good, because I’ve tried to be open-minded, and tried to kind of just be
as open-minded as a can say, “Okay. Is there something else here?” Like-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> You’ve gotta remember
because I define a blockchain is a chain of blocks, I would actually
have the viewpoint that, “Yeah. Blockchains are worth adding basically
anything.” I mean, the moment you have a data structure, where you even
wanna create a backup of it, it might as well throw it blockchain in
there so it can update and ensure you have a complete copy.</p>
</div>
<div class="paragraph">
<p>My Open TimeStamps project, it’s a centralised system that creates
timestamps, long story short. Well, one issue with it is if the central
servers go down, you want to have a backup of all the timestamp proofs
they made. How do you make that backup? Well, currently, you go and go
through this HTTP, RPC, restful protocol, total box standard stuff, and
he just download one after another.</p>
</div>
<div class="paragraph">
<p>How do you know that your copy of the back up is the same as mine? Well,
obviously you gonna add hashing to it. Well, how are you going to add
hashing to it? Well, why don’t you go and make updates, and have one
update hash another? Oh, what do you know? We’ve created a blockchain.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Indeed a
blockchain, yeah. Okay. So, I met with Zac Prince of Block Fight, and we
have a long chat about Bitcoin. They do crypto back loans. And, it’s a
market that makes sense. But, he also said, it doesn’t make sense when
they’re Lending money, say to Argentina, that if you’ve got to lend out
Bitcoin because it’s volatile.</p>
</div>
<div class="paragraph">
<p>He said it makes sense to do a stablecoin. A stablecoin is built on
Ethereum. So, whether it’s a scam or not, the fact that people are
building things that people are using, how do you sit with that?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, so the point I’d
make there is, the stable coin’s built on top of Ethereum. From a tech
perspective, that could actually be the right decision. And, the reason
why there can be the right decision is, yeah, I mean the infrastructure
is there. We know we can throw together something. It doesn’t work as
well as it could. But, the tooling’s there, we can get it done, push it
out the door.</p>
</div>
<div class="paragraph">
<p>I’ve literally told clients of mine, “Well, you actually might want to
build this on Ethereum, ’cause alternatives don’t exist yet.” We know
they can exist, but the effort to actually make it work hasn’t been done
yet. And, in all equally, I’d say the stable coin idea is just an
obvious no brainer.</p>
</div>
<div class="paragraph">
<p>You might want to have exposure to this currency. Why wouldn’t you want
to have some nice digital way of doing it with a well-defined trust
relationship? It’s just not a complex thing to talk about. It has very
obvious reasons to, in much the same way like having an ETF, it makes a
lot of sense for certain people.</p>
</div>
<div class="paragraph">
<p>Now, having an algorithmic stable coin, where you try to do consensus,
decentralised magic to keep the price stable, there’s a pretty good
reason. I think those are impossible. It’ll never work.</p>
</div>
<div class="paragraph">
<p>But, a trusted stable coin, where you have a central issuer, who you
have legal mechanisms to ensure that you get your money back, yeah. I
mean, why not? Hell, in some cases, a stable coin that’s actually a
total fraud can actually make sense. If I’m a trader, and I want to
temporarily move out of a position into a stable thing, and then move
into another position, even if the stable coin is a total fraud, and
there’s no US dollars or whatever backing it, it can still be useful for
me as a trader, because my risk of the stable coin going belly up, and
the fraud playing out maybe less than the risk I have of not moving my
currency, not moving my assets into that stable currency for whatever
reason I needed to.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I only see
the two use cases. I see Bitcoin and a stable coin. That to me is pretty
much all I think we need, personally. I mean, you probably can think of
some great other examples.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, if you’re
talking about money, and things related to money, I think you’re a lot
more right than people would want you to be.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. Well,
do you know why? Because other people want to invent other uses for
blockchain, ’cause they want to monetise it. And, other people want to
shoot down stablecoin-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> So, I guess the way
I’d put it is, if there’s a money component involved, I think you’re
ultimately right. If there’s not a money component involved, and we’re
just trying to do something related to some asset or some data
structure, which for a reason we what consensus over, I mean, yeah,
block chains basically always make sense.</p>
</div>
<div class="paragraph">
<p>But, that’s because of blockchain is just a chain of blocks. It is not
rocket science. I mean, I love the example GET. People say, “Oh, but
then is GET a blockchain?” And, my answer is, well yeah. it’s basically
a blockchain. It doesn’t quite precisely match the linear chain of
blocks in how we use it. But, why GET is a set of hashed things in a
direct acyclic graph is essentially the same reason why Bitcoin is a
chain of blocks.</p>
</div>
<div class="paragraph">
<p>I want to make sure that my copy of the source code on my computer is
the same as your copy. That’s why Bitcoin is blockchain. That’s why GET
has something nearly a blockchain.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> What about
privacy coins? Obviously, I’ll see you tool more about Zcash than-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Say proof of what?</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Privacy
coins.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Oh, privacy coins?</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. So,
I’ve seen you talk about Zcash more than, say, Monero. What’s your
position on privacy coins?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, they make a
lot of sense if they work. The only reason I want to talk more about
Zcash that Monero is Monero has less wrong with it.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Monero definitely
could, in theory, have less privacy than Zcash. The underlying idea of
what Monero is, it certainly has the potential for less privacy than
Zcash. But, the Monero people have just done a competent job
implementing something with very little drama, and the people behind it
all seem pretty ethical. And, there’s very little criticised about
Monero.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> It’s the only
other crypto I hold. I’ve got Bitcoin and Monero.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. I mean, I hold
essentially trivial quantities of Monero and Zcash, enough to use on
occasion. But, in theory, Zcash should be better. Its privacy, the
potential for privacy’s much better.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Is that
’cause it uses Zcash nodes?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Exactly. Yeah. The
difference is, in Monero, your payments might’ve come from immediately
one of say 10 different people, and then of course you know a hundred
and so on, whereas in Zcash, the moment you do a payment, if it’s a
shielded payment, you’re now part of this big anonymity set.</p>
</div>
<div class="paragraph">
<p>What’s wrong with Zcash is sort of all the implementation details and
sort of the people behind it.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Wow! So, I
interviewed Zooko last week. And, one of the most important questions I
think I put to him is I said, “Is a Zcash a company?” ’Cause that’s what
it feels like. It feels like it’s a company.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah, it is,
effectively. And, the reality is the way they do … The way they will do
Zcash is very explicitly centralised. And, they kind of try to put fake
leaves on edge. But, probably it’s a company of a few different people
with really dubious ethics. It’s just …</p>
</div>
<div class="paragraph">
<p>I mean, it’s kind of fortunate, ’cause it’s a scary thing to have. The
best privacy tech out there, for that type of use case, run by people
who will lie to you.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. And,
I’m not surprised that it seems like [inaudible 00:38:40] brothers have
a preference to Zcash. It didn’t surprise me.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. Well, the thing
I think with it is, people in that kind of sphere, they would rather
work with people who are not totally ethical. I get the sense this is
why Coinbase and Zcash kind of seemed to get along, because they kind of
see eye to eye on, “Well, we’re not going to strictly tell everyone
exactly how this really works. We’re happy to Futz with stuff.”</p>
</div>
<div class="paragraph">
<p>I mean, when they did the trustee set up. The simple reality is they
botched it. And, rather than just come and say, “Look, here’s where we
made our mistakes. Here’s what we’re going to do better.” They just
lied. They said it was multiparty set up in. And, the reality is, it
wasn’t.</p>
</div>
<div class="paragraph">
<p>It was intended to be, but due to technical failures, I don’t think you
can make that claim. In the Bitcoin world, I think had that happened
with the people behind Bitcoin, they would have said, “Look, we screwed
up this, this, and this. We’re going to fix this next time. Here’s the
timeline where we roughly wanna do it. Here’s why this isn’t necessarily
a big deal, et Cetera, et cetera.”</p>
</div>
<div class="paragraph">
<p>Had Zcash has simply done that, I think Zcash would still be a success.
But, that’s not the way they think. They think, “Well, shit, we got to
have good PR on this. We’ve got to preserve our money coming in.” And,
after all, I mean, they get a ton of money from Zcash. They have
incentives to hide flaws, because that’s her income, whereas in the more
long term view, would be, “Well, all right, we might lose some money in
the meantime, while we lose some market confidence. But, the longterm
effect will be people will actually trust us.”</p>
</div>
<div class="paragraph">
<p>I don’t trust Zooko not to lie me.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. I’ve
got to say, I trust Ricardo a bit more.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> You’re a big
fan of Ripple Coin, right?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, I think Ripple’s
wonderful idea. You mean Ripple, the original concept to like peer to
peer payments, right?</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I’m on about
Ripple Coin.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. That’s
remarkably scammy.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> It’s interesting. So,
I, at one point, worked for R3. And, I should be careful what I say
here, cause there’s probably NDAs, and they’re a bit … They are not very
happy with me. But, long story short, I think what I can say is, initial
was working as a consultant, evaluating other coins, and other systems.
And, I think their business plan there was let’s just go buy something
and let’s package it up and sell it to banks. A perfectly reasonable
thing to do, act as middlemen.</p>
</div>
<div class="paragraph">
<p>Well, they had me analyse Ripple, ’cause at the time, there was a lot of
interest among banks. And, I analyse it, and said, “Yeah, the
centralised system obviously.” Which isn’t necessarily a bad thing. For
banks, I think, that would have been fine.</p>
</div>
<div class="paragraph">
<p>Of course, I soon found out, they weren’t saying it was centralised
banks. They were just flat out lying about what it actually was. So,
when I did a big presentation in front of most of the world’s major
banks and representatives from them, they’re like, “Wait, Ripple’s
what?” ’cause they’d been lied to.</p>
</div>
<div class="paragraph">
<p>And, ripple these days, I don’t actually get the sense that’s true
anymore. I get the sense that Ripple, the company, has become much more
reasonable. But, Ripple’s tied to currency, and they don’t have any
ability to get rid of this currency, which doesn’t really … It isn’t
needed for technical reasons.</p>
</div>
<div class="paragraph">
<p>So, I think they’re putting in a very awkward position where there’s
rabid fan base of big holders, essentially.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Very strange
group.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. Very, very
strange. And, I would not be surprised if … Like as an example in
Twitter, you say something about Ripple and the XRP troll army comes
down on you. I would not be surprised if, for the most part, that sort
of army of crazy people is actually not that involved with Ripple, the
company selling things to banks. I don’t think that that dumb.</p>
</div>
<div class="paragraph">
<p>But, they can get away with it. There’s no mechanism for Ripple, the
company, to actually extract themselves from the currency. Like it or
not, they created the currency. They own a big chunk of it. They can’t
get away from that. And, I mean this is one of the real dangers of
creating coins for services. You might get tied to a coin that’s
pointless.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Well, that’s
why I call it Ripple Coin. I never changed from Ripple Coin, because I
think it’s important for people … It was like with Bitcoin cash becoming
BitCash. The alternative name, I think, was important.</p>
</div>
<div class="paragraph">
<p>I always call it a Ripple Coin, because I think people have to know,
they have to know, it was created by the company. That it wasn’t a gift.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, it’s worse
than that. I mean, last I checked in government, I haven’t looked very
recently, the consensus was still controlled by the Ripple company. You
can’t get away from the fact Ripple’s architecture is centralised.</p>
</div>
<div class="paragraph">
<p>The XRP community can say all they want. “Oh, all you know, it’s just
nodes. You can go pick a different set.” Well, yeah. I mean, I can go
pick a different currency. Unless you and I agree on the same set of
nodes, the reality is we’re not looking at the same currency. And, that
was really all my paper was.</p>
</div>
<div class="paragraph">
<p>I just pointed out. Yeah. Obviously, if you pick a different set of
central nodes controlling the consensus than me, we can get out of
consensus, and all hell will break loose. Thus, the only sane thing to
do is pick the same set of servers for control of consensus.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> One thing I
do want to ask you about is because I think one thing, a lot of other
alternative currencies have managed to do, whether it’s right or wrong,
but by design have been able to create an incentive structure and
financial incentives for developers.</p>
</div>
<div class="paragraph">
<p>Bitcoin is still largely voluntary, or there are some contributions in
different ways. I know you’ve had a contribution. But, it’s-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> My point is not
voluntary in the sense that developers go unpaid. It’s voluntary in the
sense that the currency itself isn’t directly paying developers.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Of course,
yeah.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> But, the reality is
there’s enough money floating around for developers get paid, even total
screw ups like me.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Are you still
working on Bitcoin?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I’m not working on
Bitcoin core. But, I am working on projects around it like Open
TimeStamps and Proof Marshall. And, I’ve had surprisingly good success
getting paid for that.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I guess it
depends on who you are though. And, the reputation you’ve built, you can
be funded. But, when you say there is funds available for developers, I
mean, how do they go about receiving funds? How do they do it?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean, it’s kind of
like anything. You do a bit of work, you show that you’re competent, and
you find someone who’s interested in paying you to do more work. If
you’re competent, and you prove that, the simple reality is there are
ways to go get money. It is not the hardest part.</p>
</div>
<div class="paragraph">
<p>The hardest part is getting to the point where you’re confident. And,
the things that us, even in coins which have developer funds, getting
money out of those developer funds is surprisingly hard.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Right, okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Like Zcash is a great
example where the Windows clients for Zcash we’re completely
unmaintained because Zcash wasn’t giving them any money.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay. So,
’cause I sort of say would Luke put up his patron, and I supported them.
It just feels like there should be almost like something he shouldn’t
have to worry about.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> How? I mean, the
simple reality is, having funds in these coins is not a magic solution
to that either. Yeah. The bigger problem is more you getting to a
position where you’re doing interesting work that’s getting valued. And,
if you’re able to do that, and actually contribute, getting that money
is not that hard.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Is there
enough developers coming through? ’Cause we talked earlier about enough
of the kind of biggest and brightest minds who can really think
adversarially or think outside the box. But, are there enough developers
coming through who can we just work on more simpler tasks?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> The impression I get
is mostly yes. But, the interesting thing about this is like Bitcoin
core itself, that actual core software, I may not be very popular saying
this, but I think it’s true that they’ve got good enough developers,
maybe a little too many.</p>
</div>
<div class="paragraph">
<p>Bitcoin core itself doesn’t necessarily need to change that much. And,
it can change on a somewhat slower basis than it has. I mean, it’s not
really a big concern. The more interesting thing is like all the
periphery infrastructure around it. Things like libraries that actually
work are well documented and so on.</p>
</div>
<div class="paragraph">
<p>And, that’s not very sexy work. So, that may actually be the thing where
we need more money put into. But, when you look at other coins, which
should do over funds, they don’t do a good job with this either. So,
it’s not like this is a magic solution that’s proven to work. This seems
to be more a solution which has proven to make the people founded the
coin a ton of money.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. I spoke
to Brian Bishop. And, I think he says something along the lines of, “It
would be great if some parts of the cost start to become
compartmentalised, ’cause it’s kind of a big sprawling mess right now.”
Is that correct?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Oh, yeah, yeah. The
fundamental like Bitcoin core architecture is not, I think, how you
would do it these days. I think in the context of when it was created,
it was probably the right decision to make. Do this very simple thing,
which one person can create, and one person can comprehend, and it’s
just one code base that’s very easy to review. But, for what we want it
to do now, it’s probably not ideal.</p>
</div>
<div class="paragraph">
<p>On the other hand, I mean, people often think, “Oh! Bitcoin core doesn’t
have this feature. It’s terrible.” Well, so what? Just turn on Bitcoin
core node, grab the data from it and do whatever you need to do. What do
you need to do? Do you need to have an index of transactions? Just
follow the blocks and index your transactions. It’s slightly less
efficient. But, so what?</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Even if
people who kind of want the base change essentially ossified. Is that
the word they use?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Base protocol is
pretty stable. Not quite as stable as say TCP/IP. But, it’s reasonably
stable. And, equally, so has the stability of TCP/IP held back the
Internet. I don’t think you’d make the case at all. If anything it’s
helped it by having the simple thing that works, and you can build on
top of it.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I wanna ask
you a bit about the work you’ve been doing. But, before that just one
kind of … I’ll say one final question. I haven’t got through hardly
anything here. This has been great. But, I do want to ask you about your
views on fungibility, because in doing my interviews, I’ve kind of had
two different perspectives.</p>
</div>
<div class="paragraph">
<p>There are some people who do want fungibility on the base chain. But,
there are some like Saifedean wouldn’t. Saif’s view is that we want to
say a completely transparent based chain, so we can ensure nobody is
operating with say, fractional reserves. Where do you sit in that kind
of field?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I think his viewpoint
is technically ignorant there. You can definitely have … I mean, as an
example, ideally, Zcash would be completely non-transparent. In reality,
it’s nearly entirely transparent, ’cause you’re actually using the
shielded transaction features is hard and discouraged.</p>
</div>
<div class="paragraph">
<p>But, in theory, Zcash could be completely shielded. And, even then, it’d
still be easy to be transparent. The better argument to make there is
all the technology for privacy on base chains is potentially dangerous.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. Example being,
with Zcash, you have that trusted set up. A trusted setup could easily
fail. Implementation bugs could easily cause it to fail. In fact, the
fundamental Zcash library, the thing that verifies transactions, just
prior to release, they found a bug in it that could have allowed a
moment of inflation. And, that’s not even like a trusted set up failure.
It’s just a simple bug in it.</p>
</div>
<div class="paragraph">
<p>And, it’s not an easy bug to find. You really got understand math in
very deep detailed find something like that, because you’re relying
completely on the math to protect you from inflation. Whereas in Bitcoin
you’re relying on stuff you could explain to a drunk art student.
Speaking about a fine arts degree.</p>
</div>
<div class="paragraph">
<p>So, I’m a little bias there. I liked this level. But, that’s useful,
’cause it means tons of eyes can see this stuff. When Bitcoin had this
some recent inflation exploit-</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> CV bug.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah. Had that
actually being used, chances are alarm bells would have gone off in tons
of places, because people are looking at, doing the math, figuring out
how many Bitcoins are in existence. Does this number make sense? Any
idiot can do that. It’s not hard. For Zcash to do that, you need to
re-implement all Zcash nodes. And, it is a nightmare.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, I guess
you’re keen on some form of fungibility, but do you … Are you keen on
it, say as a side chain or some kind? Like how do you-</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, I mean,
Lightning adds that. Any add on to Bitcoin that’s scalable will
naturally have better fungibility. And, the reason is, to scale, you
have to distribute less data to less people. It’s just not possible to
create a scaling solution that doesn’t at least add privacy to some
adversary.</p>
</div>
<div class="paragraph">
<p>As an example, Coinbase. Let’s suppose, well, PayPal. Let’s go really
out there. PayPal, compared to Bitcoin, has better privacy against most
adversaries. If I pay someone with PayPal, North Korean spies don’t know
what I did.</p>
</div>
<div class="paragraph">
<p>Obviously, the US government probably has a full copy of everything.
But, most of my adversaries now do you not know that I made that
payment, and have no way of knowing. That is categorically better than
Bitcoin from that narrow perspective.</p>
</div>
<div class="paragraph">
<p>If my adversary’s US government, totally different discussion. But,
PayPal scales. And, the only way it could scale is by reducing the data
available to the bad guys.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay. All
right. Look, we’ve done a lot here, but I do want to cover some of your
work. So, when I spoke to Jack Ma, he was like, “Peter’s really busy
working on Proof Marshall.” I don’t know anything about it. Can you tell
me, what is Proof Marshall?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, all right. So,
first of all, my simpler project is Open TimeStamps. And, Open
TimeStamps proves data existed in the past. The problem with Open
TimeStamps is it doesn’t prove anything about whether conflicting data
also existed. An example being, I sell your house. I give you a sign
digital document saying, “I, owner of 1234 Main Street sell it to you.”</p>
</div>
<div class="paragraph">
<p>What you don’t know is if I already sold that someone else. Proof
Marshall fixes that problem by … It’s a library to create data
structures where you have consensus over. And, what consensus means
there is simply, in the definition of selling a house, all the possible
places where I could have put that data, you now can see. Thus, you can
rule out me selling the house to someone else.</p>
</div>
<div class="paragraph">
<p>And, how do you do that? Well, you throw in a whole bunch of Merkle
trees and hashing. This is … I mean, what’s hard about Proof Marshall is
that the strategy for the implementation is effectively taking pointers
and abstracting that concert.</p>
</div>
<div class="paragraph">
<p>Pointers are such a low-level fundamental idea in computer science that
just … The low-level mechanics of actually implementing this is
challenging and tricky to do well. And, you get a lot of issues. Like,
if I’m giving you a math proof that now you own this house, I want to
make sure that even if the code or writing that application isn’t that
careful, that math proof won’t, for instance, use up all the memory in
your system.</p>
</div>
<div class="paragraph">
<p>Turns out that’s actually a hard problem. It’s not a hard problem for
like Bitcoin level reasons. And, this is an economics problem. It’s
just, it’s a tough thing to implement at a computer science level, or
maybe I’m just not a very good coder.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> So, what’s
your status? Where are you at with the project?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> About two weeks, for
sure.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> All right. Is
that this week?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> No. I mean,
truthfully, it’s something where I’m always thinking, “All right, I
could finish this in two months.” But, two months later I say, “Oh,
yeah. I didn’t realise but this isn’t this.”</p>
</div>
<div class="paragraph">
<p>I mean, as an example, the first version I had, for how it would
represent, how it would obstruct a pointer, made the assumption that you
always hash the data. And, I did a bunch of work in that, and I was,
“Oh, yeah. That doesn’t actually work. That causes other technical
problems that, long story short, this doesn’t work.”</p>
</div>
<div class="paragraph">
<p>Another example was I had this … My most recent implementation had a
thing where when you took the data, in processing, and deserialised it,
you would make a copy of it. And, I naively thought, “Oh, that’s not big
deal. Make a copy of it. It’s all well, and good.” Of course, I go
through the adversarial think, I was, “Oh, shoot. Because I made a copy
of this, now my API doesn’t have a good way of assuring I don’t run out
of RAM, ’cause all of these extra copies.”</p>
</div>
<div class="paragraph">
<p>So, I had to effectively redesign it so that all the data can be
operated on directly. If you’re a programmer, the term I would say is
the serialised version of it is identical to what you would process in
main memory. Thus, you don’t have to make a copy to process it.</p>
</div>
<div class="paragraph">
<p>And, this is all like very much in the weak technical stuff. But, to
make a robust implementation that works well, you have to solve these
problems. And, it’s just hard. And, because it’s still at such a
fundamental level of design, having two people work on it once, it’s
very challenging.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Okay.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> ’Cause if I make a
change, I’m usually changing how any of the code works. And now, if I
have a partner working with me, suddenly everything they’re doing is
broken. Maybe if I was sitting next to a guy in an office, this might go
faster. But, it’s just not there. And-</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> It’s a
one-man project.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Yeah, yeah. For now.
But, if it works, it’ll eventually work, and long store short is it’ll
be a nice library to write consensus applications, to do all kinds of
things you want. As an example, you could even implement GET and Proof
Marshall to just have a good way of making sure you and I have the same
copy code. Certificate Transparency is another example.</p>
</div>
<div class="paragraph">
<p>When you go to a website, the certificate that proves your talking to
the computer you think you’re talking to, like your bank, for instance,
that are published in a blockchain. The people who create certificate
transparency, of course, hate the term blockchain and probably would
strangle me if I said this in front of them. But, the reality is the
data structure is effectively blockchain.</p>
</div>
<div class="paragraph">
<p>In proof Marshall, you could do things like that and … All right. You
can do them now, but it’s just a lot less work when you have a library
that just does it for you. It’s like … I mean, SQL databases are like
this.</p>
</div>
<div class="paragraph">
<p>Sure. Prior to dimension SQL, you could, in theory, do anything you do
with. It was just so much more work to get there.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I think I’ve
kept up with about a good 50% of today.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, it’s enough to
do a 51% attack.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Well, yeah. I
do wanna do that. I wanna 51% attack. We’re just going to have to do
another one another day, ’cause there’s so much more wants to talk to
you about. But, there is a couple of final closing things I want to talk
to you about. One is just a bit left field.</p>
</div>
<div class="paragraph">
<p>I’ve noticed you tweet quite a bit about journalism. Why does that get
to you so much?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I think this really
comes down to … And, I’ll say straight off, this is an example of not
staying in your lane. This kind of phrase going around, stay in your
lane, only talk about the stuff that you’re supposed to do
professionally, and so on. And, I really don’t care what that for
Twitter.</p>
</div>
<div class="paragraph">
<p>And, a lot of that gets down to, what does it take to have a society of
the functions? You have to have people agree on basic facts around the
world. And, I think the reason why I’m critical of that, same reason
ultimately I’m critical of many scams in the crypto world, where people
were saying things, but the projects just aren’t true, and polluting the
ecosystem of ideas with false things.</p>
</div>
<div class="paragraph">
<p>And, unfortunately right now, we have a big problem with journalism
where, first of all, it’s not very fun. It’s not well funded. It just
isn’t that money to actually pay journalists to do their job properly.</p>
</div>
<div class="paragraph">
<p>I have quite a few friends who are journalists, and I see this every
day. I mean, the timelines they have to operate on are ridiculous.
There’s no way for them to do a good job given how fast they have to put
out articles with how little help. And, on top of this to make money,
you wind up with all kinds of dark practices, like clickbait.</p>
</div>
<div class="paragraph">
<p>And, when you combine that with the very ugly political landscape of the
US, you get really ugly things like Covington, where I think it’s pretty
fair to say major media organisation are, “Oh, this is a great story.
Fits our narratives really well. We’re going to get a ton of clicks on
this. Let’s rush published before anyone else does.”</p>
</div>
<div class="paragraph">
<p>And, the rush to publish is a really big deal. I’ve been told, directly
by people managing media organisations in the crypto space, that
collectively people like me are a huge competitor to them, because I can
tweet faster than they can publish, and literally minutes matter in this
stuff. If they’re not first to publish, they will get less clicks, less
views, less money.</p>
</div>
<div class="paragraph">
<p>It sounds so stupid, but this is the truth of it. And, that pushes a
cycle that just doesn’t allow for good research and good work. And,
unfortunately, there are no easy ways to stop this. Maybe one of the
solutions could be more use of defamation laws, and life moves on. But,
there are very like very, very real risks to this for freedom of speech.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Yeah. I mean,
my last interview that went out yesterday was Andrew Torba from Gab.com.
What do you think of Gab? I mean, the content is tasteless. But, do you
agree that …</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I’ve never actually
looked at Gab’s website itself. And, I’m kind of sympathetic to them. I
mean, I think organisations like that should be able to exist. I think
the fact that they’ve been deplatformed from payment providers is a
straight up antitrust issue. And, they’re not the only example of this.</p>
</div>
<div class="paragraph">
<p>I mean, the fact of the matter is companies like PayPal, MasterCard,
Visa, are able to restrict freedom of speech very effectively. Not as
effectively as they could without safe things like Bitcoin. But, the
amount of control they have over what content gets produced is very
scary.</p>
</div>
<div class="paragraph">
<p>Where deplatforming ends up is people being able to restrict speech,
because they can say, “I don’t like what you’re publishing, and we’re
going to cut off your money.” And, you can’t, for instance, do
journalism without access to a flow of money to go pay people to do
stuff.</p>
</div>
<div class="paragraph">
<p>And, this is a very, very real issue. What Patreon has done is scary.
Now, as a libertarian, I’d say Patreon itself, I don’t have issues with
them cutting off people. What I have issues with are the payment
providers who have now said, “Oh, you’re trying to compete with Patreon,
we’re going to cut you off as well.”</p>
</div>
<div class="paragraph">
<p>That’s where I think this crosses the line. It’s getting very scary as a
society. So again, do I support Gab itself? Whatever. Let them do what
they want. But, do I support fighting back at why Gab has a hard time
running a business. That’s what matters to me.</p>
</div>
<div class="paragraph">
<p>And, I’m just not that concerned about people spreading hate on the
Internet. I don’t think that’s actually a big concern for society.
Particularly when we go see the left’s doing exactly the same thing but
in a different context. There’s no like clear moral high ground here.
And, obviously, if the left can do this, and society hasn’t collapsed,
it’s not necessarily such a bad thing.</p>
</div>
<div class="paragraph">
<p>And, in some ways that kind of thing pisses me off more ’cause I
definitely identify as liberal.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Well, yes I
do sometimes. But, I was saying to Andrew that like politically, I’ve
got no idea anymore where I am, because I’m finding so much to dislike
about everyone. But also, there are these certain conservative things I
do like, and then there’s a kind of liberal things I like. And, I’m just
so confused. I don’t know where to position myself.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean my entire adult
life … I live in Canada. My entire adult life I’ve voted for the Liberal
Party, which in Canada, the Liberal Party’s what the name suggests. It’s
the Liberal Party.</p>
</div>
<div class="paragraph">
<p>These days I’m not sure I identify with them anymore. I’ll probably
still go on voting for them because they’re the best of bad options.
But, yeah. And, I think part of it too is like many of the social issues
I do care about. Like freedom of speech, and gay rights and so on. A lot
of that’s actually kind of solved.</p>
</div>
<div class="paragraph">
<p>Abortion’s legal in a lot of places. Gay Marriage is legal. The things
that I cared about, we solve those problems.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Through free
speech.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> I mean just through
like the way politics moved. The Conservative party’s eventually, “All
right, fine. We’ll go along with this.” And then, probably isn’t … At
least in Canada, it’s probably not going to get reversed. So, now it’s
like, “Oh, do I need to go vote for liberals again? I mean, the things
that we’re fighting for gut solve, the things that they’re now fighting
for, I don’t agree with. It’s a very strange situation to be in.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> I think we
could do a whole show on this. All right. Just to close out. We’ve had
10 years of Bitcoin. So, we look back. Looking forward over the next 10
years, what are the key things you would like to see happen? And, what
are the most important things, not just in terms of code and develop it,
but just overall for Bitcoin? What’s gonna be important?</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Well, I’ll give you a
very specific answer, which is the things I’m working on with
client-side validation like Proof Marshall I think are critical to
moving this stuff to the next step. Getting past this narrative of all
we need some Ethereum chain, where everything’s in one place, which we
knew just doesn’t work.</p>
</div>
<div class="paragraph">
<p>I think smart contracts are actually really useful. But, they’re not
useful done in the way Ethereum people want to do them. It doesn’t work
technically. So, yes, this is kind of very narrow answer. But, this is
the stuff I’m directly working on. And, I think that’s a very fruitful
ground for making new and interesting things.</p>
</div>
<div class="paragraph">
<p>Beyond that, I mean, I’m sure the Lightning crowd, and so someone will
do great work in making payments better and so on. But, on the store of
value stuff, just not screwing up is enough to make that possible. So,
that’s kind of my answer there.</p>
</div>
<div class="paragraph">
<p><strong>Peter McCormack:</strong> Great. This
was utterly fantastic. Thank you so much for coming on.</p>
</div>
<div class="paragraph">
<p><strong>Peter Todd:</strong> Thank you.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrading"><a class="anchor" href="#_upgrading"></a>5. Upgrading</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_david_harding_harmony_and_discord"><a class="anchor" href="#_david_harding_harmony_and_discord"></a>5.1. David Harding - Harmony and Discord</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcointalk.org/dec/p1.html" class="bare">https://bitcointalk.org/dec/p1.html</a></p>
</li>
<li>
<p>Author: David Harding</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>Harmony and Discord</strong></p>
</div>
<div class="paragraph">
<p>Bitcoin experts talk often of <em>consensus</em>, whose meaning is
abstract and
hard to pin down. But the word consensus evolved from the Latin word
<em>concentus</em>, "a singing together, harmony,"[1] so
let us talk not of
Bitcoin consensus but of Bitcoin harmony.</p>
</div>
<div class="paragraph">
<p>Harmony is what makes Bitcoin work. Thousands of full nodes each work
independently to verify the transactions they receive are valid,
producing a harmonious agreement about the state of the Bitcoin
ledger without any node operator needing to trust anyone else. It&#8217;s
similar to a chorus where each member sings the same song at the same
time to produce something far more beautiful than any of them could
produce alone.</p>
</div>
<div class="paragraph">
<p>The result of Bitcoin harmony is a system where bitcoins are safe not
just from petty thieves (provided you keep your keys secure) but also
from endless inflation, mass or targeted confiscation, or simply the
bureaucratic morass that is the legacy financial system.</p>
</div>
<div class="paragraph">
<p><strong>Discord</strong></p>
</div>
<div class="paragraph">
<p>Discord is the enemy of harmony. If, in the great chorus of Bitcoin
full
nodes, half the singers decided to suddenly switch tunes, the harmony
would be lost. In its place would be two smaller singing groups who
try
to out sing each other (or who may compete through less scrupulous
means),
leaving everyone worse off.</p>
</div>
<div class="paragraph">
<p>This is what a contentious hard fork has the potential to do.  Some
people will program their full nodes to sing one song; other people
will
program their full nodes to sing a different song.  In the cacophony
that results, there will surely be confusion, recriminations, and loss
of confidence.</p>
</div>
<div class="paragraph">
<p>For this reason, contentious hard forks are to be avoided.</p>
</div>
<div class="paragraph">
<p>But this doesn&#8217;t mean we have to sing the same song forever. We have
other options. The first is gathering widespread agreement to change
to
a new song---to hard fork the system without giving discord a
foothold.</p>
</div>
<div class="paragraph">
<p>The second way is to add new layers to the existing harmony.  A chorus
will often sing accompaniment to an orchestra, and together they can
entertain audiences neither of them could have pleased alone.  Soft
forks
are the preferred method for adding new features to Bitcoin because
they
allow old nodes to continue to sing the same old song (unless they&#8217;re
miners), while new nodes get to partake in the expanded choices.</p>
</div>
<div class="paragraph">
<p>Given two forking paths to the same feature, a soft fork is the safer
option because it leaves no room for discord, and no risk that the
essential harmony that underlies Bitcoin&#8217;s security will be lost.</p>
</div>
<hr>
<div class="paragraph">
<p>[1] Cassell&#8217;s Latin Dictionary, Wiley Publishing, fifth ed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_eric_lombrozo_changing_consensus_rules_without_breaking_bitcoin"><a class="anchor" href="#_eric_lombrozo_changing_consensus_rules_without_breaking_bitcoin"></a>5.2. Eric Lombrozo - Changing Consensus Rules Without Breaking Bitcoin</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/breaking-bitcoin/2017/changing-consensus-rules-without-breaking-bitcoin/" class="bare">https://btctranscripts.com/breaking-bitcoin/2017/changing-consensus-rules-without-breaking-bitcoin/</a></p>
</li>
<li>
<p>Author: Eric Lombrozo, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
<li>
<p>Video: <a href="https://www.youtube.com/watch?v=0WCaoGiAOHE&amp;t=1926s" class="bare">https://www.youtube.com/watch?v=0WCaoGiAOHE&amp;t=1926s</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_introduction_4"><a class="anchor" href="#_introduction_4"></a>Introduction</h4>
<div class="paragraph">
<p>I’d like to talk about … we actually discovered we can replace the
script completely with soft-forks.</p>
</div>
<div class="paragraph">
<p>It’s important to note this quote from satoshi, from summer 2010: “I
don’t believe a second compatible implementation will ever” ……</p>
</div>
</div>
<div class="sect3">
<h4 id="_comparing_open_source_development_to_bitcoins_blockchain"><a class="anchor" href="#_comparing_open_source_development_to_bitcoins_blockchain"></a>Comparing open-source development to bitcoin’s blockchain</h4>
<div class="paragraph">
<p>… a lot of the inspiration came from the development of open-source. All
source code is public, analogous to all blockchain being public. All
changes are logged, same as all ledger additions, and subject to audit.
The way that git works, our main tool, is by chaining these commitments,
using hashes. I’ts very similar to a blockchain, except instead of using
double sha256 proof-of-work, it’s actually proof of actual developer
work and people working on code. The typical workflow is to clone the
codebase- similar to syncing to the blockchain. And pull requests are
similar to broadcasting transactions, you’re suggesitng that you are
wanting to change the state of the system. Then there’s code review
(validity), and merging the changes (including the changes in some block
or some future block). There’s a lot of parallels.</p>
</div>
</div>
<div class="sect3">
<h4 id="_code_forks_vs_chain_forks"><a class="anchor" href="#_code_forks_vs_chain_forks"></a>Code forks vs chain forks</h4>
<div class="paragraph">
<p>But there’s a huge difference around code forks versus chain forks. It’s
hugely different. You have these chains, yes, but you also have arrows
merging into nodes. We don’t have a way in bitcoin to merge two
blockchains that have already diverged. There have been some ideas for
blockchains that could be able to do this, like DAGs in general, but
it’s a hard problem to merge different histories and still have the same
kind of security that bitcoin has right now.</p>
</div>
</div>
<div class="sect3">
<h4 id="_compatibility"><a class="anchor" href="#_compatibility"></a>Compatibility</h4>
<div class="paragraph">
<p>It’s important to note changes that affect compatibility. In other code
bases, compatibility might not matter. In the case of consensus rules,
compatibility matters. Also in other aspects too, such as the p2p
network layer. There needs to be some level of compatibility otherwise
you get partitions of the network. Bitcoin doesn’t work well when you
have permanent partitions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bip_process"><a class="anchor" href="#_bip_process"></a>BIP process</h4>
<div class="paragraph">
<p><a href="https://github.com/bitcoin/bips" class="bare">https://github.com/bitcoin/bips</a></p>
</div>
<div class="paragraph">
<p>bip1 <a href="https://github.com/bitcoin/bips/blob/master/bip-0001.mediawiki" class="bare">https://github.com/bitcoin/bips/blob/master/bip-0001.mediawiki</a></p>
</div>
<div class="paragraph">
<p>bip2 <a href="https://github.com/bitcoin/bips/blob/master/bip-0002.mediawiki" class="bare">https://github.com/bitcoin/bips/blob/master/bip-0002.mediawiki</a></p>
</div>
<div class="paragraph">
<p>The BIP process was developed to document proposals and ideas and
specifically ideas that involve compatibility issues. If you want to
submit code and it doesn’t impact compatibility, then it’s probably not
necessary to submit a BIP. The thing is that different BIPs have
different levels of compatibility requirements. This was not really
clear in the original way that the BIP process was documented, which is
why I worked on bip123, which separates these different kinds of
changes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bip123"><a class="anchor" href="#_bip123"></a>bip123</h4>
<div class="paragraph">
<p>The first distinction I made was the difference between consensus and
non-consensus changes. In
<a href="https://github.com/bitcoin/bips/blob/master/bip-0123.mediawiki">bip123</a>,
there’s the consensus layer, the most fundamental level and hardest one
to change, and then the peer services layer including message structures
and peer discovery which could be upgraded. You could have a migration
path where you deprecate older calls and then once nobody is using the
old stuff you don’t have to support it anymore. Then there’s the RPC
layer for interfacing with node software at the higher layer, and then
there’s the application layer for
<a href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki">bip39</a> or
<a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki">bip32</a>
where you want to have wallets that share encrypted keys or stuff like
that.</p>
</div>
</div>
<div class="sect3">
<h4 id="_consensus_forks"><a class="anchor" href="#_consensus_forks"></a>Consensus forks</h4>
<div class="paragraph">
<p>Consensus forks, you know, split the blockchain and we don’t have a
merge process in bitcoin. There might be some future ideas in future
crytpocurrencies to allow for merging chains together. But for now
there’s no way to merge incompatible chains. The way iit’s resolved is
that if the rules and validity are all the same on competing chains then
the consensus rule is to follow the chain with the most work. If there’s
any kind of partition, then as soon as the partition is resolved, then
there’s a reorg and the chain which has less work is not followed. The
history of the chain with the most work becomes the one that is
accepted. It resolves temporary partitions, but not permanent
partitions. If you have an incompatibility problem at the p2p network
layer, and nodes are banning each other and creating a network
partition, then this kind of rule isn’t going to be able to resolve that
partition. It’s not going to fix it. Or once it fixes it, you’re going
to get a really really bad reorg. The great firewall of China suddenly
goes up and blocks all bitcoin traffic and then the next morning
everyone’s transactions are screwed or whatever…</p>
</div>
<div class="paragraph">
<p>Soft-forks guarantee eventual consistency as long as there’s majority
hashrate enforcing the new rules. Hard-forks can create permanent
partitions. This is all basic stuff. This is obvious now. We’re aware of
it now, that hard-forks always split the chain unless the legacy chain
is either abandoned or destroyed. I think that in 2017, we can all look
at this and say yes and we’ve seen plenty of examples of this phenomena.
This wasn’t obvious back when Satoshi was writing those earlier posts.</p>
</div>
</div>
<div class="sect3">
<h4 id="_even_satoshi_broke_bitcoin_a_few_times"><a class="anchor" href="#_even_satoshi_broke_bitcoin_a_few_times"></a>Even Satoshi broke Bitcoin a few times</h4>
<div class="paragraph">
<p>Before we all knew this, Satoshi introduced hard-forks and broke
consensus. I don’t think this is well known. Cory Fields found this
commit
<a href="https://github.com/bitcoin/bitcoin/commit/757f0769d8360ea043f469f3a35f6ec204740446">757f0769d8360ea043f469f3a35f6ec204740446</a>
and informed me of it. I wasn’t aware of it. There was actually a
hard-fork in bitcoin that Satoshi did that we would never do it this
way- it’s a pretty bad way to do it. If you look at the git commit
description here, he says something about reverted makefile.unix
wx-config version 0.3.6. Right. That’s all it says. It has no indication
that it has a breaking change at all. He was basically hiding it in
there. He also
<a href="https://bitcointalk.org/index.php?topic=626.msg6451#msg6451">posted to
bitcointalk</a> and said, please upgrade to 0.3.6 ASAP. We fixed an
implementation bug where it is possible that bogus transactions can be
displayed as accepted. Do not accept bitcoin payments until you upgrade
to 0.3.6. If you can’t upgrade right away, then it would be best to
shutdown your bitcoin node until you do. And then on top of that, I
don’t know why he decided to do this as well, he decided to add some
optimizations in the same code. Fix a bug and add some optimizations..
okay, well, he did it.</p>
</div>
<div class="paragraph">
<p>One of the interesting things about this commit which isn’t really
described in Satoshi’s bitcointalk post is the addition of the OP_NOP
opcodes. Before, they were just illegal. If this was found by the script
interpreter then it would exit false and fail. And now they basically
don’t do anything, they are just NOPs. This is technically a hard-fork
that he introduced if any transaction was to use these, and or if any transaction in the past had used these in a way that breaks the chain given the new rules, especially since this was not phased in with an activation height or grandfather clause. The previous rule was that
they were illegal. Because now transactions that would have been invalid
before are now valid. At the time, nobody was using the NOPs so it
probably didn’t effect anyone that we know about– someone might have had a pre-signed transaction that was not broadcasted that used the previous features. The network was really small and probably everyone
knew each other that was running a node. So it was easy to get everyone
to upgrade quickly. Nobody seemed to care.</p>
</div>
<div class="paragraph">
<p>There was a genius to this: by doing this hard-fork, it actually enabled
future soft-forks. We can now repurpose these NOPs to do other things.
I’ll get into that in a second.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bip_classification"><a class="anchor" href="#_bip_classification"></a>BIP classification</h4>
<div class="paragraph">
<p>Early BIPs had no classification. It’s hard to really prioritize them or
see which ones might be more difficult to review if you just look at
them by name. By adding bip123, it makes it more clear which ones are
consensus-critical.
<a href="https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki">bip16</a>,
<a href="https://github.com/bitcoin/bips/blob/master/bip-0017.mediawiki">bip17</a>
and
<a href="https://github.com/bitcoin/bips/blob/master/bip-0018.mediawiki">bip18</a>
are touching consensus-critical code. The URI scheme is probably very
localized to a single unit that is easy to review. So it makes it much
easier to know what to expect in terms of how hard it is going to be to
review a particular BIP.</p>
</div>
<div class="paragraph">
<p>Some of these over here are later BIPs. We see that– we have several
soft-forks that were actually deployed, and other stuff that was not
soft-forks like peer services changes that were added. And then over
here, we see consensus changes are easy to spot. I’m not going to get
into this story too much, but
<a href="https://github.com/bitcoin/bips/blob/master/bip-0064.mediawiki">bip64</a> is
not a consensus change. This was the reason that bitcoinXT was created
actually. There was a dispute. Bitcoin Core developers did not believe
that the
<a href="https://github.com/bitcoin/bips/blob/master/bip-0064.mediawiki">getutxo</a>
feature should be at the p2p level. It was not a consensus change. It
became a much more serious situation later on with the whole block size
thing which I’ll get into in a second. Here you can see it’s easy to see
which particular BIPs are probably– need to be reviewed more rigorously.</p>
</div>
</div>
<div class="sect3">
<h4 id="_hard_fork_mania"><a class="anchor" href="#_hard_fork_mania"></a>Hard-fork mania</h4>
<div class="paragraph">
<p>In 2015-2016 there was this hard-fork craze that came about. There was a
whole bunch of BIP submissions about hard-forks. None of these were
actually deployed. But it’s interesting to note that there was this
period of time that there was such a mania for hard-forks. During this
time it’s also interesting to note that people were still working on
some ideas for soft-forks.</p>
</div>
<div class="paragraph">
<p>There were some breakthrough discoveries about things that we could do
with soft-forks that we didn’t think were possible or that we thought
were really hard to do. It was a generalization of what kinds of things
could we add to the protocol using only soft-forks. It might be obvious
now, but it wasn’t always.</p>
</div>
</div>
<div class="sect3">
<h4 id="_a_brief_history_of_bitcoin_forks"><a class="anchor" href="#_a_brief_history_of_bitcoin_forks"></a>A brief history of bitcoin forks</h4>
<div class="paragraph">
<p>The first set of forks were all activated by basically just updating the
software. There was no activation mechanism coordinated or whatever.
Satoshi would just say hey I released a new version, install it and
don’t send bitcoin until everyone has upgraded. This works well when you
have a network with only like ten machines. It doesn’t work very well
when you have a network with thousands or millions of machines. It’s
really hard to get everyone to upgrade all at once. Also, there are security reasons why it’s very important to not include auto-updating code everywhere.</p>
</div>
<div class="paragraph">
<p>That didn’t work so well. But that’s the example of 0.3.6 that Satoshi
did. That was done that way.</p>
</div>
</div>
<div class="sect3">
<h4 id="_blockheight_activation"><a class="anchor" href="#_blockheight_activation"></a>Blockheight activation</h4>
<div class="paragraph">
<p>After that, it was decided that using blockheight as an activation
trigger would be better because it would give people some time to
upgrade their software so it wouldn’t be right away. Satoshi’s 1
megabyte blocksize limit in September 2010 was an example of this where
it was using the blockheight to activate the rule.</p>
</div>
<div class="paragraph">
<p>It’s also possible to activate with a flag date using the median time.
This made it easier to predict when it would happen. This was used for
bip16 and bip30 deployment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fork_imposing_1_mb_blocksize_limit"><a class="anchor" href="#_fork_imposing_1_mb_blocksize_limit"></a>Fork: imposing 1 MB blocksize limit</h4>
<div class="paragraph">
<p>In 2010, Satoshi added the 1 megabyte block size limit. This was an
early soft-fork attempt. It was hardcoding a particular blockheight and
if it’s above that blockheight then enforce it and if not, don’t. It
assumes that everyone has upgraded their software by this time. This was
the first crude mechanism which wasn’t just wait until everyone upgrades
and don’t send transactions until then.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bip16_pay_to_scripthash_p2sh"><a class="anchor" href="#_bip16_pay_to_scripthash_p2sh"></a>bip16 pay-to-scripthash (P2SH)</h4>
<div class="paragraph">
<p>And then came
<a href="https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki">bip16</a>,
right. And bip16 started to use other mechanisms like for instance like
the anyonecanspend idea where old nodes would accept the transactions as
valid and new nodes could have new rules on that and you could add
functionality to this. This idea was reapplied in segwit and it made a
comeback in a pretty strong way.</p>
</div>
</div>
<div class="sect3">
<h4 id="_soft_forks_vs_hard_forks"><a class="anchor" href="#_soft_forks_vs_hard_forks"></a>Soft-forks vs hard-forks</h4>
<div class="paragraph">
<p>By this time the distinction between hard and soft forks started to
congeal. At the beginning there was not a good distinction. But there
was a post from gavinandresen where he said there are “soft-rule changes
and hard rule changes.. soft rule changes tighten up the rules, old
software will accept all the blocks created by new software, but the
oppsoite might not be true. Soft changes do not require everyone to
upgrade. Hard changes modify the rules in a way that un-upgraded
software considers illegal. At this point it is hard to deploy hard
changes and they require every merchant and miner to upgrade”. It was
appreciated at this point that it was a difficult problem. And then a
few years later, I guess gavinandresen didn’t think it was that hard
anymore.</p>
</div>
</div>
<div class="sect3">
<h4 id="_non_standardness"><a class="anchor" href="#_non_standardness"></a>Non-standardness</h4>
<div class="paragraph">
<p>Then there other recommendations like “consider transactions
non-standard” if it has an unknown version number. You would bump the
transaction version number. You could still include such a transaction
in a block, but it wouldn’t propagate over the p2p network. This would
reduce the risk of sending transactions that might not validate
correctly if some nodes aren’t validating the nodes correctly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_issupermajority_first_used_miner_activation_mechanism"><a class="anchor" href="#_issupermajority_first_used_miner_activation_mechanism"></a>isSuperMajority: First used miner activation mechanism</h4>
<div class="paragraph">
<p>This was around the first time that miner activation concept was
invented or started to be used. Track the last number of blocks, the
last 1000 blocks, if a certain number of them signal a higher block
version then you know miners are going to be enforcing a new rule and
then it’s time to upgrade if you want to be safe. Unfortunately there’s
a lot of issues with this. If ther’es a cooperative scenario where the
incentives with the miners are aligned then it helps to make a smooth
transition. When the miners and user interests are not aligned hten
there can be a lot of problems here, such as false signaling,
validationless mining… just because someone is signaling something
doesn’t mean anything in particular. Miners might signal for a change
but after activation they could trivially choose not to enforce it. And
then there’s this 95% threshold warning which indicates hey something
might be up. isSuperMajority used 95% as a safety threshold. I think
that unfortnuately this established a narrative that miners are the ones
that are able to change the protocol. This was the first time that it
was provided and it was to smooth out the process. It wasn’t politicized
at this point because most of the soft-forks at the time… there weren’t
any conflicts or obvious conflicts there.</p>
</div>
<div class="paragraph">
<p>We had this super majority mechanism which incremented the block version
but you could only deploy one soft-fork at a time. You’re stuck on that
one, and then what do you do if it doesn’t get activated? 3 different
soft-forks deployed that way: bip34, bip65, and bip66.</p>
</div>
</div>
<div class="sect3">
<h4 id="_versionbits_bip9"><a class="anchor" href="#_versionbits_bip9"></a>Versionbits (bip9)</h4>
<div class="paragraph">
<p><a href="https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki">Versionbits
bip9</a> was developed after that, with the idea that we want to be able to
deploy multiple soft-forks at the same time. When I first got into
bitcoin, I thought bitcoin would get obsolete, some better tech would
come around and it would be better structured and I didn’t see an
upgrade path for bitcoin that could remain backwards compatible. When we
started to look into versionbits, I thought hey this is a version
upgrade path where we could actually add new features and deploy
multiple soft-forks simultaneously and maybe we could even scale up the
process a little bit. We did 2– we did the
<a href="https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki">checklocktimeverify
bip65</a><br>
<a href="https://github.com/bitcoin/bips/blob/master/bip-0112.mediawiki">checksequenceverify
bip112</a> bundle, and then came
<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/segregated-witness-and-its-impact-on-scalability/">segwit</a>,
and segwit is where everything changed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_checklocktimeverify"><a class="anchor" href="#_checklocktimeverify"></a>checklocktimeverify</h4>
<div class="paragraph">
<p>In checklocktimeverify
(<a href="https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki">bip65</a>),
the transaction version is bumped, which indicates it’s going to be
using this new feature potentially. And there’s new rules. It’s
basically redefining NOP2 which Satoshi enabled with the hard-fork he
did before. Had Satoshi not done that hard-fork, then there wouldn’t be
NOP2 available, and it wouldn’t have been possible to implement
checklocktimeverify like that. Old nodes treat it as a NOP (no
operation).</p>
</div>
<div class="paragraph">
<p>This is an example script: notice that if OP_CHECKLOCKTIMEVERIFY is a
NOP then the script interpreter just drops the entire line after the
ELSE and that’s how old nodes would evaluate the script.</p>
</div>
</div>
<div class="sect3">
<h4 id="_origin_of_soft_fork_for_segwit"><a class="anchor" href="#_origin_of_soft_fork_for_segwit"></a>Origin of soft-fork for segwit</h4>
<div class="paragraph">
<p>In this context, of seeing all these interesting developments happening
with soft-forks, I thought it would be neat if we could have a more
abstract soft-forking framework like a plugin kind of thing where rather
than having a few people reviewing every single soft-fork proposal that
everyone makes then instead have a screening process and modularize it
more so that it’s possible to have more unit tests and a clear execution
pathway. I proposed this idea. We were concerned about the sequence of
rules.. so if there’s a set of rules that need to be checked and it
doesn’t matter in what order you can check them, then you can just chain
all the different soft-forks. I thought this would be a good way to
generalize this, the execution flow is easy to follow this architecture,
and it’s encapsulated (chat log exercept: “the execution flow is even
easier to follow with this kind of architecture” and “because in the
stable consensus code itself the specifics of the rule are encapsulated”
and “and in the rule definition itself there’s nothing else BUT the rule
definition” and some comments about extension blocks). So the rule
definition could be this module that whoever wrote it could write unit
tests for it and just make sure it works perfectly.</p>
</div>
<div class="paragraph">
<p>And then luke-jr just out of the blue as a matter of fact, it was pretty
crazy, he just said to me, say a soft-fork for segregated witness. And I
was like, could we really do that with a soft-fork? At this point,
Pieter Wuille had been working on a segwit implement for the Elements
Alpha project and it was there done as a hard-fork and even gmaxwell
didn’t think it would be possible to do this as a soft-fork. And
according to luke-jr it was obvious that it would be doable as a
soft-fork and he blurted out the answer. Note that sipa is Pieter
Wuille. I was skeptical about this and luke-jr said in theory it should
be possible and sipa was wondering, well, how do you do that? He said it
probably entails p2p changes… we could do it with external data blobs
and blocks like extension blocks.</p>
</div>
<div class="paragraph">
<p>Luke-Jr mentioned that it could be done like p2sh’s mechanism in bip16.
The changes in transactions referring to each other… so you have to make
the transaction not contain scriptsigs. That was the lightbulb moment.
It took another 2 weeks for it to sink in. I was just trying to do a
simple soft-fork plugin thing and I did not expect segwit to come out of
this. I was just thinking about consensus structure and luke-jr ends by
breaking soft-fork plugins and then he runs off to bed. This was the end
of that chat.</p>
</div>
<div class="paragraph">
<p>I recently looked this up for a new article that Aaron van Wirdum
published in bitcoinmagazine where he looks over the
<a href="https://bitcoinmagazine.com/articles/long-road-segwit-how-bitcoins-biggest-protocol-upgrade-became-reality/">history
of segwit</a>. I was trying to find the original chat history for this and
just looking back at this it was funny because at this point none of has
had realized what we had stumbled across. It wasn’t until a few weeks
later that we realized what we found. This happened between the
<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/">Montreal</a> and
<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/">Hong Kong</a>
<a href="https://scalingbitcoin.org/">scaling bitcoin conferences</a>. At Hong Kong
we didn’t have the transaction malleability fix yet and people wanted
bigger blocks and lightning and this solved all these things and we were
able to do it with a soft-fork. It totally changed the roadmap at this
point.</p>
</div>
<div class="paragraph">
<p>Eventually came the segregated witness segwit BIPs. There were 7 of
them. Only 4 of them here are consensus. bip142 was replaced by
<a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki">bip173</a>
(<a href="https://diyhpl.us/wiki/transcripts/sf-bitcoin-meetup/2017-03-29-new-address-type-for-segwit-addresses/">bech32</a>)
that sipa has been working on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_versionbits_in_practice"><a class="anchor" href="#_versionbits_in_practice"></a>versionbits in practice</h4>
<div class="paragraph">
<p>Once we had segwit implemented, then we were thinking we’d deploy with
versionbits bip9 which made the most sense. We talked with some miners
and after discussion it seemed that everyone agreed it would be a good
idea to deploy this. ….. bip9 was designed in a way such that instead of
incrementing the version every time we do an upgrade, we used different
bits in the version number and ew could parallelize this and do multiple
upgrades at the same time. Here’s the state transition diagram. It was
designed to– if it fails, the failure mode was that nothing changes.
Status quo was favored. If miners are not going to signal for it then it
just fails after a certain timeout. We did not anticipate other stuff
like
<a href="http://diyhpl.us/~bryan/papers2/bitcoin/jeremy-rubin-asicboost-notes.pdf">asicboost</a>
and other issues that came up. This was assuming that in the worst of
cases okay no change stay with status quo. We were happy with this but
it caused some problems because miners started to misconstrue this as a
vote.. in litecoin, this is segwit signaling in this chart here, and
then the price is over here, and you would have to be stupid to not see
a correlation here. Miners were starting to get close to the threshold
and then drop their hashrate on it. This is an attack vector and it’s
not sustainable forever.</p>
</div>
</div>
<div class="sect3">
<h4 id="_flag_dates_and_user_activated_soft_forks"><a class="anchor" href="#_flag_dates_and_user_activated_soft_forks"></a>Flag dates and user-activated soft-forks</h4>
<div class="paragraph">
<p>So then we started to think maybe miner-activated soft-forks on their
own aren’t good enough. Well what about going back to user-activated
soft-forks like the flag date? This is when
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-February/013643.html">shaolinfry</a>
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-March/013714.html">proposed</a>
<a href="https://github.com/bitcoin/bips/blob/master/bip-0148.mediawiki">bip148</a>
which required that miners signal segwit. It was kind of like a rube
goldberg device where one device triggers another. This was a way to
trigger all the nodes already out there ready to activate. And so we did
some game theory analysis on this and actually NicolasDorier did some
nice diagrams here. Here’s the decision tree if you decide not to run a
bip148 node– if the industry or miners decide not to go along with it,
thenyou get a chain split and possibly a massive reorg. On the other
hand if you do run a bip148 node, then they would have to collude for
you to get a permanent chain split. The game theory here- it’s a game of
chicken yes, and assuming it’s not in their interest to do that, then
they will opt to not go for the chain split. But if they do split the
chain then it will probably be for reasons related to real economic
interests like bcash where it’s controversial and some people might
wonder. My personal take is that I think it would be ineviatable that
some miners would have interests that encourage them to have another
chain. It didn’t really adversely effect bitcoin too much and some of us
got free money from bcash so thank you.</p>
</div>
<div class="paragraph">
<p>The problem with bip148 is that the segwit2x collusion agreement came up
and it was too late to activate with just bip9. James Hilliard proposed
a reduction of the activation threshold to 80% using
<a href="https://github.com/bitcoin/bips/blob/master/bip-0091.mediawiki">bip91</a>.
It was a way to avoid the chain split with the segwit2x collusion
agreement, but it did not avoid the chainsplit with the bcash thing
which I think it was inevitable at that point. The bcash hard-fork was a
separate proposal unrelated to bip91 and bip8.</p>
</div>
<div class="paragraph">
<p><a href="https://en.bitcoin.it/wiki/Segwit_support">Some</a> of the Bitcoin Core
developers preferred bip8 over bip148. You can see the distinction here.
The main difference is that bip8 does not have a transition from the
start state to a failed state. In bip8, miners get a chance to signal
and activate, but after a certain threshold rather than going to the
failed state it goes to the locked in state. This does not allow miners
to stall forever or to stall to the point where it fails. But it does
still feed the narrative that miners are activating the fork and it
still allows miners to stall for a long time. Others weren’t too happy
about that with bip8.</p>
</div>
</div>
<div class="sect3">
<h4 id="_future_of_soft_fork_activation"><a class="anchor" href="#_future_of_soft_fork_activation"></a>Future of soft-fork activation</h4>
<div class="paragraph">
<p>This is a big dilemma about how we are going to deploy soft-forks in the
future. I’m really happy that segwit activated because now at least we
can see some protocol development in second layer or higher-layer stuff
that does not require tinkering with the consensus layer. I think this
will usher in more innovation. At some point we’re probably going to
want to add more features to the bitcoin protocol. This is a big
philosophical question we’re asking ourselves. Do we do a UASF for the
next one? What about a hybrid approach? Miner activated by itself has
been ruled out. bip9 we’re not going to use again.</p>
</div>
</div>
<div class="sect3">
<h4 id="_interesting_changes_requiring_soft_forks"><a class="anchor" href="#_interesting_changes_requiring_soft_forks"></a>Interesting changes requiring soft-forks</h4>
<div class="paragraph">
<p>Near-term soft-forkable changes that people have been looking into
include things like:
<a href="https://diyhpl.us/wiki/transcripts/blockchain-protocol-analysis-security-engineering/2018/schnorr-signatures-for-bitcoin-challenges-opportunities/">Schnorr
signatures</a>, signature aggregation, which is much more efficient than
the currently used ECDSA scheme. And MASTs for
<a href="https://diyhpl.us/wiki/transcripts/bitcoin-core-dev-tech/2018-03-06-merkleized-abstract-syntax-trees-mast/">merkleized
abstract syntax trees</a>, and there are at least two different proposals
for this. MAST allows you to compress scripts where there’s a single
execution pathway that might be taken so you can have this entire tree
of potential execution pathways and the proof to authorize a transaction
only needs to include one particular leaf of the tree.</p>
</div>
<div class="paragraph">
<p>We’re looking at
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-October/015141.html">new
script versions</a>. At this point we don’t need to do the OP_DROP stuff,
we can add new opcodes and a new scripting language or replace it with
something that’s not a stack machine if we wanted– not that we want to,
but in principle we could replace it with another language. It gives us
that option. It’s something interesting to think about. Satoshi thought
that bitcoin script would be the extensability mechanism to support
smart contracts, and now we’re looking at the opposite which is that the
way the proofs are constructed. Adding new scripting languages turns out
to be simple.</p>
</div>
</div>
<div class="sect3">
<h4 id="_potential_changes_requiring_hard_forks"><a class="anchor" href="#_potential_changes_requiring_hard_forks"></a>Potential changes requiring hard-forks</h4>
<div class="paragraph">
<p>Some changes in the future might require a hard-fork. Here are a few
that are on the wishlist. Structural changes to the blockheader could
allow for adding an extra nonce or chaining headers so you can add more
fields or commit to other kinds of data structures, insead of having to
stick stuff into the coinbase transaction.</p>
</div>
<div class="paragraph">
<p>Withholding attack fixes, proof-of-work changes, things like that.</p>
</div>
<div class="paragraph">
<p>Another change that would be nice is splitting the transaction inputs
and outputs into separate merkle trees. You could construct much shorter
proofs. If you’re interested in whether a particular UTXO is in a block,
you don’t need to download the entire transaction. This would be a nice
little feature.</p>
</div>
<div class="paragraph">
<p>Also if we do want to increase blocksize then my particular take is that
it seems silly to bump it 2x once, and then blocks fill up and then we
hard-fork again? Every time we hit the limit we hard-fork again? We
might as well add a percent increase per annum and have something where
it grows gradually. Agreeing on the exact numbres and timeframe are
obviously some areas where it might cause disagreement.</p>
</div>
</div>
<div class="sect3">
<h4 id="_hard_forks_and_inevitable_chain_splits"><a class="anchor" href="#_hard_forks_and_inevitable_chain_splits"></a>Hard-forks and inevitable chain splits</h4>
<div class="paragraph">
<p>Hard-forks might inevitable cause chain splits. I think this is
something that we have come to accept. I think that back in 2015, we
thought hard-forks might be a way to upgrade the protocol and assume
everyone has the incentive to switch. We’ve seen several hard-forks now.
The ethereum hard-fork is an example where people with different
ideologies decided to stick it out and mine the old chain. I think we’re
going to see that in bitcoin. Even a tiny group of people tha tdon’t
want change, we’re going to see a chain split. I think at this point,
avoiding a chain split is not an option, but rather we have to work to
mitigate the chain splits. This means including things like
<a href="https://github.com/luke-jr/bips/blob/bip-noreplay/bip-noreplay.mediawiki">replay
protection</a>, using different address formats, protecting SPV clients,
things like that. Market mechanisms and price discovery, liquidity,
trying to see whether or not the market actually supports the changes.</p>
</div>
<div class="paragraph">
<p>Are there situations where the legacy chain will be voluntarily
abandoned? I think if we were doing a hard-fork that was a win for
everyone and maybe just some guy that just hasn’t connected to bitcoin
in years and has a node that he hasn’t spun up… there’s going to be a
few of these people out there. There could be a hard-fork where everyone
agrees, but still the logistics and coordination is difficult and it
probably needs to be done with a lot of anticipation and some mechanism
to mitigate any kind of issues there.</p>
</div>
<div class="paragraph">
<p>Is it practical or ethical to kill the legacy chain? My personal belief
is that as long as people want to use the chain, even a few people, then
attacking the chain (like mining empty blocks indefinitely) is
tantamount to attacking people’s personal property. I think this could
be a serious problem.</p>
</div>
<div class="paragraph">
<p>If both chains survive, which one gets to keep the brand? This is the
multi-billion dollar question. My personal view is that whoever is
proposing the change, the onus is on them to demonstrate widespread
support. The people who want to keep the status quo don’t have to
demonstrate anything. The change needs to demonstrate overwhelming
support.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conclusion_2"><a class="anchor" href="#_conclusion_2"></a>Conclusion</h4>
<div class="paragraph">
<p>I’m not sure how things are going to develop now. We’ve learned a lot in
the past few years. Hopefully we will be able to do at least a few more
upgrades. If not, then I’m happy we got segwit in so that we can start
to do second layer stuff.</p>
</div>
</div>
<div class="sect3">
<h4 id="_qa_2"><a class="anchor" href="#_qa_2"></a>Q&amp;A</h4>
<div class="paragraph">
<p><a href="https://www.youtube.com/watch?v=0WCaoGiAOHE&amp;t=1h8m10s" class="bare">https://www.youtube.com/watch?v=0WCaoGiAOHE&amp;t=1h8m10s</a></p>
</div>
<div class="paragraph">
<p>Q: What about the research going on
<a href="https://bitcoinhardforkresearch.github.io/">spoonnet</a> and spoonnet2 for
hard-forks?</p>
</div>
<div class="paragraph">
<p>A: There’s a lot of interesting stuff there. jl2012 has been working on
interesting stuff there. I think that at the end of the day there’s
still going to be political issues even if you have a technical solution
to the logistical issues… if you can’t get people to agree, then you’re
still going to have problems. But it’s good to have ideas for replay
protection. If you’re going to split, then split for good, and make sure
there’s no way to merge again, and make sure you have a good way of
coordinating that. This doesn’t fix the political aspects though.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aaron_van_wirdum_the_long_road_to_segwit"><a class="anchor" href="#_aaron_van_wirdum_the_long_road_to_segwit"></a>5.3. Aaron van Wirdum - The Long Road To Segwit</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoinmagazine.com/technical/the-long-road-to-segwit-how-bitcoins-biggest-protocol-upgrade-became-reality" class="bare">https://bitcoinmagazine.com/technical/the-long-road-to-segwit-how-bitcoins-biggest-protocol-upgrade-became-reality</a></p>
</li>
<li>
<p>Author: Aaron van Wirdum for Bitcoin Magazine</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Publish date: Aug 23, 2017</p>
</div>
<div class="paragraph">
<p>Segregated Witness (SegWit) has
<a href="https://btcmagwpstage.wpengine.com/articles/segregated-witness-activates-bitcoin-what-expect">activated</a>
on Bitcoin. As of today, all SegWit-ready nodes on the Bitcoin network
are enforcing the new rules, marking Bitcoin’s biggest protocol upgrade
to date.</p>
</div>
<div class="paragraph">
<p>But activation did not come easy, and it did not come fast.</p>
</div>
<div class="paragraph">
<p>This is a look back at the long road to SegWit.</p>
</div>
<div class="sect3">
<h4 id="_the_problem"><a class="anchor" href="#_the_problem"></a>The Problem</h4>
<div class="paragraph">
<p>Bitcoin transactions consist of two main parts. One part is “base
transaction data.” That covers which bitcoins are being moved and where
they are being moved to, as well as some other data. The second part is
called the “witness.” This contains a bit of code with cryptographic
signature data, which proves that the owner of a bitcoin really did want
to spend the bitcoin.</p>
</div>
<div class="paragraph">
<p>It’s this signature data that brings a slight complication with it. In
what is referred to as the
“https://btcmagwpstage.wpengine.com/articles/the-who-what-why-and-how-of-the-ongoing-transaction-malleability-attack-1444253640[malleability
bug],” Bitcoin signatures can be slightly altered by anyone, even after
these signatures are created and without invalidating the signatures.
This in turn means that the appearance of the whole transaction, and
more specifically the transaction identifier, can be altered by those
relaying transactions over the Bitcoin network or by miners that include
transactions in blocks.</p>
</div>
<div class="paragraph">
<p>This doesn’t need to be a big problem in itself. Transactions are still
valid and will move the bitcoins from the same place to the same place,
under all the same conditions. However, it does complicate creating
newer transactions depending on unconfirmed transactions: New
transactions need to know the transaction identifier they rely on. This,
in turn, makes it significantly harder to build certain second-layer
protocols on top of Bitcoin, like bi-directional payment channels.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_idea"><a class="anchor" href="#_the_idea"></a>The Idea</h4>
<div class="paragraph">
<p>The general idea to solve the malleability bug by “separating” signature
data from other transaction data stems back several years.</p>
</div>
<div class="paragraph">
<p>As far back as 2012, the likes of Bitcoin Core
<a href="http://www.bitcoinstats.com/irc/bitcoin-dev/logs/2012/01/20#l1327031650.0" class="bare">http://www.bitcoinstats.com/irc/bitcoin-dev/logs/2012/01/20#l1327031650.0</a>contributors
Russell O’Connor, Matt Corallo, Luke Dashjr and Gregory Maxwell, as well
as Bitcointalk moderator “Theymos,”
<a href="http://www.bitcoinstats.com/irc/bitcoin-dev/logs/2012/01/20#l1327031650.0">discussed</a>
the issue on IRC Bitcoin development channels — but at that time they
didn’t see a tenable way of pulling it off on the Bitcoin network.</p>
</div>
<div class="paragraph">
<p>A year later, in August 2013, the issue
<a href="https://download.wpsoftware.net/bitcoin/wizards/2013/08/13-08-29.log">resurfaced</a>,
as Bitcoin Core contributors Peter Todd and Gregory Maxwell were having
similar discussions on IRC. But now, the two were making progress with
their ideas to counter malleability. “I’m talking about making the
[entirety] of the scriptsig largely [separate],” Maxwell wrote. “I’d
even suggest using as [transaction ID] the transaction without the
scriptsigs.”</p>
</div>
<div class="paragraph">
<p>Another
<a href="https://download.wpsoftware.net/bitcoin/wizards/2013/09/13-09-24.log">month
later</a>, Maxwell and, this time, well-known cryptographer Dr. Adam Back
were discussing the malleability issue on IRC once again. Now, Back
suggested computing the transaction ID by omitting the signature.
Though, Maxwell commented, “getting the sig out of the txid could help
but that would be a very deep hardforking change … and it’s actually
tricky to make secure.”</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_sidechain"><a class="anchor" href="#_the_sidechain"></a>The Sidechain</h4>
<div class="paragraph">
<p>In August 2014, blockchain technology company
<a href="https://blockstream.com/">Blockstream</a> was founded by the same Adam Back
and Gregory Maxwell, as well as entrepreneur and investor Austin Hill
and several Bitcoin Core developers, including Dr. Pieter Wuille. The
company was set to focus on sidechains: alternative blockchains that can
effectively be pegged to Bitcoin.</p>
</div>
<div class="paragraph">
<p>By early 2015, Blockstream engineers decided to implement a new feature
in the company’s prototype sidechain
<a href="https://blockstream.com/2015/06/08/714/">Elements</a>, which was publicly
<a href="https://btcmagwpstage.wpengine.com/articles/blockstream-moves-ahead-sidechain-elements-first-implementation-sidechains-1433883105">announced</a>
in June of that year. This feature would conclusively solve the
malleability issue on the sidechain — by separating base transaction
data from witness data into different data structures.</p>
</div>
<div class="paragraph">
<p>The name of this new feature was, of course,
<a href="https://elementsproject.org/elements/segregated-witness/">Segregated
Witness</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_block_size_dispute"><a class="anchor" href="#_the_block_size_dispute"></a>The Block Size Dispute</h4>
<div class="paragraph">
<p>It had been looming for some time, technically since
<a href="https://bitcointalk.org/index.php?topic=1347.0">October 2010</a>, more
concretely since
<a href="https://bitcointalk.org/index.php?topic=144895.0">February 2013</a> and
finally
<a href="http://gavinandresen.ninja/time-to-roll-out-bigger-blocks">publicly</a>,
bursting onto the
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-May/007869.html">scene</a>
by the spring of 2015: the block size limit dispute.</p>
</div>
<div class="paragraph">
<p>Former Bitcoin Core lead developer Gavin Andresen and
<a href="https://bitcoinj.github.io/">Bitcoinj</a> lead developer Mike Hearn, in
particular, believed that Bitcoin’s 1 megabyte block size limit should
be increased with a hard fork, an incompatible protocol change that
would require almost the entire Bitcoin ecosystem to upgrade. No easy
task — even more so because there was no community-wide consensus for
this change.</p>
</div>
<div class="paragraph">
<p>Regardless, by the
<a href="https://medium.com/faith-and-future/why-is-bitcoin-forking-d647312d22c1">summer
of 2015</a>, Andresen and Hearn announced that they would move forward with
their plans, using the alternative <a href="https://bitcoinxt.software/">Bitcoin
XT</a> software client. The controversial nature of the effort put the
Bitcoin development community and industry in somewhat of a state of
emergency.</p>
</div>
<div class="paragraph">
<p>In an attempt to resolve the divide and potentially help figure out a
resolution to the block size dispute, two conferences (or workshops)
were quickly organized in the latter half of 2015:
<a href="https://scalingbitcoin.org/event/montreal2015">Scaling Bitcoin Montreal</a>
and <a href="https://scalingbitcoin.org/event/hongkong2015">Scaling Bitcoin Hong
Kong</a>.</p>
</div>
<div class="paragraph">
<p>One of the most promising scaling proposals
<a href="https://www.youtube.com/watch?v=TgjrS-BPWDQ&amp;feature=youtu.be&amp;t=41m54s">presented</a>
in Montreal was
<a href="https://btcmagwpstage.wpengine.com/articles/understanding-the-lightning-network-part-building-a-bidirectional-payment-channel-1464710791">the</a>
<a href="https://btcmagwpstage.wpengine.com/articles/understanding-the-lightning-network-part-creating-the-network-1465326903">lightning</a>
<a href="https://btcmagwpstage.wpengine.com/articles/understanding-the-lightning-network-part-completing-the-puzzle-and-closing-the-channel-1466178980">network</a>,
a sophisticated second-layer scaling solution that was detailed in a
<a href="https://lightning.network/lightning-network-paper.pdf">white paper</a>
published by Joseph Poon and Thaddeus Dryja only months earlier. The
only problem: this solution would require a malleability fix.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_soft_fork"><a class="anchor" href="#_the_soft_fork"></a>The Soft Fork</h4>
<div class="paragraph">
<p>At this point in time, developers were still not sure if and how the
malleability bug could be fixed. Most still thought Segregated Witness
could not be implemented on Bitcoin’s main chain without a hard fork.</p>
</div>
<div class="paragraph">
<p>But not Bitcoin Core contributor (and <a href="http://bitcoinknots.org/">Bitcoin
Knots</a> maintainer) Luke Dashjr.</p>
</div>
<div class="paragraph">
<p>In October 2015, right between the two Scaling Bitcoin conferences,
Bitcoin Core contributors Eric Lombrozo, Pieter Wuille, Wladimir van der
Laan and Luke Dashjr
<a href="https://botbot.me/freenode/bitcoin-core-dev/2015-10-09/">discussed</a> a
potential new model for soft forks on IRC. During this chat, Dashjr
pointed out that the proposed mechanism wouldn’t work for all potential
soft forks, like a SegWit soft fork.</p>
</div>
<div class="paragraph">
<p>Interestingly, what Dashjr considered obvious — the option to deploy
SegWit as a soft fork — had not even been considered by others at all.
And even Dashjr didn’t seem to realize the implications of this
possibility at first.</p>
</div>
<div class="paragraph">
<p>To deploy SegWit as a soft fork, witness data had to be placed in a new
part of a Bitcoin block. And the “anchor” for all of this witness data
(the “Merkle root”) had to be moved to a somewhat unconventional part of
a Bitcoin block: the coinbase transaction that rewards miners new coins.</p>
</div>
<div class="paragraph">
<p>While unconventional, the Bitcoin Core contributors would, over the days
and weeks that followed, also come to realize that this method opened up
an interesting “bonus.” By creating a new part of a Bitcoin block for
the witness data, Bitcoin’s block size could be increased in such a way
that non-upgraded nodes wouldn’t notice. This could actually increase
Bitcoin’s block size without increasing Bitcoin’s existing block size
limit.</p>
</div>
<div class="paragraph">
<p>Mere weeks before the second Scaling Bitcoin workshop, several Bitcoin
Core contributors thought they may finally have found at least a
temporary solution for the block size limit dispute. Segregated Witness
would effectively increase the limit in a backward-compatible manner,
while at the same time fixing the long-standing malleability bug,
thereby enabling more advanced scaling solutions like the lightning
network.</p>
</div>
<div class="paragraph">
<p>A win-win-win solution — or so they thought.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_presentation"><a class="anchor" href="#_the_presentation"></a>The Presentation</h4>
<div class="paragraph">
<p>Segregated Witness — as a soft fork — was first presented by Pieter
Wuille in
<a href="https://www.youtube.com/watch?v=fst1IK_mrng&amp;feature=youtu.be&amp;t=36m">December
2015</a>, at the second edition of the Scaling Bitcoin workshops in Hong
Kong. Many first heard about the proposal there, and it initially seemed
to be welcomed with enthusiasm.</p>
</div>
<div class="paragraph">
<p>Shortly after this second edition of Scaling Bitcoin had ended, Gregory
Maxwell proposed what has become known as the
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-December/011865.html">scaling
roadmap</a>, which featured SegWit as a centerpiece. This roadmap was
quickly
<a href="https://bitcoincore.org/en/2015/12/21/capacity-increase/">endorsed</a> by
the Bitcoin Core development team, as well as other developers and users
in the broader Bitcoin ecosystem.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_critique"><a class="anchor" href="#_the_critique"></a>The Critique</h4>
<div class="paragraph">
<p>But despite initial excitement, Segregated Witness had its critics, too.</p>
</div>
<div class="paragraph">
<p><a href="https://btcmagwpstage.wpengine.com/articles/on-the-detriments-of-segregated-witness-for-bitcoin-1454948591">Concerns</a>
about the proposed protocol upgrade varied. Jeff Garzik, the former
Bitcoin Core contributor — who would soon after found his own
development company <a href="https://www.bloq.com/">Bloq</a> —
<a href="https://www.mail-archive.com/bitcoin-dev@lists.linuxfoundation.org/msg03051.html">did
not consider</a> SegWit a sufficient short-term scaling solution. Bitcoin
XT lead developer Mike Hearn, meanwhile, was not convinced by the
proposal at all: He dismissed the solution as an
“https://blog.plan99.net/the-resolution-of-the-bitcoin-experiment-dabb30201f7[accounting
trick]” and completely
<a href="https://www.nytimes.com/2016/01/17/business/dealbook/the-bitcoin-believer-who-gave-up.html?mcubz=1">quit</a>
Bitcoin development shortly after.</p>
</div>
<div class="paragraph">
<p>Jonathan Toomim, developer for alternative software client Bitcoin
Classic,
<a href="https://www.coindesk.com/segregated-witness-bitcoin-block-size-debate">argued</a>
that the proposal was “ugly and awkward,” suggesting it would be better
implemented as a hard fork. Even Bitcoin Core contributor Peter Todd had
<a href="https://petertodd.org/2016/segwit-consensus-critical-code-review#peer-to-peer-networking">his</a>
<a href="https://www.mail-archive.com/bitcoin-dev@lists.linuxfoundation.org/msg03178.html">concerns</a>,
in particular related to mining.</p>
</div>
<div class="paragraph">
<p>Most of these issues were deemed either solvable, unconvincing or worth
the trade-off by the Bitcoin Core development team at large, however.
Development of the soft-fork upgrade commenced.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_development"><a class="anchor" href="#_the_development"></a>The Development</h4>
<div class="paragraph">
<p>Even though a version of Segregated Witness was already implemented on
Elements, the code for the Bitcoin main chain version mostly had yet to
be written, not only because it needed to be implemented as a soft fork,
but also because SegWit for Bitcoin would enjoy a range of new features
not present in Elements: for example, the “witness discount” necessary
to increase the block size, new compatibility for the peer-to-peer
network and more.</p>
</div>
<div class="paragraph">
<p>The concrete Bitcoin Improvement Proposal for SegWit,
<a href="https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki">BIP141</a>,
was authored by Pieter Wuille, <a href="https://ciphrex.com/">Ciphrex</a> CEO Eric
Lombrozo and independent Bitcoin Core contributor Dr. Johnson Lau. By
early January 2016, in the midst of a heated scaling debate, these and
other Bitcoin Core contributors launched an initial dedicated test
network for the protocol upgrade, which was dubbed
<a href="https://btcmagwpstage.wpengine.com/articles/segregated-witness-deployed-on-new-bitcoin-testnet-segnet-1452277172">SegNet</a>.
Another two weeks later, this testnet was taken
<a href="https://btcmagwpstage.wpengine.com/articles/amid-bitcoin-scaling-debate-segregated-witness-testnet-enters-public-stage">public</a>
for the wider Bitcoin development community to experiment with. And by
March, SegNet was upgraded to support test versions of
<a href="https://btcmagwpstage.wpengine.com/articles/segregated-witness-enters-final-testnet-stage-includes-lightning-network-support-1459357231">the
lightning network</a>.</p>
</div>
<div class="paragraph">
<p>Development continued for the months to come, taking in feedback from
Bitcoin’s development community, fixing bugs, improving the codebase
accordingly and launching several more iterations of SegNet(s).</p>
</div>
<div class="paragraph">
<p>Meanwhile, Bitcoin Core contributors also reached out to the broader
Bitcoin industry, which over time led to
<a href="https://web.archive.org/web/20160201190125/https://bitcoincore.org/en/segwit_adoption/">a</a>
<a href="https://web.archive.org/web/20160420185520/https://bitcoincore.org/en/segwit_adoption/">consistently</a>
<a href="https://web.archive.org/web/20161108091658/https://bitcoincore.org/en/segwit_adoption/">growing</a>
<a href="https://web.archive.org/web/20170727105631/https://bitcoincore.org/en/segwit_adoption/">list</a>
of companies and projects committing to supporting Segregated Witness.</p>
</div>
<div class="paragraph">
<p>By June, the Segregated Witness code counted 4,743 lines of code
(including test code) and proposed removing or modifying 554 existing
lines of Bitcoin Core code. After more review from several contributors,
Bitcoin Core lead maintainer, Wladimir van der Laan,
<a href="https://btcmagwpstage.wpengine.com/articles/segregated-witness-will-be-merged-into-bitcoin-core-release-soon-1466787770">merged</a>
it into Bitcoin Core’s “master branch” by the end of that month.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_meetings"><a class="anchor" href="#_the_meetings"></a>The Meetings</h4>
<div class="paragraph">
<p>At the same time that SegWit was being developed, block size tensions in
the Bitcoin community were once again heating up. This time spearheaded
by Bitcoin Classic, a number of Bitcoin companies and miners appeared
<a href="https://web.archive.org/web/20160129090054/https://bitcoinclassic.com/">determined</a>
to hard fork in order to increase the block size limit to 2 megabytes.</p>
</div>
<div class="paragraph">
<p>In what is perhaps best described as an
<a href="https://btcmagwpstage.wpengine.com/articles/bitcoin-miners-and-core-developers-release-segwit-hard-fork-agreement-1457018394">emergency
meeting</a>, once again in Hong Kong, several Bitcoin Core contributors,
mining pool operators and other Bitcoin industry members met to discuss
the scaling issue.</p>
</div>
<div class="paragraph">
<p>The meeting led to an agreement that came to be known as the
“https://medium.com/@bitcoinroundtable/bitcoin-roundtable-consensus-266d475a61ff[Bitcoin
Roundtable Consensus]” (or the “Hong Kong Agreement”). The Bitcoin Core
contributors present at the meeting agreed to work on a block size limit
increase hard fork to be proposed to the Bitcoin Core development team
and the wider Bitcoin community. The miners, in turn, agreed to run a
SegWit release in production by the time such a hard fork would be
released in a version of Bitcoin Core. The crisis seemed to have been
<a href="https://btcmagwpstage.wpengine.com/articles/bitcoin-roundtable-announcement-thwarts-bitcoin-classic-launch-1455412826">averted</a>
— even though it quickly became clear that
<a href="https://bitcointalk.org/index.php?topic=1330553.msg14835202#msg14835202">not
everyone</a> was happy about the agreement.</p>
</div>
<div class="paragraph">
<p>Several months later, an even bigger group of Bitcoin Core contributors
and mining pool operators
<a href="https://btcmagwpstage.wpengine.com/articles/bitcoin-miners-and-developers-meet-in-california-to-improve-communications-1470158657">met
in California</a>. The Bitcoin Core contributors present at this meeting
left convinced that Segregated Witness would be activated by the miners.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_release"><a class="anchor" href="#_the_release"></a>The Release</h4>
<div class="paragraph">
<p>About six months behind on the initial schedule — the release was
originally set for April — Segregated Witness was
<a href="https://btcmagwpstage.wpengine.com/articles/segregated-witness-officially-introduced-with-release-of-bitcoin-core-1477611260">officially
introduced</a> October of 2016, in Bitcoin Core version 0.13.1. The
protocol upgrade was also implemented in several other Bitcoin
implementations, like Bitcoin Knots and
<a href="https://github.com/bcoin-org/bcoin">Bcoin</a>.</p>
</div>
<div class="paragraph">
<p>Using an activation method called “VersionBits”
(<a href="https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki">BIP9</a>),
designed to minimize network disruption, 95 percent of miners (by hash
power) had to signal support for SegWit to activate on the Bitcoin
network. This miner signaling was to start on November 15th. Meanwhile,
users were encouraged to upgrade their clients, which over time, it
seemed,
<a href="http://luke.dashjr.org/programs/bitcoin/files/charts/software.html">many</a>
did.</p>
</div>
<div class="paragraph">
<p>Based on the meetings with mining pool operators, as well as a general
conviction that SegWit would be a boon for Bitcoin, many expected that
the soft fork would be activated rather quickly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_politics"><a class="anchor" href="#_the_politics"></a>The Politics</h4>
<div class="paragraph">
<p>But that’s not what happened. As it turned out, several attendees of the
Hong Kong Roundtable Consensus
<a href="https://btcmagwpstage.wpengine.com/articles/the-status-of-the-hong-kong-hard-fork-an-update-1479843521">disagreed</a>
over what they had actually signed onto.</p>
</div>
<div class="paragraph">
<p>Bitmain co-CEO Jihan Wu, in particular,
<a href="https://btcmagwpstage.wpengine.com/articles/antpool-will-not-run-segwit-without-block-size-increase-hard-fork-1464028753">indicated</a>
he would only be willing to activate SegWit if the Bitcoin Core
development team also implemented a hard fork to increase the block size
limit in their codebase. Other
<a href="https://btcmagwpstage.wpengine.com/bitcoin-mining/what-are-bitcoin-mining-pools">mining
pools</a>, including F2Pool, HaoBTC and bitcoin.com
<a href="https://btcmagwpstage.wpengine.com/articles/where-bitcoin-mining-pools-stand-on-segregated-witness-1480086424">didn’t
signal support</a> for the soft fork either.</p>
</div>
<div class="paragraph">
<p>Moreover, a new Chinese mining pool emerged: ViaBTC. With close ties to
Bitmain, ViaBTC alone garnered enough hash power to single-handedly
block SegWit activation. And its operator, Haipo Yang, positioned
himself as a
<a href="https://btcmagwpstage.wpengine.com/articles/why-viabtc-rejects-segwit-soft-fork-in-favor-of-block-size-hard-fork-interview-with-haipo-yang-1479409475">staunch
critic</a> of the proposed protocol upgrade.</p>
</div>
<div class="paragraph">
<p>SegWit activation seemed far away.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_uasf"><a class="anchor" href="#_the_uasf"></a>The UASF</h4>
<div class="paragraph">
<p>In February 2017, a little over three months after the official release
of SegWit, a new opportunity presented itself.</p>
</div>
<div class="paragraph">
<p>The pseudonymous developer “Shaolinfry,” who had previously contributed
to Litecoin, dropped a new proposal in the
<a href="https://www.mail-archive.com/bitcoin-dev@lists.linuxfoundation.org/msg04703.html">Bitcoin
development mailing list</a> and the popular
<a href="https://bitcointalk.org/index.php?topic=1805060.0">bitcointalk.org</a>
forum: a “user activated soft fork” or
“https://btcmagwpstage.wpengine.com/articles/latest-twist-block-size-debate-called-uasf[UASF].”</p>
</div>
<div class="paragraph">
<p>Shaolinfry argued in his email that the hash power activation mechanism
that had become the standard for soft forks was never intended to be a
“vote.” “[T]he signaling methodology is widely misinterpreted to mean
the hash power is voting on a proposal and it seems difficult to correct
this misunderstanding in the wider community,” he wrote.</p>
</div>
<div class="paragraph">
<p>Shaolinfry proposed an alternative: a user activated soft fork (UASF).
Instead of hash power activation, a user activated soft fork would have
a “‘flag day activation’ where nodes begin enforcement at a
predetermined time in the future.” As long as such a UASF is enforced by
an economic majority, this should compel a majority of miners to follow
(or activate) the soft fork.</p>
</div>
<div class="paragraph">
<p>The idea immediately generated buzz throughout Bitcoin forums and social
media. And when former <a href="https://www.btcc.com/en-US/">BTCC</a> COO and
<a href="https://btcmagwpstage.wpengine.com/articles/btcc-s-sampson-mow-on-block-size-the-bitcoin-community-must-see-through-manipulation-keep-calm-and-write-code-1458061357">outspoken</a>
SegWit proponent Samson Mow
<a href="https://twitter.com/excellion/status/844349077638676480">set up</a> a bounty
fund for the development of a UASF software implementation, it seemed
like the proposal could become a reality.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_patented_technology"><a class="anchor" href="#_the_patented_technology"></a>The Patented Technology</h4>
<div class="paragraph">
<p>In the first week of April 2017, Gregory Maxwell
<a href="https://www.mail-archive.com/bitcoin-dev@lists.linuxfoundation.org/msg05055.html">dropped</a>
what was widely
<a href="https://btcmagwpstage.wpengine.com/articles/breaking-down-bitcoins-asicboost-scandal">considered</a>
a bombshell revelation on the Bitcoin development mailing list.</p>
</div>
<div class="paragraph">
<p>Maxwell claimed to have reverse-engineered a specialized ASIC-mining
chip and found that it included patented AsicBoost technology. What’s
more, Maxwell revealed that covert use of the technology would be
incompatible with a soft-forked version of SegWit. “An incompatibility
would go a long way to explain some of the more inexplicable behavior
from some parties in the mining ecosystem,” he noted.</p>
</div>
<div class="paragraph">
<p>While no specific ASIC-manufacturer was mentioned in Maxwell’s email,
Bitmain
<a href="https://blog.bitmain.com/en/regarding-recent-allegations-smear-campaigns/">acknowledged</a>
that it had implemented the patented technology in their mining chips —
though it denied having used it on Bitcoin’s mainnet.</p>
</div>
<div class="paragraph">
<p>Either way, for some users the revelation added to the desire to have
the Segregated Witness soft fork activated on the Bitcoin network. And,
as hash power activation seemed even less likely now, a user activated
soft fork was increasingly looking like the solution to accomplish that.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_bip148_proposal"><a class="anchor" href="#_the_bip148_proposal"></a>The BIP148 Proposal</h4>
<div class="paragraph">
<p>Shortly after proposing the general idea of a UASF, Shaolinfry and about
a dozen other members of the Bitcoin community opened a UASF channel on
the <a href="http://bitcoincore.slack.com/">Bitcoin Core Community Slack</a>.</p>
</div>
<div class="paragraph">
<p>The channel became a central point of discussion and organization for
the initiative. A flag date was picked, initially for
<a href="https://github.com/bitcoin/bips/commit/ccef12cc4226edda0222d98861f2296f6cb9e26d">October
1</a>, then later moved to August 1 to better account for potentially low
hash power support. Shaolinfry authored a concrete Bitcoin Improvement
Proposal:
<a href="https://github.com/bitcoin/bips/blob/master/bip-0148.mediawiki">BIP148</a>.
<a href="https://opendime.com/">Open Dime</a> founder Rodolfo Novak also established
an
<a href="https://sedo.com/us/services/broker-service/?tracked=&amp;partnerid=&amp;language=us">informational
website</a> to promote the idea.</p>
</div>
<div class="paragraph">
<p>The initial plan was to get exchanges and other businesses on board with
the UASF. If these companies would support the proposal and enforce the
soft fork, it would go a long way in realizing a desired economic
majority.</p>
</div>
<div class="paragraph">
<p>But the UASF did not gain the level of traction some of its proponents
hoped for. While a number of
<a href="http://www.uasf.co/#what-are-companies-saying-about-bip148">companies</a>
and some
<a href="https://medium.com/@rusty_lightning/i-support-uasf-for-segregated-witness-75d9ef286fe5">developers</a>
seemed onboard with BIP148, no major exchanges or other businesses
declared support and some even
<a href="https://twitter.com/spair/status/852160130296762369">spoke out against</a>
the initiative.</p>
</div>
<div class="paragraph">
<p>And, by mid-April, Gregory Maxwell on the Bitcoin development mailing
list
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-April/014152.html">stated</a>
that he believed BIP148 to be a bad idea as well. Coming from one of the
most respected and influential Bitcoin Core contributors, his rejection
of the initiative had an impact: This version of a UASF appeared to be
losing all momentum.</p>
</div>
<div class="paragraph">
<p>Instead, some began to work on an alternative UASF:
<a href="https://github.com/bitcoin/bips/blob/master/bip-0149.mediawiki">BIP149</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_altcoins"><a class="anchor" href="#_the_altcoins"></a>The Altcoins</h4>
<div class="paragraph">
<p>Many altcoins are based on Bitcoin’s codebase. This means that the
SegWit code, while developed for Bitcoin, is largely compatible with
these alternative cryptocurrencies. Unsurprisingly, therefore,
<a href="https://btcmagwpstage.wpengine.com/articles/which-altcoins-are-implementing-segwit-1481577969">several
altcoins</a> decided to implement SegWit. The first to activate Segregated
Witness was Groestlcoin as early as
<a href="https://bitcointalk.org/index.php?topic=1764430.0">January 2017</a>.</p>
</div>
<div class="paragraph">
<p>But other coins were struggling. Litecoin, Vertcoin and Viacoin all
seemed to have been caught in Bitcoin’s
<a href="https://btcmagwpstage.wpengine.com/articles/bitcoin-politics-seep-altcoins-segwit-adoption-slow-across-board">political
game</a>. These coins relied on the same miners as Bitcoin, to a large
extent, and most were not signaling support for the upgrade.</p>
</div>
<div class="paragraph">
<p>This was allegedly due to technical issues or other stated reasons, but,
as Viacoin lead developer Romano noted, “It seems more likely they want
to refrain from activating Segregated Witness on altcoins because that
would give them even less reason to hold off activation on Bitcoin.”</p>
</div>
<div class="paragraph">
<p>By April of 2017, this attitude led Litecoin creator Charlie Lee to
<a href="https://twitter.com/SatoshiLite/status/851135138876473344">advocate</a> for
a user activated soft fork on “his” coin. His initiative was eagerly
<a href="https://www.reddit.com/r/litecoin/search?q=UASF&amp;restrict_sr=on&amp;sort=relevance&amp;t=all">picked
up</a> among Litecoin users; it didn’t take long for Litecoin miners, Lee,
and other members of the Litecoin ecosystem to arrange an online
meeting, the result of which was the
<a href="https://medium.com/@Litecoinchina/litecoin-global-roundtable-resolution-001-2017-c67b729bc06d">Litecoin
Global Roundtable Resolution</a>. In exchange for some commitments by Lee,
miners agreed to
<a href="https://btcmagwpstage.wpengine.com/articles/litecoin-has-now-deployed-segregated-witness">activate</a>
SegWit. ShaolinFry and others considered the UASF effort a
<a href="https://medium.com/@shaolinfry/litecoin-china-roundtable-and-uasf-40b2cdd18611">success</a>.</p>
</div>
<div class="paragraph">
<p>Within a week after SegWit activation on Litecoin, an unknown person
made a bold move. He (or she) sent $1 million worth of the
cryptocurrency to a
<a href="https://live.blockcypher.com/ltc/address/3MidrAnQ9w1YK6pBqMv7cw5bGLDvPRznph/">SegWit-protected
address</a>, challenging anyone to steal the funds if they could. To this
date, the
<a href="https://www.reddit.com/r/litecoin/comments/6azeu1/1mm_segwit_bounty/">bounty</a>
remains untouched, further strengthening confidence in the technology.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_new_york_agreement"><a class="anchor" href="#_the_new_york_agreement"></a>The New York Agreement</h4>
<div class="paragraph">
<p>Meanwhile, the block size debate raged on. Another software client to
increase Bitcoin’s block size limit per hard fork, Bitcoin Unlimited
gained traction among Bitcoin’s mining community. Endorsed by Bitmain’s
Wu in particular, the project appeared to be heading toward a potential
(and controversial) hard fork.</p>
</div>
<div class="paragraph">
<p>This looming threat, and the possibility of a “split” in Bitcoin’s
blockchain, was reason for <a href="https://dcg.co/">DCG</a> founder and CEO Barry
Silbert to organize a meeting ahead of the
<a href="https://www.coindesk.com/events/consensus-2017">Consensus 2017</a>
conference in New York. Initially announced on a private email list for
Bitcoin entrepreneurs and other prominent industry members, the meeting
would bring together a significant chunk of the Bitcoin industry,
including miners — though, notably, no Bitcoin Core contributors.</p>
</div>
<div class="paragraph">
<p>The
<a href="https://btcmagwpstage.wpengine.com/articles/dcgs-scaling-proposal-and-what-it-needs-succeed">outcome</a>
of that meeting is typically referred to as the
“https://medium.com/@DCGco/bitcoin-scaling-agreement-at-consensus-2017-133521fe9a77[New
York Agreement].” Participants agreed on what they deemed to be a
compromise between those who wanted to increase Bitcoin’s block size
with a hard fork and those who preferred SegWit. Based on an idea
originally proposed by <a href="https://www.rsk.co/">RSK</a> founder Sergio Demian
Lerner, SegWit would be activated under specific conditions, while there
would also be a hard fork to double Bitcoin’s “base block size limit.”</p>
</div>
<div class="paragraph">
<p>But while it sufficed to say
<a href="https://en.bitcoin.it/wiki/Segwit_support">not</a>
<a href="http://nob2x.org/">everyone</a> in the Bitcoin ecosystem supported the
agreement, one specific problem stood out in particular. The conditions
for SegWit activation were largely incompatible with those proposed by
the Bitcoin Core development team, for which the code was already widely
adopted by Bitcoin users.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_intolerant_minority"><a class="anchor" href="#_the_intolerant_minority"></a>The Intolerant Minority</h4>
<div class="paragraph">
<p>While the BIP148 UASF seemed to have lost a lot of steam in favor of
BIP149, not everyone had given up on this first UASF proposal
completely.</p>
</div>
<div class="paragraph">
<p>Shaolinfry had proposed the concept under the assumption that it would
be backed by an economic majority and thought it should be aborted
before the flag day otherwise. But a group of users on the UASF Slack
channel had a different idea. Some of them — including Bitcoin Core and
Bitcoin Knots developer
<a href="https://www.reddit.com/r/Bitcoin/comments/6c55t4/lukejr_miners_can_do_bip148_masf_or_users_will_do/">Luke
Dashjr</a> — were contemplating activating the soft fork regardless of what
the rest of the Bitcoin ecosystem would do. Even if they were a
minority, and even if they’d effectively spin themselves off into a new
altcoin, they would move forward with the upgrade.</p>
</div>
<div class="paragraph">
<p>Around mid-May, Alphonse Pace
<a href="https://btcmagwpstage.wpengine.com/articles/op-ed-user-activated-soft-forks-and-intolerant-minority">linked</a>
this determination to a game-theoretical concept described by
statistician and author Nassim Nicholas Taleb: the “intolerant
minority.” In short, this idea presupposes that even an economic
minority should be able to compel miners to activate the Segregated
Witness soft fork. They would unnecessarily lose a chunk of their
“customer base” (Bitcoin users) otherwise.</p>
</div>
<div class="paragraph">
<p>Seemingly fuelled by the AsicBoost scandal, the SegWit activation on
Litecoin and discontent regarding the New York Agreement — and this time
backed by game theory — BIP148 support started to snowball into somewhat
of a viral phenomenon on social media and message boards once again.</p>
</div>
<div class="paragraph">
<p><a href="https://cryptoinsider.com/split-thoughts-bip148-uasf-segwit-bitcoin-life-universe-everything/">Several</a>
<a href="https://btcmagwpstage.wpengine.com/articles/op-ed-heres-why-all-rational-miners-will-activate-segwit-though-bip148">more</a>
<a href="https://medium.com/@jimmysong/uasf-bip148-scenarios-and-game-theory-9530336d953e">articles</a>
discussed the growing potential of the UASF and much debate on social
media, YouTube channels other discussion platforms followed. Meanwhile,
Eric Lombrozo also
<a href="https://medium.com/@elombrozo/why-i-support-bip148-4b4c0a9feb4d">threw
his weight</a> behind the effort, and
<a href="https://denarium.com/wp-content/uploads/2017/04/UASF1a.jpg">UASF hats</a>
distributed by Samson Mow became the rage. Inspired by the codename for
an <a href="https://twitter.com/electrumwallet/status/868845430947401729">upcoming
Electrum Wallet release</a>, August 1 was dubbed
“https://twitter.com/excellion/status/869106641290973184?lang=en[Bitcoin
Independence Day].”</p>
</div>
<div class="paragraph">
<p>The only problem: activation methods for BIP148 and the New York
Agreement were as incompatible as the New York Agreement was with the
activation methods proposed by the Bitcoin Core development team.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_kludge"><a class="anchor" href="#_the_kludge"></a>The Kludge</h4>
<div class="paragraph">
<p>It was <a href="https://bitmainwarranty.com/">Bitmain Warranty</a> engineer James
Hilliard who
<a href="https://btcmagwpstage.wpengine.com/articles/bip91-segwit-activation-kludge-should-keep-bitcoin-whole">came
to the rescue</a>. Hilliard proposed a slightly complex but clever solution
that would make everything compatible: Segregated Witness activation as
proposed by the Bitcoin Core development team, the BIP148 UASF and the
New York Agreement activation mechanism. His
<a href="https://btcmagwpstage.wpengine.com/articles/bip91-segwit-activation-kludge-should-keep-bitcoin-whole">BIP91</a>
could keep Bitcoin whole — at least throughout SegWit activation.</p>
</div>
<div class="paragraph">
<p>As long as a majority of miners would activate BIP91 before August 1,
all Bitcoin nodes should remain part of the same network. It was a
relatively small time window, since the solution was only proposed by
late May, but Jeff Garzik, the main developer attached to the New York
Agreement, adopted the proposal and planned to release the software
client resulting from that agreement weeks before August 1. It was
doable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_activation"><a class="anchor" href="#_the_activation"></a>The Activation</h4>
<div class="paragraph">
<p>By mid-July, Bitcoin miners had missed their window to activate SegWit
through the method proposed by the Bitcoin Core development team in time
to be compatible with BIP148. As a result, markets seemed to get nervous
about a potential “split” between a BIP148 chain and a non-BIP148 chain.
In the span of only a week, bitcoin’s exchange rate tumbled from around
$2500 to $1900: the lowest it had been in well over a month.</p>
</div>
<div class="paragraph">
<p>Possibly startled by these market movements, Bitcoin’s mining community
started to rapidly signal support for BIP91, even ahead of the schedule
set forth by the New York Agreement. And on July 20, ten days before
BIP148’s August 1 flag day for activation,
<a href="https://btcmagwpstage.wpengine.com/articles/bip-91-has-activated-heres-what-means-and-what-it-does-not">BIP91
locked in</a>. It activated a little over two days later.</p>
</div>
<div class="paragraph">
<p>With BIP91 locked in, it was only a matter of time before Segregated
Witness itself would lock in. This ultimately happened on August 9 — the
<a href="https://btcmagwpstage.wpengine.com/articles/point-no-return-segregated-witness-will-lock-bitcoin">point
of no return</a> having been reached on August 8.</p>
</div>
<div class="paragraph">
<p>Bitcoin would “officially” get SegWit after another two-week grace
period.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_adoption"><a class="anchor" href="#_the_adoption"></a>The Adoption</h4>
<div class="paragraph">
<p>The final step for Segregated Witness is, of course, actual user
adoption. Since SegWit has only just activated at the time of
publication of this article, it’s impossible to know how quickly and how
much the upgrade will actually be used. Some critics, perhaps most
notably Garzik, predict that widespread adoption could take
<a href="https://twitter.com/jgarzik/status/842723335914110976">up to a year</a> or
even longer. Others,
<a href="https://btcmagwpstage.wpengine.com/articles/blocktrail-cto-and-bitcoinjs-co-maintainer-ruben-de-vries-segregated-witness-not-very-complicated-1453757293">including</a>
<a href="https://btcmagwpstage.wpengine.com/articles/lawrence-nahum-bitcoin-wallet-greenaddress-already-integrating-segregated-witness-1453824522">a</a>
<a href="https://btcmagwpstage.wpengine.com/articles/breadwallet-ceo-aaron-voisine-segwit-soft-fork-first-then-block-size-hard-fork-1453914051">number</a>
<a href="https://btcmagwpstage.wpengine.com/articles/mycelium-s-leo-wandersleb-segregated-witness-a-technical-necessity-1454089393">of</a>
<a href="https://btcmagwpstage.wpengine.com/articles/electrum-developer-thomas-voegtlin-soft-fork-preferable-for-political-reasons-1454349544">wallet</a>
<a href="https://btcmagwpstage.wpengine.com/articles/core-developer-jonas-schnelli-segregated-witness-improves-and-optimizes-bitcoin-protocol-1454517960">and</a>
<a href="https://btcmagwpstage.wpengine.com/articles/bitcoinj-maintainer-andreas-schildbach-segregated-witness-worth-the-effort-1454614732">library</a>
<a href="https://btcmagwpstage.wpengine.com/articles/nbitcoin-s-nicolas-dorier-segregated-witness-fastest-way-to-bump-block-size-1454695788">developers</a>,
think they can utilize the feature
<a href="https://btcmagwpstage.wpengine.com/articles/bitcoin-wallet-developers-prepare-for-segregated-witness-1477937548">within</a>
<a href="https://btcmagwpstage.wpengine.com/articles/bitcoins-capacity-increase-segregated-witness-could-kick-fast">weeks</a>,
or they are <a href="https://bitcoincore.org/en/segwit_adoption/">prepared
already</a>. And other technologies that depend on the upgrade, such as
<a href="https://btcmagwpstage.wpengine.com/articles/after-scaling-bitcoin-a-lightning-winter-release-is-now-within-reach-1476814566">the
Lightning Network</a>, but also Merkelized Abstract Syntax Trees
(<a href="https://btcmagwpstage.wpengine.com/articles/the-next-step-to-improve-bitcoin-s-flexibility-scalability-and-privacy-is-called-mast-1476388597">MAST</a>),
<a href="https://btcmagwpstage.wpengine.com/articles/atomic-swaps-how-the-lightning-network-extends-to-altcoins-1484157052">atomic
swaps</a>,
<a href="https://btcmagwpstage.wpengine.com/articles/how-segregated-witness-is-about-to-fix-hardware-wallets-1478110057">faster
transaction signing</a> for hardware wallets, the more efficient
<a href="https://btcmagwpstage.wpengine.com/articles/the-power-of-schnorr-the-signature-algorithm-to-increase-bitcoin-s-scale-and-privacy-1460642496">Schnorr
signature algorithm</a>, and
<a href="https://btcmagwpstage.wpengine.com/articles/with-tumblebit-bitcoin-mixing-may-have-found-its-winning-answer-1477423607">TumbleBit</a>
in payment processor mode, are in various stages of development as well.</p>
</div>
<div class="paragraph">
<p>It’s been a long road, but anyone who wants to use Segregated Witness
should now be able to do so, starting today.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_shaolinfry_moving_towards_user_activated_soft_fork_activation"><a class="anchor" href="#_shaolinfry_moving_towards_user_activated_soft_fork_activation"></a>5.4. Shaolinfry - Moving towards user activated soft fork activation</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-February/013643.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-February/013643.html</a></p>
</li>
<li>
<p>Author: Shaolinfry</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Some thoughts about the activation mechanism for soft forks. In the past we used IsSuperMajority and currently use BIP9 as soft fork activation methods, where a supermajority of hashrate triggers nodes to begin enforcing new rules. Hashrate based activation is convenient because it is the simplest and most straightforward process. While convenient there are a number limitations with this method.</p>
</div>
<div class="paragraph">
<p>Firstly, it requires trusting the hash power will validate after activation. The BIP66 soft fork was a case where 95% of the hashrate was signaling readiness but in reality about half was not actually validating the upgraded rules and mined upon an invalid block by mistake[1].</p>
</div>
<div class="paragraph">
<p>Secondly, miner signalling has a natural veto which allows a small percentage of hashrate to veto node activation of the upgrade for everyone. To date, soft forks have taken advantage of the relatively centralised mining landscape where there are relatively few mining pools building valid blocks; as we move towards more hashrate decentralization, it&#8217;s likely that we will suffer more and more from "upgrade inertia" which will veto most upgrades.</p>
</div>
<div class="paragraph">
<p>Upgrade inertia in inevitable for widely deployed software and can be seen for example, with Microsoft Windows. At the time of writing 5.72% of all Microsoft Windows installations are still running Windows XP, despite mainstream support ending in 2009 and being superseded by 4 software generations, Vista, 7, 8 and 10.</p>
</div>
<div class="paragraph">
<p>Thirdly, the signaling methodology is widely misinterpreted to mean the hash power is voting on a proposal and it seems difficult to correct this misunderstanding in the wider community. The hash powers' role is to select valid transactions, and to extend the blockchain with valid blocks. Fully validating economic nodes ensure that blocks are valid. Nodes therefore define validity according to the software they run, but miners decide what already valid transactions gets included in the block chain.</p>
</div>
<div class="paragraph">
<p>As such, soft forks rules are actually always enforced by the nodes, not the miners. Miners of course can opt-out by simply not including transactions that use the new soft fork feature, but they cannot produce blocks that are invalid to the soft fork. The P2SH soft fork is a good example of this, where non-upgraded miners would see P2SH as spendable without a signature and consider them valid. If such an transaction were to be included in a block, the block would be invalid and the miner would lose the block reward and fees.</p>
</div>
<div class="paragraph">
<p>So-called "censorship" soft forks do not require nodes to opt in, because &gt;51% of the hash power already have the ability to orphan blocks that contain transactions they have blacklisted. Since this is not a change in validity, nodes will accept the censored block chain automatically.</p>
</div>
<div class="paragraph">
<p>The fourth problem with supermajority hash power signaling is it draws unnecessary attention to miners which can become unnecessarily political. Already misunderstood as a vote, miners may feel pressure to "make a decision" on behalf of the community: who is and isn&#8217;t signalling becomes a huge public focus and may put pressures onto miners they are unprepared for. Some miners may not be in a position to upgrade, or may prefer not to participate in the soft fork which is their right. However, that miner may now become a lone reason that vetoes activation for everyone, where the soft fork is an opt-in feature! This situation seems to be against the voluntary nature of the Bitcoin system where participation at all levels is voluntary and kept honest by well balanced incentives.</p>
</div>
<div class="paragraph">
<p>Since miners already have the protocol level right to select whatever transaction they prefer (and not mine those they don&#8217;t), it would be better if a miner could chose to not participate in triggering activation of something they won&#8217;t use, but, without being a veto to the process (and all the ire they may have to experience as a consequence).</p>
</div>
<div class="paragraph">
<p>The alternative discussed here is "flag day activation" where nodes begin enforcement at a predetermined time in the future. This method needs a longer lead time than a hash power based activation trigger, but offers a number of advantages and perhaps provides a better tradeoff.</p>
</div>
<div class="paragraph">
<p>Soft forks are still entirely optional to use post activation. For example, with P2SH, many participants in the Bitcoin ecosystem still do not use P2SH. Only 11% of bitcoins[2] are stored in P2SH addresses at the time of writing. Miners are free to not mine P2SH transactions, however, the incentives are such that miners should still validate transactions so they don&#8217;t accidentally include invalid transactions and cause their block to be rejected. As an additional safety measure for well designed soft forks, relay policy rules prevent non-standard and invalid transactions from being relayed and mined by default; a miner would have to purposefully mine an invalid transaction, which is against their own economic interest.</p>
</div>
<div class="paragraph">
<p>Since the incentives of the Bitcoin system rely on self validation, economic nodes (miners and users) should always remain safe by ensuring their nodes either validate the current rules, or, they can place their network behind a full node that will filter out invalid transactions and blocks at the edge of their network (so called firewall or border nodes).</p>
</div>
<div class="paragraph">
<p>A user activated soft fork is permissive. Miners do not have to produce new version blocks and non-upgraded miners' blocks will not be orphaned as was the case with IsSuperMajority soft forks (e.g. BIP34, BIP66, BIP65-CLTV) which made it a compulsory upgrade for miners.</p>
</div>
<div class="paragraph">
<p>BIP9 "versionbits" soft fork activation method is also permissive in so far as non-upgraded miners are not forced to upgrade after activation because their blocks wont be orphaned. A recent case was the "CSV" soft fork that activated BIP68, BIP112 and BIP113. As such, the CSV soft fork allows non-upgraded miners to continue mining so long as they didn&#8217;t produce invalid blocks.</p>
</div>
<div class="paragraph">
<p>Miners always retain discretion on which transactions to mine. However, regardless of whether they actively include transactions using the new soft fork feature, or not, the incentive for hash power to upgrade in order to validate is strong: if they do not, they could be vulnerable to a rogue miner willing to waste 12.5BTC to create an invalid block, which may cause non-validating miners to build on an invalid chain similar to the BIP66 incident. Validation has always had a strong requirement.</p>
</div>
<div class="paragraph">
<p>A user activated soft fork is win-win because it adds an option that some people want that does not detract from other peoples' enjoyment. Even if only 10% of users ever wanted a feature, so long as the benefit outweighed the technical risks, it would not be rational to deny others the ability to opt-in.</p>
</div>
<div class="paragraph">
<p>My suggestion is to have the best of both worlds. Since a user activated soft fork needs a relatively long lead time before activation, we can combine with BIP9 to give the option of a faster hash power coordinated activation or activation by flag day, whichever is the sooner. In both cases, we can leverage the warning systems in BIP9. The change is relatively simple, adding an activation-time parameter which will transition the BIP9 state to LOCKED_IN before the end of the BIP9 deployment timeout.</p>
</div>
<div class="paragraph">
<p>You can find the proposal here <a href="https://gist.github.com/shaolinfry/0f7d1fd22743bb966da0c0b1682ea2ab" class="bare">https://gist.github.com/shaolinfry/0f7d1fd22743bb966da0c0b1682ea2ab</a></p>
</div>
<div class="paragraph">
<p>References:</p>
</div>
<div class="paragraph">
<p>[1]: <a href="https://bitcoin.org/en/alert/2015-07-04-spv-mining" class="bare">https://bitcoin.org/en/alert/2015-07-04-spv-mining</a><br>
[2]: <a href="http://p2sh.info/dashboard/db/p2sh-statistics?from=1472043312917&amp;to=1488030912918" class="bare">http://p2sh.info/dashboard/db/p2sh-statistics?from=1472043312917&amp;to=1488030912918</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_matt_corallo_modern_soft_fork_activation"><a class="anchor" href="#_matt_corallo_modern_soft_fork_activation"></a>5.5. Matt Corallo - Modern Soft Fork Activation</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-January/017547.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-January/017547.html</a></p>
</li>
<li>
<p>Author: Matt Corallo</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>There are a series of soft-fork designs which have recently been making
good progress towards implementation and future adoption. However, for
various reasons, activation methods therefor have gotten limited
discussion. I&#8217;d like to reopen that discussion here.</p>
</div>
<div class="paragraph">
<p>It is likely worth revisiting the goals both for soft forks and their
activation methods to start. I&#8217;m probably missing some, but some basic
requirements:</p>
</div>
<div class="paragraph">
<p>1) Avoid activating in the face of significant, reasonable, and directed
objection. Period. If someone has a well-accepted, reasonable use of
Bitcoin that is working today, have no reason to believe wouldn&#8217;t work
long into the future without a change, and which would be made
impossible or significantly more difficult by a change, that change must
not happen. I certainly hope there is no objection on this point (see
the last point for an important caveat that I&#8217;m sure everyone will jump
to point out).</p>
</div>
<div class="paragraph">
<p>2) Avoid activating within a timeframe which does not make high
node-level-adoption likely. As with all "node" arguments, I&#8217;ll note that
I mean "economically-used" nodes, not the thousand or so spy nodes on
Google Cloud and AWS. Rule changes don&#8217;t make sense without nodes
enforcing them, whether they happen to be a soft fork, hard fork, or a
blue fork, so activating in a reduced timeframe that doesn&#8217;t allow for
large-scale node adoption doesn&#8217;t have any value, and may cause other
unintended side effects.</p>
</div>
<div class="paragraph">
<p>3) Don&#8217;t (needlessly) lose hashpower to un-upgraded miners. As a part of
Bitcoin&#8217;s security comes from miners, reducing the hashpower of the
network as a side effect of a rule change is a needless reduction in a
key security parameter of the network. This is why, in recent history,
soft forks required 95% of hashpower to indicate that they have upgraded
and are capable of enforcing the new rules. Further, this is why recent
soft forks have not included changes which would result in a standard
Bitcoin Core instance mining invalid-by-new-rules changes (by relying on
the standardness behavior of Bitcoin Core).</p>
</div>
<div class="paragraph">
<p>4) Use hashpower enforcement to de-risk the upgrade process, wherever
possible. As a corollary of the above, one of the primary reasons we use
soft forks is that hashpower-based enforcement of rules is an elegant
way to prevent network splits during the node upgrade process. While it
does not make sense to invest material value in systems protected by new
rules until a significant majority of "economic nodes" is enforcing said
rules, hashpower lets us neatly bridge the gap in time between
activation and then. By having a supermajority of miners enforce the new
rules, attempts at violating the new rules does not result in a
significant network split, disrupting existing users of the system. If
we aren&#8217;t going to take advantage of this, we should do a hard fork
instead, with the necessarily slow timescale that entails.</p>
</div>
<div class="paragraph">
<p>5) Follow the will of the community, irrespective of individuals or
unreasoned objection, but without ever overruling any reasonable
objection. Recent history also includes "objection" to soft forks in the
form of "this is bad because it doesn&#8217;t fix a different problem I want
fixed ASAP". I don&#8217;t think anyone would argue this qualifies as a
reasonable objection to a change, and we should be in a place, as a
community (never as developers or purely one group), to ignore such
objections and make forward progress in spite of them. We don&#8217;t make
good engineering decisions by "bundling" unrelated features together to
enable political football and compromise.</p>
</div>
<div class="paragraph">
<p>I think BIP 9 (plus a well-crafted softfork) pretty effectively checks
the boxes for #2-4 here, and when done carefully with lots of community
engagement and measurement, can effectively fulfill #1 as well. #5 is,
as I&#8217;m sure everyone is aware, where it starts to fall down pretty hard.</p>
</div>
<div class="paragraph">
<p>BIP 8 has been proposed as an alternative, largely in response to issues
with #5. However, a naive deployment of it, rather obviously, completely
fails #1, #3, and #4, and, in my view, fails #5 as well by both giving
an impression of, setting a precedent of, and possibly even in practice
increasing the ability of developers to decide the consensus rules of
the system. A BIP 8 deployment that more accurately measures community
support as a prerequisite could arguably fulfill #1 and #5, though I&#8217;m
unaware of any concrete proposals on how to accomplish that. Arguably, a
significantly longer activation window could also allow BIP 8 to fulfill
#3 and #4, but only by exploiting the "needlessly" and "wherever
possible" loopholes.</p>
</div>
<div class="paragraph">
<p>You may note that, from the point of view of achieving the critical
goals here, BIP 8 is only different from a flag-day activation in that,
if it takes the "happy-path" of activating before the flag day, it looks
like BIP 9, but isn&#8217;t guaranteed to. It additionally has the
"nice-to-have" property that activation can occur before the flag-day in
the case of faster miner adoption, though there is a limit of how fast
is useful due to node adoption.</p>
</div>
<div class="paragraph">
<p>Thus, to strike a balance between the drawbacks of BIP 8 and BIP 9, the
Great Consensus Cleanup softfork proposal included this text in the
discussion section (with the spec describing a BIP 9 deployment):</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In spite of some suggestion that other activation methods be used, BIP
9 is proposed as ensuring miners have upgraded to enforce new rules is
an important part of minimizing disruption. While previous BIP 9 soft-
forks have resulted in political contention, this comparatively-
unimportant soft-fork provides a good opportunity to attempt to return
to utilizing BIP 9 to ensure miner upgrade prior to activation, which
the authors believe is a critical goal. However, if there is broad
agreement to activate these rules when the BIP 9 expiry time is
reached, and miners have not yet signaled sufficient level of
readiness, a later flag-day activation may be merited. For this
reason, implementations may wish to provide a compatibility option
which allows flag-day enforcement of these rules without an update.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Ultimately, through admittedly rather limited discussion, I still like
this model (though I cannot claim it as my own, the original proposal
came from Greg Maxwell). BIP 9 only falls apart in case of unreasonable
objection, which, naturally, should carry a high bar to ignore, given we
have to have some level of agreement that it is, in fact, unreasonable
(or untargeted). While I admit this is a possibility, I both find it
less likely than in previous soft-forks, and even if it is the case, it
only slows down the process, it doesn&#8217;t necessarily stop it. In the case
that it does fail, BIP 9 process, in fact, provides a good learning
opportunity as to the level of community readiness and desire for a
given change. While we can (and should, and are) learning a lot about
community readiness for, and acceptability of a change through outreach
and discussion, there is something about a change with a timeframe that
forces people to more carefully consider it.</p>
</div>
<div class="paragraph">
<p>Thus, as something a bit more concrete, I think an activation method
which sets the right precedent and appropriately considers the above
goals, would be:</p>
</div>
<div class="paragraph">
<p>1) a standard BIP 9 deployment with a one-year time horizon for
activation with 95% miner readiness,<br>
2) in the case that no activation occurs within a year, a six month
quieting period during which the community can analyze and discussion
the reasons for no activation and,<br>
3) in the case that it makes sense, a simple command-line/bitcoin.conf
parameter which was supported since the original deployment release
would enable users to opt into a BIP 8 deployment with a 24-month
time-horizon for flag-day activation (as well as a new Bitcoin Core
release enabling the flag universally).</p>
</div>
<div class="paragraph">
<p>This provides a very long time horizon for more standard activation,
while still ensuring the goals in #5 are met, even if, in those cases,
the time horizon needs to be significantly extended to meet the goals of
#3. Developing Bitcoin is not a race. If we have to, waiting 42 months
ensures we&#8217;re not setting a negative precedent that we&#8217;ll come to regret
as Bitcoin continues to grow.</p>
</div>
<div class="paragraph">
<p>Matt</p>
</div>
<div class="paragraph">
<p>Thanks also to AJ for feedback on an earlier version of this rant.</p>
</div>
</div>
<div class="sect2">
<h3 id="_david_harding_taproot_activation_proposals"><a class="anchor" href="#_david_harding_taproot_activation_proposals"></a>5.6. David Harding - Taproot activation proposals</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://en.bitcoin.it/wiki/Taproot_activation_proposals" class="bare">https://en.bitcoin.it/wiki/Taproot_activation_proposals</a></p>
</li>
<li>
<p>Author: David Harding</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>From Bitcoin Wiki</p>
</div>
<div class="paragraph">
<p>This page summarizes several technical proposals for activating the
taproot soft fork defined by BIPs 340, 341, and 342. The goal is to
succinctly reference the tradeoffs inherent in each class of proposals
so that the development community can choose and implement an activation
method that users will find acceptable.</p>
</div>
<div class="paragraph">
<p>Note that a common theme in many of the proposals is dealing with the
case where an insufficient percentage of hashrate signals readiness to
enforce taproot. This is a reaction to the difficulty activating segwit.
However, there is currently no indication that there will be difficulty
activating taproot---miners may offer it the same support that they
offered other non-controversial soft forks such as BIP34 height in
coinbase, BIP66 strict DER, BIP65 <code>OP_CHECKLOCKTIMEVERIFY</code>, and BIPs
68/112/113 relative locktimes.</p>
</div>
<div class="sect3">
<h4 id="_notes_on_bip8"><a class="anchor" href="#_notes_on_bip8"></a><span id="Notes_on_BIP8 " class="mw-headline">Notes on BIP8</span></h4>
<div class="paragraph">
<p>At the time this document is being written,
<a href="https://github.com/bitcoin/bips/blob/master/bip-0008.mediawiki">BIP8</a> has
been drafted based on lessons learned in 2017. One notable change
following BIPs 9+148 is that forced activation is now based on block
height rather than median time past; a second notable change is that
forced activation is a boolean parameter chosen when a soft fork’s
activation parameters are set either for the initial deployment or
updated in a later deployment.</p>
</div>
<div class="paragraph">
<p>BIP8 without forced activation is very similar to
<a href="https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki">BIP9</a>
<em>version bits with timeout and delay</em>, with the only significant
difference being BIP8’s use of block heights compared to BIP9’s use of
median time past. This setting allows the attempt to fail (but it can be
retried later).</p>
</div>
<div class="paragraph">
<p>BIP8 with forced activation concludes with a mandatory signaling period
where all blocks produced in compliance with its rules must signal
readiness for the soft fork in a way that will trigger activation in an
earlier deployment of the same soft fork with non-mandatory activation.
In other words, if node version x is released without forced activation
and, later, version y is released that successfully forces miners to
begin signaling readiness within the same time period, both versions
will begin enforcing the new consensus rules at the same time.</p>
</div>
<div class="paragraph">
<p>This flexibility of the revised BIP8 proposal makes it possible to
express some other ideas in terms of what they would look like using
BIP8. This provides a common factor to use for categorizing many
different proposals.</p>
</div>
</div>
<div class="sect3">
<h4 id="_prior_to_2021"><a class="anchor" href="#_prior_to_2021"></a><span id="Prior_to_2021 " class="mw-headline">Prior to 2021</span></h4>
<div class="sect4">
<h5 id="_proposal_overview"><a class="anchor" href="#_proposal_overview"></a><span id="Proposal_overview " class="mw-headline">Proposal overview</span></h5>
<div class="paragraph">
<p>Nomenclature: <code>BIP8(lockinontimeout, timeout)</code>. The
<code>lockinontimeout</code> parameter is a bool specifying whether the attempt
will conclude with a flag day activation (true) or a failure to activate
(false). The <code>timeout</code> parameter specifies how many months (m) or
years (y) until either the attempt fails or in mandatory activated.
Columns with empty stages appear when no action is specified in advance
(but any action with broad user support is still possible).</p>
</div>
<div class="paragraph">
<p>Precise time parameters are still under discussion, with some people
advocating moderately longer durations and some advocating moderately
shorter durations. The entries below are examples meant to reflect the
general idea behind a class of proposals.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Short name</th>
<th class="tableblock halign-left valign-top">Variation</th>
<th class="tableblock halign-left valign-top">First stage</th>
<th class="tableblock halign-left valign-top">Second stage</th>
<th class="tableblock halign-left valign-top">Third stage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Let’s see what happens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(false, 3m)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP9 equivalent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(false, 1y)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modern Soft Fork Activation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(false, 1y)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>No action,
6m</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(true, 2y)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issue discovered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(false, 1y)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Abandon attempt</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decreasing Threshold Soft Fork Activation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(false, 1y)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>No action, 6m</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(true, 2.5y), decreasing threshold</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issue discovered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(false, 1y)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Abandon attempt</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start now, improve later</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No additional action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(false, 2y)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commit to activation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong class="line-through">BIP8(false, 2y)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(true, 2y)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commit to accelerated activation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong class="line-through">BIP8(false, 2y)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(true, 1y)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gently discourage apathy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(true, 2y)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accelerate activation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong class="line-through">BIP8(true, 2y)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP8(true, 1y)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The same proposals as above graphed over time:</p>
</div>
<div class="paragraph">
<div class="title">Activation timeline</div>
<p><span class="image"><img src="images/Activation-timeline.png" alt="image" width="1394" height="311"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_proposals"><a class="anchor" href="#_proposals"></a><span id="Proposals " class="mw-headline">Proposals</span></h5>
<div class="sect5">
<h6 id="_lets_see_what_happens_bip8false_3m"><a class="anchor" href="#_lets_see_what_happens_bip8false_3m"></a><span id="Let" class="E2 80 99s_see_what_happens 2C_BIP8 28false 2C_3m 29  mw-headline">Let’s see what happens, BIP8(false, 3m)</span></h6>
<div class="paragraph">
<p>Proposed as a low-risk way to see if miners are willing to activate
taproot as quickly as they activated BIP65 CLTV (two months) and BIP68
consensus-enforced sequence numbers (one month).</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Non-committal:</strong> if a problem is discovered with taproot before miner
activation, or there’s a lack of user support for the proposal, the
attempt can safely fail without further intervention.</p>
</li>
<li>
<p><strong>Short duration:</strong> if it fails unnecessarily, we’ll only have lost
three months plus deployment time.</p>
</li>
<li>
<p><strong>Useful data:</strong> if it works, it will add evidence to the theory that
segwit activation was an aberration and users, developers, and miners
can continue working together to upgrade the consensus protocol with
minimal fuss.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Unnecessary failure risk (3 months):</strong> if it fails for no good reason,
we’ll have wasted three months, plus its deployment time, plus the time
to choose and deploy another activation method.</p>
</li>
<li>
<p><strong>Single-shot:</strong> if it fails, anyone who ran the 3-month release must
upgrade in order to enforce any subsequent attempts. Compare to the
<em>start now, improve later</em> proposal where early releases can be
triggered to activate by later releases.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_bip9_equivalent_bip8false_1y"><a class="anchor" href="#_bip9_equivalent_bip8false_1y"></a><span id="BIP9_equivalent" class="2C_BIP8 28false 2C_1y 29  mw-headline">BIP9 equivalent, BIP8(false, 1y)</span></h6>
<div class="paragraph">
<p>Some people think that the lack of miner readiness signaling during the
first several months of segwit availability was an aberration specific
to the political context of the block size debate, segwit’s interference
with covert ASICBoost, or some other factor. These people may wish to
try BIP9 again. BIP8(false, 1y) is essentially BIP9 but using block
heights rather than median time past to guarantee a specified number of
signaling periods.</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Non-committal:</strong> if a problem is discovered with taproot before miner
activation, or there’s a lack of user support for the proposal, the
attempt can safely fail without further intervention.</p>
</li>
<li>
<p><strong>Useful data:</strong> if it works, it will add evidence to the theory that
segwit activation was an aberration and users, developers, and miners
can continue working together to upgrade the consensus protocol with
minimal fuss.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Unnecessary failure risk (1 year):</strong> if it fails for no good reason,
we’ll have wasted an entire year, plus its deployment time, plus the
time to choose and deploy another activation method.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_modern_soft_fork_activation_bip8false_1yquiet6mbip8true_2y"><a class="anchor" href="#_modern_soft_fork_activation_bip8false_1yquiet6mbip8true_2y"></a><span id="Modern_Soft_Fork_Activation" class="2C_BIP8 28false 2C_1y 29 2Bquiet 286m 29 2BBIP8 28true 2C_2y 29  mw-headline">Modern Soft Fork Activation, BIP8(false, 1y)+quiet(6m)+BIP8(true, 2y)</span></h6>
<div class="paragraph">
<p>Proposed in a
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-January/017547.html">mailing
list post</a>, the goals of this idea are to ensure users truly want a soft
fork and that it’s activated in a way that minimizes the risk of
disruption.</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Non-committal (initial deployment):</strong> if a problem is discovered with
taproot during the first two stages, or there’s a lack of user support
for the proposal, the attempt can safely fail without further
intervention.</p>
</li>
<li>
<p><strong>Useful data:</strong> if it activates quickly, it will add evidence to the
theory that segwit activation was an aberration and users, developers,
and miners can continue working together to upgrade the consensus
protocol with minimal fuss.</p>
</li>
<li>
<p><strong>Far-off flag day:</strong> if mandatory activation is needed, there’s a long
time (2 years) for users to upgrade to mandatory enforcement nodes. This
minimizes the chance that only a small number of users will enact
mandatory enforcement and then be tricked into accepting bitcoins that
most other users won’t consider valid.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Committal (subsequent deployment):</strong> if a problem is discovered with
taproot during the final stage, users and developers may need to
intervene to prevent the problem from being exploited.</p>
</li>
<li>
<p><strong>Unnecessary delay:</strong> without miner cooperation, it will take almost
three years to get the taproot features, which may delay other useful
Bitcoin work or cause developers to spend time implementing unnecessary
intermediate solutions (e.g. 2pECDSA rather than MuSig).</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_decreasing_threshold_soft_fork_activation_bip8false_6mnoaction1ybip8true_2_5y"><a class="anchor" href="#_decreasing_threshold_soft_fork_activation_bip8false_6mnoaction1ybip8true_2_5y"></a><span id="Decreasing_Threshold_Soft-Fork_Activation" class="2C_BIP8 28false 2C_6m 29 2BNoAction 281y 29 2BBIP8 28true 2C_2 5y 29  mw-headline">Decreasing Threshold Soft-Fork Activation, BIP8(false, 6m)+NoAction(1y)+BIP8(true, 2.5y)</span></h6>
<div class="paragraph">
<p>A [slight variation][bip-dectresh] on the Modern Soft Fork Activation
method, the final period in this proposal steadily decreases the
percentage of hashrate that needs to signal readiness for the soft fork
before it activates. For example, normally 95% of blocks in a difficulty
period need to signal for a BIP8 soft fork in order to activate it;
however, near the end of the final signaling period, it might only
require 60% of hash rate to signal readiness. This lower threshold is
reasonable because it’s expected that most users will be ready to
enforce the proposal at that time. Even if miners still aren’t signaling
in sufficient numbers, the proposal can mandatory activate at the end of
its final stage.</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Non-committal (initial deployment):</strong> if a problem is discovered with
taproot during the first two stages, the attempt can safely fail without
further intervention.</p>
</li>
<li>
<p><strong>Useful data:</strong> if it activates quickly, it will add evidence to the
theory that segwit activation was an aberration and users, developers,
and miners can continue working together to upgrade the consensus
protocol with minimal fuss.</p>
</li>
<li>
<p><strong>Far-off flag day:</strong> if mandatory activation is needed, there’s a long
time (months or years) for users to upgrade to nodes that accept reduced
threshold signaling or mandatory activation. This minimizes the chance
that only a small number of users will enact mandatory enforcement and
then be tricked into accepting bitcoins that most other users won’t
consider valid.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Committal (subsequent deployment):</strong> if a problem is discovered with
taproot during the final stage, users and developers may need to
intervene to prevent the problem from being exploited.</p>
</li>
<li>
<p><strong>Unnecessary delay:</strong> without miner cooperation, it will take almost
four years to get the taproot features, which may delay other useful
Bitcoin work or cause developers to spend time implementing unnecessary
intermediate solutions (e.g. 2pECDSA rather than MuSig).</p>
</li>
<li>
<p><strong>No reference implementation:</strong> no implementation of this proposal yet
exists, although it is not believed that creating one would be
particularly difficult.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_start_now_improve_later_bip8false_2y"><a class="anchor" href="#_start_now_improve_later_bip8false_2y"></a><span id="Start_now" class="2C_improve_later 2C_BIP8 28false 2C_2y 29  mw-headline">Start now, improve later, BIP8(false, 2y)</span></h6>
<div class="paragraph">
<p>Proposed as an option that maximizes flexibility, this allows miners to
signal readiness to enforce taproot quickly but also makes it easy for
users to force taproot activation later. For example, after several
months of miners not activating taproot for no good reason, an updated
node could be published that used the same BIP8 parameters except
<code>lockinontimeout=true</code>, requiring activation at the end of the two
years. Or <code>true</code> could be set and the timeout deadline could be
shortened, allowing activation within 6 or 12 more months.</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Non-committal:</strong> if a problem is discovered with taproot before miner
activation, or there’s a lack of user support for the proposal, the
attempt can safely fail without further intervention.</p>
</li>
<li>
<p><strong>Useful data:</strong> if it activates quickly, it will add evidence to the
theory that segwit activation was an aberration and users, developers,
and miners can continue working together to upgrade the consensus
protocol with minimal fuss.</p>
</li>
<li>
<p><strong>Enough time for second deployment:</strong> the two year duration probably
gives users and developers enough time to deploy an alternative that
sets <code>lockintimeout=true</code>, allowing all nodes compatible with either
deployment to activate simultaneously.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Unnecessary failure risk (2 years):</strong> if it fails for no good reason,
we’ll have wasted two years, plus its deployment time, plus the time to
choose and deploy another activation method.</p>
</li>
<li>
<p><strong>Chaos risk:</strong> if some users later decide to <code>lockinontimeout=true</code>
with a date before the original two-year end, they all need to choose
the same date or users choosing a date with insufficient support could
be tricked into accepting non-spendable bitcoins. It may be possible to
mitigate this by building support for an acceleration target date even
before the initial <code>lockinontimeout=false</code> version is released.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_gently_discourage_apathy_bip8true_2y"><a class="anchor" href="#_gently_discourage_apathy_bip8true_2y"></a><span id="Gently_discourage_apathy" class="2C_BIP8 28true 2C_2y 29  mw-headline">Gently discourage apathy, BIP8(true, 2y)</span></h6>
<div class="paragraph">
<p>Proposed as a way to ensure miners eventually need to signal, so they
don’t defer doing so out of apathy, this method requires activation
after a long delay.</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Useful data:</strong> if it activates quickly, it will add evidence to the
theory that segwit activation was an aberration and users, developers,
and miners can continue working together to upgrade the consensus
protocol with minimal fuss.</p>
</li>
<li>
<p><strong>Far-off flag day:</strong> if mandatory activation is needed, there’s a long
time (months or years) for users to upgrade to nodes that accept reduced
threshold signaling or mandatory activation. This minimizes the chance
that only a small number of users will enact mandatory enforcement and
then be tricked into accepting bitcoins that most other users won’t
consider valid.</p>
</li>
<li>
<p><strong>Enough time for second deployment:</strong> the two year duration may gives
users and developers enough time to deploy additional soft fork rules
that fix any problems in the initial proposal.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Committal:</strong> if a problem is discovered with taproot before
activation, users and developers may need to intervene to prevent the
problem from being exploited.</p>
</li>
<li>
<p><strong>Unnecessary delay:</strong> without miner cooperation, it will take two years
to get the taproot features, which may delay other useful Bitcoin work
or cause developers to spend time implementing unnecessary intermediate
solutions (e.g. 2pECDSA rather than MuSig).</p>
</li>
<li>
<p><strong>Chaos risk:</strong> if some users later decide to <code>lockinontimeout=true</code>
with a date before the original two-year end, they all need to choose
the same date or users choosing a date with insufficient support could
be tricked into accepting non-spendable bitcoins. It may be possible to
mitigate this by building support for an acceleration target date even
before the initial version is released.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Retrieved from
"https://en.bitcoin.it/w/index.php?title=Taproot_activation_proposals&amp;oldid=68535"</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_david_harding_taproot_activation_proposal_speedy_trial"><a class="anchor" href="#_david_harding_taproot_activation_proposal_speedy_trial"></a>5.7. David Harding - Taproot activation proposal "Speedy Trial"</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-March/018583.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-March/018583.html</a></p>
</li>
<li>
<p>Author: David Harding</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>On the ##taproot-activation IRC channel, Russell O'Connor recently
proposed a modification of the "Let's see what happens" activation
proposal.[1] The idea received significant discussion and seemed
acceptable to several people who could not previously agree on a
proposal (although this doesn't necessarily make it their first
choice).  The following is my attempt at a description.

1. Start soon: shortly after the release of software containing this
   proposed activation logic, nodes will begin counting blocks towards
   the 90% threshold required to lock in taproot.[2]

2. Stop soon: if the lockin threshold isn't reached within approximately
   three months, the activation attempt fails.  There is no mandatory
   activation and everyone is encouraged to try again using different
   activation parameters.

2. Delayed activation: in the happy occasion where the lockin threshold
   is reached, taproot is guaranteed to eventually activate---but not
   until approximately six months after signal tracking started.

## Example timeline

(All dates approximate; see the section below about BIP9 vs BIP8.)

- T+0: release of one or more full nodes with activation code
- T+14: signal tracking begins
- T+28: earliest possible lock in
- T+104: locked in by this date or need to try a different activation process
- T+194: activation (if lockin occurred)

## Analysis

The goal of Speedy Trial is to allow a taproot activation attempt to
either quickly succeed or quickly fail---without compromising safety in
either case.  Details below:

### Mitigating the problems of early success

New rules added in a soft fork need to be enforced by a large part of
the economy or there's a risk that a long chain of blocks breaking the
rules will be accepted by some users and rejected by others, causing a
chain split that can result in large direct losses to transaction
receivers and potentially even larger indirect losses to holders due to
reduced confidence in the safety of the Bitcoin system.

One step developers have taken in the past to ensure widespread adoption
of new consensus rules is programming in a delay between the time software
with those rules is expected to be released and when the software starts
tracking which blocks signal for activation.  For example:

    Soft fork        | Release    | Start      | Delta
    -----------------+------------+------------+----------
    BIP68 (v0.12.1)  | 2016-04-15 | 2016-05-11 | 26 days
    BIP141 (v0.13.1) | 2016-10-27 | 2016-11-18 | 24 days

    Sources: BitcoinCore.org, https://gist.github.com/ajtowns/1c5e3b8bdead01124c04c45f01c817bc

Speedy Trial replaces most of that upfront delay with a backend delay.
No matter how fast taproot's activation threshold is reached by miners,
there will be six months between the time signal tracking starts and when
nodes will begin enforcing taproot's rules.  This gives the userbase even
more time to upgrade than if we had used the most recently proposed start
date for a BIP8 activation (~July 23rd).[2]

### Succeed, or fail fast

The earlier version of this proposal was documented over 200 days ago[3]
and taproot's underlying code was merged into Bitcoin Core over 140 days
ago.[4]  If we had started Speedy Trial at the time taproot
was merged (which is a bit unrealistic), we would've either be less than
two months away from having taproot or we would have moved on to the
next activation attempt over a month ago.

Instead, we've debated at length and don't appear to be any closer to
what I think is a widely acceptable solution than when the mailing list
began discussing post-segwit activation schemes over a year ago.[5]  I
think Speedy Trial is a way to generate fast progress that will either
end the debate (for now, if activation is successful) or give us some
actual data upon which to base future taproot activation proposals.

Of course, for those who enjoy the debate, discussion can continue while
waiting for the results of Speedy Trial.

### Base activation protocol

The idea can be implemented on top of either Bitcoin Core's existing
BIP9 code or its proposed BIP8 patchset.[6]

- BIP9 uses two time-based[7] parameters, starttime and timeout.  Using
  these values plus a time-based parameter for the minimum activation
  delay would give three months for miners to activate taproot, but some
  of that time near the start or the end might not be usable due to
  signals only being measured in full retarget periods.  However, the
  six month time for users to upgrade their node would be not be
  affected by either slow or fast block production.

    BIP9 is already part of Bitcoin Core and I think the changes being
    proposed would be relatively small, resulting in a small patch that
    could be easy to review.

- BIP8 uses two height-based parameters, startheight and timeoutheight.
  Using height values would ensure miners had a certain number of
  retarget periods (6) to lock in taproot and that there'd be a certain
  number of blocks (about 24,000) until activation, although latest lock
  in and expected activation could occur moderately earlier or later
  than the estimated three and six months.

    BIP8 would likely be used if Speedy Trial fails, so it could be
    advantageous to base this proposal on BIP8 so that we gain
    experience running that code in production.

For additional discussion about using times versus heights, see today's
log for ##taproot-activation.[11]

### Additional concerns

- Encourages false signaling: false signaling is when miners signal
  readiness to enforce rules that their nodes don't actually support.
  This was partially responsible for a six-block reorg shortly after the
  final BIP66 activation[8] and was found to still be a problem during
  the BIP68 lockin period despite BIP9 being designed to avoid it.[9]

  Because Speedy Trial only gives miners a maximum of three months to
  signal support for taproot, it may encourage such false signaling.  If
  taproot locks in as a result of their signaling but most of them fail
  to upgrade by the activation date several months later, unprepared
  miners could lose large amounts of money and users could see long
  reorgs (with unupgraded nodes and SPV lite clients potentially losing
  money).

  Compared to other activation proposals, I think the only difference is
  Speedy Trial's short timeline.  False signaling is possible with any
  other proposal and the same problems can occur if miners fail to
  upgrade for any mandatory activation.

### Additional advantages

- No mandatory signaling: at no time are miners required to signal by
  Speedy Trial.  This includes no mandatory signaling during the
  locked_in period(s), although such signaling will be encouraged (as it
  was with BIP9[10]).

- Party time: to a lesser degree, a benefit mentioned for flag day
  activation may also apply here: we could get up to six months
  advanced notice of taproot activation, allowing users, developers, and
  organizations to prepare software, announcements, and celebrations for
  that event.

## Implementation details and next steps

Initial discussion about implementation may be found in today's
##taproot-activation log.[11] If it appears Speedy Trial may have
traction, Russell O'Connor has offered to work on a patch against BIP8
implementing it.

## Acknowledgments

The original idea for a short-duration attempt was discussed in the
##taproot-activation IRC channel last July and the revised idea saw
additional evaluation there this week.  Despite growing frustration,
discussion has been overwhelmingly constructive, for which all the
contributors should be commended.  Although this should not in any way
imply endorsement, I'm grateful for the review and comments on a draft
of this email by Adam Gibson, Andrew Chow, Anthony Towns, Chris Belcher,
Jeremy Rubin, Jonas Nick, Luke Dashjr, Michael Folkson, Russell
O'Connor, and IRC users maybehuman and proofofkeags

## Footnotes

[1] https://en.bitcoin.it/wiki/Taproot_activation_proposals#Let.E2.80.99s_see_what_happens.2C_BIP8.28false.2C_3m.29

[2] A threshold of 1,815/2,016 blocks (90%) in a single retarget period
    seemed to have near-universal support during the 2021-02-16 IRC
    meeting.  See: https://en.bitcoin.it/wiki/Taproot_activation_proposal_202102

[3] https://en.bitcoin.it/w/index.php?title=Taproot_activation_proposals&amp;oldid=68062

[4] https://github.com/bitcoin/bitcoin/pull/19953

[5] https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-January/017547.html

[6] https://github.com/bitcoin/bitcoin/pull/19573

[7] BIP9's times are based on the median of the past 11 blocks, which
    usually trails UTC by about 90 minutes but which can trail behind
    realtime significantly if miners are doing weird things.

[8] https://en.bitcoin.it/wiki/July_2015_chain_forks

[9] https://buildingbitcoin.org/bitcoin-core-dev/log-2016-06-21.html#l-32

[10] https://github.com/bitcoin/bitcoin/blob/ed25cb58f605ba583c735f330482df0bf9348f3a/src/test/versionbits_tests.cpp#L337-L339

[11] http://gnusha.org/taproot-activation/2021-03-05.log</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jimmy_song_socialized_costs_of_hard_forks"><a class="anchor" href="#_jimmy_song_socialized_costs_of_hard_forks"></a>5.8. Jimmy Song - Socialized Costs Of Hard Forks</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/breaking-bitcoin/2017/socialized-costs-of-hard-forks/" class="bare">https://btctranscripts.com/breaking-bitcoin/2017/socialized-costs-of-hard-forks/</a></p>
</li>
<li>
<p>Author: Jimmy Song, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
<li>
<p>Video: <a href="https://www.youtube.com/watch?v=eCE2OzKIab8&amp;t=5m11s" class="bare">https://www.youtube.com/watch?v=eCE2OzKIab8&amp;t=5m11s</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>KL: Can you hear me? Is it good? Okay. I hope you have practiced your French because.. no, the presentations are in English. Welcome and thank you very much for being here. This conference will very probably be the best we’ve had in the bitcoin sphere. The crowd is pretty crazy. I’ve had the ticket list and I can say the people in this room, not just the speakers, the attendees are all super amazing. I’m glad to be launching this event. We’re a little late. I have a small joke. I hope you sold your bitcoin today, because we’re breaking bitcoin. Thank you. Jimmy is going to start. Please welcome Jimmy Song.</p>
</div>
<div class="sect3">
<h4 id="_introduction_5"><a class="anchor" href="#_introduction_5"></a>Introduction</h4>
<div class="paragraph">
<p>It is great to be here. Welcome to Breaking Bitcoin. Great event, right? Good stuff. Organizers have done a great job. I’m super excited to be here. It’s great to meet people you have only met online. I had one guy that I worked with for 3 years at Armory and didn’t meet him until yesterday. That tells you how spread out and decentralized the bitcoin community really is. You meet them online, but you never meet them in person. I love these events for that reason. Let’s get started.</p>
</div>
<div class="paragraph">
<p>My presentation is called the socialized costs of hard-forks in general. Many of you think you get free money out of this, and that’s good, but my premise is that the free money wasn’t really free. The free money wasn’t really free.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bcash_hard_fork"><a class="anchor" href="#_bcash_hard_fork"></a>bcash hard-fork</h4>
<div class="paragraph">
<p>August 1, 2017 around 6:12 UTC, bitcoin did something that it had never done before. Where there was one coins, then there were now two coins. This was the timestamp of the first block found on the bcash chain. This was something that happened 10 days earlier when someone posted to bitcointalk that posted a website and they wanted 8 megabyte blocks, they hated segwit, they hated replace-by-fee, it was sort of this contingency plan for the user-activated soft-fork and then it became this offensive weapon or something… so it was this hard-fork that happened around the same time of the segwit UASF drama escalation or culmination.</p>
</div>
<div class="paragraph">
<p>My colleagues at World Crypto Network were wtaching this hard-fork. We wanted to see what would happen. We weren’t sure if the hard-fork would really exist, whether miners would mine it, would the market price crash? Would users actually go and sell their coins? Would exchanges even allow trading? We didn’t know. We had no idea.</p>
</div>
<div class="paragraph">
<p>We had no idea. There were exchanges, miners, users, and they were all sort of interacting in some non-linear way and we had no idea what would happen. The next few weeks sort of answer that question. Although bcash dipped to $200, kind of like Ethereum Classic before it, bcash seemed like it was here to stay. I think it was last trading at $550?</p>
</div>
<div class="paragraph">
<p>I find it interesting that this conference is named “Breaking Bitcoin” and I’m the first speaker and I’m talking about a hard-fork. We had a hard-fork. What was interesting was that price didn’t tank, value didn’t get destroyed, in fact some value was gained as a result of the hard-fork. There was osme value unlocked or something. Some people were excited because they could add to their bitcoin stash. They thought, hey, I’m getting some free money. Or was it?</p>
</div>
<div class="paragraph">
<p>See, there are a lot of private benefits that are very obvious in the form of money that you are going to get. But there really is no such thing as a free lunch. There’s always costs that have to be paid. This is what economics would call negative externalities.</p>
</div>
<div class="paragraph">
<p>The August 1 hard-fork, the launch of bcash, had some negative side effects. Negative externalities is juts a way of saying bad things that other people have to pay for. There were some negative externalities here.</p>
</div>
<div class="paragraph">
<p>The classic example of a negative externality is a factory. Maybe they are producing– maybe it’s an oil refinery and they produce a good that is good for the economy but they also produce something that is a negative externality, like pollution. It’s not just something that everyone has to pay for, to clean up, or suffer from. But it’s also 2nd and 3rd order effects, like more traffic going towards the factory as a result of more workers that need to go there. You might also have- you might endanger some wildlife around there. It’s not that everyone has to pay for hte negative externalities, it might be specific people, like people who were previously using that road or animals that were near that factory, and they are also paying for the cost of that factory.</p>
</div>
</div>
<div class="sect3">
<h4 id="_positive_externalities"><a class="anchor" href="#_positive_externalities"></a>Positive externalities</h4>
<div class="paragraph">
<p>But before we get to that, let’s look at positive externalities, which are the benefits of the bcash hard-fork tha teveryone experienced. The first group are the users, who enjoyed the price increase. It’s hard to remembe rnow, since the market price is $4k now. But on August 1 before the hard-fork, bitcoin was trading at $2.7k. If we look at the price of both bitcoin and bcash, it’s at $5k right now. I don’t know, someone check the price. That’s a lot of money. For a lot of people, they sold their bcash for bitcoin, and they got something like a 6-20% increase based on whenever it was that you sold your coins. So users got more money.</p>
</div>
<div class="paragraph">
<p>Let’s take a look at miners. How did they benefit from the hard-fork? They had more choices on what they could be mining. They weren’t just mining bitcoin. Most of them were mining bitcoin because bitcoin had the liquidity to take on the mining reward that they were getting. Now that they had bcash as well, they could switch based on profitability. About 40% of miners seemed to be doing that, switching back and forth based on whatever was more profitable. This results in more money available to miners.</p>
</div>
<div class="paragraph">
<p>Let’s look at exchanges. As a resutl of the hard-fork, there was more demand for trading. There’s some people that want to dump bcash, some that want to buy it, and then listing a new asset will get exchanges a lot more business. That means more money for them.</p>
</div>
<div class="paragraph">
<p>I work for Paxos which many of you may know. And we own a NY-based bitcoin exchange called itbit. And part of what we had to do to become a trust company and get a NY license for bitcoin, is that we have to keep a trust of a bunch of bitcoin. As a result of this hard-fork, we got to trade in some of that bcash for bitcoin. It was good for exchanges in that way too, some of them directly benefited from the price appreciation or the free dividend if you will.</p>
</div>
<div class="paragraph">
<p>It’s not hard to see that price appreciation was the main driver of a lot of these benefits. Whether it was unlocked value or people looking for asymmetric payoffs or whatever, the price increase is very tangible and very obvious.</p>
</div>
</div>
<div class="sect3">
<h4 id="_negative_externalities"><a class="anchor" href="#_negative_externalities"></a>Negative externalities</h4>
<div class="paragraph">
<p>What’s not obvious are the negative externalities, which I will talk about now.</p>
</div>
<div class="paragraph">
<p>When you think about negative externalities, there’s one-time costs and permanent costs. One-time costs, like in the case of the factory, are the cost of building the factory- that’s a one-time cost. A permanent cost is like the ongoing pollution that the factory is creating. We have both as a result of this hard-fork.</p>
</div>
</div>
<div class="sect3">
<h4 id="_negative_externalities_one_time_costs"><a class="anchor" href="#_negative_externalities_one_time_costs"></a>Negative externalities: one-time costs</h4>
<div class="paragraph">
<p>Let’s start by looking at the one-time costs of the bcash hard-fork. So we have a bunch of exchanges and they had a lot of one-time costs that they had to pay. The first thing that happened is that deposits and withdrawals had to be halted for a day or two for these exchanges because they didn’t know what would happen. Many of these exchanges had to dip into cold storage because their users were demanding bcash. It’s part of their fidicuiary duty, they have to do that. You also have to audit the new software. This is something that we had to do at itbit. We want to spend bcash- how do we do it? We have to download electron cash? Does it have malware? We have to go and audit it. We had like 10 days to figure out if this was okay or not. And then you have to decide, are we going to just allow a one-time withdrawal, or are we going to list this new coin? For an exchange to lis ta new coin, it’s not easy- there’s all sorts of new procedures for cold storage, signing, deposits, withdrawals. Or you could just have this one-off event where you give them their bcash at some point and then you never think about it again. But that has its problems too. And finally, and whatever way you do it, withdrawals or listing– you are going to need new infrastructure to work with this token in some way, even if it’s a one-time withdrawal. You need some way to give these tokens to your users. Again, short-notice. Right? No time to do this, has to be done quickly.</p>
</div>
<div class="paragraph">
<p>What about merchants and payment processors? They had to halt their payments because they didn’t know what would happen. If a bunch of mining power went over to bcash then the bitcoin chain might get attacked or whatever, so they just halted payments and wanted to wait out and see what would happen. They also had to detect whether they were on the right chain. Are they on bitcoin or bcash? Which one am I? And finally most of them had to at least put in new infrastructure at least for chain detection. What was nice about this was that as a result on August 1, blocks were mostly empty, and you could get in your transactions very quickly. We observed this through our World Crypto Network live broadcast, and blocks were only 100 kb. It was amazing how much of the volume was from those companies.</p>
</div>
<div class="paragraph">
<p>Wallets had some one-time costs they had to pay. They have to detect which chain they are on. A lot of wallets are lite clients and getting their data from a full node and they don’t know what their full node is- is it bitcoin or bcash node? And a lot of them ended up writing up splitting tools because their users were demanding their other tokens. Many of them spent a lot of time on short notice writing these tools so that their users could get their new tokens. And finally, many of these wallets are multi-coin wallets and they now have to support this new token on very short notice. Again, not easy, this is herculean efforts on their part to write the software, get it out to users, and test it properly. This is money. It’s not easy to get this stuff right, and if you get it wrong, then you’re going to cause a lot of cost everywhere.</p>
</div>
<div class="paragraph">
<p>What about miners? They actually didn’t have that many one-time costs. They just needed a token-switching algorithm. Mining pools in particular if they want to maximize profit, you have to point to the right one, or write some software so that it’s an option for their users. Most look like they did this.</p>
</div>
<div class="paragraph">
<p>For users, how many of you sold some bcash? Wow, that’s a lot of people. How many of you had a lot of anxiety when you were trying to move your coins from cold storage? Okay, a lot of you didn’t. I got super nervous. If you got auto-credited on an exchange then maybe that wasn’t anxiety inducing. At least for me, when I go into cold storage, I’m sweating buckets. What am I going to do with this thing? It’s really stressful, you want to get it right, and if you mess up then you might lose a lot of money. Maybe it’s the mentality of this age, but we’re not used to having custody of enormous amounts of money and being responsible for it. Usually you give money to the bank and you sue them if they do something wrong. If you mess up with your cold storage transactions, there’s nobody to sue, it’s all your fault. It was stressful because there was time pressure and a lot of people felt that bcash would crash and they would have to sell really quickly. The time pressure and stress is a big one-time cost.</p>
</div>
<div class="paragraph">
<p>As a result of spending your bcash, you had to expose your public key. Instead of two hash preimages that you have to break plus a discrete log problem and an elliptic curve, now you are just protected by elliptic curves. So in which case, you’re paying the price of this exposure. This leads to some loss of privacy. A lot of people had to go and do all this stuff overnight. There’s a lot of ways in which you could do blockchain forensics to figure out who the person was based on the timestamps of various transactions that came in. You lost some privacy there.</p>
</div>
<div class="paragraph">
<p>And finally- the regulatory burden, is also there. How do you treat bcash as a tax burden? Did you just instantly get it out of thin air? What cost basis do you have for your bcash? How are you going to pay taxes on it? There’s this regulatory burden as well. This is also a one-time cost.</p>
</div>
<div class="paragraph">
<p>We’ve talked about one-time costs. What about some permanent ongoing costs that we have to continuoously pay as a result of hard-forks?</p>
</div>
</div>
<div class="sect3">
<h4 id="_negative_externalities_permanent_costs"><a class="anchor" href="#_negative_externalities_permanent_costs"></a>Negative externalities: permanent costs</h4>
<div class="paragraph">
<p>So, the addresses look exactly the same. The addresses look exactly the same. This has a lot of consequences. If you’re an exchange, you show a bitcoin address, and someone sends bcash, what are you going to do? Your duty is to give it back. And now you need all this infrastructure to detect stuff like this and give it back. If you’re a wallet, what are you going to do? Someone paid you, but they paid in bcash instead of bitcoin- are you going to tell them that? Your private key can sign for bcash, how are you going to handle that. What if you’re a merchant and you’re paid in the wrong token? Do you have to detect that and give them their money back? If you’re a user, paid p2p on bitcoin instead of the coin you want, or vice versa, now you have to handle that too. That burden often goes to the wallet you’re using or the exchange you’re using. These are all problems that were created as a result of this hard-fork, which we really didn’t have before.</p>
</div>
</div>
<div class="sect3">
<h4 id="_unreliable_blocks"><a class="anchor" href="#_unreliable_blocks"></a>Unreliable blocks</h4>
<div class="paragraph">
<p>The next issue is unreliable blocks. This is a problem on bcash and to some extent on bitcoin as well. Something like 40% of the total double sha256 mining power was on bcash at some point. That meant that bitcoin had like 20 minute blocks. There were hours that had 2 blocks each, for a while. So that meant congested network, higher fees, all that stuff. Of course, bcash suffered worse when they went 8 hours with only one block. So, unreliable blocks, this is a socialized cost.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reorg_attacks"><a class="anchor" href="#_reorg_attacks"></a>Reorg attacks</h4>
<div class="paragraph">
<p>We’re now a lot more vulnerable to reorg attacks. Both sides of the fork can be attacked more easily. If you had a state actor that was planning to do a 51% attack on bitcoin, now it’s a lot easier because you just wait for bitcoin mining hash power to move over to bcash and then you execute your attack then. Reorg attacks become easier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_chain_hopping_attacks"><a class="anchor" href="#_chain_hopping_attacks"></a>Chain hopping attacks</h4>
<div class="paragraph">
<p>This is an attack that has become more feasible against bitcoin as a result of a hard-fork that takes mining power. The way it works is you have a large pool of miners that are colluding or following economic incentives and they mine bitcoin and when the difficulty goes down on another chain, they move to the other chain. As a result of the hashing power moving over, the difficulty on bitcoin’s chain drops, and then they move back, and back and forth. This causes unreliable blocks. It does seem to be the case for about 40% of miners right now, they just point their hash power at which one is easier to mine and more profitable to main.</p>
</div>
</div>
<div class="sect3">
<h4 id="_privacy_loss"><a class="anchor" href="#_privacy_loss"></a>Privacy loss</h4>
<div class="paragraph">
<p>Any time that you are spending on bcash, it’s most likely, unless you’re buying freshly minted bcash, it’s now linked to you. There’s double the number of data points because now there’s two blockchains to be able to examine. It’s way easier.</p>
</div>
<div class="paragraph">
<p>Byteball and stellar– who went and got those? Anyone? So only a couple of people. Okay, good. You did the right thing. I was stupid and actually went and got it. Byteball has a single address by default. So if you combine all your– if you get their adrop then all your UTXOs are linked to that one byteball. Stellar is even worse, which required a facebook login. Think about that. So your addresses and UTXOs are now linked to your facebook identity. If I was the No Such Agency and I wanted to find out who owned bitcoin, for very cheap, that’s how I would do it.</p>
</div>
<div class="paragraph">
<p>Privacy loss is a huge security risk. If you’re somebody that is evil, that’s looking to rob someone, who do you go after? You would go after high net worth individuals. If you lose your privacy and you’re a HNWI, you’re going to get targeted now. That’s a security risk. You can’t just say you don’t care about your privacy and you’re getting 6%… it comes at a cost to you.</p>
</div>
</div>
<div class="sect3">
<h4 id="_replay_attacks"><a class="anchor" href="#_replay_attacks"></a>Replay attacks</h4>
<div class="paragraph">
<p>Replay attacks didn’t happen with bcash but it could have. We might get this with segwit2x, though. Replay attacks are sort of more of a problem for merchants because if you as a user send bitcoin to coinbase.com and someone replays that attack and your bcash also goes to coinbase.com, they are sort of obligated to send you your bcash back. But if it goes the other way, and if coinbase sends you bitcoin and it gets replayed and also sends you bcash- you’re not necessarily going to give that back. That’s what happend with the Ethereum Classic fork.</p>
</div>
<div class="paragraph">
<p>There’s a pull request on segwit2x’s repository for opt-in replay protection. But this has its costs too. Because now you have to put something in OP_RETURN and now there are larger transactions. Every wallet has to figure this out. This is a one-time cost for everyone. Every wallet has to add this, get it tested, it’s not easy to handle this without native replay protection.</p>
</div>
</div>
<div class="sect3">
<h4 id="_future_hard_forks"><a class="anchor" href="#_future_hard_forks"></a>Future hard-forks</h4>
<div class="paragraph">
<p>It looks like there will be more hard-forks in the future. There are way too many benefits for hard-forks not to happen.</p>
</div>
<div class="paragraph">
<p>Hard-forks are attractive for many reasons. It’s a very clean altcoin launch. You don’t– you already have sort of a base of users and stuff. And you don’t need to go and market it as much. There– let’s face it, they are starting off with a good code base. It’s very easy to utilize that and change a few parameters. Also, you get really good fair distribution because the economy of bitcoin is very diverse and you’re giving them the same amount of coins.</p>
</div>
<div class="paragraph">
<p>In a way, they are hacking the fidicuary duty of exchanges. Because exchanges are obligated to give you your value, that’s much easier to get them listed on exchanges. What are the biggest problems that altcoins have? It’s distribution and getting them listed on exchanges. Well, you can hack that by just hard-forking instead. It looks like this is the reality.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bitcoin_gold_gpu"><a class="anchor" href="#_bitcoin_gold_gpu"></a>Bitcoin Gold GPU</h4>
<div class="paragraph">
<p>This is a hard-fork that’s announced July 30 2017 by Asiacoin or something like that on bitcointalk. Apparently they have a pull request on their repo that says October 1 is their hard-fork date. They are going to change their proof-of-work. They want to do this before segwit2x, and they want to be GPU minable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_segwit2x"><a class="anchor" href="#_segwit2x"></a>Segwit2x</h4>
<div class="paragraph">
<p>Bitcoin2x is mid to late November. There will probably be no replay protection, and if there is, it will probably be opt-in.</p>
</div>
<div class="paragraph">
<p>We can sort of see a future where coinmarketcap looks like this: BItcoin, Bitcoin Money, Bitcoin Bucks, Bitcoin Cash, BItcoin Chips, Bitcoin Bits, Bitcoin Notes, Bitcoin Ounce, Bitcoin Check, Bitcoin Coin…. laughter</p>
</div>
</div>
<div class="sect3">
<h4 id="_immunization"><a class="anchor" href="#_immunization"></a>Immunization</h4>
<div class="paragraph">
<p>I will say though that there are some reasons for optimisim. What doesn’t kill bitcoin, makes it stronger. And conferences like this prove that we’re getting better at this. And really, we’re getting immunized to all of these hard-forks and it’s creating a better bitcoin as a result. We’re securing against attacks and mitigating against these threats.</p>
</div>
<div class="paragraph">
<p>Negative externalities - or bad things that other people have to pay for - is really the purview of security conferences like this. This conference is called Breaking Bitcoin. And I don’t know if it’s sort of the open-source ethos, but we’re the people that are trying to minimize the negative externalities. And there’s a word for people that are trying to minimize negative externalities– hero. Really, hero. You guys are the heroes of the bitcoin ecosystem. You are the sword in the darkness, you are the watchers on the walls. You are the shield that guards the realm of bitcoin.</p>
</div>
<div class="paragraph">
<p>Naseeb Taleb posits that anti-fragile things tend to be organic. I believe bitcoin is anti-fragile. We’re immunizing bitcoin. It doesn’t happen on its own. We don’t have smart genetic algorithms changing things on their own. No, you are the white blood cells of the bitcoin systems. You are the ones that will change things so that we gain from disorder instead of cracking and falling. In the next few days, take advantage of this time to get to know each other and listen to the speakers. You can make the security of bitcoin better and make it more anti-fragile and gain even more from disorder. You can make bitcoin awesome.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adversarial_thinking"><a class="anchor" href="#_adversarial_thinking"></a>6. Adversarial thinking</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_andrew_poelstra_on_security_assumptions"><a class="anchor" href="#_andrew_poelstra_on_security_assumptions"></a>6.1. Andrew Poelstra on security assumptions</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/scalingbitcoin/hong-kong-2015/security-assumptions/" class="bare">https://btctranscripts.com/scalingbitcoin/hong-kong-2015/security-assumptions/</a></p>
</li>
<li>
<p>Author: Andrew Poelstra, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-03-04</p>
</li>
<li>
<p>Video: <a href="https://www.youtube.com/watch?v=ivgxcEOyWNs&amp;t=9m20s" class="bare">https://www.youtube.com/watch?v=ivgxcEOyWNs&amp;t=9m20s</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Hi, welcome back.</p>
</div>
<div class="paragraph">
<p>I am a developer for libsecp256k1. It’s a library that does the underlying traditional cryptography used in Bitcoin. I am going to talk about security assumptions, security models and trust models. I am going to give a high-level overview of how we should be thinking about these issues for scaling and efficiency and decentralization. Bitcoin is a crypto system. Everything about it is a crypto system. It needs to be designed with an adversarial mindset, even in an adversarial setting.</p>
</div>
<div class="paragraph">
<p>This is probably an unfamiliar area for most areas of research. An example that a friend of mine uses on IRC, you could imagine asking a structural engineer, saying you need to design this building, it needs to be structurally sound, it needs to withstand weather, and further, if anyone studies your plans in detail, if anyone studies it then it they couldn’t destroy the building. That mostly can’t be done for most systems. It’s incredibly expensive to build things that are secure against outlandish attack scenarios. A lot of society is built around preventing adversarial behavior, because of the difficulty of intrinsincally preventing it.</p>
</div>
<div class="paragraph">
<p>However, online we don’t have this. We have pseudonymous and anonymous behavior, anyone can connect to everyone and hurt the system. If it’s possible to adversarially hurt the system, then they will do it. We cannot assume they will be visible and that they will be caught.</p>
</div>
<div class="paragraph">
<p>We had a bug in libsecp256k1 about three or four months ago. This was a very technical bug. What it was was that we had a problem with group addition function, we had this problem where, well we know it cannot be exploited. We knew that it was not a usable bug, it was extremely difficult to hit. For every 1 in 2^128 inputs to our group addition function, for every point on our curve there would be two bad points such that adding your point to either of these would give the wrong answer. Since we don’t know how people are going to use this function in the future, we realized we had to fix this bug. Our initial solution was a big hit in efficiency, it cost us 50% in signature production. We got this down to 25% and then down to 8% and then 3% is where we landed. At no point did we say, hey this is really hard to hit, and this will never happen by chance, so let’s just not fix it. We can’t think that way, because then we will have an addition formula that is wrong for some class of problems, and then in the future we will add another crypto system that uses this, and then we will remember about the caveat later and then something bad will go wrong.</p>
</div>
<div class="paragraph">
<p>The assumptions that we make when we think adversarially are pretty uncontroversial, like ECDSA signatures. The assumptions are things like, every participant has to be a polynomial-time turing machine, or maybe a quantum turing machine. That is pretty non-controversial. And then there are… this is not too controversial to say, this is probably not possible with probabilistic formulas, I guess it might be with quantum computers, but whatever the clock is ticking.</p>
</div>
<div class="paragraph">
<p>We have to do this adversarial thinking. In Bitcoin, in addition to having this, this is the boring part of this, this is Script verification. We complain sometimes about this, but it just works. What’s novel in Bitcoin is this proof-of-work mining system. This is a way to develop a consensus on the order of the transactions. And we want it to be a decentralized consensus. The reason is that there are some problems that miners solve that are intrinsically impossible to solve cryptographically. One is that we can’t cryptographically enforce, if they just pack up and go home, the system.. so we want them to keep going. Another thing is censorship resistance. It’s impossible to prove that a miner was aware of something and then didn’t commit to it, so proving awareness is conceptually impossible. So we want incentives for miners to include transactions. We want to balance this without trading incentives for miners to fill blocks with transactions. Miners are there for a reason. We want them to agree to extend the same history, and we want them …. so these are the things that we can’t do cryptographically, the last one is perhaps the weirdest one, the fifth postulate of security thinking is that there is no way to get a universal clock. So we use proof-of-work to get agreement on time. The chain with the most work and the most long and some other weights, all of these things, we can’t do this cryptographically, so we add incentive structures that will hopefully induce people to do the right thing. This is how Bitcoin is designed.</p>
</div>
<div class="paragraph">
<p>On top of this, this is already really difficult. We still need to speak adversarially about this. The next talk has a similar topic, by the way. We have these problems already, the reason why Bitcoin is slow is because we want decentralization and in these properties that we can’t necessarily cryptographically force. We can do decentralization around threshold signatures, we can have everyone verify the signature. However, decentralizing things like time-ordering is not so easy. So when we talk about scaling bitcoin, we talk mostly about … we want to avoid centralization inaudible.</p>
</div>
<div class="paragraph">
<p>A lot of scalability proposals for Bitcoin change the trust model. One example of that which I want to talk about is the one I should mention, which is segregated witness. It’s a way to separate transaction signatures from their data, so you can choose whether to not fetch the signature (and trust the miner that it is correct) or fetch it and verify for yourself. And you can do this for each transaction. So there is a lot of granularity in how trusting you want to be of miners, in exchange for better scalability by avoiding fetching data. Most scalability improvements are like this. Some things are just pure wins, but they’re small. The won’t take us beyond current transaction throughput numbers qualitatively. If Bitcoin can handle 5x transactions at the end of the day, but that’s not a game-changer. When people talk about being unable to do things because of Bitcoin throughput, they really mean orders-of-magnitude more transactions.</p>
</div>
<div class="paragraph">
<p>When we do this, we have to remember that the security model, the trust model, are cryptographic, they should be thought with an adversarial mindset because even though we can’t verify them cryptographically, we still have to have security. We can’t just say “this will never happen”, “this part of the transaction is purely random”, or “this group of people wont ever collude”. Bitcoin works in an adversarial setting, if there are failure modes that can be found, they will be targeted. This is almost not worth saying, it’s something we almost never explicitly say in cryptography because it’s so ingrained and old, when we move from these traditional cryptographic assumptions to this more nebulous region thinking about incentives and I guess economics and trust things and how people are going to collude and what do people want to do, this sort of stuff, these are traditionally the domain of more traditional ways of thinking where you assume that people know each other, or they wont try to screw each other, they have reasons to not screw each other, or there will be legal consequences. This is not the world of bitcoin. We have to bring different modes of thinking into our more nebulous areas. This is why the problem is so difficult. This is why there’s any controversy at all- they are hard problems, hard to solve and hard to think about.</p>
</div>
<div class="paragraph">
<p>My second half of my talk would have been about decentralization of miners and validators. Sometimes their incentives do not align, and now we have multiple participants with different incentives and this trips up our ability to develop solutions.</p>
</div>
<div class="paragraph">
<p>Let’s take questions.</p>
</div>
<div class="paragraph">
<p>Q: Regarding decentralization, which proposals are better and worse from an adversarial standpoint?</p>
</div>
<div class="paragraph">
<p>A: A solution that would not be great from an adversarial standpoint that would not be great, would be replacing mining with a single signer. Now not only do you have one entity that is able to compromise the ordering of the transactions, now he’s a target. So now anyone that wants to attack the system can just attack that target. That would greatly increase risk. Whereas something like, for example, the lightning proposal, that does change the trust model, but only individual transactors' trust model. They can individually decide to trust each other not to double spend, and they also have a fall-back to Bitcoin where they can control the conditions when something goes wrong. The failure mode is much more constrained.</p>
</div>
<div class="paragraph">
<p>Q: So you allude to the assumption of trust. What are some frameworks to approach the different social assumptions of bitcoin?</p>
</div>
<div class="paragraph">
<p>A: I guess you’re asking, can I enumerate different trust models? The bitcoin trust model, what we would hope, is one in terms of transaction ordering, we would have miners all over the world fighting for the next block, so we don’t have clustering or single points of failures or single targets. In fact, we have a bunch of mining centralization than we maybe like if our goal is decentralization. Some things that approach this is that instead of a single entity like a bank or clearinghouse to decide which transactions to go through, you would have a federation of maybe a fixed group like 10 or 100 people to agree. That’s obviously not decentralization, but it is obviously a cheap approximation which might be okay in some scenarios, but certainly not for what Bitcoin does.</p>
</div>
<div class="paragraph">
<p>Q: What do you think about provable or verifiable security in protocol design, rather than crypto?</p>
</div>
<div class="paragraph">
<p>A: A lot of tooling needs to be built. We need to radically change the way we design protocols. The protocols are written and specified and expected that everyone follows them more or less. And we try to design things so that bad things don’t happen. We would like to computationally verify that the protocol is resilient. I have seen some papers about this. The one that I read just yesterday was called “Session types for rust”, which is a way of using a strong typing system like in rust or haskell to basically describe your protocol in a way such that when you go to implement it the compiler will prevent you from violating the model. So then you could prove that you implemented the protocol correctly. Your code wont compile if you have any failure modes like that in there. We need to be developing this. There has been a lot of progress in this area.</p>
</div>
<div class="paragraph">
<p>other relevant talk on this subject - <a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/in-adversarial-environments-blockchains-dont-scale/" class="bare">http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/in-adversarial-environments-blockchains-dont-scale/</a></p>
</div>
<div class="paragraph">
<p><a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/overview-of-security-concerns/" class="bare">http://diyhpl.us/wiki/transcripts/scalingbitcoin/overview-of-security-concerns/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_jameson_lopp_bitcoins_security_model_a_deep_dive"><a class="anchor" href="#_jameson_lopp_bitcoins_security_model_a_deep_dive"></a>6.2. Jameson Lopp - Bitcoin’s Security Model: A Deep Dive</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://blog.lopp.net/bitcoins-security-model-a-deep-dive/" class="bare">https://blog.lopp.net/bitcoins-security-model-a-deep-dive/</a></p>
</li>
<li>
<p>Author: Jameson Lopp</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>When discussing consensus mechanisms for different cryptocurrencies, one
issue that often causes arguments is a lack of understanding of the
security model that they provide for the historical data in the ledger.</p>
</div>
<div class="paragraph">
<p>When
<a href="https://blog.lopp.net/bitcoin-the-trust-anchor-in-a-sea-of-blockchains/">discussing
consensus mechanisms</a> for different cryptocurrencies, one issue that
often causes arguments is a lack of understanding (and definition) of
the security model that they provide for the historical data in the
ledger. While each consensus model aims to prevent various theoretical
attacks, it’s important to understand the goals for the model.</p>
</div>
<div class="paragraph">
<p>Every security model has two main parts: assumptions and guarantees. If
the assumptions used as inputs hold true, then so should the guarantees
that are output by the model.</p>
</div>
<div class="paragraph">
<p>Let’s dig into the security model that appears to be offered to bitcoin
users who run a full node.</p>
</div>
<div class="sect3">
<h4 id="_in_search_of_truth"><a class="anchor" href="#_in_search_of_truth"></a>In search of truth</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>One of bitcoin’s strengths – the most important in my opinion even –
is the low degree of trust you need in others.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Pieter Wuille<br>
<cite>https://www.reddit.com/r/BitcoinBeginners/comments/3eq3y7/full_node_question/ctk4lnd/</cite>
</div>
</div>
<div class="paragraph">
<p>The goal of distributed ledgers is to provide an ordered history of
events, because in distributed systems you can’t simply trust a
timestamp.</p>
</div>
<div class="paragraph">
<p>When a new participant on a blockchain-based network joins, they
download any available blocks and consider every valid series of blocks
that they see, starting from a hard-coded genesis block.</p>
</div>
<div class="paragraph">
<p>One of the greatest assumptions made by bitcoin’s security model is that
the majority of miners are honest – that they are working to secure the
blockchain rather than attempting to undermine it. In practice, this has
held true throughout bitcoin’s history due to miner incentives, though
<a href="https://freedom-to-tinker.com/2016/10/21/bitcoin-is-unstable-without-the-block-reward/">some
question</a> if it will continue to hold true in the future.</p>
</div>
<div class="paragraph">
<p>Given this assumption, full node operators can be completely sure of
several facts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nobody has inflated the monetary supply except for miners, and only
according to a well-defined schedule.</p>
</li>
<li>
<p>Nobody ever spent money without having the appropriate private key(s).</p>
</li>
<li>
<p>Nobody ever spent the same money twice.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Full node operators can be reasonably sure of several other things.
There is a strong guarantee that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any block in the chain was created within approximately two hours of
the block’s timestamp.</p>
</li>
<li>
<p>They are syncing the “true” blockchain history.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At a more technical level, this requires a multitude of checks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All blocks follow the consensus rules:</p>
</li>
<li>
<p>Each block is
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L3643">chained
to a parent block</a></p>
</li>
<li>
<p>Each block met its difficulty target and has
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/pow.cpp#L77">sufficient
proof of work</a></p>
</li>
<li>
<p>Block timestamps fall in a
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L3520">window
relative to recent blocks</a></p>
</li>
<li>
<p>The Merkle root
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L3385">matches
the block’s transactions</a></p>
</li>
<li>
<p>No blocks were
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L3405">larger
than the allowed maximum size</a></p>
</li>
<li>
<p>Each block’s first (and only first) transaction
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L3409">is a
coinbase transaction</a></p>
</li>
<li>
<p>Coinbase outputs don’t pay more than the
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L2495">appropriate
block reward</a></p>
</li>
<li>
<p>No blocks contained more than the
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L3426">allowed
signature operations</a></p>
</li>
<li>
<p>All transactions follow the consensus rules:</p>
</li>
<li>
<p>Input and output values
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L1070">are
sane</a></p>
</li>
<li>
<p>Transactions
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L1250">only
spend unspent outputs</a></p>
</li>
<li>
<p>All inputs being spent
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L2026">have
valid signatures</a></p>
</li>
<li>
<p>No coinbase transaction outputs were spent
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L1971">within
100 blocks of their creation</a>.</p>
</li>
<li>
<p>No transactions
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L3571">spend
inputs with a locktime</a> before the block in which they are confirmed.</p>
</li>
<li>
<p><a href="https://en.bitcoin.it/wiki/Protocol_rules">Many other rules</a> that would
take too long to cover here.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_thermodynamic_security"><a class="anchor" href="#_thermodynamic_security"></a>Thermodynamic security</h4>
<div class="paragraph">
<p>Once a transaction is confirmed in a block it can’t be reversed without
someone expending a minimum amount of energy to rewrite the chain.</p>
</div>
<div class="paragraph">
<p>As long as no attacker holds more than 50% of the network’s
computational power, and honest nodes can communicate quickly, the
probability of a transaction being reversed decreases exponentially with
the number of confirmations it has received. There are other attacks,
<a href="https://bitcoinmagazine.com/articles/selfish-mining-a-25-attack-against-the-bitcoin-network-1383578440">such
as selfish mining</a>, that can reduce this power requirement, though they
appear to be difficult to perpetrate.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Attack-table-e1478882332551.png" alt="Attack table e1478882332551">
</div>
<div class="title">Figure 1. Source: “Bitcoin’s Security Model Revisited” by Yonatan Sompolinsky1 and Aviv Zohar</div>
</div>
<div class="paragraph">
<p>Looking at the current cumulative work performed by bitcoin miners, it
would take nearly 10<sup>26</sup> hashes to build an alternative blockchain from
genesis with greater cumulative proof of work that full nodes would
consider to be the “true” chain.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/work-ever.png" alt="work ever">
</div>
<div class="title">Figure 2. Source: <a href="http://bitcoin.sipa.be" class="bare">http://bitcoin.sipa.be</a></div>
</div>
<div class="paragraph">
<p>To crunch some numbers on the cost involved in such an attack:<br>
<em>An Antminer S9 runs at 0.1 Joule per GH (10<sup>9</sup> hashes)</em><br>
<em>10<sup>26</sup> hashes * 0.1 J / 10<sup>9</sup> hashes = 10<sup>15</sup> joules</em><br>
<em>10<sup>15</sup> joules = 2,777,777,778 kw hours * $0.10 kw/hour = $277,777,778
worth of electricity to rewrite the entire blockchain</em></p>
</div>
<div class="paragraph">
<p>Whereas at time of writing a single block must hit a difficulty target
of 253,618,246,641 which would require approximately:<br>
<em>253,618,246,641 * 2<sup>48</sup> / 65535 = 1.09 * 10<sup>21</sup> hashes</em><br>
<em>1.09 * 10<sup>21</sup> hashes * 0.1 J / 10<sup>9</sup> hashes = 1.09 * 10<sup>11</sup> joules</em><br>
<em>1.09 * 10<sup>11</sup> joules = 30,278 kw hours * $0.10 kw/hour = $3,028 worth
of electricity per block</em></p>
</div>
<div class="paragraph">
<p>This is why we can state that bitcoin is provably thermodynamically
secure.</p>
</div>
<div class="paragraph">
<p>There are a few variables that you can tweak in the above calculation to
decrease the cost, but we can be sure that it will require many millions
of dollars worth of electricity alone in order to rewrite the entire
blockchain. However, an attacker with this much hash power would at
worst be able to reverse transactions back to 2014 – we’ll delve into
the reason for this shortly.</p>
</div>
<div class="paragraph">
<p>Also note that this doesn’t take into account the costs required to
obtain and operate sufficient mining equipment to carry out such an
attack.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sybil_resistance"><a class="anchor" href="#_sybil_resistance"></a>Sybil resistance</h4>
<div class="paragraph">
<p>Because the bitcoin protocol considers the true chain to be the one with
the most cumulative proof of work (not the longest chain as is often
incorrectly stated,) the result is that a new peer joining the network
only needs to connect to a single honest peer in order to find the true
chain.</p>
</div>
<div class="paragraph">
<p>This is also known as “Sybil resistance,” which means that it’s not
possible for someone to launch an attack against a node by creating many
dishonest peers that feed it false information.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Nodes.png" alt="Nodes">
</div>
</div>
<div class="paragraph">
<p>Pictured here is a near worst-case scenario in which your node is being
massively Sybil attacked but still has a single connection with an
honest node that is connected to the true bitcoin network. As long as a
single honest peer is passing the true blockchain data to your full
node, it will be quite clear that any Sybil attackers are attempting to
deceive you and your node will ignore them.</p>
</div>
</div>
<div class="sect3">
<h4 id="_real_time_consensus"><a class="anchor" href="#_real_time_consensus"></a>Real-time consensus</h4>
<div class="paragraph">
<p>The bitcoin protocol creates a number of other interesting attributes
with regard to maintaining network-wide consensus once your node is at
the tip of the blockchain.</p>
</div>
<div class="paragraph">
<p>The authors of “<em><a href="https://eprint.iacr.org/2015/261.pdf">Research
Perspectives and Challenges for Bitcoin and Cryptocurrencies</a></em>” note the
following properties that are important to the stability of a
cryptocurrency:</p>
</div>
<div class="paragraph">
<p><strong>Eventual consensus</strong>. At any time, all compliant nodes agree upon a
prefix of what will become the eventual “true” blockchain.</p>
</div>
<div class="paragraph">
<p><strong>Exponential convergence</strong>. The probability of a fork of depth n is
O(2−n). This gives users high confidence that a simple “k confirmations”
rule will ensure their transactions are settled permanently.</p>
</div>
<div class="paragraph">
<p><strong>Liveness</strong>. New blocks will continue to be added and valid transactions
with appropriate fees will be included in the blockchain within a
reasonable amount of time.</p>
</div>
<div class="paragraph">
<p><strong>Correctness</strong>. All blocks in the chain with the most cumulative proof of
work will only include valid transactions.</p>
</div>
<div class="paragraph">
<p><strong>Fairness</strong>. A miner with X% of the network’s total computational power
will mine approximately X% of blocks.</p>
</div>
<div class="paragraph">
<p>The authors of the paper note that bitcoin appears to have these
properties, at least under the assumption that the majority of miners
are remaining honest, which is what the block rewards along with proof
of work attempt to incentivize.</p>
</div>
<div class="paragraph">
<p>There are many other algorithms that can be used to maintain consensus
in distributed systems such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Proof of Stake</p>
</li>
<li>
<p>Proof of Coin Age</p>
</li>
<li>
<p>Proof of Deposit</p>
</li>
<li>
<p>Proof of Burn</p>
</li>
<li>
<p>Proof of Activity</p>
</li>
<li>
<p>Proof of Elapsed Time</p>
</li>
<li>
<p>Federated Consensus</p>
</li>
<li>
<p>Practical Byzantine Fault Tolerance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These create different security models – the most obvious difference
from proof of work being that each of the alternative systems’ consensus
is driven at the expense of internal resources (coins or reputation)
rather than external resources (electricity.) This creates a very
different set of incentives for (and trust in) validators on the network
which drastically changes the security model.</p>
</div>
</div>
<div class="sect3">
<h4 id="_security_model_misunderstandings"><a class="anchor" href="#_security_model_misunderstandings"></a>Security model misunderstandings</h4>
<div class="paragraph">
<p>A common mistaken assumption is that there is a well-defined security
model for bitcoin.</p>
</div>
<div class="paragraph">
<p>In reality, the bitcoin protocol was and is being built without a
formally defined specification or security model. The best that we can
do is to study the incentives and behavior of actors within the system
in order to better understand and attempt to describe it.</p>
</div>
<div class="paragraph">
<p>That said, there are a few properties of the bitcoin protocol that are
often analyzed incorrectly.</p>
</div>
<div class="paragraph">
<p>Some blockchains have suffered badly enough from attacks that developers
add
<a href="https://github.com/ppcoin/ppcoin/blob/0.4.2/src/checkpoints.cpp#L369">centrally
broadcasted signed checkpoints</a> into the node software, essentially
saying that “block X has been validated by the developers as being on
the correct historical chain.” This is a point of extreme
centralization.</p>
</div>
<div class="paragraph">
<p>It’s worth noting that bitcoin has
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/chainparams.cpp#L138">13
hard-coded checkpoints</a>, but they do not change the security model in
the way that broadcasted checkpoints do. The last checkpoint was added
to <a href="https://bitcoin.org/en/release/v0.9.3">Bitcoin Core 0.9.3</a> and is at
block 295000, which was created on April 9, 2014. This block had a
difficulty of 6,119,726,089 which would require approximately:</p>
</div>
<div class="paragraph">
<p><em>6,119,726,089 * 2<sup>48</sup> / 65535 = 2.62 * 10<sup>19</sup> hashes</em><br>
<em>2.62 * 10<sup>19</sup> hashes * 0.1 J / 10<sup>9</sup> hashes = 2.62 * 10<sup>9</sup> joules</em><br>
<em>2.62 * 10<sup>9</sup> joules = 728 kw hours * $0.10 kw/hour = $73 worth of
electricity to generate</em></p>
</div>
<div class="paragraph">
<p>Thus, if a Sybil attacker completely surrounded a new node that was
syncing from scratch, it could create some short blockchains at low
heights at almost no cost, but only up to the various checkpointed
blocks.</p>
</div>
<div class="paragraph">
<p>If it partitioned a node off the network that had synced past block
295,000 it would be able to start feeding false blocks at the cost of
$73 per block, at least until it hit a difficulty readjustment. However,
the further along the victim node had synced, the greater the cost would
be for the attacker to create a chain with more cumulative work.</p>
</div>
<div class="paragraph">
<p>Both
<a href="https://bitcointalk.org/index.php?topic=194078.msg3009608#msg3009608">Greg
Maxwell</a> and
<a href="https://bitcoin.stackexchange.com/questions/1797/what-are-checkpoints/1798#comment36402_1798">Pieter
Wuille</a> have stated that they hope to someday completely remove
checkpoints. Bitcoin Core lead maintainer Wladimir van der Laan noted
that checkpoints are a
<a href="https://github.com/bitcoin/bitcoin/issues/7591#issuecomment-254448921">constant
source of confusion</a> to people who seek to understand bitcoin’s security
model.</p>
</div>
<div class="paragraph">
<p>An argument could be made that this means a full node is “trusting” the
Core devs regarding the validity of the blockchain history up until 9th
April, 2014, but the node still checks the Merkle hashes in each block’s
header, meaning that the soundness of the transaction history is still
secured by proof of work. These old checkpoints
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/main.cpp#L1996">enable a
performance increase</a> (skipping signature verification) when initially
syncing the historical blockchain, though the introduction of
libsecp256k1 has made the
<a href="https://github.com/bitcoin/bitcoin/issues/7591#issuecomment-188369540">performance
difference less significant</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bitcoin/bitcoin/pull/5927">Checkpoints remain</a> in
place for three purposes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To prevent nodes from
<a href="https://github.com/bitcoin/bitcoin/pull/5562#issuecomment-68637511">having
their memory filled up</a> with valid but low proof-of-work block headers</p>
</li>
<li>
<p>Skipping signatures in earlier blocks (performance improvement)</p>
</li>
<li>
<p>To estimate syncing progress</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While this article was being written Greg Maxwell
<a href="https://bitcoincore.org/en/meetings/2016/10/27/">proposed replacing
checkpoints</a> with a
<a href="https://github.com/bitcoin/bitcoin/pull/9053/files#diff-64cbe1ad5465e13bc59ee8bb6f3de2e7R100">cumulative
work check</a> instead. Once a node has a chain that contains more than 5.4
* 10<sup>24</sup> hashes performed, chains with less cumulative work would be
rejected. This coincides with the amount of work performed up to
approximately block 320,000 in September 2014, at which point individual
blocks were of difficulty ~27,000,000,000.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Difficulty.png" alt="Difficulty">
</div>
<div class="title">Figure 3. Source: <a href="https://blockchain.info/charts/difficulty?timespan=3years">Blockchain.info</a></div>
</div>
<div class="paragraph">
<p><em>Mining blocks at a difficulty of 27,000,000,000 would require
approximately</em><br>
<em>27,000,000,000 * 2<sup>48</sup> / 65535 = 1.16 * 10<sup>20</sup> hashes</em><br>
<em>1.16 * 10<sup>20</sup> hashes * 0.1 J / 10<sup>9</sup> hashes = 1.16 * 10<sup>10</sup> joules</em><br>
<em>1.16 * 10<sup>10</sup> joules = 3,222 kw hours * $0.10 kw/hour = $322 worth of
electricity per block</em></p>
</div>
<div class="paragraph">
<p>Thus, with this proposed change, if a Sybil attacker completely
surrounded a new node that was syncing from scratch, it would be able to
start feeding false blocks starting at any block after genesis for
basically no cost. If a Sybil attacker completely surrounded a node that
synced past block ~320,000 it could start feeding a false chain from
that point at the cost of $322 per block.</p>
</div>
<div class="paragraph">
<p>In short, either check for securing a node’s initial sync is relatively
inexpensive to attack if an entity can gain complete control of your
node’s Internet connection; if they can’t, then the node will easily
dismiss the attacker’s blocks.</p>
</div>
<div class="paragraph">
<p>On a related note, every blockchain system has its
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/chainparams.cpp#L51">genesis
block hard coded</a> into the node software. You could argue that there is
a social contract to the “shared history” that is the ledger – once a
block is old enough, there is an understanding amongst everyone on the
network that it will never be reverted. As such, when developers take a
very old block and create a checkpoint out of it, it is done more so as
an agreed-upon sanity check rather than as a dictation of history.</p>
</div>
<div class="paragraph">
<p>In addition to checkpoints, there’s also the matter of how a node
bootstraps itself. The current process for bitcoin nodes is to check to
see if it has a local database of peers it has previously learned about.
If not, then it will query a set of “DNS Seeds” that are
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/chainparams.cpp#L117">hard-coded
into the software</a>. These seeds maintain a list of well connected
bitcoin nodes that they return to your node.</p>
</div>
<div class="paragraph">
<p>As we can see from the code, Bitcoin Core 0.13 currently uses DNS Seeds
run by Pieter Wuille, Matt Corallo, Luke Dashjr, Christian Decker, Jeff
Garzik, and Jonas Schnelli. Anyone can run a DNS seed by using Pieter
Wuille’s <a href="https://github.com/sipa/bitcoin-seeder">bitcoin-seeder software</a>
or <a href="https://github.com/TheBlueMatt/dnsseed-bitcoinj">Matt Corallo’s
software</a>, though in order for it to be used by new nodes you’d have to
convince the developers of one of the full node implementations to add
your DNS seed host to their software.</p>
</div>
<div class="paragraph">
<p>It may once again seem like a point of extreme centralization that the
bootstrapping process for a new node is reliant upon a mere six DNS
seeds. Recall that bitcoin’s security model only requires that you
connect to a single honest peer in order to be able to withstand Sybil
attacks.</p>
</div>
<div class="paragraph">
<p>As such, a new node only needs to be able to connect to a single DNS
seed that isn’t compromised and returns IP addresses of honest nodes.
However, there is a fallback if for some reason all of the DNS seeds are
unreachable – a
<a href="https://github.com/bitcoin/bitcoin/blob/0.13/src/chainparamsseeds.h#L10">hard-coded
list</a> of reliable node IP addresses that
<a href="https://github.com/bitcoin/bitcoin/tree/0.13/contrib/seeds">gets updated</a>
for each release.</p>
</div>
<div class="paragraph">
<p>The security model for these various initialization parameters is not
that the full node operator is trusting X DNS seeds or Y Core developers
to feed them honest data, but rather that at least 1 / X DNS seeds is
not compromised or 1 / Y Core developers is honest about
<a href="https://github.com/bitcoin/bitcoin/pull/7415">reviewing the validity of
hard-coded peer changes</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_nothing_is_perfectly_secure"><a class="anchor" href="#_nothing_is_perfectly_secure"></a>Nothing is perfectly secure</h4>
<div class="paragraph">
<p>At an even deeper level, when you run a full node, you are probably
trusting the hardware and software you are running to a certain extent.</p>
</div>
<div class="paragraph">
<p>There are methods to verify the software by
<a href="https://www.reddit.com/r/Bitcoin/wiki/verifying_bitcoin_core">checking
the signatures of your binary</a> against those of van der Laan, but it’s
unlikely that many people bother to go through this process. As for
trustworthy hardware, that’s a tough problem. The closest you’ll
probably come to a secure hardware solution is something like
<a href="https://www.crowdsupply.com/design-shift/orwl">ORWL</a>, which guaranteed to
“self destruct” if anyone attempts to tamper with it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ORWL-Machines.png" alt="ORWL Machines">
</div>
</div>
<div class="paragraph">
<p>However, given that hardware architectures for CPUs, RAM and other
important hardware tend to be proprietary, you can never be 100% sure
that they aren’t compromised.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bitcoins_balance_of_power"><a class="anchor" href="#_bitcoins_balance_of_power"></a>Bitcoin’s balance of power</h4>
<div class="paragraph">
<p>The waters become even murkier when you begin to investigate the
relationship between different participants in the system.</p>
</div>
<div class="paragraph">
<p>The purpose of running a full node is to protect your financial
sovereignty. This generally means that by installing and running a
specific version of software, you are entering into an agreement that
you will abide by the rules of that software and that everyone else
using the network must also abide by them.</p>
</div>
<div class="paragraph">
<p>As such, if people want to change the rules in such a way that are not
backwards compatible, you must explicitly agree to the rule change by
running a new version of the software. On the other hand, backwards
compatible rule changes can be implemented and enforced without your
consent.</p>
</div>
<div class="paragraph">
<p>A highly simplified description of the power dynamics in bitcoin:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lopptweet.png" alt="lopptweet">
</div>
</div>
<div class="paragraph">
<p>It’s important to note that full node software does not automatically
update itself, and this is by design. Automatic updates would greatly
shift the balance of power to developers, enabling them to force rule
changes upon nodes and miners without their permission.</p>
</div>
<div class="paragraph">
<p>Unfortunately, while a rule change may be technically backwards
compatible, we have come to learn over the years that sufficiently
creative soft forks can actually implement changes that are clearly
outside the intent of the previous version of rules. Vitalik Buterin
<a href="https://www.reddit.com/r/btc/comments/428tjl/softforking_the_block_time_to_2_min_my_primarily/">demonstrated
this</a> with a description of a way to soft fork bitcoin’s block time from
10 minutes to 2 minutes, which would of course also speed up the
emission schedule of new bitcoins.</p>
</div>
<div class="paragraph">
<p>There is one trump card that full nodes have in order to fight back
against unwanted soft forks is to hard fork away from the miners who
implemented the soft fork. This is difficult to perform (by design) and
raises a lot of questions about measuring consensus and finding the
economically important nodes.</p>
</div>
<div class="paragraph">
<p>Technically, it could be done by changing the miner algorithm from
double SHA256 to a different hash function, thereby rendering all SHA256
ASICs useless for mining bitcoins. It’s for this reason that node
operators should remain vigilant to changes in the ecosystem and remind
miners that they can be replaced if they exceed their authority.</p>
</div>
<div class="paragraph">
<p>A lot of game theory is involved in discussing miner operations and
their threat to bitcoin’s security, and I speculated as to how the
mining ecosystem may change
<a href="https://medium.com/@lopp/the-future-of-bitcoin-mining-ac9c3dc39c60">in a
previous article</a>. While bitcoin mining is more centralized than most of
us would like, it still seems to work well because bitcoin miners have a
lot of capital invested – they can’t risk destroying their investment by
acting maliciously in a system where everyone is watching.</p>
</div>
</div>
<div class="sect3">
<h4 id="_spv_security"><a class="anchor" href="#_spv_security"></a>SPV security</h4>
<div class="paragraph">
<p>A lot of bitcoin users employ a lightweight client to access the network
rather than a full node since it requires far fewer resources while
still providing strong security.</p>
</div>
<div class="paragraph">
<p>A client employing Simplified Payment Verification (SPV) downloads a
complete copy of the headers for all blocks in the entire chain. This
means that the download and storage requirements scale linearly with the
amount of time since bitcoin was invented. This is described in section
8 of the <a href="http://bitcoin.org/bitcoin.pdf">bitcoin whitepaper</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/pow-chain.png" alt="pow chain">
</div>
</div>
<div class="paragraph">
<p>Satoshi wrote that an SPV client “can’t check the transaction for
himself, but by linking it to a place in the chain, he can see that a
network node has accepted it, and blocks added after it further confirm
the network has accepted it.” SPV assumes that a transaction X blocks
deep will be costly to forge.</p>
</div>
<div class="paragraph">
<p>SPV seems to offer similar guarantees as full node security, but with an
additional assumption that any block with a valid header and proof of
work always contains valid transactions. Because SPV clients don’t check
all of the consensus rules noted in the first section of this article,
they are making the assumption that the consensus rules are being
checked by the node(s) from which they request transactions.</p>
</div>
<div class="paragraph">
<p>An additional, minor security difference involves peers withholding
information from you. When you’re running a full node, peers can
withhold unconfirmed transactions and blocks from you. However, once you
receive a block from any peer, it’s not possible for anyone to withhold
the transactions in that block from you. On the flip side, it is
possible for a peer to give a block header to an SPV client and then
withhold information about transactions in that block.</p>
</div>
<div class="paragraph">
<p>SPV clients can make a query to learn information about transactions
affecting a certain address and while it would be costly for peers to
lie to them about the existence of fake confirmed transactions (would
require mining a block with sufficient PoW) they could lie by omission
claim that there were no results for the bloom filter you used to query
for transactions. It’s also worth noting that SPV is terribly
<a href="https://www.youtube.com/watch?v=HScK4pkDNds">broken from a privacy
standpoint</a> due to flaws with bloom filters.</p>
</div>
<div class="paragraph">
<p>BitcoinJ has an <a href="https://bitcoinj.github.io/security-model">excellent
write-up</a> of the SPV security model. Regarding unconfirmed transactions,
they note:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In SPV mode, the only reason you have to believe the transaction is
valid is the fact that the nodes you connected to relayed the
transaction. If an attacker could ensure you were connected to his
nodes, this would mean they could feed you a transaction that was
completely invalid (spent non-existing money), and it would still be
accepted as if it was valid.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>SPV security is probably “good enough” for the average user, though it
could be improved upon with SPV Fraud Proofs. There has been
<a href="http://coinjournal.net/how-fraud-proofs-may-improve-spv-node-security-in-bitcoin/">some
discussion</a> of
<a href="https://diyhpl.us/wiki/transcripts/mit-bitcoin-expo-2016/fraud-proofs-petertodd/">this
concept</a> but no implemented
<a href="https://gist.github.com/justusranvier/451616fa4697b5f25f60">proposals</a>
for building them into the protocol.</p>
</div>
</div>
<div class="sect3">
<h4 id="_theres_no_place_like_127_0_0_1"><a class="anchor" href="#_theres_no_place_like_127_0_0_1"></a>There’s no place like 127.0.0.1</h4>
<div class="paragraph">
<p>If you aren’t running a full node (and actually using it to validate
transactions) then you’re outsourcing at least some level of trust to
third parties, resulting in a different security model for your usage of
bitcoin. Note that this need not necessitate that all users and
businesses build their software directly on top of Bitcoin Core’s RPC
API.</p>
</div>
<div class="paragraph">
<p>Some alternate infrastructure configurations might include but are not
limited to:</p>
</div>
<div class="paragraph">
<p>1) Using a mobile wallet such as
<a href="https://play.google.com/store/apps/details?id=de.schildbach.wallet">Bitcoin
Wallet for Android</a>, <a href="https://greenaddress.it/">GreenAddress</a>, or
<a href="https://stashnode.com/#wallet">Stash</a> that enables you to configure the
wallet to only query your own full node.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/BTC-security-graphic.png" alt="BTC security graphic">
</div>
</div>
<div class="paragraph">
<p>2) Building apps on top of SPV node libraries such as BitcoinJ
and configuring them to only connect to full nodes that you operate. In
BitcoinJ this can be accomplished by defining your own
<a href="https://github.com/bitcoinj/bitcoinj/blob/a7cad0ede447d4bcba7dd55639df442a408df6fb/core/src/main/java/org/bitcoinj/net/discovery/SeedPeers.java">SeedPeers</a>
that you pass to your
<a href="https://github.com/bitcoinj/bitcoinj/blob/release-0.14/core/src/main/java/org/bitcoinj/core/PeerGroup.java">PeerGroup</a>
during initialization. With libbitcoin you can define a network
connection to a specific node
<a href="https://github.com/libbitcoin/libbitcoin/blob/b1722139f9e701ceedbb88a0d90cd786bdda2408/doc/sphinx/examples/connect.rst">using
this example</a>.</p>
</div>
<div class="paragraph">
<p>3) Building a proxy server that is compatible with Bitcoin Core’s
JSON-RPC API that sends some calls to third party services but also
automatically verifies the data they return by making calls to a local
full node. For an example, see <a href="https://github.com/BitGo/bitgod">BitGo’s
BitGoD software</a>. This hybrid model can give you the best of both
worlds: you can leverage advanced features offered by third parties
while still retaining your financial sovereignty.</p>
</div>
</div>
<div class="sect3">
<h4 id="_full_nodes_for_freedom"><a class="anchor" href="#_full_nodes_for_freedom"></a>Full nodes for freedom</h4>
<div class="paragraph">
<p>It’s clear that running your own full node offers superior security with
the fewest required assumptions. Given that you can build a computer
capable of running a reliable full node for only a few hundred dollars,
do the math and determine if securing your financial sovereignty is
worth the price.</p>
</div>
<div class="paragraph">
<p><em>Thanks to Kristov Atlas, Eric Martindale, Andrew Miller, and Kiara
Robles for reviewing and providing feedback for this article.</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ragnar_lifthrasir_twitter_thread_on_adversarial_thinking"><a class="anchor" href="#_ragnar_lifthrasir_twitter_thread_on_adversarial_thinking"></a>6.3. Ragnar Lifthrasir - Twitter thread on Adversarial thinking</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoinwords.github.io/tweetstorm-on-adversarial-thinking" class="bare">https://bitcoinwords.github.io/tweetstorm-on-adversarial-thinking</a></p>
</li>
<li>
<p>Author: Ragnar Lifthrasir</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>A thread/rant on the the importance of thinking critically and adversarially about Bitcoin claims and ideas, and the dangers of failing to do so.</p>
</div>
<div class="paragraph">
<p>This isn’t directed at anyone specifically so please don’t make it personal. Let’s stick to ideas and arguments please</p>
</div>
<div class="paragraph">
<p>Below is an example of robotic repetition of unquestioned simplistic dogma as a mantra of faith and an excuse for inaction and critical thought.</p>
</div>
<div class="paragraph">
<p>In this instance it’s HODLmonomania. (Yes I HODL and recommend it). The danger of this monomania is what follows from it…</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/r1.png" alt="r1">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Don’t develop and use @btcpayserver, a self-hosted, open-source bitcoin payment processor to build a circular Bitcoin economy. Just HODL.</p>
</li>
<li>
<p>Don’t develop and use the Lightning Network to give better privacy for censorship resistant and faster payments. Just HODL.</p>
</li>
<li>
<p>Don’t build a network of people to informally buy and sell bitcoin to escape the KYC/ AML and surveilled 3rd party Bitcoin exchanges. Just HODL.</p>
</li>
<li>
<p>Don’t use bitcoin to pay for Bitcoin products and services to spread adoption of bitcoin, create a circular bitcoin economy, and offer an alternative to exchanges to acquire bitcoin. Just HODL.
We can see how reducing all of Bitcoin to one monomania keeps bitcoin from progressing, gives an excuse for inaction, narrows the scope of Bitcoin’s purpose and abilities, and discourages rigorous intelligent discourse.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Memes are for humor, not orthodoxy.</p>
</div>
<div class="paragraph">
<p>Here’s an example of an extraordinary claim, that feels good to believe, but lacks empirical support and isn’t evaluated with common sense.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/r2.png" alt="r2">
</div>
</div>
<div class="paragraph">
<p>If you owned all the BTC currently in circulation, 18,144, at today’s price of $8,087, then you’d have a net worth of $147 billion. Jeff Bezos is worth $131 billion. From when he started Amazon &amp; it was worth $0 to today he had a “wealth transfer” of almost the market cap of bitcoin</p>
</div>
<div class="paragraph">
<p>There’s many more extraordinary claims about Bitcoin that require extraordinary evidence, or at least critical thinking, but lack either. These claims have become givens, unquestioned, and widespread.</p>
</div>
<div class="paragraph">
<p>Some other examples: Lightning Network can replace Visa and MasterCard. Bitcoin solves inequality. Bitcoin will become the world’s reserve currency. Bitcoin will end wars. Bitcoin will prevent governments from collecting taxes at a mass scale.</p>
</div>
<div class="paragraph">
<p>As much as we hope some of these claims come true (I do!) we make bitcoin weaker by burdening bitcoin with unrealistic expectations, setting up bitcoiners for disillusionment, and lulling into inaction and dangerous overconfidence.</p>
</div>
<div class="paragraph">
<p>Humility is the beginning of wisdom.</p>
</div>
<div class="paragraph">
<p>To make Bitcoin and ourselves stronger we need to think like the software engineers who contribute to Bitcoin. They peer review, mercilessly seeking flaws. At their tech events they talk about every which way a proposal can fail. They think adversarially. They’re conservative</p>
</div>
<div class="paragraph">
<p>Stressing muscles makes them stronger</p>
</div>
<div class="paragraph">
<p>Testing &amp; reviewing codes reduces the risk of exploits</p>
</div>
<div class="paragraph">
<p>Thinking critically about ideas &amp; claims focuses our limited resources on what’s realistic &amp; achievable. It also helps us let go of future fantasies to focus on the present.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_wiki_weaknesses"><a class="anchor" href="#_bitcoin_wiki_weaknesses"></a>6.4. Bitcoin Wiki - Weaknesses</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://en.bitcoin.it/wiki/Weaknesses" class="bare">https://en.bitcoin.it/wiki/Weaknesses</a></p>
</li>
<li>
<p>Author: Various</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_might_be_a_problem"><a class="anchor" href="#_might_be_a_problem"></a>Might be a problem</h4>
<div class="paragraph">
<p><strong>Wallet Vulnerable To Theft</strong></p>
</div>
<div class="paragraph">
<p>The wallet is stored unencrypted, by default, and thus becomes a valuable target for theft. Recent releases of the Bitcoin client now supports encryption to protect the wallet data, though the user must opt-in.</p>
</div>
<div class="paragraph">
<p><strong>New wallets vulnerable with old passwords via backups</strong></p>
</div>
<div class="paragraph">
<p>An old copy of a wallet with its old password is often easily retrievable via an existing backup facility (particularly Apple Time-Machine): draining that old wallet, with its old password, drains the current wallet with the current password&#8201;&#8212;&#8201;this is contrary to most non-technical users expectation of what 'change the password on your wallet' should mean following password compromise.</p>
</div>
<div class="paragraph">
<p>An initial solution is to mandate (either in code or as expressed policy) that changing a wallet&#8217;s password causes (or asks the user to cause) the creation of a new wallet with new addresses, and the sending of existing sums to them. Backed-up copies of the original wallet with the original password would then be empty, should they be compromised. On the downside, the password-changing process would potentially take much longer, cost a transaction fee or more, and - intially at least - the new wallet is no longer backed up. On the upside, non-technical users won&#8217;t find their wallets drained from security compromises they believed they had closed, nor be required to locate existing backups of a wallet in order to destroy them.</p>
</div>
<div class="paragraph">
<p><strong>Tracing a coin&#8217;s history</strong></p>
</div>
<div class="paragraph">
<p>Tracing a coin&#8217;s history can be used to connect identities to addresses (the Anonymity article elaborates on this concern in greater detail).</p>
</div>
<div class="paragraph">
<p><strong>Sybil attack</strong></p>
</div>
<div class="paragraph">
<p>If an attacker attempts to fill the network with clients that they control, you would then be very likely to connect only to attacker nodes. Although Bitcoin never uses a count of nodes for anything, completely isolating a node from the honest network can be helpful in the execution of other attacks.</p>
</div>
<div class="paragraph">
<p>This state can be exploited in (at least) the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the attacker can refuse to relay blocks and transactions from everyone, effectively disconnecting you from the network</p>
</li>
<li>
<p>the attacker can relay only blocks that they create, effectively putting you on a separate network and then also leaving you open to double-spending attacks</p>
</li>
<li>
<p>if you rely on transactions with 0 confirmations, the attacker can just filter out certain transactions to execute double-spending attacks</p>
</li>
<li>
<p>low-latency encryption/anonymization of Bitcoin&#8217;s transmissions (with Tor, JAP, etc.) can be defeated relatively easily with a timing attack if you&#8217;re connected to several of the attacker&#8217;s nodes and the attacker is watching your transmissions at your ISP</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bitcoin makes these attacks more difficult by only making an outbound connection to one IP address per /16 (x.y.0.0). Incoming connections are unlimited and unregulated, but this is generally only a problem in the anonymity case where you&#8217;re probably already unable to accept incoming connections.</p>
</div>
<div class="paragraph">
<p>Looking for suspiciously-low network hash-rates may help prevent the second one.</p>
</div>
<div class="paragraph">
<p><strong>Packet sniffing</strong></p>
</div>
<div class="paragraph">
<p>Someone who can see all of your Internet traffic can easily see when you send a transaction that you didn&#8217;t receive (which suggests you originated it). Bitcoin-QT has good Tor integration which closes this attack vector if used.</p>
</div>
<div class="paragraph">
<p><strong>Denial of Service (DoS) attacks</strong></p>
</div>
<div class="paragraph">
<p>Sending lots of data to a node may make it so busy it cannot process normal Bitcoin transactions. Bitcoin has some denial-of-service prevention built-in, but is likely still vulnerable to more sophisticated denial-of-service attacks.</p>
</div>
<div class="paragraph">
<p>These are the current Bitcoin Satoshi client protections to deter DoS attacks, as of version 0.7.0:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Does not forward orphan transactions/blocks</p>
</li>
<li>
<p>Does not forward double-spend transactions</p>
</li>
<li>
<p>Does not forward the same block, transaction or alert twice to the same peer.</p>
</li>
<li>
<p>Continuous rate-limit of free transactions to mitigate 'penny-flooding'</p>
</li>
<li>
<p>Keeps a DoS score of each connected peer and disconnects from a peer that send messages that fail to comply with the rules.</p>
</li>
<li>
<p>Bans IP addresses that misbehave for a time lapse (24 hours default)</p>
</li>
<li>
<p>Limits the number of stored orphan transactions (10000 by default)</p>
</li>
<li>
<p>Uses a signature cache to prevent attacks that try to continuously trigger the re-verification of stored orphan transactions (protects from <a href="https://bitcointalk.org/index.php?topic=136422.0" class="bare">https://bitcointalk.org/index.php?topic=136422.0</a> attack)</p>
</li>
<li>
<p>Limits the number of stored signatures in the signature cache (50000 signatures by default)</p>
</li>
<li>
<p>Tries to catch all possible errors in transactions before the signature verifications take place, to avoid DoS attacks on CPU usage.</p>
</li>
<li>
<p>Penalizes peers that send lots of duplicate/expired/invalid-signature/whatever alerts, so they eventually get banned.</p>
</li>
<li>
<p>In orphan/signature caches, when removing an item, evicts a random entry.</p>
</li>
<li>
<p>Data structures are specially chosen to avoid loops in which the number of iterations can be controlled by an attacker that result in exponential complexity.</p>
</li>
<li>
<p>Ignores big orphan transactions, to avoid a send-big-orphans memory exhaustion attack.</p>
</li>
<li>
<p>In RPC: Only sends a HTTP 403 response if it&#8217;s not using SSL to prevent a DoS during the SSL handshake.</p>
</li>
<li>
<p>In RPC: Sleeps some time if authorization fails to deter brute-forcing short passwords.</p>
</li>
<li>
<p>In GUI: Limits URI length to prevent a DoS against the QR-Code dialog</p>
</li>
<li>
<p>Considers non-standard signature scripts with size greater than 500 bytes.</p>
</li>
<li>
<p>Considers non-standard signature scripts that contain operations that are not PUSHs.</p>
</li>
<li>
<p>Does not forward nor process non-standard transactions</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These are protocol rules built to prevent DoS:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Restricts the block size to 1 megabyte.</p>
</li>
<li>
<p>Restricts the maximum number of signature checks a transaction input may request</p>
</li>
<li>
<p>Limits the size of each script (up to 10000 bytes)</p>
</li>
<li>
<p>Limits the size of each value pushed while evaluating a a script (up to 520 bytes)</p>
</li>
<li>
<p>Limits the number of expensive operations in a script (up to 201 operations). All but pushs are considered expensive. Also each key argument of signature checking in multi-signature checking (OP_CHECKMULTISIG) is considered an additional operation.</p>
</li>
<li>
<p>Limits the number of key arguments OP_CHECKMULTISIG can use (up to 20 keys)</p>
</li>
<li>
<p>Limits the number of the stack elements that can be stored simultaneously (up to 1000 elements, in standard and alt stacks together)</p>
</li>
<li>
<p>Limits the number of signature checks a block may request (up to 20000 checks)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These are the Satoshi client protections added in version 0.8.0:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Transactions greater than 100 Kbytes are considered non-standard (protects from variations of the <a href="https://bitcointalk.org/index.php?topic=140078.0" class="bare">https://bitcointalk.org/index.php?topic=140078.0</a> attack).</p>
</li>
<li>
<p>Only the UXTO (Unspent Transaction Output Set) is stored in memory, the remaining data is stored on disk.</p>
</li>
<li>
<p>When processing a transaction, before fetching transaction inputs from disk to memory, the client checks that all the inputs are unspent (protects from the Continuous Hard Disk Seek/Read Activity (<a href="https://bitcointalk.org/index.php?topic=144122.0" class="bare">https://bitcointalk.org/index.php?topic=144122.0</a>) DoS attack)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Satoshi client does not directly limit peer bandwidth nor CPU usage.</p>
</div>
<div class="paragraph">
<p><strong>Forcing clock drift against a target node</strong></p>
</div>
<div class="paragraph">
<p>See Timejacking for a description of this attack. It can be fixed by changing how nodes calculate the current time.</p>
</div>
<div class="paragraph">
<p><strong>Illegal content in the block chain</strong></p>
</div>
<div class="paragraph">
<p>It is illegal in some countries to possess/distribute certain kinds of data. Since arbitrary data can be included in Bitcoin transactions, and full Bitcoin nodes must normally have a copy of all unspent transactions, this could cause legal problems. However, Local node policy generally doesn&#8217;t permit arbitrary data (transactions attempting to embed data are non-standard), but steganographic embedding can still be used though this generally limits storage to small amounts. Various ideas have been proposed to further limit data storage in the UTXO set (but are not currently being seriously considered for deployment).</p>
</div>
<div class="paragraph">
<p><strong>Security Vulnerabilities and bugs</strong>
It&#8217;s possible but unlikely that a newly discovered bug or security vulnerability in the standard client could lead to a block chain split, or the need for every node to upgrade in a short time period. For example, a single malformed message tailored to exploit a specific vulnerability, when spread from node to node, could cause the whole network to shutdown in a few hours. Bugs that break user anonymity, on the contrary, have been found, since the pseudo-anonymity property of Bitcoin has been analyzed less. Starting from version 0.7.0, Bitcoin client can be considered a mature project. The security critical sections of the source code are updated less and less frequently and those parts have been reviewed by many computer security experts. Also Bitcoin Satoshi client has passed the test of being on-line for more than 3 years, without a single vulnerability being exploited in the wild. See Common Vulnerabilities and Exposures for a detailed list of vulnerabilities detected and fixed.</p>
</div>
<div class="paragraph">
<p><strong>Energy Consumption</strong>
Energy consumption for mining has a high correlation with bitcoin value (exchange rate). Because variable costs of mining are dominated by electricity price, the economic equilibrium for the mining rate is reached when global electricity costs for mining approximate the value of mining reward plus transaction fees.</p>
</div>
<div class="paragraph">
<p>So the higher the value of one bitcoin, the higher the value of mining rewards and transaction fees, the higher the energy consumption of the bitcoin network in the long run.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>more efficient mining gear does not reduce energy use of the bitcoin network. It will only raise the network difficulty</p>
</li>
<li>
<p>cheaper energy linearly increases mining energy use of the bitcoin network</p>
</li>
<li>
<p>the same conclusions apply to all proof of work based currencies.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_probably_not_a_problem"><a class="anchor" href="#_probably_not_a_problem"></a>Probably not a problem</h4>
<div class="paragraph">
<p><strong>Breaking the cryptography</strong></p>
</div>
<div class="paragraph">
<p>SHA-256 and ECDSA are considered very strong currently, but they might be broken in the far future. If that happens, Bitcoin can shift to a stronger algorithm. More info.</p>
</div>
<div class="paragraph">
<p><strong>Scalability</strong></p>
</div>
<div class="paragraph">
<p>Bitcoin can easily scale beyond the level of traffic VISA sees globally today. See the discussion on the scalability page for more information.</p>
</div>
<div class="paragraph">
<p><strong>Segmentation</strong></p>
</div>
<div class="paragraph">
<p>If there is even a "trickle" of a connection between two sides of a segmented network, things should still work perfectly. When block chains are combined, all of the non-generation transactions in the shorter chain are re-added to the transaction pool&#8201;&#8212;&#8201;they&#8217;ll start over at 0/unconfirmed, but they&#8217;ll still be valid. No mature transactions will be lost unless the segmentation persists for longer than ~120 blocks. Then generations will start to mature, and any transactions based on those generations will become invalid when recombined with the longer chain. More info.</p>
</div>
<div class="paragraph">
<p><strong>Attacking all users</strong></p>
</div>
<div class="paragraph">
<p>The IP addresses of most users are totally public. You can use Tor to hide this, but the network won&#8217;t work if everyone does this. Bitcoin requires that some country is still free.</p>
</div>
<div class="paragraph">
<p><strong>Dropping transactions</strong></p>
</div>
<div class="paragraph">
<p>Nodes that generate blocks can choose not to include a transaction in their blocks. When this happens, the transaction remains "active" and can be included in a later block. Two things discourage this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nodes only hash a fixed-size header, so there is no speed advantage to dropping transactions.</p>
</li>
<li>
<p>Satoshi has communicated that he will write code to stop this kind of thing if it becomes a problem.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Attacker has a lot of computing power</strong>
An attacker that controls more than 50% of the network&#8217;s computing power can, for the time that he is in control, exclude and modify the ordering of transactions. This allows him to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reverse transactions that he sends while he&#8217;s in control. This has the potential to double-spend transactions that previously had already been seen in the block chain, affecting all coins that share a history with the reversed transaction</p>
</li>
<li>
<p>Reverse confirmations for any transaction that had previously been seen in the block chain while he’s in control.</p>
</li>
<li>
<p>Prevent some or all transactions from gaining any confirmations</p>
</li>
<li>
<p>Prevent some or all other miners from mining any valid blocks</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The attacker can&#8217;t:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reverse other people&#8217;s transactions without their cooperation (unless their coin history has been affected by a double-spend)</p>
</li>
<li>
<p>Prevent transactions from being sent at all (they&#8217;ll show as 0/unconfirmed)</p>
</li>
<li>
<p>Change the number of coins generated per block</p>
</li>
<li>
<p>Create coins out of thin air</p>
</li>
<li>
<p>Send coins that never belonged to him</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the above limitations only apply to the perspective of Bitcoin as seen by full nodes. Some lightweight nodes work by trusting miners absolutely; from the perspective of Bitcoin as seen by lightweight nodes, miners can steal BTC, etc. This is one of the reasons why lightweight nodes are less secure than full nodes.</p>
</div>
<div class="paragraph">
<p>With less than 50%, the same kind of attacks are possible, but with less than 100% rate of success. For example, someone with only 40% of the network computing power can overcome a 6-deep confirmed transaction with a 50% success rate [1].</p>
</div>
<div class="paragraph">
<p>It&#8217;s much more difficult to change historical blocks, and it becomes exponentially more difficult the further back you go. As above, changing historical blocks only allows you to exclude and change the ordering of transactions. If miners rewrite historical blocks too far back, then full nodes with pruning enabled will be unable to continue, and will shut down; the network situation would then probably need to be untangled manually (eg. by updating the software to reject this chain even though it is longer).</p>
</div>
<div class="paragraph">
<p>Since this attack doesn&#8217;t permit all that much power over the network, it is expected that rational miners will not attempt it. A profit-seeking miner should always gain more by just following the rules, and even someone trying to destroy the system might find other attacks more attractive. Probably the most likely scenario where this attack would be employed would be for a government to try to get control over Bitcoin by acquiring a majority of hashing power (either directly or by enforcing rules on private miners within its borders). Then this government could use the transaction-censorship power listed above to do things like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prevent any transactions spending "stolen" coins, effectively destroying those coins. If the coins clearly are stolen, then there is a risk that this action will be accepted by the Bitcoin community, but this would set a very damaging precedent. If it becomes possible for coins to be blacklisted in this way, then it is a slippery slope toward blacklisting of other "suspicious" coins.</p>
</li>
<li>
<p>Prevent all transactions from unknown people, so everyone has to register with the government in order to transact.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The appropriate response to any long-term attack by miners is a hardfork to change the proof-of-work function. This fires all existing miners, and allows totally new ones to replace them.</p>
</div>
<div class="paragraph">
<p>See also: Majority_attack</p>
</div>
<div class="paragraph">
<p><strong>Spamming transactions</strong></p>
</div>
<div class="paragraph">
<p>Main article: Flood attack</p>
</div>
<div class="paragraph">
<p>It is easy to send transactions to yourself repeatedly. If these transactions fill blocks to the maximum size (1MB), other transactions would be delayed until the next block.</p>
</div>
<div class="paragraph">
<p>This is made expensive by the fees that would be required after the 50KB of free transactions per block are exhausted. An attacker will eventually eliminate free transactions, but Bitcoin fees will always be low because raising fees above 0.01 BTC per KB would require spending transaction fees. An attacker will eventually run out of money. Even if an attacker wants to waste money, transactions are further prioritized by the time since the coins were last spent, so attacks spending the same coins repeatedly are less effective.</p>
</div>
<div class="paragraph">
<p><strong>The Finney attack</strong></p>
</div>
<div class="paragraph">
<p>Named for Hal Finney, who first described this variation of a double-spend attack involving accepting 0-confirmation transactions. Accepting 0-confirmation large-value transactions is problematic; accepting them for low-value transactions (after waiting several seconds to detect an ordinary double-spend attempt) is probably safe.</p>
</div>
<div class="paragraph">
<p><strong>Rival/malicious client code</strong></p>
</div>
<div class="paragraph">
<p>Any rival client must follow Bitcoin&#8217;s rules or else all current Bitcoin clients will ignore it. You&#8217;d have to actually get people to use your client. A better client that pretends to follow the same rules, but with an exception known only to the author (possibly by making it closed source), might conceivably be able to gain widespread adoption. At that point, its author could use his exception and go largely unnoticed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_definitely_not_a_problem"><a class="anchor" href="#_definitely_not_a_problem"></a>Definitely not a problem</h4>
<div class="paragraph">
<p><strong>Coin destruction</strong></p>
</div>
<div class="paragraph">
<p>Bitcoin has 2.1 quadrillion raw units, making up 8 decimals of BTC precision, so the entire network could potentially operate on much less than the full quantity of Bitcoins. If deflation gets to the point where transactions of more than 10 BTC are unheard of, clients can just switch to another unit so that, for example, it shows 10 mBTC rather than 0.01 BTC.</p>
</div>
<div class="paragraph">
<p>The maximum number of raw units might not be enough if the entire world starts using BTC, but it would not be too difficult to increase precision in that case. The transaction format and version number would be scheduled to change at some particular block number after a year or two, and everyone would have to update by then.</p>
</div>
<div class="paragraph">
<p><strong>Generating tons of addresses</strong></p>
</div>
<div class="paragraph">
<p>Generating an address doesn&#8217;t touch the network at all. You&#8217;d only be wasting your CPU resources and disk space.</p>
</div>
<div class="paragraph">
<p>Also, a collision is highly unlikely.</p>
</div>
<div class="paragraph">
<p>Keys are 256 bit in length and are hashed in a 160 bit address.(2<sup>160</sup>th power) Divide it by the world population and you have about 215,000,000,000,000,000,000,000,000,000,000,000,000 addresses per capita.(2.15 x 10<sup>38</sup>)[1]</p>
</div>
<div class="paragraph">
<p><strong>Everyone calculates at the same rate</strong></p>
</div>
<div class="paragraph">
<p>If everyone began with identical blocks and started their nonce at 1 and incremented, the fastest machine would always win. However, each block contains a new, random public key known only to you in the list of transactions. The 256-bit "Merkle tree" hash of this is part of the block header.</p>
</div>
<div class="paragraph">
<p>So everyone begins with slightly different blocks and everyone truly has a random chance of winning (modified by CPU power).</p>
</div>
<div class="paragraph">
<p><strong>Generate "valid" blocks with a lower difficulty than normal</strong></p>
</div>
<div class="paragraph">
<p>Using unmodified Bitcoin code, an attacker could segment himself from the main network and generate a long block chain with a lower difficulty than the real network. These blocks would be totally valid for his network. However, it would be impossible to combine the two networks (and the "false" chain would be destroyed in the process).</p>
</div>
<div class="paragraph">
<p>"Block chain length" is calculated from the combined difficulty of all the blocks, not just the number of blocks in the chain. The one that represents the most computation will win.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simple_sabotage_field_manual"><a class="anchor" href="#_simple_sabotage_field_manual"></a>6.5. Simple Sabotage Field Manual</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://archive.org/details/SimpleSabotageFieldManualStrategicServicesProvisional" class="bare">https://archive.org/details/SimpleSabotageFieldManualStrategicServicesProvisional</a></p>
</li>
<li>
<p>Author: Office of Strategic Services, United States</p>
</li>
<li>
<p>Date copied: 2022-03-07</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="images/SimpleSabotageFieldManual.pdf">SimpleSabotageFieldManual.pdf</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_eric_voskuil_axiom_of_resistance"><a class="anchor" href="#_eric_voskuil_axiom_of_resistance"></a>6.6. Eric Voskuil - Axiom of Resistance</h3>
<div class="paragraph">
<p>In modern logic an axiom is a premise, it cannot be proven. It is a starting assumption against which other things may be proven. For example, in Euclidean geometry one cannot prove that parallel lines never meet. It simply defines the particular geometry.</p>
</div>
<div class="paragraph">
<p>Proving statements about Bitcoin requires reliance on axiomatic systems, specifically mathematics, probability and catallactics, and therefore the assumptions upon which they rely. However Bitcoin also relies on an axiom not found in these systems. Satoshi alludes to this in an early statement:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>You will not find a solution to political problems in cryptography.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Yes, but we can win a major battle in the arms race and gain a new territory of freedom for several years.</p>
</div>
<div class="paragraph">
<p>Governments are good at cutting off the heads of a centrally controlled networks like Napster, but pure P2P networks like Gnutella and Tor seem to be holding their own.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>In other words there is an assumption that it is possible for a system to resist state control. This is not accepted as a fact but deemed to be a reasonable assumption, due to the behavior of similar systems, on which to base the system.</p>
</div>
<div class="paragraph">
<p>One who does not accept the axiom of resistance is contemplating an entirely different system than Bitcoin. If one assumes it is not possible for a system to resist state controls, conclusions do not make sense in the context of Bitcoin - just as conclusions in spherical geometry contradict Euclidean. How can Bitcoin be permissionless or censorship-resistant without the axiom? The contradiction leads one to make obvious errors in an attempt to rationalize the conflict.</p>
</div>
<div class="paragraph">
<p>It is common for people to refer cynically to a Bitcoin-like system that omits the resistance axiom as just another "PayPal", a designation not without merit. Confinity originally attempted to create a system with a similar value proposition to Bitcoin. Having failed to do so it discarded the axiom, building the PayPal we know today.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_open_source"><a class="anchor" href="#_open_source"></a>7. Open source</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_open_sourcer_initiative_the_open_source_definition"><a class="anchor" href="#_open_sourcer_initiative_the_open_source_definition"></a>7.1. Open Sourcer Initiative - The Open Source Definition</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://opensource.org/osd" class="bare">https://opensource.org/osd</a></p>
</li>
<li>
<p>Author: Open Source Initiative</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_introduction_6"><a class="anchor" href="#_introduction_6"></a>Introduction</h4>
<div class="paragraph">
<p>Open source doesn&#8217;t just mean access to the source code. The
distribution terms of open-source software must comply with the
following criteria:</p>
</div>
<div class="sect4">
<h5 id="_1_free_redistribution"><a class="anchor" href="#_1_free_redistribution"></a>1. Free Redistribution</h5>
<div class="paragraph">
<p>The license shall not restrict any party from selling or giving away the
software as a component of an aggregate software distribution containing
programs from several different sources. The license shall not require a
royalty or other fee for such sale.</p>
</div>
</div>
<div class="sect4">
<h5 id="include-source-code"><a class="anchor" href="#include-source-code"></a>2. Source Code</h5>
<div class="paragraph">
<p>The program must include source code, and must allow distribution in
source code as well as compiled form. Where some form of a product is
not distributed with source code, there must be a well-publicized means
of obtaining the source code for no more than a reasonable reproduction
cost, preferably downloading via the Internet without charge. The source
code must be the preferred form in which a programmer would modify the
program. Deliberately obfuscated source code is not allowed.
Intermediate forms such as the output of a preprocessor or translator
are not allowed.</p>
</div>
</div>
<div class="sect4">
<h5 id="_3_derived_works"><a class="anchor" href="#_3_derived_works"></a>3. Derived Works</h5>
<div class="paragraph">
<p>The license must allow modifications and derived works, and must allow
them to be distributed under the same terms as the license of the
original software.</p>
</div>
</div>
<div class="sect4">
<h5 id="integrity"><a class="anchor" href="#integrity"></a>4. Integrity of The Author&#8217;s Source Code</h5>
<div class="paragraph">
<p>The license may restrict source-code from being distributed in modified
form <em>only</em> if the license allows the distribution of "patch files" with
the source code for the purpose of modifying the program at build time.
The license must explicitly permit distribution of software built from
modified source code. The license may require derived works to carry a
different name or version number from the original software.</p>
</div>
</div>
<div class="sect4">
<h5 id="persons-or-groups"><a class="anchor" href="#persons-or-groups"></a>5. No Discrimination Against Persons or Groups</h5>
<div class="paragraph">
<p>The license must not discriminate against any person or group of
persons.</p>
</div>
</div>
<div class="sect4">
<h5 id="fields-of-endeavor"><a class="anchor" href="#fields-of-endeavor"></a>6. No Discrimination Against Fields of Endeavor</h5>
<div class="paragraph">
<p>The license must not restrict anyone from making use of the program in a
specific field of endeavor. For example, it may not restrict the program
from being used in a business, or from being used for genetic research.</p>
</div>
</div>
<div class="sect4">
<h5 id="_7_distribution_of_license"><a class="anchor" href="#_7_distribution_of_license"></a>7. Distribution of License</h5>
<div class="paragraph">
<p>The rights attached to the program must apply to all to whom the program
is redistributed without the need for execution of an additional license
by those parties.</p>
</div>
</div>
<div class="sect4">
<h5 id="not-specific-to-product"><a class="anchor" href="#not-specific-to-product"></a>8. License Must Not Be Specific to a Product</h5>
<div class="paragraph">
<p>The rights attached to the program must not depend on the program&#8217;s
being part of a particular software distribution. If the program is
extracted from that distribution and used or distributed within the
terms of the program&#8217;s license, all parties to whom the program is
redistributed should have the same rights as those that are granted in
conjunction with the original software distribution.</p>
</div>
</div>
<div class="sect4">
<h5 id="not-restrict-other-software"><a class="anchor" href="#not-restrict-other-software"></a>9. License Must Not Restrict Other Software</h5>
<div class="paragraph">
<p>The license must not place restrictions on other software that is
distributed along with the licensed software. For example, the license
must not insist that all other programs distributed on the same medium
must be open-source software.</p>
</div>
</div>
<div class="sect4">
<h5 id="technology-neutral"><a class="anchor" href="#technology-neutral"></a>10. License Must Be Technology-Neutral</h5>
<div class="paragraph">
<p>No provision of the license may be predicated on any individual
technology or style of interface.</p>
</div>
<hr>
<div class="paragraph">
<p>The Open Source Definition was originally derived from the
<a href="https://www.debian.org/social_contract#guidelines">Debian Free Software
Guidelines</a> (DFSG).</p>
</div>
<div class="paragraph">
<p><em>Version 1.9, last modified, 2007-03-22</em></p>
</div>
<div class="paragraph">
<p><em>Here&#8217;s the historical "<a href="https://opensource.org/osd-annotated">Annotated
OSD</a>" from the early 2000&#8217;s.</em></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jameson_lopp_who_controls_bitcoin_core"><a class="anchor" href="#_jameson_lopp_who_controls_bitcoin_core"></a>7.2. Jameson Lopp - Who controls Bitcoin Core?</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://blog.lopp.net/who-controls-bitcoin-core-/" class="bare">https://blog.lopp.net/who-controls-bitcoin-core-/</a></p>
</li>
<li>
<p>Author: Jameson Lopp</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><em>Understanding how the focal point of Bitcoin development operates.</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/1-sAd4NmyP7LIdipEoRlw5pg.png" alt="image"></span></p>
</div>
<div class="paragraph">
<p>The question of who controls the ability to merge code changes into
<a href="https://bitcoincore.org">Bitcoin Core</a>’s
<a href="https://github.com/bitcoin/bitcoin">GitHub repository</a> tends to come up
on a recurring basis. This has been cited as a “central point of
control” of the Bitcoin protocol by various parties over the years, but
I argue that the question itself is a red herring that stems from an
authoritarian perspective — this model does not apply to Bitcoin. It’s
certainly not obvious to a layman as to why that is the case, thus the
goal of this article is to explain how Bitcoin Core operates and, at a
higher level, how the Bitcoin protocol itself evolves.</p>
</div>
<div class="sect3">
<h4 id="_the_history_of_bitcoincore"><a class="anchor" href="#_the_history_of_bitcoincore"></a>The History of Bitcoin Core</h4>
<div class="paragraph">
<p>Bitcoin Core is a
<a href="https://en.wikipedia.org/wiki/Focal_point_%28game_theory%29">focal point</a>
for development of the Bitcoin protocol rather than a point of command
and control. If it ceased to exist for any reason, a new focal point
would emerge — the technical communications platform upon which it’s
based (currently the GitHub repository) is a matter of convenience
rather than one of definition / project integrity. In fact, we have
already seen Bitcoin’s focal point for development change platforms and
even names!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In early 2009 the source code for the Bitcoin project was
<a href="http://www.metzdowd.com/pipermail/cryptography/2009-January/014994.html">simply
a .rar file</a> hosted on SourceForge. Early developers would actually
exchange code patches with Satoshi
<a href="https://online.wsj.com/public/resources/documents/finneynakamotoemails.pdf">via
email</a>.</p>
</li>
<li>
<p>On October 30 2009, Sirius (<a href="https://medium.com/u/2d55f06ada18">Martti
Malmi</a>) <a href="https://sourceforge.net/p/bitcoin/code/1/">created a subversion
repository</a> for the Bitcoin project on SourceForge</p>
</li>
<li>
<p>In 2011, the <a href="https://sourceforge.net/p/bitcoin/code/252">Bitcoin
project migrated</a> from SourceForge to
<a href="https://github.com/bitcoin/bitcoin/commit/ca40e581ebcdc85dba15c1e873f5e5aedda45b77">GitHub</a></p>
</li>
<li>
<p>In 2014 the Bitcoin project
<a href="https://github.com/bitcoin/bitcoin/pull/3408">was renamed to Bitcoin
Core</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_trust_noone"><a class="anchor" href="#_trust_noone"></a>Trust No One</h4>
<div class="paragraph">
<p>While there are a handful of GitHub “maintainer” accounts at the
organization level that have the ability to merge code into the master
branch, this is more of a janitorial function than a position of power.
If anyone could merge into master it would very quickly turn into a “too
many cooks in the kitchen” scenario. Bitcoin Core follows principles of
least privilege that any power bestowed to individuals is easily
subverted if it is abused.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Core is transparent about the list that matters: the PGP keys who can
sign merge commits.<br>
<br>
The lesson to be learned here is to not trust GitHub! Even Bitcoin Core
doesn&#8217;t know the full list of people who can change the repo, as that
extends to probably dozens of GitHub employees.</p>
</div>
<div class="paragraph">
<p>— Peter Todd (@peterktodd)
<a href="https://twitter.com/peterktodd/status/1047854713029312512?ref_src=twsrc%5Etfw">October
4, 2018</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>From an adversarial perspective, GitHub can not be trusted. Any number
of GitHub employees could use their administrative privileges to inject
code into the repository without consent from the maintainers. But it’s
unlikely that a GitHub attacker would also be able to compromise the PGP
key of a Bitcoin Core maintainer.</p>
</div>
<div class="paragraph">
<p>Rather than base the integrity of the code off of GitHub accounts,
Bitcoin Core has a continuous integration system that performs checks of
trusted PGP keys that must sign every merge commit. While these keys are
tied to known identities, it’s still not safe to assume that it will
always be the case — a key could be compromised and we wouldn’t know
unless the original key owner notified the other maintainers. As such,
the commit keys do not provide perfect security either, they just make
it more difficult for an attacker to inject arbitrary code.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_keys_to_thekingdom"><a class="anchor" href="#_the_keys_to_thekingdom"></a>The Keys to the Kingdom</h4>
<div class="paragraph">
<p>At time of writing,
<a href="https://github.com/bitcoin/bitcoin/blob/master/contrib/verify-commits/trusted-keys">these
are the trusted PGP fingerprints</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>71A3B16735405025D447E8F274810B012346C9A6<br>
133EAC179436F14A5CF1B794860FEB804E669320<br>
32EE5C4C3FA15CCADB46ABE529D4BCB6416F53EC<br>
B8B3F1C0E58C15DB6A81D30C3648A882F4316B9B<br>
CA03882CB1FC067B5D3ACFE4D300116E1C875A3D</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>These keys are registered to:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Wladimir J. van der Laan &lt;<a href="mailto:laanwj@protonmail.com">laanwj@protonmail.com</a>&gt;<br>
Pieter Wuille &lt;<a href="mailto:pieter.wuille@gmail.com">pieter.wuille@gmail.com</a>&gt;<br>
Jonas Schnelli &lt;<a href="mailto:dev@jonasschnelli.ch">dev@jonasschnelli.ch</a>&gt;<br>
Marco Falke &lt;<a href="mailto:marco.falke@tum.de">marco.falke@tum.de</a>&gt;<br>
Samuel Dobson &lt;<a href="mailto:dobsonsa68@gmail.com">dobsonsa68@gmail.com</a>&gt;</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Does this mean that we are trusting these five people? Not quite. Keys
are not a proof of identity — these keys could potentially fall into the
hands of other people. What assurances do you really get if you run the
verify-commits python script?</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>python3 contrib/verify-commits/verify-commits.py <br>
Using verify-commits data from bitcoin/contrib/verify-commits<br>
All Tree-SHA512s matched up to
309bf16257b2395ce502017be627186b749ee749<br>
There is a valid path from “HEAD” to
82bcf405f6db1d55b684a1f63a4aabad376cdad7 where all commits are signed!</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The
<a href="https://github.com/bitcoin/bitcoin/tree/master/contrib/verify-commits">verify-commits</a>
script is an integrity check that any developer can run on their
machine. When executed, it checks the PGP signature on every single
merge commit since commit 82bcf405… in December 2015 — over 3,400 merges
at time of writing. If the script completes successfully, it tells us
that every line of code that has been changed since that point has
passed through the Bitcoin Core development process and been “signed
off” by someone with a maintainer key. While this is not a bulletproof
guarantee that no one has injected malicious code (a maintainer could go
rogue or have their keys stolen), it reduces the attack surface for
doing so enormously. What are maintainers and how did they attain this
role? We’ll dig into that a bit later.</p>
</div>
</div>
<div class="sect3">
<h4 id="_layered_security"><a class="anchor" href="#_layered_security"></a>Layered Security</h4>
<div class="paragraph">
<p>The integrity of Bitcoin Core’s code must not rely solely upon a handful
of cryptographic keys, which is why there are a multitude of other
checks in place. There are many layers of security here to provide
defense in depth:</p>
</div>
<div class="sect4">
<h5 id="_pull_requestsecurity"><a class="anchor" href="#_pull_requestsecurity"></a>Pull Request Security</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Anyone is free to propose code changes to improve the software by
opening a pull request against the master branch on
<a href="https://github.com/bitcoin/bitcoin">bitcoin/bitcoin</a>.</p>
</li>
<li>
<p>Developers review pull requests to ensure that they are not harmful.
Anyone is free to review pull requests and provide feedback — there is
no gatekeeper or entrance exam when it comes to contributing to Bitcoin
Core. If a pull request gets to the point that there are no reasonable
objections to it being merged, a maintainer makes the merge.</p>
</li>
<li>
<p>Core maintainers set
<a href="https://github.com/bitcoin/bitcoin/blob/master/contrib/verify-commits/pre-push-hook.sh">this
pre-push hook</a> to ensure that they don’t push unsigned commits into the
repository.</p>
</li>
<li>
<p>Merge commits are optionally securely timestamped
<a href="https://github.com/bitcoin/bitcoin/blob/ebd786b72a2a15143d7ef4ea2229fef121bd8f12/contrib/devtools/README.md#create-and-verify-timestamps-of-merge-commits">via
OpenTimestamps</a></p>
</li>
<li>
<p>The <a href="https://travis-ci.org/bitcoin/bitcoin">Travis Continuous
Integration system</a> regularly runs
<a href="https://github.com/bitcoin/bitcoin/blob/master/.travis/lint_06_script.sh">this
script</a> to check the integrity of the git tree (history) and to verify
that all commits in the master branch were signed with one of the
trusted PGP keys.</p>
</li>
<li>
<p>Anyone who wants to can run
<a href="https://github.com/bitcoin/bitcoin/blob/master/contrib/verify-commits/verify-commits.py">this
script</a> to verify the PGP signatures on all of the merge commits going
back to December 2015. I ran it while writing this article and it took
25 minutes to complete on my laptop.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_release_security"><a class="anchor" href="#_release_security"></a>Release Security</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://gitian.org/">Gitian</a> deterministic build systems are run
independently by multiple developers with the goal of creating identical
binaries. If someone manages to create a build that doesn’t match the
builds of other developers, it’s a sign that non-determinism was
introduced and thus the final release isn’t going to happen. If there is
non-determinism, developers track down what went wrong, fix it, then
build another release candidate. Once a deterministic build has
succeeded then the developers sign the resulting binaries, guaranteeing
that the binaries and tool chain were not tampered with and that the
same source was used. This method removes the build and distribution
process as a single point of failure. Anyone with the technical skills
can run their own build system; the
<a href="https://github.com/bitcoin-core/docs/blob/master/gitian-building.md">instructions
are here</a>.</p>
</li>
<li>
<p>Once the Gitian builds have completed successfully and been signed off
by the builders, a Bitcoin Core maintainer will PGP sign a message with
the SHA256 hashes of each build. If you decide to run a prebuilt binary,
you can check its hash after downloading and then verify the
authenticity of the signed release message with the hashes. Instructions
for doing so <a href="https://bitcoincore.org/en/download/">can be found here</a>.</p>
</li>
<li>
<p>All of the above is open source and auditable by anyone with the
skills and desire to do so.</p>
</li>
<li>
<p>Finally, even after going through all of the above quality and
integrity checks, code that is committed into Bitcoin Core and
eventually rolled into a release is not deployed out onto the network of
nodes by any centralized organization. Rather, each node operator must
make a conscious decision to update the code they run. <strong>Bitcoin Core
deliberately does not include an auto-update feature, since it could
potentially be used to make users run code that they didn’t explicitly
choose</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Despite all of the technical security measures that are implemented by
the Bitcoin Core project, none of them are perfect and any of them can
theoretically be compromised. The last line of defense for the integrity
of Bitcoin Core’s code is the same as any other open source
project —<em> constant vigilance</em>. The more eyes that are reviewing Bitcoin
Core’s code, the less likely that malicious or flawed code will make it
into a release.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_coverage"><a class="anchor" href="#_code_coverage"></a>Code Coverage</h4>
<div class="paragraph">
<p>Bitcoin Core has a lot of testing code. There is an integration test
suite that runs against every PR and an extended test suite that runs
every night on master.</p>
</div>
<div class="paragraph">
<p>You can check the code coverage of the tests yourself by:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cloning the Bitcoin Core GitHub repository</p>
</li>
<li>
<p>Installing the
<a href="https://github.com/bitcoin/bitcoin/tree/master/doc#building">required
dependencies</a> for building from source</p>
</li>
<li>
<p>Running
<a href="https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#compiling-for-test-coverage">these
commands</a></p>
</li>
<li>
<p>Viewing the report at ./total_coverage/index.html</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively, you can view the coverage report Marco Falke
<a href="https://drahtbot.github.io/reports/coverage/bitcoin/bitcoin/master/total.coverage/index.html">hosts
here</a>.</p>
</div>
<div class="paragraph">
<div class="title">Code Coverage Report</div>
<p><span class="image"><img src="images/1-Vp2ozZbATWF51oe3AbYTzQ.png" alt="Code Coverage Report"></span></p>
</div>
<div class="paragraph">
<p>Having such a high level of test coverage means that there is a higher
level of certainty that the code functions as intended.</p>
</div>
<div class="paragraph">
<p>Testing is a big deal when it comes to consensus critical software. For
particularly complex changes, developers sometimes perform painstaking
mutation testing — that is, they test the tests by purposely breaking
the code and seeing if the tests fail as expected. Greg Maxwell gave
some insight into this process when he discussed the 0.15 release:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>“The test is the test of the software, but what’s the test of the test?
The software. To test the test, you must break the
software.” — Greg Maxwell</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Video: <a href="https://youtu.be/nSRoEeqYtJA" class="bare">https://youtu.be/nSRoEeqYtJA</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_free_market_competition"><a class="anchor" href="#_free_market_competition"></a>Free Market Competition</h4>
<div class="paragraph">
<p>BitMEX <a href="https://blog.bitmex.com/bitcoin-cores-competition/">wrote a great
article</a> about the ecosystem of Bitcoin implementations. There are over
a dozen different Bitcoin compatible implementations, and even more
“competing network” implementations. This is the freedom of open
source — anyone who is dissatisfied with the efforts of the Bitcoin Core
project is free to start their own project. They can do so from scratch
or they can fork the Core software.</p>
</div>
<div class="paragraph">
<p>At time of writing, 96% of reachable Bitcoin nodes are running some
version of Bitcoin Core. Why is this the case? How can Bitcoin Core have
near-monopoly status over the network of nodes if the effort required to
switch to another software implementation is minimal? After all, many
other implementations provide RPC APIs that are compatible with, or at
least highly similar to Bitcoin Core.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/1-sAd4NmyP7LIdipEoRlw5pg.png" alt="image"></span></p>
</div>
<div class="paragraph">
<p>I believe that this is a result of Bitcoin Core being a focal point for
development. It has orders of magnitude more developer time and talent
backing it, which means that the code produced by the Bitcoin Core
project tends to be the most performant, robust, and secure. Node
operators don’t want to run the second best software when it comes to
managing money. Also, given that this is consensus software and the
Bitcoin protocol does not — and arguably can not — have a formal
specification because no one has the authority to write one, it’s
somewhat safer to use the focal point implementation because you’re more
likely to be bug-for-bug compatible with most of the rest of the
network. In this sense, the code of the development focal point is the
closest thing to a specification that exists.</p>
</div>
</div>
<div class="sect3">
<h4 id="_who_are_the_core_developers"><a class="anchor" href="#_who_are_the_core_developers"></a>Who Are the Core Developers?</h4>
<div class="paragraph">
<p>People who are unfamiliar with the
<a href="https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md">Bitcoin
Core development process</a> may look at the project from the outside and
consider Core to be a monolithic entity. This is far from the case!
There are frequent disagreements between Core contributors and even
<a href="https://github.com/bitcoin/bitcoin/pulls?utf8=%E2%9C%93&amp;q=is%3Aclosed+is%3Aunmerged+is%3Apr+author%3Alaanwj">the
most</a>
<a href="https://github.com/bitcoin/bitcoin/pulls?utf8=%E2%9C%93&amp;q=is%3Aclosed+is%3Aunmerged+is%3Apr+author%3Asipa+">prolific
contributors</a> have written plenty of code that has never been merged
into the project. If you read the guidelines for contributing you may
note that they are fairly loose — the process could be best described as
“https://tools.ietf.org/html/rfc7282[rough consensus].”</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Maintainers will take into consideration if a patch is in line with the
general principles of the project; meets the minimum standards for
inclusion; and will judge the general consensus of contributors.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Who are the Bitcoin Core maintainers? They are contributors who have
built up sufficient social capital within the project by making quality
contributions over a period of time. When the existing group of
maintainers believes that it would be prudent to extend the role to a
contributor who has exhibited competence, reliability, and motivation in
a certain area, they can grant commit access to that person’s GitHub
account. The lead maintainer role is for someone who has oversight over
all aspects of the project and is responsible for coordinating releases.
It has been voluntarily passed along over the years:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Satoshi Nakamoto: 1/3/09 -
<a href="https://sourceforge.net/p/bitcoin/mailman/message/27102906/">2/23/11</a></p>
</li>
<li>
<p><a href="https://medium.com/u/7032003d8001">Gavin Andresen</a>:
<a href="https://sourceforge.net/p/bitcoin/mailman/message/27102906/">2/23/11</a> -
<a href="https://bitcoinfoundation.org/bitcoin-core-maintainer-wladimir-van-der-laan/">4/7/14</a></p>
</li>
<li>
<p><a href="https://medium.com/u/5a1694f832c6">Wladimir</a> van der Laan:
<a href="https://bitcoinfoundation.org/bitcoin-core-maintainer-wladimir-van-der-laan/">4/7/14</a> — present</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Acting as a Bitcoin Core maintainer is often referred to as janitorial
work because maintainers don’t actually have the power to make decisions
that run contrary to the consensus of contributors or of the users.
However, the role can be quite taxing due to the extra attention from
the ecosystem at large. For example, Gregory Maxwell gave up his
maintainer role in 2017
<a href="https://www.reddit.com/r/Bitcoin/comments/3x7mrr/gmaxwell_unullc_no_longer_a_bitcoin_committer_on/cy29vkx/">for
personal reasons</a>, likely due to the public pressure he experienced
during the scaling debate.
<a href="https://laanwj.github.io/2016/05/06/hostility-scams-and-moving-forward.html">Wladimir
wrote a thoughtful post</a> about the stress of being a Core maintainer and
why it was appropriate to remove Gavin’s commit access, which upset a
lot of people.</p>
</div>
<div class="paragraph">
<p>Similarly, when <a href="https://medium.com/u/765aa39f1042">Jeff Garzik</a> was
removed from the GitHub organization, he and others were upset about it,
but he
<a href="https://www.reddit.com/r/Bitcoin/comments/6uec40/jeff_garzik_has_been_removed_from_the_bitcoin/">had
not contributed to Core in two years</a>. Leaving his GitHub account with
write access to the repository was providing no benefit to the
project — it was only creating a security risk and violated the
principle of least privilege to which Wladimir referred in his post.</p>
</div>
<div class="paragraph">
<p>Others may look at Core and believe it to be a technocracy or ivory
tower that makes it difficult for new entrants to join. But if you speak
to contributors, you’ll find that’s not the case. While only
<a href="https://bitcointalk.org/index.php?topic=1774750.0">a dozen people</a> have
had commit access over the years, hundreds of developers have made
contributions. I myself have made a few small contributions; while I
don’t consider myself a “Core developer” I <em>technically</em> am one. No one
can stop you from contributing!</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In 2011, as a high school student who didn&#8217;t understand what a pointer
was, the
<a href="https://twitter.com/bitcoincoreorg?ref_src=twsrc%5Etfw">@bitcoincoreorg</a>
developer community (especially people like Greg Maxwell,
<a href="https://twitter.com/pwuille?ref_src=twsrc%5Etfw">@pwuille</a>, etc) worked
with me to make my shitty patches worth merging and made it a great
environment to learn in.</p>
</div>
<div class="paragraph">
<p>— Matt Corallo (@TheBlueMatt)
<a href="https://twitter.com/TheBlueMatt/status/1064292104346771458?ref_src=twsrc%5Etfw">November
18, 2018</a></p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In 2016,
<a href="https://twitter.com/TheBlueMatt?ref_src=twsrc%5Etfw">@TheBlueMatt</a>
organised a residency at
<a href="https://twitter.com/ChaincodeLabs?ref_src=twsrc%5Etfw">@ChaincodeLabs</a>.
I&#8217;d been reading everything about Bitcoin I could lay my hands on but
hadn&#8217;t dared submit a PR. Matt, Alex and Suhas were extraordinarily
generous with their time in teaching us about Bitcoin and how to
contribute.</p>
</div>
<div class="paragraph">
<p>— John Newbery (@jfnewbery)
<a href="https://twitter.com/jfnewbery/status/1064301049534664707?ref_src=twsrc%5Etfw">November
18, 2018</a></p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I started making small commits to
<a href="https://twitter.com/bitcoincoreorg?ref_src=twsrc%5Etfw">@bitcoincoreorg</a>
and was in awe of the engagement on my PRs by
<a href="https://twitter.com/MarcoFalke?ref_src=twsrc%5Etfw">@MarcoFalke</a>
<a href="https://twitter.com/pwuille?ref_src=twsrc%5Etfw">@pwuille</a>
<a href="https://twitter.com/orionwl?ref_src=twsrc%5Etfw">@orionwl</a>
<a href="https://twitter.com/LukeDashjr?ref_src=twsrc%5Etfw">@LukeDashjr</a> and
<a href="https://twitter.com/jfnewbery?ref_src=twsrc%5Etfw">@jfnewbery</a> Such a
welcoming project!</p>
</div>
<div class="paragraph">
<p>— Jeff Rade ƒ´ (@jeffrade)
<a href="https://twitter.com/jeffrade/status/1064593787756965893?ref_src=twsrc%5Etfw">November
19, 2018</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>One of the most difficult things for people to wrap their mind around
seems to be that the focal point for Bitcoin development is <strong>not</strong> simply
the structure that is defined by the Bitcoin Core GitHub account. While
Bitcoin Core has some structure (it uses centralized communications
channels in order to coordinate), the project itself is not subject to
being controlled by any of its participants — even those who have
escalated privileges on the GitHub repository. While it is <em>technically</em>
possible for a maintainer-organized coup to hijack the GitHub
repository, censor dissenting developers, and perhaps even maintain the
brand name of “Bitcoin Core,” the result would be that Bitcoin Core
would stop being the development focal point. Developers who disagreed
with the actions of the maintainers would simply fork the code and shift
their work to a different repository over which the Bitcoin Core
maintainers had no administrative privileges.</p>
</div>
<div class="paragraph">
<p>Even absent a “coup” per se, if a controversial change did somehow make
it into Core, some developers would fork the software, remove the
controversial change, and make it available for users. You could argue
that this is exactly what happened when Amaury Sechet forked Bitcoin
Core and removed the Segregated Witness functionality to create Bitcoin
ABC. Alternatively, if Core rejects proposed changes that some people
want, developers can fork it and add those changes. This has happened
many times, such as when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://medium.com/u/3748c5d6e52c">Mike Hearn</a> forked Core to create
Bitcoin XT</p>
</li>
<li>
<p><a href="https://medium.com/u/430432e67872">Andrew Stone</a> forked Core to create
Bitcoin Unlimited</p>
</li>
<li>
<p><a href="https://medium.com/u/765aa39f1042">Jeff Garzik</a> forked Core to create
BTC1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Forking the code is easy. Shifting the focal point of Bitcoin
development is hard — you must convince contributors that their time is
better spent contributing to a different project.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I hold allegiance to no man, to no dev team in Bitcoin. My intention is
to run the code that I judge best protects my financial sovereignty.</p>
</div>
<div class="paragraph">
<p>— Jameson Lopp (@lopp)
<a href="https://twitter.com/lopp/status/843210083588816896?ref_src=twsrc%5Etfw">March
18, 2017</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>It’s also hard to convince many people that users do not blindly follow
Bitcoin Core’s changes — this may be a self reinforcing belief, because
if users don’t participate in the consensus process by staying aware of
their options, they are ceding some of their power to developers.
However, the power of the users was exercised during the UASF (User
Activated Soft Fork) movement of 2017. An anonymous Bitcoin developer
using the pseudonym <a href="https://medium.com/u/4f206fb261c6">shaolinfry</a>
proposed
<a href="https://github.com/bitcoin/bips/blob/master/bip-0148.mediawiki">BIP 148</a>,
which would force miners to activate Segregated Witness functionality at
a block height that would occur near August 1. However, BIP 148 proved
to be too controversial to be adopted by Bitcoin Core, so shaolinfry
forked Core and made “https://github.com/UASF/bitcoin[Bitcoin UASF]”
software available. This software implementation
<a href="https://www.buybitcoinworldwide.com/uasf/">gained a nontrivial amount of
traction</a> and
<a href="https://hackernoon.com/bip-148-uasf-first-year-anniversary-a-new-system-of-governance-223907ec298b">seemed
to create sufficient pressure</a> to convince miners to adopt
<a href="https://github.com/bitcoin/bips/blob/master/bip-0091.mediawiki">BIP 91</a>
to activate the fork before the BIP 148 deadline.</p>
</div>
<div class="paragraph">
<p>In my opinion the best Bitcoin Core contributors are those who practice
<a href="https://www.youtube.com/watch?v=ljqra3BcqWM">extreme ownership</a>. Case in
point — while <a href="https://medium.com/u/f172f16c0e36">John Newbery</a> did not
write the code that contained this particular consensus bug, he feels
responsible for not preventing it from being merged via careful review
and for not finding it later while writing test cases.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I am responsible for the CVE-2018-17144 bug. <a href="https://t.co/BrPVivM296" class="bare">https://t.co/BrPVivM296</a></p>
</div>
<div class="paragraph">
<p>— John Newbery (@jfnewbery)
<a href="https://twitter.com/jfnewbery/status/1044016889117192194?ref_src=twsrc%5Etfw">September
24, 2018</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>We are all Satoshi.</p>
</div>
<div class="paragraph">
<p>Video: <a href="https://youtu.be/DjYbsq3FXfM" class="bare">https://youtu.be/DjYbsq3FXfM</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_contributing_to_bitcoincore"><a class="anchor" href="#_contributing_to_bitcoincore"></a>Contributing to Bitcoin Core</h4>
<div class="paragraph">
<p>It can feel daunting to start contributing to Core, though there are
plenty of resources available to help aspiring developers. The
guidelines for contributing
<a href="https://bitcoincore.org/en/faq/contributing-code/">can be found here</a>
though you may wish to start off with
<a href="https://medium.com/u/4acb12744ff8">Jimmy Song</a>’s
<a href="https://bitcointechtalk.com/a-gentle-introduction-to-bitcoin-core-development-fdc95eaee6b8">Gentle
Introduction to Bitcoin Core Development</a>.</p>
</div>
<div class="paragraph">
<p>Core developer <a href="https://medium.com/u/8fcd91e98202">Eric Lombrozo</a> also
penned a piece about understanding how changes take place within the
Core repository -
"<a href="https://medium.com/@elombrozo/the-bitcoin-core-merge-process-74687a09d81d">The
Bitcoin Core Merge Process</a>."</p>
</div>
<div class="paragraph">
<p><a href="https://medium.com/u/17e9935afef1">Alex B.</a> wrote an excellent article
about the
<a href="https://medium.com/@bergealex4/the-tao-of-bitcoin-development-ff093c6155cd">philosophy
behind Bitcoin development</a> — anyone who wants to become a serious
contributor can save themselves a lot of time by reading this.</p>
</div>
<div class="paragraph">
<p>Newcomers may also be interested in joining the
<a href="https://bitcoin-core-review-club.github.io/">Bitcoin Core PR Review Club</a>
to see how code reviews are performed.</p>
</div>
<div class="paragraph">
<p>A specific example may be helpful — while writing this article I
encountered difficulties while trying to run the verify-commits.py
script on my machine in order to audit the integrity of the GitHub
commit history. In order to save future developers from having to deal
with these issues, I
<a href="https://github.com/bitcoin/bitcoin/pull/14809">opened a pull request to
improve the documentation</a>. As you can see from the PR history, 4
different developers chimed in with suggestions for how I could improve
my pull request. This ranged from using different wiki markup to a
simplified bash command to a new parameter that could be used in the
verify-commits.py script. I agreed that all of the suggestions made
sense, so I incorporated them into my code and pushed an updated version
for my pull request. At that point, the developers who were
participating in the review acknowledged that they found the PR to be
acceptable, and maintainer <a href="https://github.com/MarcoFalke">Marco Falke</a>
tagged it for inclusion in the 0.18 release. After several more days
went by with no objections from developers, the code was merged into
Core by maintainer Samuel Dobson.</p>
</div>
</div>
<div class="sect3">
<h4 id="_who_controlsbitcoin"><a class="anchor" href="#_who_controlsbitcoin"></a>Who Controls Bitcoin?</h4>
<div class="paragraph">
<p>As I’ve
<a href="http://www.coindesk.com/nobody-understands-bitcoin-thats-ok/">argued
extensively</a> over the years, it’s practically impossible to fully
comprehend Bitcoin as a system. The definition (control) of Bitcoin the
protocol is like the definition of a language. Languages emerge
spontaneously; the consensus over the meaning of words is organic rather
than dictated by dictionaries. Much as dictionaries describe the
phenomenon of a language rather than define it, so do Bitcoin
implementations describe the language of Bitcoin with code. No one is
forced to agree with the definition of a given word in a dictionary,
neither are they forced to agree with code in a given Bitcoin
implementation by running it.</p>
</div>
<div class="paragraph">
<p>Languages are not governed by democracy and neither is Bitcoin; while
you may hear people make references to miners, nodes, developers, or
users “voting” there is no such mechanism that can enable a majority
vote of any kind to coerce a minority of dissenters into accepting
changes with which they disagree. Bitcoin is anarchy — without rulers,
but not without rules. The rules are defined and enforced by individual
participants on the network.</p>
</div>
<div class="paragraph">
<p>While changes to the Bitcoin protocol itself are usually made via the
<a href="https://github.com/bitcoin/bips/blob/master/README.mediawiki">Bitcoin
Improvement Proposal</a> process, even this is only a recommended best
practice and no one can be forced to follow it. It is merely a more
formalized way of trying to guide a change through a process of peer
review and consensus building.</p>
</div>
<div class="paragraph">
<p>As difficult as this is to explain and understand, it is a crucial
aspect to Bitcoin’s antifragility — if there was a single point of
control, it would also be a single point of failure that would be
exploited by powerful entities that are threatened by Bitcoin’s success.
Ultimately, each node operator governs themselves by ensuring that no
one else on the network is breaking the rules to which they agree.
<a href="http://www.coindesk.com/bitcoins-security-model-deep-dive/">This security
model</a> is the foundation for Bitcoin’s bottom-up governance.</p>
</div>
<div class="paragraph">
<p>Video: <a href="https://youtu.be/_IMzSCSeM68" class="bare">https://youtu.be/_IMzSCSeM68</a></p>
</div>
<div class="paragraph">
<p>No one controls Bitcoin.</p>
</div>
<div class="paragraph">
<p>No one controls the focal point for Bitcoin development.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eric_lombrozo_the_bitcoin_core_merge_process"><a class="anchor" href="#_eric_lombrozo_the_bitcoin_core_merge_process"></a>7.3. Eric Lombrozo - The Bitcoin Core Merge Process</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://medium.com/@elombrozo/the-bitcoin-core-merge-process-74687a09d81d" class="bare">https://medium.com/@elombrozo/the-bitcoin-core-merge-process-74687a09d81d</a></p>
</li>
<li>
<p>Author: Eric Lombrozo</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>A major point of confusion, especially among people who have not worked
a lot on free open source software development, is how Bitcoin Core
makes changes to its code. I adapted a post I had previously made as a
response to another article since I believe this topic deserves its own
post.</p>
</div>
<div class="paragraph">
<p>Commit access, the ability to add new commits to the Bitcoin Core
codebase, is a maintenance role…making sure the repository doesn’t get
vandalized and that only commits that have wide support or are otherwise
no-brainers get merged. It is a misconception that only people with
commit access are able to make changes to code. Merging the changes is
merely the last step of a long process. People with commit access are
called maintainers.</p>
</div>
<div class="paragraph">
<p>If a maintainer were to start merging stuff irresponsibly, other
developers would either insist on revoking their commit access or would
fork the project to a separate repository and get other developers to
join that one instead where commit access can be reassigned however they
want.</p>
</div>
<div class="paragraph">
<p>Anyone can fork the codebase repository and make arbitrary changes to
their own repository. They can build a client from their own repository
and run that instead if they want. They can also make binary builds for
other people to run.</p>
</div>
<div class="paragraph">
<p>If someone wants to merge a change they’ve made in their own repository
into Bitcoin Core, they can submit a pull request. Once submitted,
anyone can review the changes and comment on them regardless of whether
or not they have commit access to Bitcoin Core itself.</p>
</div>
<div class="paragraph">
<p>Others can even clone the repository locally and compile and run the
program with the changes for themselves on their own machine, or make
additional modifications and submit them as proposals. These proposals
can also be discussed. These discussions often go on for many days,
sometimes even weeks or months (especially for security-critical or
consensus changes), with the original author taking suggestions from
peers and making changes and corrections.</p>
</div>
<div class="paragraph">
<p>Only once there are no more reasonable objections will a maintainer
merge the code.</p>
</div>
<div class="paragraph">
<p>Maintainers must pass through the exact same peer review process as
everyone else when submitting proposals. They must also fork the
codebase repository and make proposed changes to their own copy. They
must submit a pull request before merging any nontrivial change and have
it reviewed by others. Merging any nontrivial change without review is a
violation of the process and could result in the maintainer’s commit
access getting revoked.</p>
</div>
<div class="paragraph">
<p>Consensus changes go well beyond code changes. There are two basic kinds
of consensus changes: hard forks and soft forks. Hard forks result in a
chain split, where different nodes will end up on separate chains and
will see a different ledger, unless all nodes on the network are
updated. Soft forks do not result in a chain split as long as they are
ultimately supported by sufficient hashpower since that will ensure all
nodes ultimately converge on the chain with the most proof-of-work.</p>
</div>
<div class="paragraph">
<p>Despite one chain having more hashpower than the other at the time of a
fork, it can still be overtaken in hashpower later on. Hard forks and
soft forks can be further subdivided into different classes depending on
their behavior in these situations.</p>
</div>
<div class="paragraph">
<p>In order to make a consensus change, it is not only necessary to merge
the code into the repository — it is also necessary to get other people
on the network to run that code. And Bitcoin Core has, as a project,
generally been very conservative when it comes to these sorts of
changes. These changes require a deep understanding of not only the
protocol but of game theory and politics as well, particularly if a
change is likely to cause different players to have divergent interests.</p>
</div>
<div class="paragraph">
<p>Consensus changes that are likely to cause divergent interests are
almost always avoided. And ensuring that a consensus change will not
cause divergent interests is in general an extremely difficult problem
which even seasoned experts sometimes get wrong. Any introduction of an
incompatibility is liable to create divergent interests on the network
and is not to be taken lightly!</p>
</div>
</div>
<div class="sect2">
<h3 id="_zmnscpxj_who_am_i"><a class="anchor" href="#_zmnscpxj_who_am_i"></a>7.4. ZmnSCPxj - Who Am I?</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://zmnscpxj.github.io/about.html" class="bare">https://zmnscpxj.github.io/about.html</a></p>
</li>
<li>
<p>Author: ZmnSCPxj</p>
</li>
<li>
<p>Date copied: 2022-06-08</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>I am ZmnSCPxj, a randomly-generated Internet person. My pronouns are
he/him/his.</p>
</div>
<div class="paragraph">
<p>I understand that humans instinctively desire to know my identity.
However, I think my identity is largely immaterial, and prefer to be
judged by my work.</p>
</div>
<div class="paragraph">
<p>If you are wondering whether to donate or not, and wondering what my
cost of living or my income is, please understand that properly
speaking, you should donate to me based on the utility you find my
articles and my work on Bitcoin and the Lightning Network.</p>
</div>
<div class="sect3">
<h4 id="_a_short_rant_on_cost_of_living"><a class="anchor" href="#_a_short_rant_on_cost_of_living"></a>A Short Rant on Cost-of-Living</h4>
<div class="paragraph">
<p>The actual cost-of-living for all human beings is constant regardless of
location.</p>
</div>
<div class="paragraph">
<p>Places where it is pleasant to live due to weather, local governance,
availability of civilization, political stability, and so on, have
higher cost-of-living than places without such amenities. It then
follows that humans with low cost-of-living are still paying as if they
are in the place with maximum cost-of-living; they are simply paying by
suffering from a lack of such pleasantness in their lives.</p>
</div>
<div class="paragraph">
<p>Thus, if you are ever in a position to provide economic sustenance to
some human in compensation for the work they do, I implore you to
specifically ignore the cost-of-living of that human.</p>
</div>
<div class="paragraph">
<p>It is therefore quite appropriate that I should not have to reveal such
details in order to encourage or discourage you from donating or
otherwise supporting me.</p>
</div>
</div>
<div class="sect3">
<h4 id="_who_am_i_not"><a class="anchor" href="#_who_am_i_not"></a>Who Am I Not?</h4>
<div class="paragraph">
<p>I am <em>not</em> any of the following people:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tom Elvis Jedusor</p>
</li>
<li>
<p>Craig S. Wright</p>
</li>
<li>
<p>Luke Dash, Jr.</p>
</li>
<li>
<p>DJ Ertegun</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of note, is that there is no way to prove non-identity, only to prove
identity. Thus, you cannot verify that I am not any of the above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_accounts"><a class="anchor" href="#_accounts"></a>Accounts</h4>
<div class="paragraph">
<p>Below are various accounts I control:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Protonmail <a href="mailto:ZmnSCPxj%20atsign%20proton%20mail%20dotcom">ZmnSCPxj
atsign proton mail dotcom</a></p>
</li>
<li>
<p>Github <a href="https://github.com/ZmnSCPxj">ZmnSCPxj</a></p>
</li>
<li>
<p>Reddit <a href="https://reddit.com/u/ZmnSCPxj">/u/ZmnSCPxj</a></p>
</li>
<li>
<p>Bitcointalk
<a href="https://bitcointalk.org/index.php?action=profile;u=1815920">ZmnSCPxj</a></p>
</li>
<li>
<p>LightningWiki.net
<a href="https://lightningwiki.net/index.php/User:ZmnSCPxj">User:ZmnSCPxj</a></p>
</li>
<li>
<p>BitcoinHackers.org Mastodon
<a href="https://bitcoinhackers.org/@ZmnSCPxj">@ZmnSCPxj</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of note, is that a Twitter <a href="https://twitter.com/zmnscpxj">@ZmnSCPxj</a>
exists, but I do not control this account. So far (2019-04-03), as far
as I know, its controller has done nothing I would find objectionable,
so I presume it is a fan who simply protected this account on my behalf.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_coindesk_many_bitcoin_developers_are_choosing_to_use_pseudonyms_for_good_reason"><a class="anchor" href="#_coindesk_many_bitcoin_developers_are_choosing_to_use_pseudonyms_for_good_reason"></a>7.5. CoinDesk - Many Bitcoin Developers Are Choosing to Use Pseudonyms – For Good Reason</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.coindesk.com/markets/2020/06/29/many-bitcoin-developers-are-choosing-to-use-pseudonyms-for-good-reason/" class="bare">https://www.coindesk.com/markets/2020/06/29/many-bitcoin-developers-are-choosing-to-use-pseudonyms-for-good-reason/</a></p>
</li>
<li>
<p>Author: Alyssa Hertig</p>
</li>
<li>
<p>Date copied: 2022-06-08</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_whether_out_of_concern_for_personal_security_or_a_desire_to_preserve_privacy_many_bitcoin_developers_are_known_to_the_world_only_by_their_pseudonyms"><a class="anchor" href="#_whether_out_of_concern_for_personal_security_or_a_desire_to_preserve_privacy_many_bitcoin_developers_are_known_to_the_world_only_by_their_pseudonyms"></a>Whether out of concern for personal security or a desire to preserve privacy, many Bitcoin developers are known to the world only by their pseudonyms.</h4>
<div class="paragraph">
<p>By Alyssa Hertig</p>
</div>
<div class="paragraph">
<p>Jun 29, 2020 at 9:01 a.m. UTC</p>
</div>
<div class="paragraph">
<p>Updated Sep 14, 2021 at 8:57 a.m. UTC</p>
</div>
<div class="paragraph">
<p><em>"Here lies the</em> huge <em>irony in this discussion. Persistent pseudonyms
aren&#8217;t ways to hide who you are. They provide a way to be who you are.
You can finally talk about what you really believe; your real politics,
your real problems, your real sexuality, your real family, your real
self."</em><br>
<em>— Engineer</em>
<a href="https://web.archive.org/web/20111123160600/http://www.marrowbones.com/commons/technosocial/2011/07/on_pseudonymity_privacy_and_re.html" class="bare">https://web.archive.org/web/20111123160600/http://www.marrowbones.com/commons/technosocial/2011/07/on_pseudonymity_privacy_and_re.html</a><em class="<em>Kee
Hinckley</em>"> </em></p>
</div>
<div class="paragraph">
<p>Fiatjaf is a pseudonymous Bitcoin developer in the Lightning community
where he contributes to LNURL. He’s also working on Etleneum, his
"<a href="/tech/2020/06/12/why-this-dev-built-a-centralized-ethereum-on-top-of-bitcoins-lightning-network/">centralized
Ethereum</a>" app that uses the Lightning Network for faster and more
scalable <a href="/about/bitcoin/">bitcoin</a> payments. Like many other bitcoin
users, Fiatjaf doesn&#8217;t want to expose his real name to the whole world.
He worries his bitcoin software projects could make him and his family a
target for criminals. </p>
</div>
<div class="paragraph">
<p>As a resident of Brazil, where the crime rate is
<a href="https://en.wikipedia.org/wiki/Crime_in_Brazil">unusually high</a>, Fiatjaf
is particularly concerned for his safety. "I think in Brazil criminals
are greater than in other places," he said. </p>
</div>
<div class="paragraph">
<p>He also worries that if the price of bitcoin skyrockets, or "goes to the
moon," he could be painting a target on his back as a public figure in
the Bitcoin space.</p>
</div>
<div class="paragraph">
<p>"Local criminals might want to take my bitcoin. They&#8217;d see my name and
think, 'Oh this guy is a local guy, not using any special precautions.
He may be very rich because he&#8217;s using bitcoins.'" he said.</p>
</div>
<div class="paragraph">
<p>Though Fiatjaf doesn’t want to overreact to his safety concerns, he sees
the threat of criminal activity in Brazil as enough of a potential peril
to adopt a pseudonym as he carries out his work as a bitcoin developer. </p>
</div>
<div class="paragraph">
<p>Fiatjaf is part of a larger trend that isn&#8217;t openly talked about much.
He&#8217;s one of dozens of developers working in the Bitcoin sphere choosing
to conceal their real names. </p>
</div>
</div>
<div class="sect3">
<h4 id="_cypherpunk_roots_and_pseudonyms"><a class="anchor" href="#_cypherpunk_roots_and_pseudonyms"></a>Cypherpunk roots and pseudonyms</h4>
<div class="paragraph">
<p>This widespread pseudonymity makes sense seeing as Bitcoin&#8217;s culture
puts so much emphasis on privacy. </p>
</div>
<div class="paragraph">
<p>The great mystery of Bitcoin is no one knows the real identity of its
creator, who went by the moniker <a href="/people/satoshi-nakamoto/">Satoshi
Nakamoto</a>. He, she or they released the Bitcoin software in 2010, posted
on the Bitcoin forums regularly until 2011 and then disappeared.</p>
</div>
<div class="paragraph">
<p>Nakamoto&#8217;s pseudonym set the tone for other Bitcoin developers to use
fake names. </p>
</div>
<div class="paragraph">
<p>Also, privacy is a prevalent theme in Bitcoinland. The digital currency
was born out of the
<a href="/markets/2016/04/09/bitcoin-and-the-rise-of-the-cypherpunks/">cypherpunk
movement</a>, in which a loose worldwide group of cryptographers have
promoted digital privacy and security technologies since the 1990s in
hopes of bringing about positive social change.</p>
</div>
<div class="paragraph">
<p>"Being able to minimize what other people know about you is literally
the theme of the first paragraph of the Bitcoin white paper,"
pseudonymous bitcoin researcher 0xB10C noted.</p>
</div>
<div class="paragraph">
<p>To try to meet that very goal, many bitcoin developers have devoted
their research to improving Bitcoin&#8217;s privacy.</p>
</div>
<div class="paragraph">
<p>"Privacy should be a basic human right. As I am, in fact, a basic human
of indeterminate detail, I would like to exercise that right," said
pseudonymous Lightning developer ZmnSCPxj, who receives funding from
<a href="/markets/2019/12/11/square-crypto-bankrolls-star-lightning-developer-known-as-zmnscpxj/">Square
Crypto</a> to work on Bitcoin development. On his
<a href="https://zmnscpxj.github.io/about.html">website</a>, ZmnSCPxj describes
himself as a "randomly-generated Internet person."</p>
</div>
<div class="paragraph">
<p>ZmnSCPxj is one of the most frequent posters to the Lightning mailing
list, making several proposals (often related to improving privacy) and
responding to others' posts with criticism and other feedback.</p>
</div>
</div>
<div class="sect3">
<h4 id="_personal_protection"><a class="anchor" href="#_personal_protection"></a>Personal protection</h4>
<div class="paragraph">
<p>Similar to Fiatjaf, many developers choose to use pseudonyms out of an
abundance of caution.</p>
</div>
<div class="paragraph">
<p>Samourai Wallet, founded in 2015, allows users to make more private
bitcoin transactions. The two co-founders of the wallet chose pseudonyms
when they launched the wallet partly for "personal protection" reasons.</p>
</div>
<div class="paragraph">
<p>"What we&#8217;re doing is going to offend <strong>someone</strong>," SW told CoinDesk. "That
could be from competitors or angry people online who feel that we&#8217;re a
threat, to — whoever." </p>
</div>
<div class="paragraph">
<p>Other developers worry that governments won&#8217;t like what they&#8217;re up to,
fearing persecution or retribution for their involvement in an
independent monetary system that challenges the status quo. While many
governments have welcomed Bitcoin and blockchain technology as
innovations,
<a href="https://www.visualcapitalist.com/mapped-cryptocurrency-regulations-around-the-world">others</a>
have taken a critical view of the new technology.</p>
</div>
<div class="paragraph">
<p>"There is always a possibility of Bitcoin becoming unpopular with some
government, thus it is always safer to simply avoid possible conflicts
with local governments by making it unclear who exactly I am," ZmnSCPxj
told CoinDesk.</p>
</div>
<div class="paragraph">
<p>"Alternately, it may become <em>too</em> popular, and the government might want
to acquire more of it by other means," he added.</p>
</div>
<div class="paragraph">
<p>Not everyone sees the government as a threat, however.</p>
</div>
<div class="paragraph">
<p>"I&#8217;m not paranoid enough to be afraid of the government. Google and
Facebook already know my name and they can easily link my name with my
pseudonym. So I&#8217;m not targeting them," Fiatjaf said.</p>
</div>
</div>
<div class="sect3">
<h4 id="_building_a_standalone_pseudonymous_reputation"><a class="anchor" href="#_building_a_standalone_pseudonymous_reputation"></a>Building a standalone pseudonymous reputation</h4>
<div class="paragraph">
<p>Developers gave other reasons beyond feeling threatened. For some, it’s
a simple matter of keeping their private lives private.</p>
</div>
<div class="paragraph">
<p>"When I started working on Bitcoin I didn&#8217;t see the need for having my
'real name' attached to my work. I was working for a company totally
unrelated to Bitcoin. They didn&#8217;t really need to know what I do in my
free time. But it wouldn&#8217;t have been a problem if they knew," 0xB10C
told CoinDesk.</p>
</div>
<div class="paragraph">
<p>Now a
<a href="https://twitter.com/bergealex4/status/1271832445747433472">well-respected
developer</a> in the space, ZmnSCPxj was initially worried about
embarrassing himself when he started submitting his ideas.</p>
</div>
<div class="paragraph">
<p>"My initial reason [for using a pseudonym] was simply that I was
concerned [about] making a massive mistake; thus ZmnSCPxj was originally
intended to be a disposable pseudonym that could be abandoned in such a
case. However it seems to have garnered a mostly positive reputation, so
I have retained it," he told CoinDesk.</p>
</div>
<div class="paragraph">
<p>Conversely, SW and TDevD wanted to use pseudonyms as they launched
Samourai Wallet because the duo was already known in the Bitcoin world
by their real names before they created their privacy-focused bitcoin
wallet. </p>
</div>
<div class="paragraph">
<p>"We didn&#8217;t want it to be about personalities or anything. A lot of us
are known inside of the space, outside of the Samourai project. And we
didn&#8217;t want it to be about our personal reputation. We wanted the
project to stand on its own merits," SW said.</p>
</div>
</div>
<div class="sect3">
<h4 id="_freedom_to_be_who_you_are"><a class="anchor" href="#_freedom_to_be_who_you_are"></a>Freedom to be who you are</h4>
<div class="paragraph">
<p>For others, anonymity provides a sort of end run around exclusion in an
industry that tends to be dominated by a typical demographic. In such
cases, pseudonyms truly do provide a way to “be who you are.”</p>
</div>
<div class="paragraph">
<p>"[M]inorities of all kinds (economic, racial, communal, gender, etc) may
not be confident in exposing identities easily traceable to their
person, especially in contributing to communities where that minority is
underrepresented,"  ZmnSCPxj said. </p>
</div>
<div class="paragraph">
<p>"It is important to realize that the Earth is large and conditions in
various points on it can vary tremendously, even in local social,
governmental, or economic states, and habits and attitudes developed as
protection against prejudices of local communities may prevent
participation with the real identity even in online communities. But
participation in online communities may be enabled by pseudonyms.”</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwel_bitcoin_selection_cryptography"><a class="anchor" href="#_gregory_maxwel_bitcoin_selection_cryptography"></a>7.6. Gregory Maxwel - Bitcoin Selection Cryptography</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/greg-maxwell/2015-04-29-gmaxwell-bitcoin-selection-cryptography/" class="bare">https://btctranscripts.com/greg-maxwell/2015-04-29-gmaxwell-bitcoin-selection-cryptography/</a></p>
</li>
<li>
<p>Author: Gregory Maxwell, transcribed by Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
<li>
<p>Slides: <a href="https://people.xiph.org/~greg/gmaxwell_sfbitcoin_2015_04_20.pdf" class="bare">https://people.xiph.org/~greg/gmaxwell_sfbitcoin_2015_04_20.pdf</a></p>
</li>
<li>
<p>Video: <a href="https://www.youtube.com/watch?v=Gs9lJTRZCDc" class="bare">https://www.youtube.com/watch?v=Gs9lJTRZCDc</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>A deep dive with Bitcoin Core developer Greg Maxwell</strong></p>
</div>
<div class="paragraph">
<p>The blueberry muffins are a lie. But instead I got some other things to
present about. My name is Greg Maxwell. I am one of the committers to
Bitcoin Core. I am one of the five people with commit access. I have
been working on Bitcoin since 2011. Came into Bitcoin through assorted
paths as has everyone else.</p>
</div>
<div class="paragraph">
<p>Back in around maybe 2004 I was involved very early in the creation of
Wikipedia and system administration for it. I had made some very
vigorous arguments in a very contentious political debate. People argued
that there should be no Wikimedia Foundation to act as a non-profit to
run Wikipedia, but instead it should be completely decentralized. Having
worked with cryptosystems before, I was an early user of Hal’s RPOW
system. My position was that decentralized consensus was impossible. I
presented this wanky sort of physically-oriented argument about why, in
the broad sense, a system with no admissions control could not achieve
guaranteed decentralized consensus.</p>
</div>
<div class="paragraph">
<p>I spent some years working for a municipality building out broadband in
an area that had none. I spent 8 years working for Juniper Networks
deploying some of the largest networks in the world. I spent a number of
years working at Mozilla. I was working on my secondary passion for
about 15 years, which was working on royalty-free multimedia codecs. I
am one of the developers for the Vorbis format and the Opus format. I
worked on Theora and some other things there. Part of my motivation in
that area is taking this zillion dollar industry of codec licensing that
inhibits people from publishing on the internet…</p>
</div>
<div class="paragraph">
<p>I didn’t look to see how Bitcoin worked because I had already proven it
(strong decentralized consensus) to be
<a href="https://www.reddit.com/r/Bitcoin/comments/38beya/gregory_maxwell_quote_presented_without_comment/crtv55u/">impossible</a>.
I downloaded it but didn’t look into it. I was surprised a year later to
find out that it still existed. I read the source code, it was only
about 3k lines of source code. It had achieved something not quite as
strong as I was looking for but still close, so I thought maybe bitcoin
could actually be something. It had some cool attributes. It was a
cryptosystem, and these were areas that I were already interested in. It
involved very sophisticated concerns about software security. It could
radically change the face of finance in the world. It could have an
effect on trillions of dollars. I am always looking for areas for where
I can apply myself with lots of leverage. Where I write a little bit of
code, and there’s big impacts.</p>
</div>
<div class="paragraph">
<p>More recently, with a number of other people in the bitcoin ecosystem, I
founded Blockstream, a company working on serious bitcoin projects down
in the weeds. This was a hard decision for me. I wanted to keep the coin
in the box. It calls on many different types of interests and kinds of
people. I am excited to come to events and see people with radically
different views from myself. That’s necessary.</p>
</div>
<div class="paragraph">
<p>I put in maybe 100x the amount of hours spent on review and analysis
than I do on actual coding. My work is often work that can make others’
work more effective. I do some coding from time to time, though.</p>
</div>
<div class="paragraph">
<p>A lot of the things that interest me the most is in the minutia where I
have to explain the explanation for the explanation. It is hard to pick
topics to talk about. I thought I would cover three general areas. I
want to give an update on things going on in Bitcoin Core right now.
Then there is a prospective topic, things we are looking around in the
future. And then one that is more philosophical.</p>
</div>
<div class="sect3">
<h4 id="_privacy_2"><a class="anchor" href="#_privacy_2"></a>Privacy</h4>
<div class="paragraph">
<p>So, on privacy. This has surprised me in the past but not anymore. Some
people say “privacy, what’s that for?” Well, privacy is a central
characteristic of money. Sometimes we do not appreciate the importance
of privacy in money. Cash is inherently private. Bank accounts are not
private to the bank or regulators, but they are private to the rest of
the world. The idea of a public ledger is totally unlike the kinds of
money we have used in the past.</p>
</div>
<div class="paragraph">
<p>You can think about this very pragmatically. If you are using a public
ledger, then your competitors know your customers, suppliers, sales
volumes, amounts, prices, etc. This causes leverage imbalances in
contracts. So your income goes up, and now your landlord tells you to
give him more. It creates a breakdown of personal harmony when your
inlaws and neighbors are looking at your purchases. If your conman knows
you just bought something, he can call you up and threaten you. If
someone sees that you have a lot of money, then they know to target you.</p>
</div>
<div class="paragraph">
<p>Another thing that privacy is important for is that it goes hand in hand
with fungibility. One bitcoin is the same as every other. If we break
fungibility… fungibility is like the definitional requirement. If
fungibility is broken, then it is unsafe to accept bitcoin from someone.
If you have a central blacklist, then why bother with bitcoin anyway?
This has to be traded off with other considerations. You can build
transparency into bitcoin. You can layer accountability and privacy on
top of a private system. But trying the other direction is much harder
or impossible.</p>
</div>
<div class="paragraph">
<p>You can build provable transparency in a way that you couldn’t have done
before. You can layer accountability and privacy on top of a private
system. Giving people privacy on a system that is not private, is much
harder.</p>
</div>
<div class="paragraph">
<p>This goes much further beyond the practical day-to-day privacy against
your neighbors. There are significant civil rights concerns here. To
effectively seek political power, you must be able to spend money. Some
political forces stop others from spending money. This is not a radical
political view. Money is important to our ability to speak according to
multiple Supreme Court justices.</p>
</div>
</div>
<div class="sect3">
<h4 id="_why_privacy_in_bitcoin_core"><a class="anchor" href="#_why_privacy_in_bitcoin_core"></a>Why privacy in Bitcoin Core?</h4>
<div class="paragraph">
<p>I personally view Bitcoin Core as a best practices implementation. We’re
not necessarily trying to be the most risky. We are taking a serious
approach to building software that is very high quality. Another aspect
is that Bitcoin Core is a full-node. It’s a system that autonomously
validates all information without trusting anyone. One of the things
that occurred, and this surprised me, I have been asked by companies and
researchers to not fix privacy bugs. I think this is short-sighted for
all of the reasons I just said. In Bitcoin Core, we would not
intentionally add a privacy-harming misfeature. A missing fix is
invisible, though, and needs to be avoided. Not fixing a bug is
equivalent or even worse. A missing fix is invisible. It should only
serve the interest of its users.</p>
</div>
<div class="paragraph">
<p>There has been recent public drama about surveillance attacks in the
bitcoin network. Passive surveillance has existed since at least the
beginning near 2011. This has been going on for a long time. People run
nodes that serve to deanonymize users by trying to trace transactions in
the network. Recently there have been farms (“sybil nodes”) spun up
where nodes try to gather more traffic so that they can analyze it
better. Bitcoin Core has basic protections, it wont connect to the same
netgroup multiple times. Those protections are only basic. Any weakness
in this domain encourages wasting network resources. When people try to
connect to everyone, that waste resources. If we make the system more
private, there’s no incentive to connect to everyone and waste capacity.</p>
</div>
<div class="paragraph">
<p>So one long-standing advice is to run Bitcoin Core over tor. Tor is
great, it’s not perfect because it’s weak against state actors, it’s
vulnerable to denial-of-service. It’s usually strictly better than not
using tor. There has been some discussion around some of the sybil
attacks like, they are unlawful because they violate the Computer Fraud
and Abuse act or that they violate various e-privacy directives. And
that may be true, I have no opinion on that. But in the space of
bitcoin, we have to defend against people who don’t care about their
public image and they don’t care about the law or what the law says. And
so since we have to do that, our most powerful tool to defend against
that is technology. So if people want to pursue other avenues to make
people behave, that’s fine, but my approach is to ask how can we improve
the technology.</p>
</div>
<div class="paragraph">
<p>So one of the areas we have been looking to improve is with respect to
“eclipse attacks”. This is where people try to get your node to only
connect to them or mostly connect to them by sybil attacking you.
Bitcoin Core keeps a table about peers and nodes you can connect to. It
is hard to gain extra space in that table. There have been some recent
simulation results that reveal that it wasn’t quite as good as we
expected. There were some places where randomization in the algorithm
actually allowed an attacker to gain a greater concentration. So there
is a paper recently published on this, and prior to the publication of
the paper, the authors worked with us and we implemented a half-dozen
set of fixes. We expanded the tables, didn’t promiscuously take up extra
advertisements. These fixes will all be available in 0.10.1 which should
be available in a couple days.</p>
</div>
<div class="paragraph">
<p>In general, people trying to connect to a lot of the network has been a
long-term problem. There are some things discussed and in the works to
dissuade this activity. We might have a proof-of-work system where you
can get prioritized connections to the network by doing proof-of-work.
So it’s more expensive to use up capacity on the network. I proposed a
proof-of-work scheme like this. Sergio has another similar scheme. They
are all kind of complicated and don’t completely solve the problem. To
clearly solve the problem, you would deploy it right away. The
combination is messy. It’s still in the research phase.</p>
</div>
<div class="paragraph">
<p>I have been working on a tool that you can run alongside Bitcoin Core
where you have peers that you trust (your friends, whatever) and they
can compare notes without telling each other who they are connected to,
but you would be able to determine who is connecting too much to the
network. At the moment people are doing this manually to determine who
to ban.</p>
</div>
<div class="paragraph">
<p>There are a number of other network-level improvements that impact
privacy. There was an issue in Bitcoin Core today where your connections
out through Tor would go through the same circuits as your browser going
through tor which is not good. There is an information leak where
someone can send addressed messages to you, and then there’s timestamps,
and this allows them to learn more about the network topology and run
partition attacks. They can also see the graph path of how the
transaction propagated through the network. We have also been working on
a way to do batched transactions as one of the ways to increase privacy.</p>
</div>
<div class="sect4">
<h5 id="_wallet_relay_improvement"><a class="anchor" href="#_wallet_relay_improvement"></a>wallet relay improvement</h5>
<div class="paragraph">
<p>One of the features that has gone into the 0.11 branch right now is this
wallet relay improvement. Right now with Bitcoin Core, receiving
transactions is completely private. You don’t send anything to identify
that. When you send, someone could use that to identify what you’re
doing or what your transactions are. If your transaction doesn’t
immediately get into the blockchain, you re-broadcast it periodically. I
think that some people have used this to trace users in the network.
There is a new flag in 0.11 that turns off wallet relaying. Manually
sending transactions is not very useful, but it means that someone can
create a program beside Bitcoin Core that could use another method to
relay the transaction. So it could use a high-latency network like
MixMaster or BitMessage. And the cool thing about it is that it could be
separate. You don’t have to learn about developing Bitcoin Core, you can
just run it alongside Bitcoin Core and write it yourself. We might pull
in useful contributions there into Bitcoin Core.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_a_full_node"><a class="anchor" href="#_running_a_full_node"></a>Running a full node</h4>
<div class="paragraph">
<p>Another area that we are working on in privacy has privacy implications.
We have been working on making it easier for users to run full nodes.
Full nodes have fundamental privacy advantages. The SPV clients like
electrum are fundamentally weak from a privacy perspective. The bloom
filters uniquely identify the wallet. It is fundamentally weak. You
might think you’re private, but you’re not. Electrum sends the server a
list of addresses, and anyone can run an electrum server. You can easily
spy on the electrum network. It’s necessary that we have light nodes.
It’s the only way you’re going to run bitcoin on a cell phone right now.
If we make it easier for more people to run full nodes, then the world
will be better for it. Right now to run a full node you need 30+ GB of
disk space. There’s also some behaviors in Bitcoin Core around bandwidth
bursting that might not play well with consume routers. Sometimes
there’s buffer bloat and then the router will have lots of latency.</p>
</div>
<div class="sect4">
<h5 id="_pruning"><a class="anchor" href="#_pruning"></a>Pruning</h5>
<div class="paragraph">
<p>In bitcoin 0.11, we have pruning. This allows you to run a full node
that is fully private but it does not contain the full blockchain. You
can have just a gigabyte of space. We have some plans for automatic
bandwidth ratelimiting. The main question I have here is whether there’s
a way to make this self-tuning. I’m not sure if I am going to be able to
do that.</p>
</div>
</div>
<div class="sect4">
<h5 id="_coin_selection"><a class="anchor" href="#_coin_selection"></a>coin selection</h5>
<div class="paragraph">
<p>There are still things that we would like to see in privacy. The wallet
and coin selection algorithm is fundamentally bad for privacy. It is
incompatible with address reuse. If you reuse addresses at all, you blow
up your privacy. The wallet just needs to try to avoid linking
addresses. We have code in the code base that traces the links, but we
don’t have enough testing for the wallet infrastructure right now and
it’s hard for developers to be confident that they aren’t breaking
everything.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_coinjoins"><a class="anchor" href="#_coinjoins"></a>Coinjoins</h4>
<div class="paragraph">
<p>There has been a ton of development around coinjoin, and this is a
casual privacy improvement in transactions that I described a year and a
half ago. There’s no implementation of coinjoin in Bitcoin Core yet, but
there are many out on the network. There’s some research results that
show that there’s a significant number of coinjoin transactions
happening which I am happy to see. The design for coinjoin systems is
still being fleshed out by some people, but it’s still not as mature as
I would like to see before including an implementation of that in
Bitcoin Core.</p>
</div>
<div class="sect4">
<h5 id="_reusable_adddresses"><a class="anchor" href="#_reusable_adddresses"></a>Reusable adddresses</h5>
<div class="paragraph">
<p>There’s also this thing that’s called “stealth addresses”. And I really
hate the name, it’s intentionally “edgy” and it’s really doing something
that’s quite pedestrian. It has been promoted by the Dark Wallet folks.
I like to call it “reusable addresses”. It’s a thing that we have been
talking about for years, we were calling it “ECDH addresses” previously.
The notion of these stealth addresses is that you give someone an
address, and every time they reuse the address, there’s sort of a
randomly generated different address that appears in the blockchain so
those transactions are not linked together. There’s an existing proposal
for this, it’s basically unmaintained, it gets a bunch of things wrong.
And the basic design right now makes SPV privacy problems even worse. So
it’s very difficult to deploy a new bitcoin address style on the bitcoin
network. We created P2SH back in the beginning of 2012 and it took years
before wallets started to support it. So we want to act very
intentionally with this to make sure that we implement the right spec
and make sure we do not have people gyrating on different approaches
here.</p>
</div>
</div>
<div class="sect4">
<h5 id="_multisignature"><a class="anchor" href="#_multisignature"></a>multisignature</h5>
<div class="paragraph">
<p>Alright, so, that’s some of the things going on with privacy in Bitcoin
Core. Now I am going to switch gears and talk a little more about
forward-facing technologies. So when we deploy new technology for the
bitcoin network, we have to think far into the future for a number of
reasons. For one, it takes a lot of work to deploy a new system or new
tool to a big distributed network. Also we need to make sure that our
changes do not interfere with other future changes. So I have been
giving this a lot of thought with a number of other people about what
kinds of cool things that we could do to make multisignature more
powerful in the future. We have come up with some criteria about things
that are good to have in multisignature schemes.</p>
</div>
<div class="paragraph">
<p>I think everyone here is already familiar with multisignature. It’s
really solving a fundamental problem, that in bitcoin there is no other
recourse than the network. If someone steals your bitcoins, your
bitcoins are stolen. You can’t go get a clawback. And also, computer
security is a joke. There’s no trustworthy devices. Everything has
malware. Everything is remotely controllable by someone. The idea with
multisignature is hey well maybe if we take multiple devices they won’t
all be compromised at once, and we could get some actual security. You
could define an access policy, such as these coins with these spents and
if A and B agree. Or these coins can be spent only if these two parties
agree, or any two out of three parties as defined, and so on. Multisig
has been in bitcoin since the very first day. We added some features to
make it more accessible with P2SH. That took years to get deployed. It’s
important to think about this to get the pipeline going.</p>
</div>
<div class="paragraph">
<p>One of the problems with multisig today is that it’s costly. If you use
2-of-3 today, it increases your transaction sizes by a factor of 2.5
roughly. And that means 2.5x transaction fees and it means a reduction
in total network scalability. And that also has a direct impact on the
decentralization of the network because the more expensive it is to run
nodes on the system, the less people will run them, and the more
centralized the system becomes. So we want to have a good handle on
this. The bigger your multisig, the more your cost is. And so there’s a
contention where your security says use multisig policy, but
practicality says no you’re not going to do that. It would be nice to
improve that. And we can improve it.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_schnorr"><a class="anchor" href="#_schnorr"></a>Schnorr</h4>
<div class="paragraph">
<p>So I want to talk about some cryptosystem background stuff to let you
understand how we can improve this. There is an alternative to ECDSA
called Schnorr. And Schnorr is older than ECDSA and it’s simpler, more
straightforward, and it has robust security proofs and it’s a little bit
faster as well. But Schnorr was patented, and as we have seen in the
history of cryptography, patenting is poison. Any patented cryptosystem
sees virtually no deployment at all. People would rather be insecure
than deploy a patented cryptosystem. And of course, patenting is
actively incompatible with decentralization because the patent holder
owns the technology. So in any case, the NSA came up with a nice
workaround to the Schnorr patent. ECDSA is very similar to it, but not
algebraically equivalent. And the world has deployed ECDSA, but Schnorr
still exists and has lots of academic work happening on it. One of the
cool things about Schnorr is that it can do multisignature in a very
straightforward and scalable way. It’s sort of like.. Schnorr
multisignature works the way that an idiot would tell you it works even
if they knew nothing about cryptography. So the way it works is that if
you want to have a 2-of-2 signature with two parties, and you add
together the two pubkeys and to get the 2-of-2 signature you add
together their signatures, and that’s a 2-of-2 signature in Schnorr. And
there are some details for actually implementing it, but that’s the
basic idea. And it just works. And it gives you a 2-of-2 signature. Not
only does it give you a 2-of-2 signature, but this Schnorr scheme can be
extended to give you an arbitrary threshold. Actually arbitrary cascade
of thresholds, an arbitrary monotone linear function. You can get any
policy you want. You can’t distinguish it from 1-of-1, it’s the size of
1-of-1, it scales like 1-of-1. Awesome, efficiency solved.</p>
</div>
<div class="paragraph">
<p>Pieter and Andrew Poelstra went to started to implement this. Pieter
started with a Schnorr verifier and then Andrew went to make a
key-sharing tool to do thresholds. We realized that in order to make a
threshold Schnorr key, the signers have to collaborate to generate the
pubkey. You can’t derive a threshold key, the designers have to
interact. If the threshold is big, they actually have to interact a
whole lot. That’s a little problematic. We have seen in the bitcoin
ecosystem that there are a lot of cool things you can do with Script,
but if you need a complex state machine to … then people don’t build the
client or software to use the scheme. So that’s sort of fundamentally
worse than what we have today, even though it’s more efficient. What
other criteria should we be thinking about when selecting or creating a
signature system?</p>
</div>
<div class="paragraph">
<p>One of them is accountability, or so I thought. This is where in the
bitcoin multisig system today, you can see who signed a transaction.
When there’s a 2-of-3 signature in bitcoin today, using P2SH, you can
see who signed a transaction. This is actually kind of important because
what if one of these 2-of-3 signatures is applied to a transaction you
did not authorize? You want to know. And not only do you want to know,
you want to be able to prove to the world that they did it, you might
want to sue them, you might want to discredit them. You want to
communicate about this. This is a useful property for a multisignature
scheme to have. The Schnorr signature scheme does not have this, you
can’t tell which of the signatures signed because it looks exactly like
a 1-of-1 signature. So this is a criteria that would be useful to have.</p>
</div>
<div class="paragraph">
<p>Another useful property of a signature scheme is usability. Many of the
multisignature schemes require round-trips between the participants. In
the bitcoin multisignature scheme today, you can send a transaction to
the first signer, they sign it and then send it to the second person to
sign it, and they can do this all the way to the end and then put it in
the blockchain and you’re done. No roundtrips. With n-of-m Schnorr you
can basically do that. You need one round-trip to establish the knowns
which you can do in advance. But you have to have lots and lots of
round-trips to establish the threshold. There are some other schemes
that require many rounds during signing. You would have to go to and
from the safe during signing, basically, to complete your transaction.
Nobody is going to use that. And building the software to support that
and teaching people how to use that would be a real barrier. So
usability is one of the other constraints we have to worry about.</p>
</div>
<div class="paragraph">
<p>Another one is privacy. I talked before about why privacy is important.
In the context of multisignature, privacy is useful because if an
attacker knows your policy, he knows what to target. If he sees that you
are 2-of-3, then he has more information about what to look for which
may lead to him kidnapping specific necessary people to coerce them into
signing or stealing their private keys. Maybe it’s 8 people he has to go
and kidnap, and that’s a different tradeoff. If you are using an odd
policy, then people can trace your transactions which has commercial
implications as I mentioned earlier. Seems like privacy may be
incompatible with accountability, but it’s not true. Accountability
means that the participants and the people they designate need to know
what’s going on in the transaction, and privacy on the other hand is a
statement about third-parties. So this Schnorr signature stuff has great
privacy. Nobody can tell what the policy is, except for the
participants. But it has worse accountability. And bitcoin today, has
great accountability but very poor privacy.</p>
</div>
<div class="paragraph">
<p>So there’s some papers recently about threshold ECDSA. And this is fancy
cryptographic techniques to do the same stuff as the Schnorr
multisignature, but using the existing bitcoin infrastructure that has
already been deployed today. This scheme has a limitation. It fails on
usability. Also like Schnorr multisignatures they have no
accountability. But it works in theory today, already. There’s no
implementations right now that don’t require a trusted dealer. But this
may be okay for situations where you don’t care about those
implications. Now I have to say that the first version of the paper of
this said that you could do this without a trusted dealer, and I argued
with the authors and they eventually convinced me that yes we could
really do that. And then they retracted their paper and said no, you
really need a trusted dealer to generate the keys. They have since gone
back and come up with a scheme that I believe, without their convincing,
will work without a trusted dealer but no one has implemented it yet. I
am not going to talk further about this. It may be interesting, but it’s
not the long-term interesting stuff.</p>
</div>
<div class="paragraph">
<p>So I want to talk about a couple of schemes that I have been working on
and coming up with that give different mixes of these usage criteria.
One I call TREECHECKSIG. And we we start with the observation that
n-of-n all-sign Schnorr multisignature meets the criteria of it’s
efficient and it doesn’t require a bunch of roundtrips, and it’s
actually completely attemptable because if they all signed, then they
all signed. A larger threshold like a 2-of-3 signature… could be
satisfied by any of 3 2-of-2s. So you can enumerate all of the possible
satisfactions for the thresholds, and there are M-choose-N of them, and
you can build a hash tree over them, like we use for SPV proofs in
bitcoin, and then in your signature you can prove to the network that
this pubkey is from this set of pubkeys and you provide just the N-of-N
signature. Now this is interesting because it scales fairly well, it has
improved efficiency although not the same efficiency as 1-of-1, it’s
completely accountable, and the parties know who signed. If you
randomize the keys in it, the only thing that someone can learn is the
size of the upper bound of the threshold and it’s relatively cheap to
add one hash and double the size. So privacy is pretty good too. The
verification efficiency is great, it’s basically constant time to
verify, it’s basically checking a signature and then some hash
verifications. The real problem with this scheme is that if you want to
talk about a big threshold, like more than 20 participants, the tree
becomes so large that you can’t compute the pubkey. Now the network
doesn’t have to do this, but the participants do. But this becomes
impractical quite quickly because of this binomial blowup.</p>
</div>
<div class="paragraph">
<p>MULTICHECKSIG was a idea that was trying to fix this. Instead of
building this big hash tree where you precompute all of the satisfying
combinations, why not have the signer show the network all of the M
pubkeys that are participating, and then have a verifier compute the
N-of-N? So I can take the pubkeys and the verifier on the network, and
say okay this set is signing, the verifier can add up the pubkeys, and
then provide a signature for that. This is good accountability, but it’s
not private because the network can see who is signing. And it works
with one pass so it’s usable. The size isn’t great, it’s always larger
than the tree version, even though that tree version has that binomial
blowup in it. Verification is fast, and it has an okay set of tradeoffs.</p>
</div>
<div class="paragraph">
<p>And then taking from this idea, I thought well could we do better. So I
came up with this notion of POLYCHECKSIG where the idea is to take this
MULTICHECKSIG and instead of revealing the pubkeys of the participants
in the signature, can we reveal a linear formula of pubkeys in our
signature, and then ask the verifier to do some linear formula on our
pubkeys to compute the keys to be verified. So I can show how this works
concretely. Say we want to do a 3-of-4. So 3 people, 1 not signing. We
need to compute an M-of-N pubkey that has left out one participant. So
we make our two pubkeys, it’s the sum of the participants. And then we
tell the network another public value, which is the sum of the
participant A plus two times the sum of participant B’s key plus three
times participant C’s key and plus four times participant D’s key. So if
you know how to sign with participant A, then you can be fine with 8
times A or any other constant, it’s just multiplying a constant. Then
you can ask the network, hey we want to do this signature and we don’t
want C to participate. The network would compute a new pubkey (here on
the slide denoted P sub V). If you write this out, this value is the
same as .. there’s no C term. It canceled out. This can be extended by
adding quadratic and cubic points. You can cancel out an arbitrary
number of values. You can have a threshold.. M - N plus 1 is the
scaling. You can send these values to the network and encode them in an
unbalanced hash tree, so you only have to reveal to the network just as
many as you’re going to cancel. And what that means is that you might
have 50 of 100 signature, but if all 100 participants are available, you
compute that as a 100-of-100, and you reveal only the first term of the
polynomial, and then you provide that 100-of-100 signature, and your
transaction looks like a 1-of-1. And so you get perfect efficiency in
the case where all of your cosigners were available. And perfect privacy
in that case because you revealed nothing about your actual policy. If
you need to reveal more people because some signers were offline, you
can do that and you leak a little bit about your policy.</p>
</div>
<div class="paragraph">
<p>I mentioned in the list of features, composable. Composable is this
notion is that it should be possible for you to have your own policy and
you have your own policy, and neither of you should care about what your
own policy is. I should be able to create a policy of your policy
without knowing the details. You should be able to use 2-of-3, and the
other member should be able to use 3-of-5 or whatever. I should be able
to make a 2-of-2 of you. And I shouldn’t have to care. These schemes
themselves do not do anything for composability directly. But we can
overlay a higher level higher scheme that achieves composability and
what we found when exploring this is that if the higher-level scheme is
only able to express a monotone boolean function, that is to say
signatures where someone extra-signing will never make your signature
untrue, then it is quite easy to write software to handle unknown parts.
You can write software that will sign parts that it knows, and not worry
about the rest. So we think that will make, if we overlay a scheme that
does this on top, then we should be able to get something more
composable, but we haven’t really explored this whole space yet.</p>
</div>
<div class="paragraph">
<p>I have a sort of comparison chart here, and if you notice all of my
slides are wordy. Just to give you an idea of how the schemes scale,
just look at this chart.</p>
</div>
<div class="paragraph">
<p>scheme, accountable, usable, private, comms bitcoin, y, y, n, 0 + 0.5
schnorr, n, -n, y, prop (n,m + 1) TREE, y, y, ~y, 0 + 1 MULTI, y, y, n,
0 + 1 POLY, y, y, y, 0 + 1</p>
</div>
<div class="paragraph">
<p>scheme, size, 2-of-3, 13-of-15, 50-of-100, 990-of-1000, CPU bitcoin,
34N+74M, 250, 1472, 7100, 107260, M schnorr, 34+74, 108, 108, 108, 108,
1 TREE, Ig(B(M,N))*32+74, 172, 332, n/a, n/a, 1 + 0.01*N MULTI, 34N+74,
176, 584, 3474, 34074, 1 + 0.01*N POLY, &#8656;(M-N+1)*34+74, 142, 142 - 176,
142 - 1808, 142 - ??, 1+(M-N)/2</p>
</div>
<div class="paragraph">
<p><a href="https://www.youtube.com/watch?v=Gs9lJTRZCDc&amp;t=35m55s">explanation of the
chart (at 35m 55sec)</a></p>
</div>
<div class="paragraph">
<p>It’s not clear how this will develop. Some of these ideas are very
complementary and can be merged. Expect to see some more development on
this in the future.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_art_of_selection_cryptography"><a class="anchor" href="#_the_art_of_selection_cryptography"></a>The art of selection cryptography</h4>
<div class="paragraph">
<p>So I want to talk about now about a thing that I am calling the art of
selection cryptography. And I’m not using the word cryptography here;
this is more the philosophical selection of my talk here.</p>
</div>
<div class="paragraph">
<p>Before I can tell you what selection cryptography is, I think I need to
redefine cryptography. The definition that people use today is broken.
It’s wrong. You go to Wikipedia or any dictionary and they will say that
cryptography is secret writing or deciphering messages. That definition
has nothing to do with many of the things that we today, like digital
signatures, zero knowledge proofs, private information retrieval, hash
functions, it doesn’t talk to things like cipher suite negotiation in
TLS which has been a constant source of vulnerabilities. You look at TLS
and say, TLS is cryptography, it’s a cryptographic protocol, but the
dictionary says only the ECDSA part is cryptography. That’s ridiculous.
And bitcoin itself, too. You can build a bitcoin node today with
absolutely no cryptography in it. The only cryptography that we use if
you go by the dictionary definition is wallet encryption. And then you
never send the messages to anyone else…..</p>
</div>
<div class="paragraph">
<p>So to explain my explanation, I want to take a step back and sort of
give my view on the world. Back in the early 90s when I was sort of
politically coming of age and on the internet, I was very excited and
involved in the cypherpunks group and the activity around the
prosecution of hackers and the export of encryption software. And this
politics or religion that the internet would change everything. There
was this rallying call, “information wants to be free”. And I knew in my
bones that this was true. We were going to use computers, which turn
everything into information, and we would use networks to hook all of
the computers together and we would change the world. We were going to
change the power balances, make more people more empowered and everyone
would have access to the world’s knowledge and they would all fulfill
their potential. That’s a very political take on something that I now
think in fact is better described as a law of nature. This is not just
that I want information to be free; no, information really does want to
be free. It is fundamental that information will percolate out into
every little nook and cranny, and you can’t control it. The result is
that often bad things happen because information wants to be free.
Sunlight is the ultimate solvent, but solvents corrode. So my email
wants to be read by the NSA. When I try to login to my server, it can’t
tell me from you, because you can just replay my login. And now you’re
logged in as me. When you go and browse the internet, people learns how
it works. They see inside your mind what used to be completely private.
When I go to research something, marketers can send out cheap spam, and
that spam is just as visible as the information I seek. If I want to
build a digital cash system, I can’t, because information is perfectly
copyable. And all copies are just as good. Money that you can just copy
is not much of a money at all. So you have an environment where there
are powerful parties that have more ability to use this fundamental
nature of information, and this goal of everyone being more empowered
may not come true.</p>
</div>
<div class="paragraph">
<p>And so, I would like to propose this definition of cryptography that
says that cryptography is that art and science with which we try to
fight this fundamental nature of information. We try to bend it to our
political will and to serve our moral purposes. And to direct it to
human ends against all outcomes and all eventualities that may try to
oppose it.</p>
</div>
<div class="paragraph">
<p>“Cryptography is the art and science we use to fight the fundamental
nature of information, to bend it to our political and moral will, and
to direct it to human ends against all chance and efforts to oppose it.”</p>
</div>
<div class="paragraph">
<p>This is a sort of broad definition. It encompasses everything that we
should properly call cryptography, and a number of things that we
haven’t yet traditionally called cryptography, such as computer
security, or even sometimes the drafting of legislation. I don’t really
offer this lightly. I have thought about this for a long time and I
think this definition leads to pretty good intuitions about the kinds of
things that have cryptographic considerations.</p>
</div>
<div class="paragraph">
<p>So often, as technologists, we get excited when we have a cryptographic
tool to solve this problem. You want to read my email? Bam, encryption.
You want to track my stuff, bam private information retrieval. Bam,
digital signatures, I’m going to solve all problems with some
cryptographic tool. You can fight back against things you don’t like in
the world with a bunch of math. That’s really cool. But sometimes we get
caught up in the coolness of that and we forget that we are really
fighting the fundamental nature of information.
(<a href="https://www.youtube.com/watch?v=Gs9lJTRZCDc&amp;t=41m56s">41min 56sec</a>)</p>
</div>
<div class="paragraph">
<p>And it’s hard. It’s so hard that it may not be possible to make secure
cryptosystem. They are all predicated on a set of strong assumptions. We
assume that some mathematical problem is intractable. Over time we have
seen that many cryptosystems have been broken. Few people believe it to
be the case, but it may be fundamentally impossible to build strong
cryptography. If you were able to build a provably secure asymmetric
cryptosystem with no strong assumptions in it, this would be a proof
that P != NP, you could win a million dollar prize to prove this. You
could still build insecure cryptosystems; building securing
cryptosystems is actually harder than just figuring out whether P isn’t
equal to NP. So don’t expect anyone to solve this soon.</p>
</div>
<div class="paragraph">
<p>A really important point here is that attacks on cryptosystems are
themselves information that want to be free. We often underestimate how
powerful computers have become because our software is so bloated and
slow and has many layers. You can imagine that a computer is sort of an
intellectual equivalent of someone who is doing arithmetic for you, but
a billion times faster. So if you can attack a cryptosystem by applying
a lot of force, computers are a force multiplier. Everyone who is
attacking your cryptosystem, if they have a desktop computer, it’s like
them having an army of a billion imbeciles. They might be imbeciles, but
there’s a billion of them. And that’s before they get a botnet. And then
they have a hundred thousand times that much computing power. Or the NSA
data center. So if someone is able to attack your cryptosystem and
reduce it to a state where it is still a huge haystack that they are
searching for a needle in, they can then apply a lot of computing power
to go further. We can even use the computing power to search for
complicated algebraic solutions for the systems as well. It’s not just
the number crunching. It actually expands our intellectual capacity to
attack the systems. This more strongly favors attackers than it does
defenders in general. In order to build a secure cryptographic system,
we have to secure it against any eventuality. And so as a result,
virtually everything people propose ends up being broken. This is
certainly true for everything I’ve touched. There’s a whole subfield in
academia about provable cryptography. People get confused about what
provable cryptography means. Provable cryptography is about cryptography
that is secure as long as the proof is right and the assumptions hold.
Well why wouldn’t it be secure if the assumptions hold? Well it turns
out that’s actually hard to achieve too. And many things that occur in
provable cryptography, there’s a pressure to publish a proof. So the
easiest way to get a proof is to adopt a stronger assumption. There is a
lot of provable cryptography that is broken because they adopted
assumptions that were wrong, they sounded plausible but they turned out
to not be true, or they proved some vacuous property that did not map to
security in a practical sense.</p>
</div>
<div class="paragraph">
<p>I don’t mean to sort of say that cryptography is the only thing that
people do that is hard. Civil engineering is a tremendously difficult
discipline and there are lives on the line if a building doesn’t stand
up. But usually in civil engineering you are more worried about a
limited set of natural causes and you’re not generally worried about the
billion army of imbeciles and all of the world’s efforts to nearly
effortlessly attack you. If you ask someone to build a building that
cannot be taken down through all the force in the world, they would tell
you that you’re nuts. They would probably ask for a trillion dollars
first, and then tell you that you’re nuts, but still take the trillion
dollars. We are only able to think about cryptography at all because we
can use software. Software is a great building block. We have tremendous
tools to write software that is more complicated than anything else. A
very complicated piece of mechanical engineering, something like the
space shuttle, on the fringe of what we can do as a civilization, has on
the order of something like 200,000 parts. But if you look at a
conventional piece of software that you use every day, say Firefox,
that’s 17 million lines of code. Almost any one of those lines of code
could be undermining your security. Typical figures for defect rates for
software in the industry are numbers like 15 to 50 bugs per thousand
lines of code. The number varies a lot; maybe for software where people
care a lot it is more like one bug per thousand lines of code. But one
per 1000, and we’re talking about software that has 17 million lines of
code? A complete GNU/Linux desktop is like 600 million lines of code. So
software, despite our awesome tools to build it, is very buggy. Making
it cryptographically secure is even harder.</p>
</div>
<div class="paragraph">
<p>“Software testing is making sure that your software does what it is
supposed to do. Security testing is making sure that is all that your
software does.” And that is fundamentally harder.</p>
</div>
<div class="paragraph">
<p>I have hopefully impressed on you that this is a hard area. This is not
news to me. There is this adage on the internet that goes like, “Never
write your own cryptography”. Because people did appreciate that it’s
hard and everyone gets it wrong. But I think that’s bad advice. I call
that the abstinence-only approach to cryptographic education. And one of
the results is like provable security stuff, if you tell people to never
write their own cryptography, they will go off and redefine cryptography
to be some narrow part, like yes I didn’t reimplement AES… So some
people have reimplemented AES and had only minor attack problems, but
rarely are systems broken by people reimplementing underlying
cryptographic primitives, although there’s plenty of potential to do so.
Systems are more often broken by higher-level violations of their
assumptions. And even if you follow this “never write your own
cryptography” maxim, now you have this other problem which is, now you
have to go and select the cryptography that you will be using, and you
have to use it with that software’s assumptions. So I would like to
re-emphasize that if people are counting on a program, to fight this
fundamental nature of information, the program as a whole is
cryptographic. That doesn’t mean that you can’t write it, or that you
shouldn’t write it, but it means that you need to step up to the plate
and recognize the risks.</p>
</div>
<div class="paragraph">
<p>This does come along with some bad news, though. I can’t tell you how to
write a secure cryptographic program. We don’t even know if it is
possible. We do know that some things are unsafe and that you shouldn’t
do this or you shouldn’t do that. But usually this advice is very
application-specific. It is not general advice. So in general what I can
say is we should face the challenges frankly and understand the risks,
we should communicate and learn from our mistakes, and we should advance
the art.</p>
</div>
<div class="paragraph">
<p>So in the interest of advancing the art, I wanted to sort of talk a
little about a special kind of cryptography that is probably the most
common cryptography in the world. I call it selection cryptography. It
is the cryptosystem of picking cryptosystems. And you should think
about, when you select a cryptographic tool, or build software that has
cryptographic implications, what selections are you making and are those
choices good from the perspective of a cryptographic adversary. So I see
a lot of norm in the bitcoin space is to build tools out of primitives
that were found on github. I don’t say that to deride it. There is some
fantastic code on github, including my own. But not all code on github
is good. So we can think about things like how can we go about doing a
better job at selection? If you are a domain expert in the particular
cryptographic tools that you are using, then you can review it as a true
reviewer. That’s great, and I hope everyone that can do that, does so.
But if you’re selecting someone else’s code, you probably can’t review
it. You probably don’t understand the underlying parts, and you probably
shouldn’t necessarily need to. So I propose this 3-step program which is
to ask yourself first, is this code broken or malicious? What can happen
if it is? You have to think about this. If you come back and say, “not
much” then you are wrong and you should go back and think about it some
more. Go back to step one. No, seriously. If you take a piece of
software that seems like it can do nothing wrong, but its install script
has a root shell backdoor in it, and you run it on your infrastructure,
you’re completely compromised. Everything has risks. You need to
identify what they are, and then deal with them. And think about what
can be done to mitigate those risks.</p>
</div>
<div class="paragraph">
<p>So I wanted to give some concrete examples, and this was really hard for
me. For all that I said about how hard this is, I don’t think that
anyone is bad or incompetent for making mistakes in this area. I make
mistakes.. DJB, one of the most brilliant cryptographers of our time,
his original ED2559 code had a bug until someone tried to formally prove
it correct and found that it occasionally generated incorrect results.
So everyone makes mistakes. And that’s fine. We need to understand the
mistakes so that we may learn from them. I have given an example here.
On the screen, is an incredibly commonly at least in the past deployed
piece of javascript for “secure random number generation” and this has
been used on 100s of websites including many many bitcoin websites that
generate private keys for wallets and signing. It wasn’t created by
someone in the bitcoin ecosystem, but it was widely picked up by it. Now
it has a couple of things that are sort of funny about it that a
reviewer would pick up, or at least a reviewer with domain expertise. So
one is that there is a check in it, where it checks if “window.crypto”,
which is a cryptographically secure random number generator, is
available. And if it’s not available, it just doesn’t use it. It doesn’t
throw an error. It doesn’t do anything.. it just doesn’t use it. What it
does use is “Math.random”. And in most browsers, “Math.random” is a
48-bit linear congruent generator. There is only 2^48 possible states
for it. And it’s also in most browsers seeded from the time that
browsers started. So this value is pretty predictable. And then also, it
uses the time that it was running at. That’s also pretty predictable.
And so if you’re in this state where you have not used the secure random
number generator, you’re using something that maybe has on the order of
50 bits of entropy at most and probably quite less. Now with the power
of a billion imbeciles, an attacker can search this space. It is quite
practical to do so. And they can discover private keys as a result of
doing so.</p>
</div>
<div class="paragraph">
<p>Fortunately, “window.crypto” is available in all current browsers, so
this state where you don’t have it shouldn’t be happening very often. So
that’s good at least. But I have complained about this code to people
using it, because it looks unsafe. Now what I didn’t see, and what I
tried to tell 12 people now, what virtually no one I have showed this
to, even telling them that there’s another issue in this, is that that..
that there is this comparison with navigator version. Well, navigator
version is a string. And if navigator.appversion returns false in the
conditional, then it doesn’t use the secure random generator. This code
never uses the secure random number generator. And this happens when you
are using this pile of javascript from inside webworkers, which actually
happened in the bitcoin ecosystem. But you don’t even have to have that
problem; that’s what happens when you don’t select things correctly.</p>
</div>
<div class="paragraph">
<p>Another concrete example is that a very popular bitcoin wallet deployed
a message encryption function using ECIES. So, ECIES is, it’s not
correct to say it’s standardized, but it’s a well-studied way of doing
message encryption with elliptic curve cryptography. And I say it’s not
standardized because there’s no test vectors or things like that, you
can implement it on your own and your implementation may not match
anyone else’s. But it’s well-understood, and if implemented correctly,
it’s secure. So they implemented ECIES using source code they found on
github, and the source code they found on github was widely leaked all
over the internet, it was mentioned on bitcointalk, people who knew
cryptography were talking to the author about it. The author gives me
the impression of someone who is sort of new to programming. He was
really excited. And so this wallet picked it up, they reviewed it- good
for them. They found that it used an insecure random number generator,
like the python mersenne twister stuff. But what was actually
implemented there wasn’t ECIES at all. It was some other system that the
author had just sort of magicked. Heh. It had a bunch of other problems.
A couple of the problems is that if someone was running a decryption
oracle like something that would throw error messages back, you could
send it 2^16 messages, collect the results, and then take another
message to that same destination that you wouldn’t have decrypted, and
you can use those 2^16 results and decrypt the message. It’s a
decryption oracle attack. This seemed dir.. directly leaked 7 bits of
the plaintext in every 256 bits that it was encrypting. It also had this
issue where if you send some messages through it, it would just silently
corrupt them on encryption, including the all 1s-bits messages. So if
you send it hex FF through it, the results would be line noise and it
was just a silent corruption bug. So all of these issues I found in
about 10 minutes because I have domain expertise in this exact kind of
cryptosystem. And there are probably more problems with it, I stopped
looking at that point. The authors of this wallet software removed this
software, took it down, took that feature out, in about 1 more minute
after my report. I don’t think that they did wrong so much here, I think
they are very competent and that they responded in a very responsible
way. Other people that I have worked with have not been so responsible
in the past. Other wallet vendors have done similar things. The same
author of this freaky code had written a bit of signing code that
another wallet vendor included in their wallet. That signing code had
the same kind of insecure RNG and that wallet vendor didn’t even fix
that, they deployed it with the insecure RNG and it resulted in a CVE
against the wallet. In theory if you sign transactions with your keys
using that wallet, your private keys may be exposed by it. Finding these
problems requires a lot of domain expertise. “Okay, go ask someone who
knows about these things” does not scale particularly well. So what can
we do to do better here?</p>
</div>
<div class="paragraph">
<p>So I have proposed a number of risk mitigation techniques that I think
would help if people were doing these things or more of them more often
may help advance the art here. One of the risk mitigation techniques is
to ask is this software intended for your purposes. If this is someone
who is learning the code project, that’s great but perhaps you shouldn’t
secure millions of dollars of BTC with it. Are the authors taking the
cryptographic considerations seriously? You can see this by looking at
their discussions. How do they respond to security concerns and issues?
You can look for a review process. Perhaps the most important question
here is, whether there is a review process here at all. One of the other
adages is that anyone can create a cryptosystem that they themselves
cannot compromise. And it’s very true, and this is why one of the very
best ways to learn cryptography is to break other people’s
cryptosystems. So any kind of cryptographic software should have some
level of review. The review could be made available to its users and you
should be able to look at it to get a feel for how it is being handled.
Sometimes people say, “well this is being used everywhere and obviously
it has been reviewed”. But in reality, people adopt things because other
people have adopted things, without ever looking at the source code or
doing domain expert review. So you can’t go by whether it is in wide use
to determine whether something has been reviewed. A touchy thing is,
what is the experience of the authors? There is some power in the
authors being domain experts. I don’t mean to imply that only an elite
group of people can write cryptographic software, because that doesn’t
work. I mean, if we’re going to be frank, all of the software that we
write in the bitcoin ecosystem is to some degree always cryptographic
software. So saying that I have to write all of it is ridiculous. You
can look for things like, do the authors have a deep understanding of
what they are doing? Even if you understand the procedures, if you don’t
understand the reasoning for why you do things in a cryptosystem, then
you wont spot all of the subtle assumptions that you have to satisfy.
It’s hard because if you’re not yourself an expert, then it’s easy to
make a mistake. Someone can sling a bunch of technical terms at you, and
it all sounds equal because you don’t know about that area. I think that
one of the things you can do is to look at the authors trying to extend
their reach, that they are learning, they are citing sources that they
are sort of expanding their knowledge. And there is a sort of process
around excellence in knowledge. And that may be more visible than just
trying to evaluate their technical skill.</p>
</div>
<div class="sect4">
<h5 id="_is_the_software_documented"><a class="anchor" href="#_is_the_software_documented"></a>Is the software documented?</h5>
<div class="paragraph">
<p>One thing to look for is whether the software is documented. When we
write complicated pieces of software, they are unsafe to maintain if
their internal assumptions are not documented. You should look internal
to the software whether there is documentation and explanations for
what’s going on. You can have the smartest person in the world but he
wont remember what he was thinking a year ago when he goes to change it.
And are the assumptions documented for the assumptions about the outside
world? How can you know that your use of it isn’t going to violate its
assumptions unless it has told you what those assumptions are? I think
you can look for software portability because people who are working
hard to produce good software will tend to make their software more
portable. And also, when you try your software in lots of different
environments and lots of different application contexts, you will expose
bugs that you wouldn’t have seen otherwise.</p>
</div>
</div>
<div class="sect4">
<h5 id="_is_it_tested"><a class="anchor" href="#_is_it_tested"></a>Is it tested?</h5>
<div class="paragraph">
<p>One of the reasons that we can build really complicated things in the
form of software is because it’s possible to build automated tests for
software in a way that you cannot do for a mechanical device. So
software should be using this power of testing to explore the space of
it. Unfortunately it’s possible to make tests that just tell whether the
software runs, and it’s kind of meaningless. So a technique that I
suggest is that if there are tests, then you go to the software and add
bugs. You don’t have to understand software to add bugs. And then see
whether the tests fail. It’s something that anyone can do. You might
find that the tests don’t fail at that point. So then you can iterate
with the author and try to compare it against other risks and then make
a decision as to whether to use it. You could also look for the adoption
of best practices. Now, if you’re not working on this kind of software
then you might not know what the best practices are. There is a lot of
disagreement about what the best practices look like in software. One of
the most competent programmers I know, in the c language, has this rule
where he writes software with basically no unnecessary whitespace and no
unnecessary parens. And everyone else hates it. Now, having worked with
him for some time, I actually like it a lot. Once you get used to it,
you start to see things in it that you wouldn’t normally see. But
there’s a lot of debate around this and I’m not trying to propose a
specific standard for how you write software. But if people are doing a
good job, they will have standards. And whatever they are, their
enforcement leaves evidence, like during review you will see people
saying things about adopting best practices. And you can also ask, you
can ask an author of any cryptographic tool what have you done to
mitigate risk. Anyone who is an author of a cryptographic tool should
have an answer to that. If they don’t have an answer or a list of
answers, then they probably haven’t given it much thought. So a lot of
this reduces to looking for conscientious software development and that
is not enough to guarantee secure cryptography. It’s a necessary
component of secure cryptography, but not sufficient. I found often that
in the wider ecosystem that people’s enthusiasm about software is often
inversely related to how rigorous its development was. And there’s a
good reason for this; if you spend a lot of time making software secure,
there will be no features. There needs to be some balance and compromise
here. One thing to keep in mind that is for cryptographic secure, “move
fast break things” does not work. If you have lost your privacy or your
BTC, you’re not getting it back and the fact that the next version fixes
the problem doesn’t help. One issue to watch out for is
cryptolaundering. People will take a “I’m learning to code” program and
then put it in a nice shiny professional app. I don’t think you should
refuse to trust people that when you take their software that they
haven’t done the work, but you should refuse to trust. Trust but verify.
When you verify that good practices are being used in the parts that
you’re taking, you create a market pressure to do better. You give
people a reason to feel like their time and effort invested in making
more secure systems is well worth it.</p>
</div>
</div>
<div class="sect4">
<h5 id="_does_it_violate_good_practices"><a class="anchor" href="#_does_it_violate_good_practices"></a>Does it violate good practices?</h5>
<div class="paragraph">
<p>Finally, this is I think a tricky point. Some of the things that we
justifiably want to do, violate good practices. Now, I just said before
that there’s no sort of authority on what a good practice is. Name any
good practice, and there is always someone that wants to do something
that happens to violate it. So people are very opinionated about this
stuff, so I am going to give some opinions and I know people will
disagree with them. So I think that for general cryptographic code, it
is unsafe to write general cryptographic code that does not deliver
constant time operation. I also think that it is unsafe to write general
cryptographic code that can’t clean up and can’t avoid memory leaks of
information when it runs. I also think it is very inadvisable to write
cryptographic code in languages that are not typesafe where the language
wont automatically catch comparisons with the number 5 in the string or
whatever. So all of the points that I just made basically say “never
write crypto code in javascript, ever”. And that is a ridiculous
proposition because it is the best deployed platform for software that
has been deployed in the world available today. And so I don’t really
know how to weight that, but when you set some requirements on your
application, you are guaranteeing that you are excluding some secure
practices sometimes. And you are excluding contributions of people who
have some good thoughts on this stuff, because I won’t write javascript
crypto code. And I’m not alone. But that doesn’t mean you don’t do it.
But you should be keeping that in your mind weighing that against other
factors. So maybe you want to see more rigorous testing in something
like that. Or you want to architect your application so that those
things that you cannot achieve are not an actual issue. It’s just
something to keep in mind.</p>
</div>
<div class="paragraph">
<p>After all I said, I still think I know nothing about the subject. This
is really a vague art right now. I think that we need to learn more
about it and demand more about the cryptographic tools that we are using
so that we can advance the art. And in the bitcoin ecosystem in
particular, I worry that if we don’t advance the art, there will be more
big events, more billions of value lost. And the answer is to start like
regulating people and saying Bob can’t write cryptographic code, that
sort of proposal will happen. And we will have to fight against
proposals like that. And that would be directly opposed to the kind of
decentralization that I think that makes bitcoin interesting. But to
have the freedom to build these systems and to explore the space of
what’s possible, we have to sort of control ourselves and we have to be
responsible. And we have to work towards that because we don’t know how
to get there today.</p>
</div>
<div class="paragraph">
<p>So I am very interested in techniques or tools that people have found to
make good selection of cryptographic stuff and also things about
building cryptographic stuff because I do that too, although that’s its
own talk.</p>
</div>
<div class="paragraph">
<p>I have reached the end and I am right on time. Thank you and I would be
glad to answer any questions.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_qa_3"><a class="anchor" href="#_qa_3"></a>Q&amp;A</h4>
<div class="paragraph">
<p>Q: So you made a comparison to civil engineering and in civil
engineering they have liability for people who are developing plans for
buildings and things like that to incentivize safe building. So can you
think that software engineers also should be putting skin in the game
and actually assume some liability for their bugs?</p>
</div>
<div class="paragraph">
<p>A: So it’s not just civil liability, in some places like Israel for
example you can go to jail and you can be criminally prosecuted for
incompetent civil engineering. This is a tricky subject because the
greater the responsibility the greater the barrier to entry, and one of
the fantastic things about software is that there is basically no
barrier to entry. If you have a computer, you have all of the tools you
need to be a world-class programmer just by downloading them. So it is
more costly to put restrictions on software than it is to put
restrictions on other fields. Few people are amateur civil engineers. I
don’t know how society is going to weigh this going forward in the
future. As a software engineer, I would say that if there was extensive
licensing or bonding requirements, I would not be in this space. But we
do have to weigh that. I think that maybe we could sidestep this by
upping our art and doing better so that we don’t need the backstopping
of regulatory requirements. And I also think it is not clear that
liability doesn’t exist and maybe we just haven’t seen what that looks
like. As software becomes more integral to more important things, we are
going to see more litigation related to incompetent software and as
courts become more versed in what good software looks like, we might
start finding negligence in cases where software wasn’t doing what it
should do. But that’s something we’ll find out in the future.</p>
</div>
<div class="paragraph">
<p>Q: Alternatively, do you think something like certification or insurance
against bugs for professional software development?</p>
</div>
<div class="paragraph">
<p>A: I think we are going to be unlikely to see insurance without
liability because that’s the requirement for it. Contractual liability
for software behavior already exists in the wider world and people
should make more use of it. I think that’s useful, sure.</p>
</div>
<div class="paragraph">
<p>Q: You have multiple ways of unlocking a transaction by presenting a
root. And then there was another step after that.</p>
</div>
<div class="paragraph">
<p>A: I can show you the point in the bitcoin-wizards logs where that was
discussed. Sorry about that. The general idea is that instead of you
constructing and fully materializing this tree, only some keys would be
permitted. You present the pubkeys that would contribute to it, and you
get some.. and you ask the network to do the summation for the specific
M-of-N that you want. So I can make a scriptPubKey that just has a list
of public points, and then I can have a CHECKSIG operator that knows how
to sum up the points or some subset of them and I can signal what
subsets are permissible to accept the signature. Well, we can talk about
this later.</p>
</div>
<div class="paragraph">
<p>Q: Point recovery?</p>
</div>
<div class="paragraph">
<p>A: Yeah… You can’t pass that test unless you have 100% code coverage. So
I thought it was dumb to list code coverage. If I was listing out all
the techniques that I thought were useful to build secure cryptographic
software, I have a list of like 40 of them. And that’s one of them, to
make sure you have 100% branch coverage.</p>
</div>
<div class="paragraph">
<p>Q: A specific disastrous example would have been useful.</p>
</div>
<div class="paragraph">
<p>A: Actually, that’s one of the reasons why code coverage is super
useful. It sort of double checks your assumptions. Like oh, this code is
never running, hmm that’s strange. And also doing the bit where you add
bugs into that section and the test never fails, then it failed.</p>
</div>
<div class="paragraph">
<p>Q: Do you think it is possible to augment consensus rules for bitcoin?
In another language other than C++? And know that it is effective?</p>
</div>
<div class="paragraph">
<p>A: So, in decentralized consensus, we have this problem that correctness
is the less important criteria. Consistency is more important. Correct
or not, the state can’t be inconsistent. Can you reimplement the bitcoin
protocol in another language and have a hope of success? And this is
tricky. I don’t want to answer “no”, but I don’t know how to answer
“yes”. There is some research into proving that different pieces of code
compute the same output, and anything more complicated than a context
free grammar, the problem of comparing two different programs is
undecidable. So you have the worst case where you can’t decide whether
two Turing programs compute the same thing with a program. And that’s
kind of academic. In practice, I think you could actually get pretty
close, and I think it depends on what the failure modes are if you do
fall out of consensus. So if you fall out of consensus and the result is
a denial of service attack on a service you run, sure no problem you can
get close enough that it is reasonably unlikely and maybe you only fall
out of consensus once in a while. I think the most important thing you
can do is to understand the contours of the problem and to understand
how hard it is. Keep in mind that Bitcoin Core is not necessarily
consistent with itself. There have been bugs in the software that for
example, Bitcoin Core used to use BerkeleyDB (BDB) for the blockchain
database. And BDB, two copies of the same software, on the same
hardware, same operating system, would not necessarily be consistent
with each other because there were some non-determinism in BDB that
changed its behavior based on the order that the blocks were written to
disk. And under certain circumstances, under large blockchain
reorganizations, some nodes would allow the reorganization to occur and
other nodes would run out of locks because of how the data was put on
disk on them. And then Bitcoin Core would break from the same version,
on the same operating system on the same software. I think that back
earlier in bitcoin’s history we did not quite understand the importance
of consistency. And so when we’re picking tools that go into Bitcoin
Core, we’re performing a cryptographic operation (the consensus of the
network), and we have to understand our assumptions. One of our
assumptions is that all of the computers will behave consistently. So
when we have a dependency, we have to ask will that dependency obey that
assumption. And it turns out that most software is not written for
consensus systems. And most software that you go and find isn’t
consistent. A problem here is that the authors of the systems will go
fix bugs, and then it’s inconsistent and we have to control for that.
That’s one of the reasons why today in Bitcoin Core we internally embed
the database that we use for storing the blockchain. So I hope I didn’t
dance around that too much. I am just trying to say that it’s hard.</p>
</div>
<div class="paragraph">
<p>Q: Does Bitcoin Core involve any floating point operations?</p>
</div>
<div class="paragraph">
<p>A: Not as part of the consensus. Difficulty is done with large 256 bit
integers for work resetting. IEEE floating point is well-specified, but
what compilers normally implement is not IEEE floating point, it differs
from architecture to architecture. I have actually seen cryptocurrencies
that have gone and put floating point in their consensus code, and it’s
totally breakable and quite frightening, so don’t do that. Don’t put
floating point in consensus code.</p>
</div>
<div class="paragraph">
<p>Q: …</p>
</div>
<div class="paragraph">
<p>A: Let me give a philosophical point here. When I make a negative
comment about some other cryptocurrency, it gains me nothing. So do not
expect people who are big names in this space to go around telling you
what’s safe in other systems. In particular not only does it not gain me
something, but in some cases I have been physically threatened because
of negative things that I have said about someone’s pump-and-dump
scheme. So I tend to be pretty conservative about this. In this case I
would give you the example of Solidcoin, which implemented a proof of
difficulty change over time which involved transcendental functions and
floating point.</p>
</div>
<div class="paragraph">
<p>Q: You mentioned at the beginning that you are one of the five core
contributors and that you spend a lot of your time reviewing other
software. So I am curious if you could talk about beyond the five of
you, how many people are contributing to bitcoin on a regular basis?</p>
</div>
<div class="paragraph">
<p>A: If you go by the git commit logs, you’ll see that in the last release
in 0.10, there were 100 contributors. Sometimes those contributions are
just fixing a string or spelling mistake or whatever. Some of them were
more substantial. There is a kind of power law distribution. I would say
that there’s on the order of 10 to 12 people who are contributing at the
same level as all of the core contributors. And then there’s people that
fix little bugs, and then it falls off after that. It’s a hard area to
contribute to. It’s quite frustrating and very unrewarding to join the
project. We are trying to improve this. Part of the problem is that you
show up with something neat and now you have to pass Greg Maxwell for
review, and I think everything is broken… So. I try not to be a barrier
like that, but it’s really hard. So we have been doing a bunch of work
to make the software more modular. It should make it easier for people
to contribute more safely and expand the contributor base further.</p>
</div>
<div class="paragraph">
<p>Q: What do you think of the provably accurate Stellar.. ?</p>
</div>
<div class="paragraph">
<p>A: Well, remember my comment before. I have made some public comments on
this, so I will repeat them. I have a general complaint about the
consensus model in Ripple and Stellar and new Stellar. I complained
about this back when when Ripple was announced. Basically, there is a
strong assumption in the system, and this is true for all of them,
amusingly the Ripple model didn’t achieve its properties even when its
strong assumption was met. The new system is provable, meaning that it
should meet its properties even when the strong assumption is met. Back
when Ripple was released, the strong assumption wasn’t even described.
So there’s a bunch of participants in the system, they have trust they
put out into the network, and I went out and posted about this, and I
mentioned that there are certain trust topologies that are guaranteed to
fail, so what are those and how does the system stop those from
developing? That’s the strong assumption- that people will configure
their trust in a certain way. The new Stellar paper goes and formalizes
that assumption a bit more. So we can say there is an intersection
requirement and that trust has to overlap in certain ways in order for
the system to achieve consensus. But they haven’t formalized the process
for achieving that outcome. Now, before you think I’m throwing a lot of
stones here, I should point out that bitcoin’s security model also has
this kind of strong security assumption. So you could say in bitcoin our
strong assumption is that a majority of the hashpower is honest, and you
could say that as long as it is honest and honest participants are not
partitioned from each other on the network, the system will achieve
consensus reliably eventually. But why is half the hashpower honest?
Well you can fallback to a set of weaker assumptions that we wave our
hands about, like economic incentives to behave honestly and so on. And
we have done that in the bitcoin ecosystem, we have stated our strong
assumption, talked about its limitations, talked about why we think
those limitations are plausible, and that space has been explored and
it’s still being explored by researchers and developers. And I would
like to see more of that in the Stellar world. Really being frank about
the assumptions and trying to figure out how plausible they are. One way
to meet the assumption in the system, the trust intersection assumption,
is to be completely centralized. If everyone trusts the same party, then
the trust completely overlaps for the same set of parties. And that’s a
system that is secure but not decentralized, and I actually think
there’s a lot of place in the world for systems that are less
decentralized because they have better scaling and some other
interesting properties. I hope that answers your question.</p>
</div>
<div class="paragraph">
<p>Q: When you described …</p>
</div>
<div class="paragraph">
<p>A: The question is, BerkeleyDB stuff showed there was a problem with the
code and is that bad. Yes, it would be valuable to analyze this. So
there is documentation about the behavior that we expect from the
system. It’s not necessarily great. There’s the developer docs, the
protocol specifications on the wiki but I wouldn’t recommend trying to
implement from that. I think that at the moment it’s all relatively
complete, maybe you’d have a fighting chance but I’m not sure. That
could be improved and should be improved. We can make changes to the
system more safely… In terms of the practical effect, whatever code is
actually running and fails in consensus, we are kind of stuck with it.
If the spec says one thing, and the code does something else, we are
going to need to change the spec because the money has already moved.
And we can’t just say too bad, let’s allow everyone to double spend.
That’s not reasonable. Work needs to be done there, but it doesn’t
replace actually achieving consensus in practice in the network.</p>
</div>
<div class="paragraph">
<p>Thank you.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jon_atack_how_to_review_pull_requests_in_bitcoin_core"><a class="anchor" href="#_jon_atack_how_to_review_pull_requests_in_bitcoin_core"></a>7.7. Jon Atack - How to Review Pull Requests in Bitcoin Core</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://jonatack.github.io/articles/how-to-review-pull-requests-in-bitcoin-core" class="bare">https://jonatack.github.io/articles/how-to-review-pull-requests-in-bitcoin-core</a></p>
</li>
<li>
<p>Author: Jon Atack</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_before_you_begin"><a class="anchor" href="#_before_you_begin"></a>BEFORE YOU BEGIN</h4>
<div class="paragraph">
<p>This guide builds on the foundation laid by these presentations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://bitcointechtalk.com/a-gentle-introduction-to-bitcoin-core-development-fdc95eaee6b8">A
Gentle Introduction to Bitcoin Core Development</a> by
<a href="https://twitter.com/jimmysong">Jimmy Song</a> (2017)</p>
</li>
<li>
<p><a href="https://bitcointechtalk.com/contributing-to-bitcoin-core-a-personal-account-35f3a594340b">Contributing
to Bitcoin Core, a personal account</a> by
<a href="https://twitter.com/jfnewbery">John Newbery</a> (2017)</p>
</li>
<li>
<p><a href="https://medium.com/@pierre_rochard/understanding-the-technical-side-of-bitcoin-2c212dd65c09">Understanding
the Technical Side of Bitcoin</a> by
<a href="https://twitter.com/pierre_rochard">Pierre Rochard</a> (2018)</p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=MJBhZg0ytiw">A hardCORE workout</a> /
<a href="https://diyhpl.us/wiki/transcripts/sf-bitcoin-meetup/2018-04-23-jeremy-rubin-bitcoin-core/">transcript</a>
/
<a href="https://drive.google.com/file/d/149Ta1WRXL5WEvnBdlL-HxmsFDXUbvFDy/view">slides</a>
by <a href="https://twitter.com/JeremyRubin">Jeremy Rubin</a> (2018)</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_introduction_7"><a class="anchor" href="#_introduction_7"></a>INTRODUCTION</h4>
<div class="paragraph">
<p>Reviewing and testing can be the best ways to begin contributing to
Bitcoin Core.</p>
</div>
<div class="paragraph">
<p>Experienced review and testing are regularly cited by long-term Bitcoin
Core developers as both</p>
</div>
<div class="ulist">
<ul>
<li>
<p>resource bottlenecks, and</p>
</li>
<li>
<p>the best and most helpful way to learn and begin contributing and
earning reputation in the community.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_terminology"><a class="anchor" href="#_terminology"></a>TERMINOLOGY</h4>
<div class="paragraph">
<p><a href="https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#peer-review">ACK,
NACK</a>: Definitions and origins
<a href="https://searchnetworking.techtarget.com/definition/ACK">here</a> and
<a href="https://www.freecodecamp.org/news/what-do-cryptic-github-comments-mean-9c1912bcc0a4/">here</a>.</p>
</div>
<div class="paragraph">
<p>Nit: A trivial, often non-blocking issue.</p>
</div>
<div class="paragraph">
<p><a href="https://help.github.com/en/articles/about-pull-requests">PR</a>: An acronym
for <em>pull request</em>, sometimes called a merge request. A proposed change
to the code or documentation in the source code repository.</p>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Work_in_process">WIP</a>: An acronym for <em>work
in progress</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_general"><a class="anchor" href="#_general"></a>GENERAL</h4>
<div class="paragraph">
<p>As a newcomer, the goal is to try to add value, with friendliness and
humility, while learning as much as possible.</p>
</div>
<div class="paragraph">
<p>A good approach is to make it not about you, but rather "How can I best
serve?"</p>
</div>
<div class="paragraph">
<p>One of the most challenging aspects facing new contributors is the
breadth of the codebase and the complexity of the technologies
surrounding it.</p>
</div>
<div class="paragraph">
<p>Be aware of what you don’t know; long-term contributors have years of
experience and context. The community has built up a deep collective
wealth of knowledge and experience. Keep in mind that your new ideas may
have already been proposed or considered several times in the past.</p>
</div>
<div class="paragraph">
<p>Remember that contributor and maintainer resources are limited — ask for
them carefully and respectfully. The goal is to try to give more than
you take, to help more than hinder, while getting up to speed.</p>
</div>
<div class="paragraph">
<p>Try to figure things out on your own, at least sufficiently to respect
others' time.</p>
</div>
<div class="paragraph">
<p>Follow the
<a href="https://kiwiirc.com/nextclient/irc.libera.chat">#bitcoin-core-dev</a> IRC
channel and the
<a href="https://lists.linuxfoundation.org/mailman/listinfo/bitcoin-dev">bitcoin-dev</a>
mailing list.</p>
</div>
<div class="paragraph">
<p>More IRC channels to follow
<a href="https://github.com/jonatack/bitcoin-development/blob/master/irc-channels.txt">can
be found here</a>.</p>
</div>
<div class="paragraph">
<p>Before jumping in, take plenty of time to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>understand the contribution process and guidelines, not only by
reading the documentation in the
<a href="https://github.com/bitcoin/bitcoin">repository</a>, notably
<a href="https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md">Contributing
to Bitcoin Core</a> and everything in the
<a href="https://github.com/bitcoin/bitcoin/tree/master/doc">doc</a> and
<a href="https://github.com/bitcoin/bitcoin/tree/master/test">test</a>
<a href="https://github.com/bitcoin/bitcoin/tree/master/src/test">directories</a>,
but also by observing interactions on the
<a href="https://kiwiirc.com/nextclient/irc.libera.chat">#bitcoin-core-dev</a> IRC
channel and the ongoing <a href="https://github.com/bitcoin/bitcoin/pulls">code
review in the repository</a></p>
</li>
<li>
<p>get to know the maintainers and regular contributors: what they do,
what they like and want, how they give feedback</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Many newcomers begin by opening pull requests that add to the hundreds
already awaiting valuable review. It&#8217;s much better to begin by reviewing
the existing pull requests and starting to understand what kind of pull
requests and review are most helpful, while slowly gaining the big
picture.</p>
</div>
<div class="paragraph">
<p>A good rule of thumb is to review 5-15 PRs for each PR you open.</p>
</div>
<div class="sect4">
<h5 id="_the_big_picture"><a class="anchor" href="#_the_big_picture"></a>The big picture</h5>
<div class="paragraph">
<p>The big picture is more important than nits, spelling, or code style.</p>
</div>
<div class="paragraph">
<p>There are different levels of big picture review: "does this change
affect behavior?" or "is this safe?" are different from "is this a good
idea?" The latter may require more context, which you will slowly gain
with time. Don&#8217;t let that stop you from thinking about these questions
and striving to review on that level.</p>
</div>
<div class="paragraph">
<p>Steps to improve understanding of the big picture:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>do the <a href="https://github.com/chaincodelabs/study-groups">Chaincode Labs
study guide</a></p>
</li>
<li>
<p>study the <a href="https://github.com/bitcoin/bips/">Bitcoin Improvement
Proposals</a> (often referred to in singular form by the acronym "BIP"),
and return to them frequently</p>
</li>
<li>
<p>subscribe to the <a href="https://bitcoinops.org/">Bitcoin Optech newsletters</a>
and use their <a href="https://bitcoinops.org/en/topics/">topics page</a> as a go-to
resource.</p>
</li>
<li>
<p>do
<a href="https://github.com/ChristopherA/Learning-Bitcoin-from-the-Command-Line">Learning
Bitcoin from the Command Line</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Aim for quality over quantity and a balance between deep work and quick
wins.</p>
</div>
<div class="paragraph">
<p>Documentation is important, e.g. high-level documentation of how things
work and interact, clear and accurate code docs, whether a function has
a good description and
<a href="https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-doxygen-compatible-comments">Doxygen
documentation</a>, test logging (both <code>info</code> and <code>debug</code>), and so on.</p>
</div>
<div class="paragraph">
<p>Test coverage is important; don&#8217;t hesitate to improve or write any
missing <a href="https://github.com/bitcoin/bitcoin/blob/master/src/test/">unit</a>,
<a href="https://github.com/bitcoin/bitcoin/tree/master/test/functional/">functional</a>,
or <a href="https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md">fuzz</a>
tests.</p>
</div>
<div class="paragraph">
<p>Be a contributor. Help PRs move forward by reviewing,
<a href="https://github.com/bitcoin/bitcoin/pull/15996#issuecomment-491740946">proposing
tests</a> or fixes in a helpful way, proposing to rebase, or even offering
to take over the PR after months of silence. In short, help each other!</p>
</div>
</div>
<div class="sect4">
<h5 id="_nits"><a class="anchor" href="#_nits"></a>Nits</h5>
<div class="paragraph">
<p>Try to avoid overly commenting in PRs about nits, minutiae and code
style, particularly with PRs labeled as WIP, or when a PR has just been
filed and the PR author is mainly looking for Concept ACKs and Approach
ACKs, e.g. general consensus, not nitpicking.</p>
</div>
<div class="paragraph">
<p>Long-term contributors report that activity like this repels them, and
it can diminish your social capital on the project. Try to understand
what kind of review is needed and when to do what.</p>
</div>
<div class="paragraph">
<p>The best time for any nit comments is after the Concept/Approach ACKs
and consensus on the PR, and before the PR is finalised and has tested
ACKs. As Pieter Wuille
<a href="http://www.erisian.com.au/bitcoin-core-dev/log-2020-05-17.html#l-307">wrote
on IRC</a>: "I think the most disrupting thing to a PR is getting a
multitude of low level/nits/code style comments, while it&#8217;s very unclear
if a PR is desirable as a concept."</p>
</div>
<div class="paragraph">
<p>Give nits and style advice in a friendly, light, enabling way — as in,
feel free to ignore, feel free to adjust if you happen to rebase, etc.</p>
</div>
<div class="paragraph">
<p>Keep in mind that no one is forced to take your review comments into
account; it&#8217;s perfectly fine for the author to reply that they don&#8217;t
want to do something if they feel it is outside the scope of the change,
especially if your comment is nitpicky.</p>
</div>
</div>
<div class="sect4">
<h5 id="_scale_up"><a class="anchor" href="#_scale_up"></a>Scale up</h5>
<div class="paragraph">
<p>When you can, scale up the difficulty and priority of the PRs you
review.</p>
</div>
<div class="paragraph">
<p>Quality of review is much more important than quantity. You can
<a href="on-reviewing-and-helping-those-who-do-it">add more value</a> and learn
more by taking the time to do deep, quality review of the
<a href="https://github.com/bitcoin/bitcoin/projects/8">high-priority PRs</a> and the
more difficult PRs. These PRs tend to intimidate people and can stagnate
for months, killing their author&#8217;s motivation with death by a thousand
cuts from lack of quality review, nitpicking/code style bikeshedding,
and rebase hell. Reviewing them well provides a true service to Bitcoin.</p>
</div>
<div class="paragraph">
<p>The process of ramping up takes time; nothing can substitute for months
and years invested in gathering context and understanding from following
the <a href="https://github.com/bitcoin/bitcoin">code</a>,
<a href="https://github.com/bitcoin/bitcoin/issues">issues</a>,
<a href="https://github.com/bitcoin/bitcoin/pulls">pull requests</a>,
<a href="https://kiwiirc.com/nextclient/irc.libera.chat">#bitcoin-core-dev</a> IRC
channel, and the
<a href="https://lists.linuxfoundation.org/mailman/listinfo/bitcoin-dev">bitcoin-dev</a>
mailing list.</p>
</div>
<div class="paragraph">
<p>A useful first question when beginning a review can be, "What is most
needed here at this time?" Answering this question requires experience
and accumulated context, but it is a useful question in deciding how you
can add the most value in the least time. Depending on how complex or
critical the changes are and how far along the PR is in the review
process, a helpful experienced review may entail skimming the code and
applying a wealth of context to a pertinent code comment in a critical
place rather than doing a full review involving debug-building, testing,
and reviewing each commit. However, in most cases it&#8217;s best and adds the
most value to do a proper full review.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_by_step"><a class="anchor" href="#_step_by_step"></a>Step by step</h5>
<div class="paragraph">
<p>Keep ego and hopes out of the process. Don&#8217;t take things personally and
keep moving forward.</p>
</div>
<div class="paragraph">
<p>When in doubt, assume good intentions.</p>
</div>
<div class="paragraph">
<p>Be patient with people and outcomes.</p>
</div>
<div class="paragraph">
<p>Praise publicly; criticize privately and in an encouraging way.</p>
</div>
<div class="paragraph">
<p>Persistence helps. Work on it every day.</p>
</div>
<div class="paragraph">
<p>These are all much easier said than done. Be forgiving with yourself and
others.</p>
</div>
<div class="paragraph">
<p>Remember to review 5-15 PRs (or handle or test 5-15 issues), for every
PR you open.</p>
</div>
<div class="paragraph">
<p>Finally, be sure to review contributions from a wide range of people and
experience levels and not just those in your group of colleagues or
acquaintances. Reach out to new and different people (direct IRC
messages work well) to ask how you can help them. You can occasionally
request help too, but don&#8217;t be entitled. Give (much) more than you take.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_technical_specifics"><a class="anchor" href="#_technical_specifics"></a>TECHNICAL SPECIFICS</h4>
<div class="paragraph">
<p><em>Don&#8217;t trust, verify.</em> Minimise dependance on GitHub in your review
process. Use the GitHub website only for the GitHub metadata, e.g.
reading comments and adding your own comments — not for reviewing the
commits and code, which you should do in your local environment.</p>
</div>
<div class="sect4">
<h5 id="_pull_down_the_code_locally"><a class="anchor" href="#_pull_down_the_code_locally"></a>Pull down the code locally</h5>
<div class="paragraph">
<p>Therefore, a review begins by pulling the PR branch down to your
computer to build and review locally. There are different ways to do it
depending on what you want, your needs, disk space, internet bandwidth,
etc. Here are a few:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pulling down remote PRs with
<code>git checkout                     pr/&lt;number&gt;</code>
<a href="https://gist.github.com/piscisaureus/3342247">as described in this nice
little gist</a> which can be modified to suit your needs.</p>
</li>
<li>
<p>My gitconfig <code>[remote "origin"]</code> section:
<code>fetch = +refs/pull/*/head:refs/remotes/origin/pr/*</code></p>
</li>
<li>
<p>Bitcoin Core contributor Luke Dashjr&#8217;s version: "To avoid all the
merge branches, configure the origin-pull remote as":
<code>fetch = +refs/pull/*/head:refs/remotes/origin-pull/*/head</code></p>
</li>
<li>
<p>Bitcoin Core documentation for
<a href="https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md#reference-prs-easily-with-refspecs">referencing
PRs easily with refspecs</a>.</p>
</li>
<li>
<p>GitHub
<a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/checking-out-pull-requests-locally">exposes
PRs</a> as branches on the upstream repository with <code>pull/&lt;number&gt;/head</code>
(contributor branch) and <code>pull/&lt;number&gt;/merge</code> (merged into master),
e.g.
<code>git fetch origin pull/17283/head &amp;&amp; git                   checkout FETCH_HEAD</code>.
That said, I prefer to depend as little as possible on GitHub.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can test a PR either on the contributor&#8217;s branch or with the changes
merged on top of master. Testing the latter can be useful to see if
anything merged into master since the last PR commit breaks the changes.</p>
</div>
<div class="paragraph">
<p>Next, launch the build and tests while you begin reading the code
locally. You&#8217;ll need to become comfortable with
<a href="how-to-compile-bitcoin-core-and-run-the-tests">compiling Bitcoin
Core from source</a> and running the
<a href="https://github.com/bitcoin/bitcoin/tree/master/src/test/README.md">unit
tests</a> and
<a href="https://github.com/bitcoin/bitcoin/blob/master/test/README.md">functional
tests</a> since you will need to do it for many of the PRs you test. For
this, the Bitcoin Core
<a href="https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md">productivity
notes</a> are indispensable.</p>
</div>
<div class="paragraph">
<p>Read and know the Bitcoin Core
<a href="https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md">developer
notes</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_diff_tools"><a class="anchor" href="#_diff_tools"></a>Diff tools</h5>
<div class="paragraph">
<p>While the build and tests are running, begin reviewing each commit
separately in your local environment using a diff tool like
<a href="https://git-scm.com/docs/gitk">gitk</a>, <a href="https://meldmerge.org/">meld</a>,
<a href="https://yousseb.github.io/meld/">meld for macOS</a>,
<a href="https://www.gnu.org/software/emacs/manual/html_node/ediff/index.html">GNU</a>
<a href="https://www.emacswiki.org/emacs/EdiffMode">ediff</a> for Emacs,
<a href="https://vim.fandom.com/wiki/A_better_Vimdiff_Git_mergetool">vimdiff</a> or
<a href="https://github.com/whiteinge/diffconflicts">vim-diffconflicts</a> for Vim,
opendiff on macOS, or <a href="https://diffoscope.org">diffoscope</a> (here are some
<a href="https://github.com/fanquake/core-review/blob/master/diffoscope.md">diffoscope
usage tips</a>).</p>
</div>
<div class="paragraph">
<p>If you use gitk and like dark mode, I recommend
<a href="https://github.com/dracula/gitk">Dracula for gitk</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_git_grepping"><a class="anchor" href="#_git_grepping"></a>Git grepping</h5>
<div class="paragraph">
<p>Become adept at searching the repository with <code>git grep</code>. You&#8217;ll use
it constantly to find stuff in the codebase. Run <code>git grep --help</code> on
the command line for help or information.</p>
</div>
</div>
<div class="sect4">
<h5 id="_if_youre_not_sure_where_to_start"><a class="anchor" href="#_if_youre_not_sure_where_to_start"></a>If you&#8217;re not sure where to start</h5>
<div class="paragraph">
<p>Read the code, read the PR comments, then re-read both. Find something
that doesn&#8217;t make sense and try to figure it out. Repeat.</p>
</div>
<div class="paragraph">
<p>Once it all starts to make sense, run bitcoind on regtest, testnet (or
on mainnet with very small amounts), and tail or search through the
relevant logs (run <code>bitcoin-cli help logging</code> for the various bitcoind
logging categories and how to toggle them on/off).</p>
</div>
<div class="paragraph">
<p>Maybe add some custom logging, LogPrintfs, or asserts; it&#8217;s always a
privilege to add these into other people&#8217;s code (to see how, run
<code>git grep -ni logprintf</code> or <code>git grep                   assert</code> in
the repository).</p>
</div>
<div class="paragraph">
<p>Run the relevant functional tests and look through the debug logs.
Verify that they fail in the expected way on master. Back in the PR
branch, inverse or change the new tests to make them break and
understand why.</p>
</div>
<div class="paragraph">
<p>Maybe add C++ <a href="https://www.gnu.org/software/gdb/documentation/">gdb</a> or
Python <a href="https://docs.python.org/3/library/pdb.html">pdb</a> breakpoints (or
add <code>import pdb; pdb.set_trace()</code> anywhere in the functional test
code). Examine values. Run RPC commands.</p>
</div>
<div class="paragraph">
<p>Check if any call sites, headers or declarations have been overlooked in
the PR.</p>
</div>
<div class="paragraph">
<p>Try refactoring the code to be better or prettier, and discover why that
doesn&#8217;t work. Expect it to take twice as long as you planned it to. Yes,
it&#8217;s work.</p>
</div>
<div class="paragraph">
<p>Maybe run strace (<code>man page strace</code>) to trace system calls and
signals.</p>
</div>
<div class="paragraph">
<p>Depending on the changes, contributing benchmarks, memory
profiling/valgrind or flame graphs to a PR review can sometimes be very
useful, and even decisive.</p>
</div>
</div>
<div class="sect4">
<h5 id="_technical_resources"><a class="anchor" href="#_technical_resources"></a>Technical resources</h5>
<div class="paragraph">
<p>I maintain a document of various technical notes for myself, that I
refer to often when working on Bitcoin Core, here:
<a href="https://github.com/jonatack/bitcoin-development/blob/master/notes.txt">jonatack/bitcoin-development/notes.txt</a>.
There is also useful stuff in the repository where those notes are
located. Another great repository of resources is
<a href="https://github.com/fanquake/core-review">fanquake/core-review</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_debugging"><a class="anchor" href="#_debugging"></a>Debugging</h5>
<div class="paragraph">
<p>Two good gists about debugging Bitcoin Core:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/fjahr/debugging_bitcoin">Debugging Bitcoin Core</a> by
<a href="https://twitter.com/fjahr">Fabian Jahr</a></p>
</li>
<li>
<p><a href="https://gist.github.com/gubatron/36784ee38e45cb4bf4c7a82ecc87b6a8">Hack
and Debug Bitcoin Core with GDB or LLDB</a> by
<a href="https://www.gubatron.com/blog/">Angel Leon</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_add_missing_tests"><a class="anchor" href="#_add_missing_tests"></a>Add missing tests</h5>
<div class="paragraph">
<p>While you&#8217;re reviewing, writing tests yourself can help you understand
the behaviour and verify the changes, and if they add useful coverage
you can propose them to the author for inclusion in the PR. Proposing
automated tests is a really helpful way to start contributing. Authors
appreciate it when someone reviews their PR and provides additional
tests.
<a href="https://github.com/bitcoin/bitcoin/pull/15996#issuecomment-491740946">Here&#8217;s
an example</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="big-picture-more-important-than-nits"><a class="anchor" href="#big-picture-more-important-than-nits"></a>Big picture &gt; nits</h5>
<div class="paragraph">
<p>Remember, the big picture is much more important than nits, spelling, or
code style. Re-read the <a href="#nits">Nits</a> section above. Try to avoid
commenting on these while reviewing, even if you have no other comments
to make. I know, it&#8217;s hard — I&#8217;ve done it too many times — but there&#8217;s a
better alternative:</p>
</div>
</div>
<div class="sect4">
<h5 id="_ask_questions"><a class="anchor" href="#_ask_questions"></a>Ask questions</h5>
<div class="paragraph">
<p>A good thing you can do as a reviewer without specialised knowledge of
the code is <em>ask questions</em>. A PR author is usually happy to discuss
their work or see interest in it. So, spend 20 minutes or so looking at
a change, find the thing that seems most confusing or surprising, and
ask about it politely in the PR comments or on the
<a href="https://kiwiirc.com/nextclient/irc.libera.chat">#bitcoin-core-dev</a> IRC
channel. Chances are other people wonder about the same thing and it
could be clarified or documented better. In this way you can learn and
help make the project more accessible, too. (Credit for this paragraph:
<a href="https://github.com/bitcoin/bitcoin/pull/15934#issuecomment-547095024">Russ
Yanofsky</a>).</p>
</div>
</div>
<div class="sect4">
<h5 id="_peer_review"><a class="anchor" href="#_peer_review"></a>Peer review</h5>
<div class="paragraph">
<p>Be sure to learn and understand the Bitcoin Core
<a href="https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#peer-review">peer
review process</a>. The process is
<a href="https://github.com/bitcoin/bitcoin/pull/15626">often</a>
<a href="https://github.com/bitcoin/bitcoin/pull/16149">updated</a>, so refer back to
it frequently.</p>
</div>
<div class="paragraph">
<p>An
<a href="https://www.freecodecamp.org/news/what-do-cryptic-github-comments-mean-9c1912bcc0a4/">ACK</a>
(<a href="https://searchnetworking.techtarget.com/definition/ACK">origin</a>) is
generally followed by a description of how the reviewer did the review
and any manual testing. As a new contributor, it&#8217;s advisable to be even
more verbose in review comments to provide context on what you did and
thought through during the review and show that you understood the
change.</p>
</div>
<div class="paragraph">
<p>Concept ACK means the reviewer acknowledges and agrees with the goal of
the change, but is not (yet) confirming they&#8217;ve looked at the code or
tested it. This can be a valuable signal to a PR author to let them know
that the PR has merit and is headed in the right direction. As a
corollary, a Concept NACK would indicate disagreement with the goal.</p>
</div>
<div class="paragraph">
<p>Approach ACK is a step further than Concept ACK and means agreement with
both the goal and the approach used in implementing the change. Approach
NACK would therefore indicate agreement with the goal but not the
approach.</p>
</div>
<div class="paragraph">
<p>Reviewers sometimes comment "Code review ACK" to communicate that the
code looks good but they haven&#8217;t tested the changes or don&#8217;t have an
opinion on the concept yet. It&#8217;s good to add more context to clarify:
"Code review ACK <code>HEAD</code>, unsure about the concept, I&#8217;d like to verify
x, y, z, etc."</p>
</div>
<div class="paragraph">
<p>Other ACK variants that are sometimes used are "tACK" or "tested ACK",
and "utACK" or "untested ACK".</p>
</div>
<div class="paragraph">
<p>Manual testing of new features and reported issues is always welcome. A
comment that is really helpful in review: "Here&#8217;s what I tested and my
methodology", particularly to back up an ACK.</p>
</div>
<div class="paragraph">
<p>Some PRs can be difficult to test or ACK due to complexity, context, or
possibly a lack of tests or simulation framework. That shouldn&#8217;t
discourage you from reviewing. For example, if you&#8217;ve reviewed the code
thoroughly, a comment like "the code looks correct to me, but I don&#8217;t
feel confident enough about behaviour to give an ACK" is a perfectly
helpful contribution.</p>
</div>
<div class="paragraph">
<p>Examples of other useful comments could be "verified move-only" if the
PR includes move-only commits, or "thought hard about how change X could
break Y but didn&#8217;t find any (or could this scenario happen?)", etc.</p>
</div>
<div class="paragraph">
<p>When giving an ACK, specify the commits reviewed by appending the commit
hash of the <code>HEAD</code> commit. The trustless way to do this is to use the
hash from your <em>local</em> checkout of the branch and not from the GitHub
web page. That way, unless your local tools are compromised, you ensure
you are ACKing the exact changes. This is also useful when a force push
happens and links to old commits are lost on GitHub.</p>
</div>
<div class="paragraph">
<p>A full ACK could look like: "ACK <code>fa2f991</code>, I built, ran tests, tested
manually by doing X/Y/Z and reviewed the code and it looks OK, I agree
it can be merged."</p>
</div>
<div class="paragraph">
<p>The Bitcoin Core merge script currently copies into the merge commit the
first paragraph of each ACK review pertaining to the <code>HEAD</code> commit at
the time of merge. Keep in mind that anything you write there that is
copied by the merge script will be in git history forever.</p>
</div>
<div class="paragraph">
<p>A complex PR usually requires at least 3-4 experienced ACKs before
merging.</p>
</div>
</div>
<div class="sect4">
<h5 id="_apache_voting_system"><a class="anchor" href="#_apache_voting_system"></a>Apache voting system</h5>
<div class="paragraph">
<p>Bitcoin Core reviewers frequently use the
<a href="https://www.apache.org/foundation/voting.html#expressing-votes-1-0-1-and-fractions">Apache
voting system</a> in their comments. Here is an
<a href="https://github.com/bitcoin/bitcoin/pull/11426#issuecomment-334091207">example</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_go_easy_on_the_people"><a class="anchor" href="#_go_easy_on_the_people"></a>Go easy on the people</h5>
<div class="paragraph">
<p>Review the code, not the contributor or their comments.</p>
</div>
<div class="paragraph">
<p>When you disagree, state your point of view once and move on.
<a href="https://github.com/bitcoin/bitcoin/pull/22245#issuecomment-862044403">Here&#8217;s
an example</a>. Don&#8217;t flood the comments section, browbeat others or
overreact. Be patient, never aggressive, pushy or bullying. Remember
that the most important thing is probably not the issue being discussed,
but your relationship with the other contributors.</p>
</div>
<div class="paragraph">
<p>As a new contributor, be cautious with giving a NACK. Assume by default
that you might lack understanding or context. If you do NACK, provide
good reasoning.
<a href="https://github.com/bitcoin/bitcoin/pull/12360#issuecomment-383342462">Here&#8217;s
one example</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="signing-commits"><a class="anchor" href="#signing-commits"></a>Signing commits with Opentimestamps</h5>
<div class="paragraph">
<p>Some Bitcoin Core contributors sign and OpenTimestamp their ACKs. While
that is beyond the scope of this document, it is surprisingly trivial to
sign your commits using the
<a href="https://github.com/opentimestamps/opentimestamps-client/blob/master/doc/git-integration.md">OpenTimestamps
Git Integration</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_collapsible_comments"><a class="anchor" href="#_collapsible_comments"></a>Collapsible comments</h5>
<div class="paragraph">
<p>After a while you&#8217;ll notice that contributors sometimes review using
<a href="https://github.com/bitcoin/bitcoin/pull/15600#issuecomment-604144041">collapsible
comments</a>. <em>Cool,</em> you may think, <em>how do I do that?</em> It&#8217;s done using
HTML <code>details</code> tags.
<a href="https://gist.github.com/joyrexus/16041f2426450e73f5df9391f7f7ae5f">Here&#8217;s
how</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_credits"><a class="anchor" href="#_credits"></a>CREDITS</h4>
<div class="paragraph">
<p>Thanks to <a href="https://twitter.com/moneyball">Steve Lee</a> (moneyball) and
<a href="https://twitter.com/michaelfolkson">Michael Folkson</a> for reviewing this
write-up and their suggestions.</p>
</div>
<div class="paragraph">
<p>This article includes observed comments on GitHub and IRC by the
following Bitcoin Core contributors/maintainers who deserve to be
credited: Wladimir van der Laan, Marco Falke, Pieter Wuille, Gregory
Maxwell, Anthony Towns, and Russ Yanofsky.</p>
</div>
<div class="paragraph">
<p>Over the years I had become disillusioned by the central influence of
BDFLs in programming languages and open source projects. Wladimir van
der Laan&#8217;s
<a href="https://twitter.com/orionwl/status/1131564038444453889">long-standing</a>
<a href="https://twitter.com/orionwl/status/1131827793908645888">humble</a>
<a href="https://twitter.com/orionwl/status/1131924832071880705">service</a> to
Bitcoin sparked the possibility to me of perhaps doing the same.</p>
</div>
<div class="paragraph">
<p>Finally, a big thank you to the Bitcoin Core contributors for their
patience with my review attempts so far, notably John Newbery, Marco
Falke, João Barbosa, practicalswift, Gregory Sanders, Jonas Schnelli,
Pieter Wuille and Wladimir van der Laan, and to Adam Jonas and John
Newbery for their guidance and advice from the start.</p>
</div>
<div class="paragraph">
<p>Cheers,</p>
</div>
<div class="paragraph">
<p>Jon Atack</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gloria_zhao_common_pr_review_questions"><a class="anchor" href="#_gloria_zhao_common_pr_review_questions"></a>7.8. Gloria Zhao - Common PR Review Questions</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://github.com/glozow/bitcoin-notes/blob/master/review-checklist.md" class="bare">https://github.com/glozow/bitcoin-notes/blob/master/review-checklist.md</a></p>
</li>
<li>
<p>Author: Gloria Zhao</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>People often ask <code>how do I get better at reviewing PRs?'' and I’m not
sure how to answer that other than </code>review a lot of PRs'' and ``look at
a lot of PR reviews that others have done.''</p>
</div>
<div class="sect3">
<h4 id="_bad_reviews"><a class="anchor" href="#_bad_reviews"></a>``Bad'' Reviews</h4>
<div class="paragraph">
<p>A ``bad'' review would be something like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>I checked out the PR and ran all the automated tests. ACK.</p>
</li>
<li>
<p>Not sure what this does, but it’s trying to change wallet behavior.
NACK.</p>
</li>
<li>
<p>ACK (no explanation)</p>
</li>
<li>
<p>NACK (no explanation)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_great_reviews"><a class="anchor" href="#_great_reviews"></a>Great Reviews</h4>
<div class="paragraph">
<p>A ``good'' review doesn’t necessarily find a bug, or contain a ton of
comments, or picks with a fine-toothed comb. I think it just needs to
have enough information so that maintainer or author can determine how
much weight to put on it. For example, any monkey can create 10 github
accounts and sybil att-ACK PR reviews.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Commit-by-Commit thoroughness:
<a href="https://github.com/bitcoin/bitcoin/pull/17331#pullrequestreview-663562523" class="bare">https://github.com/bitcoin/bitcoin/pull/17331#pullrequestreview-663562523</a>,
<a href="https://github.com/bitcoin/bitcoin/pull/17331#pullrequestreview-665781489" class="bare">https://github.com/bitcoin/bitcoin/pull/17331#pullrequestreview-665781489</a></p>
</li>
<li>
<p>Testing/Benchmarking:
<a href="https://github.com/bitcoin/bitcoin/pull/20827#issuecomment-1023108273" class="bare">https://github.com/bitcoin/bitcoin/pull/20827#issuecomment-1023108273</a></p>
</li>
<li>
<p>A reACK that lists what happened in between:
<a href="https://github.com/bitcoin/bitcoin/pull/20749#pullrequestreview-578845627" class="bare">https://github.com/bitcoin/bitcoin/pull/20749#pullrequestreview-578845627</a></p>
</li>
<li>
<p>Helpful notes for other reviewers:
<a href="https://github.com/bitcoin/bitcoin/pull/20962#pullrequestreview-780869719" class="bare">https://github.com/bitcoin/bitcoin/pull/20962#pullrequestreview-780869719</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/pull/21061#issuecomment-851563105" class="bare">https://github.com/bitcoin/bitcoin/pull/21061#issuecomment-851563105</a></p>
</li>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/pull/23121#pullrequestreview-842354501" class="bare">https://github.com/bitcoin/bitcoin/pull/23121#pullrequestreview-842354501</a></p>
</li>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/pull/15169#pullrequestreview-262526428" class="bare">https://github.com/bitcoin/bitcoin/pull/15169#pullrequestreview-262526428</a></p>
</li>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r499511223" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r499511223</a></p>
</li>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498781706" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498781706</a></p>
</li>
<li>
<p><a href="https://github.com/bitcoin/bitcoin/pull/19109#issuecomment-636246238" class="bare">https://github.com/bitcoin/bitcoin/pull/19109#issuecomment-636246238</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can leave a helpful review without being an expert:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clarifying what the review doesn’t cover:
<a href="https://github.com/bitcoin/bitcoin/pull/20749#pullrequestreview-570434073" class="bare">https://github.com/bitcoin/bitcoin/pull/20749#pullrequestreview-570434073</a></p>
</li>
<li>
<p>Summarizing what you think the PR does:
<a href="https://github.com/bitcoin/bitcoin/pull/23443#pullrequestreview-823339788" class="bare">https://github.com/bitcoin/bitcoin/pull/23443#pullrequestreview-823339788</a></p>
</li>
<li>
<p>Asking questions:
<a href="https://github.com/bitcoin/bitcoin/pull/19988#pullrequestreview-500252767" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#pullrequestreview-500252767</a></p>
</li>
<li>
<p>NACK including personal and summary of others’ reasons:
<a href="https://github.com/bitcoin/bitcoin/pull/22871#pullrequestreview-763016994" class="bare">https://github.com/bitcoin/bitcoin/pull/22871#pullrequestreview-763016994</a></p>
</li>
<li>
<p>Describing exactly what you did to review:
<a href="https://github.com/bitcoin/bitcoin/pull/20749#pullrequestreview-576608102" class="bare">https://github.com/bitcoin/bitcoin/pull/20749#pullrequestreview-576608102</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lots more examples below as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_is_this"><a class="anchor" href="#_what_is_this"></a>What is this?</h4>
<div class="paragraph">
<p>I personally think a good review is one where I’ve asked myself a lot of
pointed questions about the PR and been satisfied with the answers to
them. Sometimes, the same question applies to many PRs, so I’ve made an
effort to write them down here.</p>
</div>
<div class="paragraph">
<p>This is a list of questions I might ask myself while reviewing a Bitcoin
Core PR. It is not a list of <em>all</em> the questions I would ask while
reviewing a PR. In fact, I don’t think any list of 100 questions could
be sufficient for any specific PR.</p>
</div>
<div class="paragraph">
<p><strong>I do NOT recommend treating this as a checklist with which you review
PRs.</strong></p>
</div>
<div class="paragraph">
<p>I think it’s a good idea to create your own list of common PR review
questions, and perhaps use these examples as inspiration for generating
those questions.</p>
</div>
<div class="paragraph">
<p>On the organization of these questions:</p>
</div>
<div class="paragraph">
<p>This list is approximately organized by the order in which I’d ask those
questions. For me, the nature of the question usually depends on what
stage the PR is at and the extent of my own review. Naturally, I start
with conceptual questions, then approach-related questions, and then
implementation questions. Generally, I personally think it’s useless to
leave C++ syntax-related comments on a draft PR, and would feel rude
going back to ``does this make sense'' after the author has addressed
20+ of my code organization suggestions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conceptual"><a class="anchor" href="#_conceptual"></a>Conceptual</h4>
<div class="paragraph">
<p>Before considering anything implementation-related:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What type of PR is this? New feature, bug fix, performance, refactor,
documentation, testing, etc. Does it contain more than one of those
categories?</p>
</li>
<li>
<p>Does the PR take into account other work in the project (eg does it
conflict unnecessarily with other PRs, or go in a different direction
from other people’s work, etc).</p>
</li>
<li>
<p>Could this PR be re-organized to make review easier?</p>
</li>
<li>
<p>Could this PR be split up?</p>
</li>
<li>
<p>Could the PR-splitting leave us in a weird intermediary state?
<a href="https://github.com/bitcoin/bitcoin/pull/23443#pullrequestreview-823455718" class="bare">https://github.com/bitcoin/bitcoin/pull/23443#pullrequestreview-823455718</a>,
<a href="https://github.com/bitcoin/bitcoin/pull/23075#pullrequestreview-827662306" class="bare">https://github.com/bitcoin/bitcoin/pull/23075#pullrequestreview-827662306</a></p>
</li>
<li>
<p>Are all commits atomic? If a commit fails on its own, it’s harder to
revert and breaks <code>git bisect</code>.
<a href="https://github.com/bitcoin/bitcoin/pull/23075#pullrequestreview-827662306" class="bare">https://github.com/bitcoin/bitcoin/pull/23075#pullrequestreview-827662306</a></p>
</li>
<li>
<p>Could this just be a scripted-diff?</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_motivation"><a class="anchor" href="#_motivation"></a>Motivation</h5>
<div class="paragraph">
<p>Is this PR sufficiently motivated?</p>
</div>
<div class="paragraph">
<p>Does the PR add a new feature?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is the feature useful for a significant number of users, or very few?</p>
</li>
<li>
<p>Would this feature only benefit an extremely advanced user who should
probably write a custom patch instead?</p>
</li>
<li>
<p>Has anyone actually requested this? examples:
<a href="https://github.com/bitcoin/bitcoin/pull/22871#issuecomment-915689161" class="bare">https://github.com/bitcoin/bitcoin/pull/22871#issuecomment-915689161</a></p>
</li>
<li>
<p>Are there other features that would be enabled by this PR?</p>
</li>
<li>
<p>If this PR is an improvement, how is it demonstrated?</p>
<div class="ulist">
<ul>
<li>
<p>Is there a bench or simulation?</p>
</li>
<li>
<p>Has it been tested within the context of the full network? How does
it interact with other protocol features (e.g. compact block relay) or
proposed improvements?</p>
</li>
<li>
<p>Did you verify the results yourself?
<a href="https://github.com/bitcoin/bitcoin/pull/23157#pullrequestreview-775676379" class="bare">https://github.com/bitcoin/bitcoin/pull/23157#pullrequestreview-775676379</a></p>
</li>
<li>
<p>Did you evaluate the method used to gather measurements?</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Does the PR solve a problem? Does it fix a bug?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is it a real bug or misuse of the software?</p>
</li>
<li>
<p>If there is a bug, is there a test that can be run before to reproduce
the issue, and after to verify the fix? Is there a description of how to
reproduce the bug manually?
<a href="https://github.com/bitcoin/bitcoin/pull/24538#issue-1166645904" class="bare">https://github.com/bitcoin/bitcoin/pull/24538#issue-1166645904</a>,
<a href="https://github.com/bitcoin/bitcoin/pull/22577#issue-955282835" class="bare">https://github.com/bitcoin/bitcoin/pull/22577#issue-955282835</a></p>
</li>
<li>
<p>Can the issue be solved simply with better documentation?
<a href="https://github.com/bitcoin/bitcoin/pull/22867#pullrequestreview-822532341" class="bare">https://github.com/bitcoin/bitcoin/pull/22867#pullrequestreview-822532341</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_downsides"><a class="anchor" href="#_downsides"></a>Downsides</h5>
<div class="paragraph">
<p>What are the downsides of this PR, conceptually?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What are the maintenance costs of this PR?</p>
<div class="ulist">
<ul>
<li>
<p>Does it require someone to update it at every release?</p>
</li>
<li>
<p>Is this PR introducing a bunch of hard-to-understand new code?</p>
</li>
<li>
<p>Is this PR introducing any new dependencies?</p>
</li>
</ul>
</div>
</li>
<li>
<p>Is it incompatible with another existing/proposed improvement?</p>
</li>
<li>
<p>Is this compatible with all of the \{operating systems, architectures,
platforms, dependency versions} we want to support?
<a href="https://github.com/bitcoin/bitcoin/pull/23585#issuecomment-983259221" class="bare">https://github.com/bitcoin/bitcoin/pull/23585#issuecomment-983259221</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_for_users"><a class="anchor" href="#_for_users"></a>For users</h5>
<div class="ulist">
<ul>
<li>
<p>Does this introduce a footgun?</p>
</li>
<li>
<p>Should this be the new default for users?</p>
</li>
<li>
<p>Should this be optional/configurable? Should it be opt in or opt out?</p>
</li>
<li>
<p>Are the changes backwards-compatible?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_approach"><a class="anchor" href="#_approach"></a>Approach</h4>
<div class="paragraph">
<p>This PR is a good idea. That doesn’t mean it should be merged.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Does this belong in protocol or should it be at the application level?</p>
</li>
<li>
<p>Is there a BIP/specification? Is it well-specified?</p>
</li>
<li>
<p>Would this cause our behavior to deviate from a protocol/specification
that we are supposed to support?</p>
</li>
<li>
<p>Are there any alternative approaches? How does this approach compare?</p>
<div class="ulist">
<ul>
<li>
<p>improved/worsened technical debt</p>
</li>
<li>
<p>Performance:
<a href="https://github.com/bitcoin/bitcoin/pull/24530#issuecomment-1065073285" class="bare">https://github.com/bitcoin/bitcoin/pull/24530#issuecomment-1065073285</a></p>
</li>
<li>
<p>User Interface:
<a href="https://github.com/bitcoin/bitcoin/pull/23534#issuecomment-1005891404" class="bare">https://github.com/bitcoin/bitcoin/pull/23534#issuecomment-1005891404</a></p>
</li>
<li>
<p>safety wrt activation</p>
</li>
<li>
<p>global vs local maximum:
<a href="https://github.com/bitcoin/bitcoin/pull/17331#pullrequestreview-665781489" class="bare">https://github.com/bitcoin/bitcoin/pull/17331#pullrequestreview-665781489</a></p>
</li>
<li>
<p>kill another bird with the same stone:
<a href="https://github.com/bitcoin/bitcoin/pull/17786#issuecomment-1005017943" class="bare">https://github.com/bitcoin/bitcoin/pull/17786#issuecomment-1005017943</a></p>
</li>
<li>
<p>code organization and architecture:
<a href="https://github.com/bitcoin/bitcoin/pull/20833#discussion_r563152582" class="bare">https://github.com/bitcoin/bitcoin/pull/20833#discussion_r563152582</a>,
<a href="https://github.com/bitcoin/bitcoin/pull/23443#discussion_r763854039" class="bare">https://github.com/bitcoin/bitcoin/pull/23443#discussion_r763854039</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Are the magic numbers (constants, percentages, feerates, sizes, etc.)
well-researched?
<a href="https://github.com/bitcoin/bitcoin/pull/22009#discussion_r691956992" class="bare">https://github.com/bitcoin/bitcoin/pull/22009#discussion_r691956992</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_security_privacy_dos"><a class="anchor" href="#_security_privacy_dos"></a>Security, Privacy, DoS</h5>
<div class="ulist">
<ul>
<li>
<p>What threat model? Does this change the way we handle something from a
p2p node, or can this code path only be hit by a (privileged)
RPC/GUI/REST client?</p>
</li>
<li>
<p>Could a bug here cause inflation or a deviation from consensus?</p>
</li>
<li>
<p>Are we introducing a new social engineering security risk? E.g. a new
command/file that scammers can use to easily steal from a wallet</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_are_we_introducing_new_dos_vectors"><a class="anchor" href="#_are_we_introducing_new_dos_vectors"></a>Are we introducing new DoS vectors?</h6>
<div class="ulist">
<ul>
<li>
<p>Is it possible for a peer to exhaust CPU resources? How much stuff can
a peer make us do? e.g.
<a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r499511223" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r499511223</a></p>
</li>
<li>
<p>Could a peer cause us to loop infinitely or for a long period of time?</p>
</li>
<li>
<p>Could a peer cause an OOM?</p>
</li>
<li>
<p>What are the bounds on memory usage?
<a href="https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-428486018" class="bare">https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-428486018</a></p>
</li>
<li>
<p>If this is deployed to a whole network of nodes, will it cause
periodic spikes in bandwidth usage?</p>
</li>
<li>
<p>Is there an assert() statement we could potentially hit due to peer
input, causing a whole network of nodes to crash?</p>
</li>
<li>
<p>How does this affect the performance of our UTXOset cache? examples:
<a href="https://github.com/bitcoin/bitcoin/blob/807169e10b4a18324356ed6ee4d69587b96a7c70/src/validation.cpp#L1234-L1251" class="bare">https://github.com/bitcoin/bitcoin/blob/807169e10b4a18324356ed6ee4d69587b96a7c70/src/validation.cpp#L1234-L1251</a></p>
</li>
<li>
<p>Would this give a peer the ability to make us write an unbounded
amount of data to our debug.log?</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_privacy_3"><a class="anchor" href="#_privacy_3"></a>Privacy</h6>
<div class="ulist">
<ul>
<li>
<p>Could this make it easier to deanonymize transaction origin?</p>
</li>
<li>
<p>Could an attacker take advantage of this behavior to more easily
analyze network topology?
<a href="https://github.com/bitcoin/bitcoin/commit/acd6135b43941fa51d52f5fcdb2ce944280ad01e" class="bare">https://github.com/bitcoin/bitcoin/commit/acd6135b43941fa51d52f5fcdb2ce944280ad01e</a>)</p>
</li>
<li>
<p>Are we creating a behavior that can be used to fingerprint this node?</p>
</li>
<li>
<p>Is privacy specifically worsened by this PR, or does it have a neutral
effect within the context of an existing privacy leak?</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_security_by_component"><a class="anchor" href="#_security_by_component"></a>Security By Component</h6>
<div class="ulist">
<ul>
<li>
<p>p2p</p>
<div class="ulist">
<ul>
<li>
<p>Could this make it easier for a peer to eclipse us/ Monopolize our
addrman?</p>
</li>
<li>
<p>Does this change eviction logic in a way that may allow attackers to
trigger us to disconnect from an honest peer?</p>
</li>
<li>
<p>Is it possible for an attacker to censor somebody’s transaction by
taking advantage of some behavior we have here?</p>
</li>
<li>
<p>Are we opening a new pinning vector?</p>
</li>
<li>
<p>Could it cause us to add transactions to our mempool that aren’t
incentive-compatible, thereby causing it to deviate from miners’
mempools?</p>
</li>
<li>
<p>Does this leak information about when a transaction enters/leaves our
mempool?</p>
</li>
</ul>
</div>
</li>
<li>
<p>Wallet</p>
<div class="ulist">
<ul>
<li>
<p>Could a bug here cause someone to lose money?</p>
</li>
<li>
<p>Could this link transactions, UTXOs, addresses, etc. together?</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_implementation"><a class="anchor" href="#_implementation"></a>Implementation</h4>
<div class="paragraph">
<p>At first glance, this PR looks like a good improvement and the approach
seems to make sense. Here is the Big danger now; it can have some nasty
bugs in it. Don’t ``no behavior changes,'' sometimes a bug is hiding in
a refactor:
<a href="https://github.com/bitcoin/bitcoin/pull/21160#discussion_r623305322" class="bare">https://github.com/bitcoin/bitcoin/pull/21160#discussion_r623305322</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is there a BIP/specification? Does this implementation match the
specification?
<a href="https://github.com/bitcoin/bitcoin/pull/23443#discussion_r763874524" class="bare">https://github.com/bitcoin/bitcoin/pull/23443#discussion_r763874524</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_common_bitcoin_specific_bugs_and_attacks"><a class="anchor" href="#_common_bitcoin_specific_bugs_and_attacks"></a>Common Bitcoin-Specific Bugs and Attacks</h5>
<div class="ulist">
<ul>
<li>
<p>Are we using the txid when you should be using wtxid, and vice versa?</p>
</li>
<li>
<p>Are we using virtual bytes when we should be using bytes, and vice
versa?</p>
</li>
<li>
<p>If this uses virtual bytes, is it compatible with something else that
uses weight units, and vice versa?</p>
</li>
<li>
<p>Are we using fee when we should be using feerate, and vice versa?</p>
</li>
<li>
<p>What happens if there is a reorg?</p>
</li>
<li>
<p>For a wallet transaction or UTXO, should a transaction be treated
differently if it is \{confirmed, unconfirmed}? What if there is a
conflicting transaction in the \{mempool, chain, wallet}?</p>
</li>
<li>
<p>Is this code safe when the transaction’s txid != wtxid?</p>
</li>
<li>
<p>Can this have any impact on block propagation speed?</p>
</li>
<li>
<p>Does this break the guix build?</p>
</li>
<li>
<p>What impacts might this have on LN transactions or other L2 projects?
<a href="https://github.com/bitcoin/bitcoin/pull/22871#pullrequestreview-760633448" class="bare">https://github.com/bitcoin/bitcoin/pull/22871#pullrequestreview-760633448</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_performance"><a class="anchor" href="#_performance"></a>Performance</h5>
<div class="ulist">
<ul>
<li>
<p>Are space and time complexity acceptable for the use case?</p>
</li>
<li>
<p>Are the data structures appropriate for this purpose?</p>
</li>
<li>
<p>Does it make use of the tools we have for parallelization?</p>
</li>
<li>
<p>If adding optional functionality, how does it impact the performance
of a user’s node if they don’t opt in to it? E.g. USDT</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_code_architecture"><a class="anchor" href="#_code_architecture"></a>Code Architecture</h5>
<div class="paragraph">
<p>(this is a big topic, and isn’t unique to Bitcoin) <mark>#</mark> Thread safety,
concurrency</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is it thread-safe?</p>
</li>
<li>
<p>Would it be thread-safe in the future if/when x and y were to be
multi-threaded?</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_c"><a class="anchor" href="#_c"></a>C++</h5>
<div class="ulist">
<ul>
<li>
<p>Are we making copies of variables when we should be passing a
reference?
<a href="https://github.com/bitcoin/bitcoin/pull/22677#discussion_r760400537" class="bare">https://github.com/bitcoin/bitcoin/pull/22677#discussion_r760400537</a></p>
</li>
<li>
<p>Are we casting variables unnecessarily? Should we be using auto
instead?</p>
</li>
<li>
<p>Const things should be const</p>
</li>
<li>
<p>Free your memory, or just use smart pointers</p>
</li>
<li>
<p>Could this implementation easily be swapped for an STL algorithm or
container?</p>
</li>
<li>
<p>Are you using boost when you should be using stdlib?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>default syntax
<a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r494257310" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r494257310</a></p>
</li>
<li>
<p>friend
<a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498699913" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498699913</a></p>
</li>
<li>
<p>performance discussion
<a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498781706" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498781706</a></p>
</li>
<li>
<p>compiler help you
<a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498644419" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r498644419</a></p>
</li>
<li>
<p>arrays vs std::arays
<a href="https://github.com/bitcoin/bitcoin/pull/19988#discussion_r500887683" class="bare">https://github.com/bitcoin/bitcoin/pull/19988#discussion_r500887683</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other"><a class="anchor" href="#_other"></a>Other</h4>
<div class="sect4">
<h5 id="_testing"><a class="anchor" href="#_testing"></a>Testing</h5>
<div class="paragraph">
<p>Are there enough tests?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is there good test coverage? Is there any code that isn’t tested?
example
<a href="https://github.com/bitcoin/bitcoin/pull/23443#discussion_r763865574" class="bare">https://github.com/bitcoin/bitcoin/pull/23443#discussion_r763865574</a></p>
</li>
<li>
<p>Are there normal-usage or edge cases that aren’t tested?</p>
</li>
<li>
<p>Is the type of test appropriate? (unit, fuzz, functional, bench)</p>
<div class="ulist">
<ul>
<li>
<p>Is it an isolated, low-level piece of code &#8594; unit</p>
</li>
<li>
<p>Is it just an implementation detail &#8594; unit</p>
</li>
<li>
<p>Are there two implementations that you need to ensure are identical
&#8594; differential fuzz,
<a href="https://github.com/bitcoin/bitcoin/pull/19988/commits/5b03121d60527a193a84c339151481f9c9c1962b" class="bare">https://github.com/bitcoin/bitcoin/pull/19988/commits/5b03121d60527a193a84c339151481f9c9c1962b</a></p>
</li>
<li>
<p>Is it trying to demonstrate a low-level performance boost &#8594; bench</p>
</li>
<li>
<p>Does it have an affect on observable behavior &#8594; functional</p>
</li>
</ul>
</div>
</li>
<li>
<p>Is it actually testing what it should be testing?</p>
<div class="ulist">
<ul>
<li>
<p>If you’re asserting that something doesn’t happen, is it because of a
delay? e.g.
<a href="https://github.com/bitcoin/bitcoin/pull/21327#discussion_r585782939" class="bare">https://github.com/bitcoin/bitcoin/pull/21327#discussion_r585782939</a></p>
</li>
<li>
<p>If you’re asserting that something doesn’t happen, is it because it’s
handled asynchronously?</p>
</li>
<li>
<p>Are you sure that you’re testing this code in isolation or is it
buried under 999 other things that could be causing some behavior?</p>
</li>
<li>
<p>If you mutate the implementation, does the test fail?</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Are the tests well-written?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is it using the functional test framework to test a very low-level
detail?</p>
</li>
<li>
<p>Are the tests unacceptably slow?
<a href="https://github.com/bitcoin/bitcoin/pull/23288" class="bare">https://github.com/bitcoin/bitcoin/pull/23288</a></p>
</li>
<li>
<p>Do the tests rely on timing that may be delayed when they are run in
parallel with other tests? Are the tests racy?
<a href="https://github.com/bitcoin/bitcoin/pull/11740#issuecomment-350817586" class="bare">https://github.com/bitcoin/bitcoin/pull/11740#issuecomment-350817586</a></p>
</li>
<li>
<p>Are the tests themselves maintainable?
<a href="https://github.com/bitcoin/bitcoin/pull/21280#discussion_r603986455" class="bare">https://github.com/bitcoin/bitcoin/pull/21280#discussion_r603986455</a></p>
</li>
<li>
<p>In functional tests: does the test have a wallet dependency when it’s
not testing wallet behavior?</p>
</li>
<li>
<p>In functional tests: is it thread-safe?</p>
</li>
<li>
<p>Are the tests repeating stuff when they should be using utils?</p>
</li>
<li>
<p>Is the test adding helper code that should be added to test utils?</p>
</li>
<li>
<p>Is manual testing required and/or appropriate? Are any methods
suggested?</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_documentation"><a class="anchor" href="#_documentation"></a>Documentation</h5>
<div class="ulist">
<ul>
<li>
<p>Is this well-documented enough?</p>
<div class="ulist">
<ul>
<li>
<p>Is the code easy to follow? Are the comments misleading, incorrect,
obvious?</p>
</li>
<li>
<p>Are release notes needed?</p>
</li>
<li>
<p>Are potential footguns and user errors plastered with warnings?
<a href="https://github.com/bitcoin/bitcoin/pull/23201#discussion_r783933728" class="bare">https://github.com/bitcoin/bitcoin/pull/23201#discussion_r783933728</a></p>
</li>
<li>
<p>Are future TODOs documented well enough so that maintenance doesn’t
require the author to personally remember to do something? E.g.
deprecations</p>
</li>
<li>
<p>Are newly introduced functions, members, classes, etc. accompanied
with a doxygen header comment?</p>
</li>
</ul>
</div>
</li>
<li>
<p>If a future developer traced the history back to a particular commit,
would they be able to understand why a change was made? Does the
description match what the code does (will be in the merge commit log)?
If not, it should be updated.
<a href="https://github.com/bitcoin/bitcoin/pull/22009#issuecomment-901766747" class="bare">https://github.com/bitcoin/bitcoin/pull/22009#issuecomment-901766747</a></p>
</li>
<li>
<p>If a future developer were to change this, might they make a mistake
if they don’t understand it fully? Can this be guarded - e.g. with
static assertions, sanity checks, etc?</p>
</li>
<li>
<p>Does this implementation break any pre-existing API expectations?
e.g. we might now call a function with different arguments that breaks
its preconditions.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_meta"><a class="anchor" href="#_meta"></a>Meta</h5>
<div class="ulist">
<ul>
<li>
<p>Who might need to be notified about this change?</p>
</li>
<li>
<p>Does this PR add new dependencies or increase usage of a dependency
we’re trying to get rid of?</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tadge_dryja_funding"><a class="anchor" href="#_tadge_dryja_funding"></a>7.9. Tadge Dryja - Funding</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://btctranscripts.com/cryptoeconomic-systems/2019/funding/" class="bare">https://btctranscripts.com/cryptoeconomic-systems/2019/funding/</a></p>
</li>
<li>
<p>Author: Tadge Dryja</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
<li>
<p>Video: <a href="https://www.youtube.com/watch?v=IPtWegnXhJQ&amp;list=PLaXwSyee0z4zWO0JLgcwhnjKqNBNJhBXY&amp;index=32" class="bare">https://www.youtube.com/watch?v=IPtWegnXhJQ&amp;list=PLaXwSyee0z4zWO0JLgcwhnjKqNBNJhBXY&amp;index=32</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Funding bitcoin development</p>
</div>
<div class="paragraph">
<p>It’s basically open-source funding. It’s a subset of open-source
funding. But these are similar problems with many open-source projects.
As far as I can tell, all these digital currency cryptocurrency projects
are licensed with open-source licenses. There may be some that are not,
and some things are patented. I generally steer clear of the patented
work. If it’s decentralized and open-source, then why are you just
delivering a binary to me? I don’t know what’s going on there.</p>
</div>
<div class="paragraph">
<p>Open-source funding is tricky. It’s interesting, though, because we’re
literally programming money. Sometimes I joke that what I’m doing is
making money. Funding is not simple at all, and it’s sometimes elusive.
I am going to talk about a few funding models. These are not well
defined. There’s a lot of blurry perspective between these things and
some of them have arrows going between one and another. I don’t want to
say too specific things.</p>
</div>
<div class="paragraph">
<p>How does a project like bitcoin or ethereum get funded?</p>
</div>
<div class="paragraph">
<p>There’s no funding. There’s the .edu university funding idea; there’s
corporate donations, personal donations, there are for-profit companies
wokring on it, there’s premine or ICO ideas, or mining rewards, and
non-profit companies or foundations.</p>
</div>
<div class="sect3">
<h4 id="_no_funding"><a class="anchor" href="#_no_funding"></a>No funding</h4>
<div class="paragraph">
<p>This was bitcoin’s initial model. There’s no funding. People just work
on things they think are cool and interesting. There’s no money in this,
so for some people it’s only part-time or their weekend hobby. This can
generally have a lot of people, but they are mostly part-time. This is
how a lot of people who work on bitcoin started. I just started reading
the code and playing with it, with no expectation of compensation. The
fact that I get paid to work on bitcoin now is really cool, but totally
unexpected. If you told me 8 years ago that I would be working full-time
on this stuff, I would have said no way.</p>
</div>
<div class="paragraph">
<p>One of the cool things about the no funding model is that there’s an
easy on-ramp. You can just open a pull request. This is not the case in
other models. All the other ones, the fact that there’s now compensation
makes it sort of in a way a barrier to a people who are not getting paid
are in many ways less likely to work on it. It doesn’t necessarily make
any sense, but psychologically it’s true— if someone is making a lot of
money to work on something, then why should I do that for free?</p>
</div>
</div>
<div class="sect3">
<h4 id="_university_funding"><a class="anchor" href="#_university_funding"></a>University funding</h4>
<div class="paragraph">
<p>Academia… I don’t quite share all the criticism that Bryan has for
academia. I tried to get a PhD working on bitcoin and I only lasted a
year and I figured, this just doesn’t work. This whole system doesn’t
work, and people are jerks to me, and I don’t even get to work on what I
want to work on. Most of the students I was working with were not US
citizens. For me, my advisor was yelling at me and it was always on the
phone and we didn’t meet in person once– and one day I moved the phone
away and figured, I don’t want to do this any more. For me, it’s easier
because I am a US citizen and I wasn’t making that much money anyway, so
I just stopped. I had rent, but whatever. But most of my colleagues were
from China and India and quitting a PhD was a huge deal for them because
if they quit then they had to leave very soon. It felt like many of the
professors knew that and abused it. There’s a lot of problems in
academia. But the idea is great; we’re all in it to research and advance
knowledge. The idea is good, but the implementation could be improved.</p>
</div>
<div class="paragraph">
<p>One thing that people have assumed or asked about is, they think there’s
.gov funding like NSF or whatever. There’s actually very little of that.
The DCI as far as I know here hasn’t gotten funding from NSF. Not sure
if we have tried that much. There’s a little, if you look around. IC3 if
you look around, they got $3 million in funding from NSF which is a
decent amount but not much.</p>
</div>
</div>
<div class="sect3">
<h4 id="_corporate_donations"><a class="anchor" href="#_corporate_donations"></a>Corporate donations</h4>
<div class="paragraph">
<p>These corporate donations happen sometimes. Companies donate money to
developers or researchers and sometimes individuals. There are people at
this conference who have gotten money from an exchange called BitMEX
where they said hey you have been working on bitcoin for a while, keep
at it, here’s some money. Bitmain was funding some people. Fidelity
donates money to MIT DCI and we work together on things. There’s some of
that, where corporations say hey this is an important thing and maybe
we’re not directly benefiting from it, and we’re part of this ecosystem
and let’s donate to it. There’s also personal donations from individuals
to other individuals or groups. In some cases, these individuals start
VC style funds to invest in things or they– one of the big ones in
bitcoin is that some individuals started a firm with their own money and
employed a lot of bitcoin developers. So that’s a big thing.</p>
</div>
</div>
<div class="sect3">
<h4 id="_for_profit_company"><a class="anchor" href="#_for_profit_company"></a>For-profit company</h4>
<div class="paragraph">
<p>This one is tricky. Some cryptocurrency projects are run as companies,
like a regular Delaware C-corp and there’s a board. There’s a CEO of the
currency– so how is this decentralized? It might be open-source, and
that’s useful, but it does lend itself much more to centralized
development. If there’s a coin run by a company and you want to change
it, well you’re not in that company.</p>
</div>
</div>
<div class="sect3">
<h4 id="_premine_and_icos"><a class="anchor" href="#_premine_and_icos"></a>Premine and ICOs</h4>
<div class="paragraph">
<p>We could have a whole talk or class on premines and ICOs. It started
with premines back in 2011-2012 when altcoins started to pop up. People
would say hey I’m making an altcoin, and maybe I want to give myself
some of the money in the system. The idea of a premine was that there
was an initial distribution of coins in the software. In bitcoin, this
is not the case. In bitcoin, the genesis block has 50 coins but either
intentionally or unintentionally these coins are not spendable. Everyone
who wants bitcoin had to mine, and Satoshi didn’t code in any for
himself.</p>
</div>
<div class="paragraph">
<p>ICOs are sort of a pre-pre-mine which started years later; you want to
do a premine but you haven’t written the software yet and you want the
money to write the software. So you give an IOU for the coins that don’t
yet exist because the software hasn’t been written. But you want the IOU
to trade and be tradeable, and then people can trade on those coins that
don’t yet exist. There’s ERC20 and so on. This seems to raise a lot of
money. It’s billions of dollars. Today, this seems like an inefficient
use of capital. There are projects that have received billions of
dollars of funding, and they haven’t delivered that much interesting
work, at least proportion to the amount of money raised. Yeah I work on
bitcoin and have that bias, but if you look at the proportional output,
yeah… Also, there’s a bunch of legality questions and maybe this mania
was over and it was just an unsustainable fad.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mining_rewards"><a class="anchor" href="#_mining_rewards"></a>Mining rewards</h4>
<div class="paragraph">
<p>I only know of one prominent case that has said, similar to premining or
an ICO, let’s have a vesting schedule with mining. What happens is that
when coins are mined, some portion of that mining reward goes to the
initial developers or initial investors. This feels a little bit better.
In ICOs, you ask for $100 million and then you get it and then there’s
not a lot of motivation to actually work… there’s a lot of fun things to
do with $100 million. Programming is fun but I would probably want to
have fun for a year first. Mining rewards is more like a vesting
schedule and doesn’t have the frontloading property. But why should I
work on your well-funded coin? This is an interesting project, and maybe
I can solve some of the problems, but you guys have $100 million and how
about you pay me first? I don’t want to volunteer my resources or my
expertise or my time to a place that has fancy offices and treehouses in
their office and stuff, without being compensated. Some part of me finds
this cool, and wants to work there, and then another part says well if
they don’t pay me then why should I contribute work to them.</p>
</div>
</div>
<div class="sect3">
<h4 id="_non_profits_and_foundations"><a class="anchor" href="#_non_profits_and_foundations"></a>Non-profits and foundations</h4>
<div class="paragraph">
<p>There’s these non-profit foundations that– I don’t really understand
them that well. They are often linked to ICOs or something. After an
ICO, they create a non-profit org like Ethereum Foundation or zcash
foundation. But where does the foundation get the money? If you’re a
non-profit, but you’re funded primarily from this for-profit company
then how independent are you really? The people funding you might be
controlling you, too. The idea is to decentralize the funding, but in
practice it’s not that clear to me whether it’s that useful. There was a
Bitcoin Foundation… you could ask some people here who worked on it, you
could ask them, some of those people are here and they probably have fun
stories. I have lots of fun stories. It was hard when writing these
slides to not talk about specific fun stories about people and entities
which might not be appropriate for onstage.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_should_we_fund_these_things"><a class="anchor" href="#_how_should_we_fund_these_things"></a>How should we fund these things?</h4>
<div class="paragraph">
<p>I don’t think there’s a clear answer for this. Bitcoin seems to have
sublinear development costs. When bitcoin was $20, there was a bunch of
people working on it. Then we had these coredev.tech meetings, and as
bitcoin is worth 100s of times worth more now, there’s not even 2x as
many people working on it. There’s more people working on it, as the
price has gone up, but it’s definitely sublinear. In economic terms, you
want small amounts of money to go in and a lot of really useful to come
out, and if it’s sublinear then that’s great. But is it too low or too
slow not sure.</p>
</div>
<div class="paragraph">
<p>This is often a problem in other open-source projects, like GPG which is
maintained by like one dude. OpenSSL, which is used by everyone, and
there’s bugs– but it’s someone else’s problem. It’s high wellfare in the
economic sense, in that you’re not really paying for openssl and yet you
get to use it. So open-source is great and you get to download linux for
free on to as many computers as possible, it’s the same software some
people would pay billions for and I get it for free. Maybe we could get
even better cryptography and systems if we had lots of funding. But
maybe it’s just the opposite; maybe we get more with less funding. I am
one of the people getting funding from working on open-source software.</p>
</div>
</div>
<div class="sect3">
<h4 id="_worst_case"><a class="anchor" href="#_worst_case"></a>Worst case</h4>
<div class="paragraph">
<p>Everyone tends to start their own coins and shares and coins, and then
all the talent gets fractured into tons of competing coins and nobody
cooperates. This is like the ICOs and look at coinmarketcap– there’s
rational reasons for people to do this, so it’s hard to complain. There
might be some stability in advancement paths for long-term careers. I am
working at DCI now, but is this a career? Maybe this whole thing
disappears? This thing didn’t exist 10 years ago, and there was no
funding 7 years ago. Is this a good long-term career choice? The reward
being sublinear in system utility for net social gains is great, but we
don’t don’t know how to do this. Markets tend towards getting good
results, but it’s a hard problem.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conclusion_3"><a class="anchor" href="#_conclusion_3"></a>Conclusion</h4>
<div class="paragraph">
<p>I work around here, so come bug me, ask me questions. Thank you.</p>
</div>
</div>
<div class="sect3">
<h4 id="_qa_4"><a class="anchor" href="#_qa_4"></a>Q&amp;A</h4>

</div>
</div>
<div class="sect2">
<h3 id="_michael_folkson_taproot_activation_meeting_2"><a class="anchor" href="#_michael_folkson_taproot_activation_meeting_2"></a>7.10. Michael Folkson - Taproot activation meeting 2</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-February/018380.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-February/018380.html</a></p>
</li>
<li>
<p>Author: Michael Folkson</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>A summary of the first Taproot activation meeting (February 3rd) is here:
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-February/018379.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-February/018379.html</a></p>
</div>
<div class="paragraph">
<p>It appears there is one (hopefully) last stumbling block before we are
ready to propose Taproot activation parameters to the mailing list.</p>
</div>
<div class="paragraph">
<p>Hence we are organizing a follow up meeting on IRC on the
##taproot-activation channel on Tuesday 16th February at 19:00 UTC.</p>
</div>
<div class="paragraph">
<p>As I said in the summary of the first Taproot activation meeting whether
lockinontimeout (LOT) is set to true or false in a Bitcoin Core release
attracted discussion during the meeting and has continued to attract
discussion afterwards.</p>
</div>
<div class="paragraph">
<p>I will weigh up the arguments I have seen for both true and false here. I
won’t comment on the strength of the arguments, merely attempt to summarize
them. Any errors are my own.</p>
</div>
<div class="paragraph">
<p>Arguments for setting lockinontimeout (LOT) to true in a Core release</p>
</div>
<div class="paragraph">
<p>T1) This entirely eradicates the possibility (however unlikely) that
Taproot fails to activate within a year. Although approximately 90 percent
of mining pools have already pledged to activate Taproot there is no reason
to open the door to possible delays and political shenanigans for no
reason, however unlikely.</p>
</div>
<div class="paragraph">
<p>T2) Given users can change LOT=true at any point (and some have declared
they will be setting LOT=true regardless), setting LOT=false in Core opens
up edge case scenarios where different proportions of users on the network
change to LOT=true at different points in time in an uncoordinated fashion.
Given the end state we all want is Taproot activated it doesn’t make sense
to open the door to these edge cases. Setting LOT=true in Core would mean
there is no motivation for users to change LOT in the software they are
running.</p>
</div>
<div class="paragraph">
<p>T3) We should not be putting users in a place where they feel they need to
change LOT. The urge to change LOT will be strong if miners delay for an
unreasonable period. We are then in a situation where a decision has to be
made on whether Core releases a new version with LOT=true and this whole
discussion kicks off again. We should definitely seek to avoid the need to
rehash this discussion later in the year.</p>
</div>
<div class="paragraph">
<p>T4) LOT is only relevant if miners fail to activate. It doesn’t make sense
to set it to false as that is essentially saying if miners fail to activate
early, LOT should also let them not activate.</p>
</div>
<div class="paragraph">
<p>T5) Activation should only be attempted once community consensus for the
soft fork has been reached. Miner signaling is not voting for the changes,
it is signaling readiness. There is no reasonable rationale for not being
ready within a year.</p>
</div>
<div class="paragraph">
<p>T6) An argument belcher outlined on IRC. If LOT was set to true and a chain
split happened then the Taproot chain doesn’t have wipeout risk so there’s
a really strong incentive to be on the Taproot activating LOT=true chain
and therefore using LOT=true means the risk of a chain split is actually
lower.</p>
</div>
<div class="paragraph">
<p>Arguments for setting lockinontimeout (LOT) to false in a Core release</p>
</div>
<div class="paragraph">
<p>F1) The probability of Taproot not being activated by miners is small. This
is not 2017, this is not SegWit, there is no need to worry.</p>
</div>
<div class="paragraph">
<p>F2) The worst case scenario is we have to wait over a year for Taproot to
be activated. Even the worst case scenario is not a disaster.</p>
</div>
<div class="paragraph">
<p>F3) If in the unlikely scenario miners did not activate Taproot for a year
for no apparent reason we would never set LOT to false again for any
potential future soft fork. If miners fail to activate Taproot despite
pledging support and there being overwhelming community consensus for it,
it would set a precedent that miners cannot be relied upon <strong>at all</strong> to
activate soft forks.</p>
</div>
<div class="paragraph">
<p>F4) If in the highly unlikely scenario that a bug or some problem with the
Taproot implementation was found during the signaling period miners could
choose not to activate it which is cleaner than needing an emergency Core
release.</p>
</div>
<div class="paragraph">
<p>Then some additional arguments nullc posted on Reddit</p>
</div>
<div class="paragraph">
<p><a href="https://old.reddit.com/r/Bitcoin/comments/lcjhl6/taproot_activation_pools_will_be_able_to_veto/gm2l02w/" class="bare">https://old.reddit.com/r/Bitcoin/comments/lcjhl6/taproot_activation_pools_will_be_able_to_veto/gm2l02w/</a></p>
</div>
<div class="paragraph">
<p>F5) LOT = false is more similar to what was done previously (unless you go
way back to the earliest soft forks which were more similar to LOT = true)</p>
</div>
<div class="paragraph">
<p>F6) It is more important that no rules that harm users are deployed than it
is that new useful rules are deployed quickly. If there is a choice between
“faster” and “more clear that this isn’t a mechanism to force bad things on
users” we should prefer the latter. Plenty of people just don’t like
LOT=true very much absent evidence that miners are blocking deployment. To
some it just feels needlessly antagonistic and distrusting towards part of
our community.</p>
</div>
<div class="paragraph">
<p>There are some additional parameters other than LOT we will discuss in this
meeting such as activation threshold, start time etc but personally I don’t
think they will attract the same discussion as LOT.</p>
</div>
<div class="paragraph">
<p>As I’ve stated before please continue to engage productively and in good
faith. I can see arguments with merit on both sides of the LOT discussion
but there appears to be overwhelming consensus that Taproot is activated
this year and there appears to be no reason it shouldn’t be. This
discussion on LOT really should not derail that.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_is_taproot_development_moving_too_fast_or_too_slow"><a class="anchor" href="#_gregory_maxwell_is_taproot_development_moving_too_fast_or_too_slow"></a>7.11. Gregory Maxwell - Is Taproot development moving too fast or too slow?</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.reddit.com/r/Bitcoin/comments/hrlpnc/technical_taproot_why_activate/fyqbn8s/?utm_source=share&amp;utm_medium=web2x&amp;context=3" class="bare">https://www.reddit.com/r/Bitcoin/comments/hrlpnc/technical_taproot_why_activate/fyqbn8s/?utm_source=share&amp;utm_medium=web2x&amp;context=3</a></p>
</li>
<li>
<p>Author: Gregory Maxwell, reddit user nullc</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Taproot has been discussed for <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-January/015614.html">2.5 years already</a> and by the time it would activate it will certainly at this point be over three years.</p>
</div>
<div class="paragraph">
<p>The bulk of the taproot proposal, other than taproot itself and specific encoding details, is significantly older too. (Enough that earlier versions of our proposals have been copied and activated in other cryptocurrencies already)</p>
</div>
<div class="paragraph">
<p>Taproot&#8217;s implementation is also extremely simple, and will make common operations in simple wallets simpler.</p>
</div>
<div class="paragraph">
<p>Taproot&#8217;s changes to bitcoin&#8217;s consensus code are under 520 lines of difference, about 1/4th that of segwit&#8217;s. Unlike segwit, taproot requires no P2P changes or changes to mining software, nor does do we have to have a whole new address type for it. It is also significantly <a href="https://twitter.com/theinstagibbs/status/1285018236719976448">de-risked</a> by the script version extension mechanisms added by segwit. It&#8217;s has also undergone significantly more review than P2SH did, which is the most similar analogous prior change and which didn&#8217;t enjoy the benefits of segwit.</p>
</div>
<div class="paragraph">
<p>Segwit went from <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-December/011935.html">early public discussions</a> to <a href="https://bitcoinmagazine.com/articles/segregated-witness-will-be-merged-into-bitcoin-core-release-soon-1466787770">merged</a> in six months. So in spite being more complex and subject to more debate due to splashback from blocksize drama, segwit was still done in significantly less time already.</p>
</div>
<div class="paragraph">
<p>Taproot has also been exceptionally widely discussed by the wider bitcoin community for a couple years now. It&#8217;s application is narrow, users who don&#8217;t care to use it are ultimately unaffected by it (it should decrease resource consumption by nodes, rather than increase it) and no one is forced to use it for their own coins. It also introduces new tools to make other future improvements simpler, safer (particularly, taproot leaf versions), and more private&#8230;&#8203; so there is a good reason that other future improvements are waiting on tapoot.</p>
</div>
<div class="paragraph">
<p>To the extent that we might delay taproot because we could instead deploy a more advanced version: Taproot is already cut down from a more advanced version which included signature-aggregation, generalized taproot (g&#8217;root), and more advanced signature masking (noinput). A decision was made to narrow the taproot proposal because the additional ideas, while clearly very valuable, had research risk and the technical community also felt that we would learn a lot from in-field use of taproot by users. So taproot has already been narrowed to a small useful logical unit and additional improvements aren&#8217;t being worked on and would violate the intentional design of keeping it minimal.</p>
</div>
<div class="paragraph">
<p>Moreover, I believe the discussion about taproot is essentially complete. It&#8217;s been extensively reviewed and analyzed. People want it. No major arguments against it have been raised. At this juncture, additional waiting isn&#8217;t adding more review and certainty. Instead, additional delay is sapping inertia and potentially increasing risk somewhat as people start forgetting details, delaying work on downstream usage (like wallet support), and not investing as much additional review effort as they would be investing if they felt confident about the activation timeframe. It&#8217;s also delaying work on subsequent technology like signature aggregation, g&#8217;root, and other things.</p>
</div>
<div class="paragraph">
<p>I&#8217;m all for taking things slowly and deliberately. But I think we have, especially given the narrowness of this change. No matter how slowly something goes someone could always say "but it could be done slower"-- but slower is only better up to a point and beyond that slower is worse even if you totally disregard the fact that applications that would benefit from taproot aren&#8217;t getting the benefit.</p>
</div>
<div class="paragraph">
<p>Cheers,</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scaling"><a class="anchor" href="#_scaling"></a>8. Scaling</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_james_a_donald_reply_to_bitcoin_p2p_e_cash_paper"><a class="anchor" href="#_james_a_donald_reply_to_bitcoin_p2p_e_cash_paper"></a>8.1. James A. Donald - Reply to "Bitcoin P2P e-cash paper"</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014814.html" class="bare">https://www.metzdowd.com/pipermail/cryptography/2008-November/014814.html</a></p>
</li>
<li>
<p>Author: James A. Donald</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Satoshi Nakamoto wrote:
&gt; I've been working on a new electronic cash system that's fully
&gt; peer-to-peer, with no trusted third party.
&gt;
&gt; The paper is available at:
&gt; http://www.bitcoin.org/bitcoin.pdf

We very, very much need such a system, but the way I understand your
proposal, it does not seem to scale to the required size.

For transferable proof of work tokens to have value, they must have
monetary value.  To have monetary value, they must be transferred within
a very large network - for example a file trading network akin to
bittorrent.

To detect and reject a double spending event in a timely manner, one
must have most past transactions of the coins in the transaction, which,
  naively implemented, requires each peer to have most past
transactions, or most past transactions that occurred recently. If
hundreds of millions of people are doing transactions, that is a lot of
bandwidth - each must know all, or a substantial part thereof.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_capacity_increases_for_the_bitcoin_system"><a class="anchor" href="#_gregory_maxwell_capacity_increases_for_the_bitcoin_system"></a>8.2. Gregory Maxwell - Capacity increases for the Bitcoin system.</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-December/011865.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-December/011865.html</a></p>
</li>
<li>
<p>Author: Gregory Maxwell</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The Scaling Bitcoin Workshop in HK is just wrapping up. Many fascinating
proposals were presented. I think this would be a good time to share my
view of the near term arc for capacity increases in the Bitcoin system. I
believe we’re in a fantastic place right now and that the community
is ready to deliver on a clear forward path with a shared vision that
addresses the needs of the system while upholding its values.</p>
</div>
<div class="paragraph">
<p>I think it’s important to first clearly express some of the relevant
principles that I think should guide the ongoing development of the
Bitcoin system.</p>
</div>
<div class="paragraph">
<p>Bitcoin is P2P electronic cash that is valuable over legacy systems
because of the monetary autonomy it brings to its users through
decentralization. Bitcoin seeks to address the root problem with
conventional currency: all the trust that&#8217;s required to make it work--</p>
</div>
<div class="paragraph">
<p>&#8201;&#8212;&#8201;Not that justified trust is a bad thing, but trust makes systems
brittle, opaque, and costly to operate. Trust failures result in systemic
collapses, trust curation creates inequality and monopoly lock-in, and
naturally arising trust choke-points can be abused to deny access to
due process. Through the use of cryptographic proof and decentralized
networks Bitcoin minimizes and replaces these trust costs.</p>
</div>
<div class="paragraph">
<p>With the available technology, there are fundamental trade-offs between
scale and decentralization. If the system is too costly people will be
forced to trust third parties rather than independently enforcing the
system&#8217;s rules. If the Bitcoin blockchain’s resource usage, relative
to the available technology, is too great, Bitcoin loses its competitive
advantages compared to legacy systems because validation will be too
costly (pricing out many users), forcing trust back into the system.
If capacity is too low and our methods of transacting too inefficient,
access to the chain for dispute resolution will be too costly, again
pushing trust back into the system.</p>
</div>
<div class="paragraph">
<p>Since Bitcoin is an electronic cash, it <em>isn&#8217;t</em> a generic database;
the demand for cheap highly-replicated perpetual storage is unbounded,
and Bitcoin cannot and will not satisfy that demand for non-ecash
(non-Bitcoin) usage, and there is no shame in that. Fortunately, Bitcoin
can interoperate with other systems that address other applications,
and&#8212;&#8203;with luck and hard work&#8212;&#8203;the Bitcoin system can and will satisfy
the world&#8217;s demand for electronic cash.</p>
</div>
<div class="paragraph">
<p>Fortunately, a lot of great technology is in the works that make
navigating the trade-offs easier.</p>
</div>
<div class="paragraph">
<p>First up: after several years in the making Bitcoin Core has recently
merged libsecp256k1, which results in a huge increase in signature
validation performance. Combined with other recent work we&#8217;re now getting
ConnectTip performance 7x higher in 0.12 than in prior versions. This
has been a long time coming, and without its anticipation and earlier
work such as headers-first I probably would have been arguing for a
block size decrease last year.  This improvement in the state of the
art for widely available production Bitcoin software sets a stage for
some capacity increases while still catching up on our decentralization
deficit. This shifts the bottlenecks off of CPU and more strongly onto
propagation latency and bandwidth.</p>
</div>
<div class="paragraph">
<p>Versionbits (BIP9) is approaching maturity and will allow the Bitcoin
network to have multiple in-flight soft-forks. Up until now we’ve had to
completely serialize soft-fork work, and also had no real way to handle
a soft-fork that was merged in core but rejected by the network. All
that is solved in BIP9, which should allow us to pick up the pace of
improvements in the network. It looks like versionbits will be ready
for use in the next soft-fork performed on the network.</p>
</div>
<div class="paragraph">
<p>The next thing is that, at Scaling Bitcoin Hong Kong, Pieter Wuille
presented on bringing Segregated Witness to Bitcoin. What is proposed
is a <em>soft-fork</em> that increases Bitcoin&#8217;s scalability and capacity by
reorganizing data in blocks to handle the signatures separately, and in
doing so takes them outside the scope of the current blocksize limit.</p>
</div>
<div class="paragraph">
<p>The particular proposal amounts to a 4MB blocksize increase at worst. The
separation allows new security models, such as skipping downloading data
you&#8217;re not going to check and improved performance for lite clients
(especially ones with high privacy). The proposal also includes fraud
proofs which make violations of the Bitcoin system provable with a compact
proof. This completes the vision of "alerts" described in the "Simplified
Payment Verification" section of the Bitcoin whitepaper, and would make it
possible for lite clients to enforce all the rules of the system (under
a new strong assumption that they&#8217;re not partitioned from someone who
would generate the proofs). The design has numerous other features like
making further enhancements safer and eliminating signature malleability
problems. If widely used this proposal gives a 2x capacity increase
(more if multisig is widely used), but most importantly it makes that
additional capacity&#8212;&#8203;and future capacity beyond it&#8212;&#8203;safer by increasing
efficiency and allowing more trade-offs (in particular, you can use much
less bandwidth in exchange for a strong non-partitioning assumption).</p>
</div>
<div class="paragraph">
<p>There is a working implementation (though it doesn&#8217;t yet have the fraud
proofs) at <a href="https://github.com/sipa/bitcoin/commits/segwit" class="bare">https://github.com/sipa/bitcoin/commits/segwit</a></p>
</div>
<div class="paragraph">
<p>(Pieter&#8217;s talk is at:  transcript:
<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/segregated-witness-and-its-impact-on-scalability/" class="bare">http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/segregated-witness-and-its-impact-on-scalability/</a>
slides:
<a href="https://prezi.com/lyghixkrguao/segregated-witness-and-deploying-it-for-bitcoin/" class="bare">https://prezi.com/lyghixkrguao/segregated-witness-and-deploying-it-for-bitcoin/</a>
Video: <a href="https://www.youtube.com/watch?v=fst1IK_mrng#t=36m" class="bare">https://www.youtube.com/watch?v=fst1IK_mrng#t=36m</a> )</p>
</div>
<div class="paragraph">
<p>I had good success deploying an earlier (hard-fork) version of segwit
in the Elements Alpha sidechain; the soft-fork segwit now proposed
is a second-generation design. And I think it&#8217;s quite reasonable to
get this deployed in a relatively short time frame. The segwit design
calls for a future bitcoinj compatible hardfork to further increase its
efficiency&#8212;&#8203;but it&#8217;s not necessary to reap most of the benefits,and that
means it can happen on its own schedule and in a non-contentious manner.</p>
</div>
<div class="paragraph">
<p>Going beyond segwit, there has been some considerable activity brewing
around more efficient block relay.  There is a collection of proposals,
some stemming from a p2pool-inspired informal sketch of mine and some
independently invented, called "weak blocks", "thin blocks" or "soft
blocks".  These proposals build on top of efficient relay techniques
(like the relay network protocol or IBLT) and move virtually all the
transmission time of a block to before the block is found, eliminating
size from the orphan race calculation. We already desperately need this
at the current block sizes. These have not yet been implemented, but
fortunately the path appears clear. I&#8217;ve seen at least one more or less
complete specification, and I expect to see things running using this in a
few months. This tool will remove propagation latency from being a problem
in the absence of strategic behavior by miners.  Better understanding
their behavior when miners behave strategically is an open question.</p>
</div>
<div class="paragraph">
<p>Concurrently, there is a lot of activity ongoing related to
“non-bandwidth” scaling mechanisms. Non-bandwidth scaling mechanisms
are tools like transaction cut-through and bidirectional payment channels
which increase Bitcoin’s capacity and speed using clever smart contracts
rather than increased bandwidth. Critically, these approaches strike right
at the heart of the capacity vs autotomy trade-off, and may allow us to
achieve very high capacity and very high decentralization. CLTV (BIP65),
deployed a month ago and now active on the network, is very useful for
these techniques (essential for making hold-up refunds work); CSV (BIP68
/ BIP112) is in the pipeline for merge in core and making good progress
(and will likely be ready ahead of segwit). Further Bitcoin protocol
improvements for non-bandwidth scaling are in the works: Many of these
proposals really want anti-malleability fixes (which would be provided
by segwit), and there are checksig flag improvements already tendered and
more being worked on, which would be much easier to deploy with segwit. I
expect that within six months we could have considerably more features
ready for deployment to enable these techniques. Even without them I
believe we’ll be in an acceptable position with respect to capacity
in the near term, but it’s important to enable them for the future.</p>
</div>
<div class="paragraph">
<p>(<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/overview-of-bips-necessary-for-lightning" class="bare">http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/overview-of-bips-necessary-for-lightning</a>
is a relevant talk for some of the wanted network features for Lightning,
a bidirectional payment channel proposal which many parties are working
on right now; other non-bandwidth improvements discussed in the past
include transaction cut-through, which I consider a must-read for the
basic intuition about how transaction capacity can be greater than
blockchain capacity: <a href="https://bitcointalk.org/index.php?topic=281848.0" class="bare">https://bitcointalk.org/index.php?topic=281848.0</a> ,
though there are many others.)</p>
</div>
<div class="paragraph">
<p>Further out, there are several proposals related to flex caps or
incentive-aligned dynamic block size controls based on allowing miners
to produce larger blocks at some cost. These proposals help preserve
the alignment of incentives between miners and general node operators,
and prevent defection between the miners from undermining the fee
market behavior that will eventually fund security. I think that right
now capacity is high enough and the needed capacity is low enough that
we don&#8217;t immediately need these proposals, but they will be critically
important long term. I&#8217;m planning to help out and drive towards a more
concrete direction out of these proposals in the following months.</p>
</div>
<div class="paragraph">
<p>(Relevant talks include
<a href="http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/a-flexible-limit-trading-subsidy-for-larger-blocks/" class="bare">http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/a-flexible-limit-trading-subsidy-for-larger-blocks/</a>
)</p>
</div>
<div class="paragraph">
<p>Finally&#8212;&#8203;at some point the capacity increases from the above may not
be enough.  Delivery on relay improvements, segwit fraud proofs, dynamic
block size controls, and other advances in technology will reduce the risk
and therefore controversy around moderate block size increase proposals
(such as 2/4/8 rescaled to respect segwit&#8217;s increase). Bitcoin will
be able to move forward with these increases when improvements and
understanding render their risks widely acceptable relative to the
risks of not deploying them. In Bitcoin Core we should keep patches
ready to implement them as the need and the will arises, to keep the
basic software engineering from being the limiting factor.</p>
</div>
<div class="paragraph">
<p>Our recent and current progress has well positioned the Bitcoin ecosystem
to handle its current capacity needs. I think the above sets out some
clear achievable milestones to continue to advance the art in Bitcoin
capacity while putting us in a good position for further improvement and
evolution.</p>
</div>
<div class="paragraph">
<p>TL;DR:  I propose we work immediately towards the segwit 4MB block
soft-fork which increases capacity and scalability, and recent speedups
and incoming relay improvements make segwit a reasonable risk. BIP9
and segwit will also make further improvements easier and faster to
deploy. We’ll continue to set the stage for non-bandwidth-increase-based
scaling, while building additional tools that would make bandwidth
increases safer long term. Further work will prepare Bitcoin for further
increases, which will become possible when justified, while also providing
the groundwork to make them justifiable.</p>
</div>
<div class="paragraph">
<p>Thanks for your time,</p>
</div>
</div>
<div class="sect2">
<h3 id="_peter_todd_why_scaling_bitcoin_with_sharding_is_very_hard"><a class="anchor" href="#_peter_todd_why_scaling_bitcoin_with_sharding_is_very_hard"></a>8.3. Peter Todd - Why Scaling Bitcoin With Sharding Is Very Hard</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://petertodd.org/2015/why-scaling-bitcoin-with-sharding-is-very-hard" class="bare">https://petertodd.org/2015/why-scaling-bitcoin-with-sharding-is-very-hard</a></p>
</li>
<li>
<p>Author: Peter Todd</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Nov 24, 2015</p>
</div>
<div class="paragraph">
<p><em><a href="https://www.reddit.com/r/Bitcoin/comments/3u1m36/why_arent_we_as_a_community_talking_about/cxbamhn">Previously
published as a reply on Reddit.</a></em></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Why aren’t we as a community talking about Sharding as a scaling
solution?</p>
</div>
<div class="paragraph">
<p>It seems to me that sharding would be the ideal solution for scaling
bitcoin up indefinitely, but all I keep hearing about is lightning and
sidechains, which are sort of bolt-on afterthoughts operating a level
above bitcoin. Will existing wallets work smoothly with lightning?
dunno, but I doubt it. And anyway, they do nothing to help bitcoin
itself scale up, or to reduce disk/bandwidth requirements of individual
nodes.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>In a system where everyone mostly trusts each other, sharding works
great! You just split up the blockchain the same way you’d shard a
database, assigning miners/validators a subset of the txid space.
Transaction validation would assume that if you don’t have the history
for an input yourself, you assume that history is valid. In a
banking-like environment where there’s a way to conduct audits and
punish those who lie, this could certainly be made to work. (I myself
have worked on and off on a scheme to do exactly that for a few
different clients: <a href="https://github.com/proofchains">Proofchains</a>)</p>
</div>
<div class="paragraph">
<p>But in a decentralized environment sharding is far, far, harder to
accomplish… There’s an old idea we’ve been calling “fraud proofs”, where
you design a system where for every way validation can fail, you can
create a short proof that part of the blockchain was invalid. Upon
receiving that proof your node would reject the invalid part of the
chain and roll back the chain. In fact, the original Satoshi whitepaper
refers to fraud proofs, using the term “alerts”, and assumed SPV nodes
would use them to get better guarantees they’re using a valid chain.
(SPV as implemented by bitcoinj is sometimes referred to as
“non-validating SPV”) The problem is, how do you guarantee that the
fraud will get detected? And How do you guarantee that fraud that is
detected actually gets propagated around the network? And if all that
fails… then what?</p>
</div>
<div class="paragraph">
<p>The nightmare scenario in that kind of system is some miner successfully
gets away with fraud for awhile, possibly creating hundreds of millions
of dollars worth of bitcoins out of thin air. Those fake coins could
easily “taint” a significant fraction of the economy, making rollback
impossible and shaking faith in the value of the currency. Right now in
Bitcoin this is pretty much impossible because everyone can run a full
node to validate the chain for themselves, but in a sharded system
that’s far harder to guarantee.</p>
</div>
<div class="paragraph">
<p>Now, suppose we <em>can</em> guarantee validity. zk-SNARKS are basically a way
of mathematically proving that you ran a certain computer program on
some data, and that program returned true. <em>Recursive</em> zk-SNARKS are
simply zk-SNARKS where the program can also recursively evaluate that
another zk-SNARK is true. With this technology a miner could <em>prove</em>
that the shard they’re working on is valid, solving the problem of fake
coins. Unfortunately, zk-SNARKS are bleeding edge crypto, (if zerocoin
had been deployed the entire system would have been destroyed by a
recently found bug that allowed fake proofs to be created) and recursive
zk-SNARKS don’t exist yet.</p>
</div>
<div class="paragraph">
<p>The closest thing I know of to recrusive zk-SNARKS that actually does
work without “moon-math” is an idea I came up with for treechains called
coin history linearization. Basically, if you allow transactions to have
multiple inputs and outputs, proving that a given coin is valid requires
the entire coin history, which has quasi-exponential scaling - in the
Bitcoin economy coins are very quickly mixed such that all coins have
pretty much all other coins in their history.</p>
</div>
<div class="paragraph">
<p>Now suppose that rather than proving that all inputs are valid for a
transaction, what if you only had to prove that <em>one</em> was valid? This
would linearize the coin history as you only have to prove a single
branch of the transaction DAG, resulting in O(n) scaling. (with n &#8656;
total length of the blockchain chain)</p>
</div>
<div class="paragraph">
<p>Let’s assume Alice is trying to pay Bob with a transaction with two
inputs each of equal value. For each input she irrevocable records it as
spent, permanently committing that input’s funds to Bob. (e.g. in an
irrevocable ledger!) Next she makes use of a random beacon - a source of
publicly known random numbers that no-one can influence - to choose
which of the two inputs’ coin history’s she’ll give to Bob as proof that
the transaction is real. (both the irrevocable ledger and random beacon
can be implemented with treechains, for example)</p>
</div>
<div class="paragraph">
<p>If Alice is being honest and both inputs are real, there’s a 100% chance
that she’ll be able to successfully convince Bob that the funds are
real. Similarly, if Alice is dishonest and neither input is real, it’ll
be impossible for her convince prove to Bob that the funds are real.</p>
</div>
<div class="paragraph">
<p>But what if one of the two inputs is real and the other is actually
fake? Half the time the transaction will succeed - the random beacon
will select the real input and Bob won’t know that the other input is
fake. However, half the time the <em>fake</em> input will be selected, and
Alice won’t be able to prove anything. Yet, the real input has
irrevocably been spent anyway, destroying the funds! If the process by
which funds are spent really is irrevocable, and Alice has absolutely no
way to influence the random beacon, the two cases cancel out. While she
can get away with fraud, there’s no economic benefit for her to do so.
On a macro level, this means that fraud won’t result in inflation of the
currency. (in fact, we want a system that institutionalizes this
so-called “fraud” - creating false proofs is a great way to make your
coins more private) (FWIW the way zk-SNARKS actually work is similar to
this simple linearization scheme, but with a lot of very clever error
correction math, and the hash of the data itself as the random beacon)</p>
</div>
<div class="paragraph">
<p>An actual implementation would be extended to handle multiple
transaction inputs of different sizes by weighing the probability that
an input will be selected by it’s value - merkle-sum-trees work well for
this. We still have the problem that O(n) scaling kinda sucks; can we do
better?</p>
</div>
<div class="paragraph">
<p>Yes! Remember that a genesis transaction output has no history - the
coins are created out of thin air and its validity is proven by the
proof of work itself. So every time you make a transaction that spends a
genesis output you have a chance of reducing the length of the coin
validity proof back to zero. Better yet, we can design a system where
every transaction is associated with a bit of proof-of-work, and thus
every transaction has a chance of resetting the length of the validity
proof back to zero. In such a system you might do the PoW on a
per-transaction basis; you could outsource the task to miners with a
special output that only the miner can spend. Now we have O(1) scaling,
with a k that depends on the inflation rate. I’d have to dig up the
calculations again, but IIRC I sketched out a design for the above that
resulted in something like 10MB or 100MB coin validity proofs, assuming
1% inflation a year. (equally you can describe that 1% inflation as a
coin security tax) Certainly not small, but compared to running a full
node right now that’s still a <em>huge</em> reduction in storage space.
(recursive zk-SNARKS might reduce that proof to something like 1kB of
data)</p>
</div>
<div class="paragraph">
<p>Regardless of whether you have lightweight zk-SNARKS, heavyweight
linearized coin history proofs, or something else entirely, the key
advantage is that validation can become entirely client side. Miners
don’t even need to care whether or not their <em>own</em> blocks are “valid”,
let alone other miners’ blocks. Invalid transactions in the chain are
just garbage data, which gets rejected by wallet software as invalid. So
long as the protocol itself works and is implemented correctly it’s
impossible for fraud to go undetected and destroy the economy the way it
can in a sharded system.</p>
</div>
<div class="paragraph">
<p>However we still have a problem: censorship. This one is pretty subtle,
and gets to the heart of how these systems actually work. How do you
prove that a coin has validly been spent? First, prove that it hasn’t
already been spent! How do you do that if you don’t have the blockchain
data? You can’t, and no amount of fancy math can change that.</p>
</div>
<div class="paragraph">
<p>In Bitcoin if everyone runs full nodes censorship can’t happen: you
either have the full blockchain and thus can spend your money and help
mine new blocks, or that alternate fork might as well not exist. SPV
breaks this as it allows funds to be spent without also having the
ability to mine - with SPV a cartel of miners can prevent anyone else
from getting access to the blockchain data required to mine, while still
allowing commerce to happen. In reality, this type of cartel would be
more subtle, and can even happen by accident; just delaying other miners
getting blockchain data by a few seconds harms those non-cartel miners’
profitability, without being obvious censorship. Equally, so long as the
cartel has
<a href="http://www.mail-archive.com/bitcoin-development@lists.sourceforge.net/msg03200.html">&gt;30%
of hashing power it’s profitable in the long run for the cartel if this
happens</a>.</p>
</div>
<div class="paragraph">
<p>In sharded systems the “full node defense” doesn’t work, at least
directly. The whole point is that not everyone has all the data, so you
have to decide what happens when it’s not available.</p>
</div>
<div class="paragraph">
<p>Altcoins provide one model, albeit a pretty terrible one: taken as a
whole you can imagine the entire space of altcoins as a series of
cryptocurrency shards for moving funds around. The problem is each
individual shard - each altcoin - is weak and can be 51% attacked. Since
they can be attacked so easily, if you designed a system where funds
could be moved from one shard to another through coin history proofs
every time a chain was 51% attacked and reorged you’d be creating coins
out of thin air, destroying digital scarcity and risking the whole
economy with uncontrolled inflation. You can instead design a system
where coins can’t move between shards - basically what the altcoin space
looks like now - but that means actually paying someone on another
“shard” requires you to sell your coins and buy their coins - a
inefficient and expensive logistical headache. (there’s a reason the
Eurozone was created!)</p>
</div>
<div class="paragraph">
<p>If you want to transfer value between shards with coin history proofs,
without risking inflation, you need all the shards to share some type of
global consensus. This is the idea behind treechains: every part of the
tree is linked to a top-level timestamp chain, which means we have
global consensus on the contents of all chains, and thus spending a coin
really is an immutable one-time act.</p>
</div>
<div class="paragraph">
<p>Let’s go into a bit more detail. So what is a coin in a treechains
system? First and foremost it’s a <em>starting point</em> in some part of the
tree, a specific subchain. When Alice wants to prove to Bob that she
spent a coin, giving it to Bob, she inserts into that subchain the data
that proves that someone <em>could have</em> spent that coin - a valid
signature and the hash of the transaction output it was spending. But
the actual proof that she gives to Bob isn’t just that spend data, but
rather proof that all the blocks in that chain between the starting
point and the spend did <em>not</em> have a valid spend in them. (easiest way
to do that? give Bob those blocks) That proof must link back to the
top-level chain; if it doesn’t the proof is simply not valid.</p>
</div>
<div class="paragraph">
<p>Now suppose Alice can’t get that part of the subchain, perhaps because a
cartel of miners is mining it and won’t give anyone else the data, or
perhaps because everyone with the data suffered a simultaneous harddrive
crash. We’ll also say that higher up in the tree the data is available,
at minimum the top-level chain. As with Bitcoin, as long as that cartel
has 51% of the hashing power, Alice is screwed and can’t spend her
money.</p>
</div>
<div class="paragraph">
<p>What’s interesting is what happens after that cartel disbands: how does
mining restart? It’s easy to design a system where the creation of a
block doesn’t require the knowledge of previous blocks, so new blocks
can be added to extend the subchain. But Alice is still screwed: she
can’t prove to Bob that the missing blocks in the subchain didn’t
contain a valid spend of her coin. This is pretty bad, on the other hand
the damage is limited to just that one subchain, and the system as a
whole is unaffected.</p>
</div>
<div class="paragraph">
<p>There’s a tricky incentives problem here though: if a miner can extend a
subchain without actually having previous blocks in that chain, where’s
the incentive for that miner to give anyone else the blocks they create?
Remember that exclusive knowledge of a block is potentially valuable if
you can extort coin owners for it. (Bitcoin suffers from this problem
right now with validationless “SPV” mining, though the fact that a block
can be invalid in Bitcoin helps limit its effects)</p>
</div>
<div class="paragraph">
<p>Part of the solution could be mining reward; in Bitcoin, coinbase
outputs can’t be spent for 100 blocks. A similar scheme could require
that a spend of a coinbase output in a subchain include proof that the
next X blocks in that subchain were in fact linked together. Secondly
make block creation dependent on actually having that data to ensure the
linkage actually means something, e.g. by introducing some validity
rules so blocks can be invalid, and/or using a PoW function that
requires hashers to have a copy of that data.</p>
</div>
<div class="paragraph">
<p>Ultimately though this isn’t magic: like it or not lower subchains in
such a system are inherently weaker and more dangerous than higher ones,
and this is equally true of any sharded system. However a hierarchically
sharded system like treechains can give users options: higher subchains
are safer, but transactions will expensive. The hierarchy does combine
the PoW security of all subchains together for the thing you can easily
combine: timestamping security.</p>
</div>
<div class="paragraph">
<p>There’s a big problem though: holy !@#$ is the above complex compared to
Bitcoin! Even the “kiddy” version of sharding - my linearization scheme
rather than zk-SNARKS - is probably one or two orders of magnitude more
complex than using the Bitcoin protocol is right now, yet right now a
huge % of the companies in this space seem to have thrown their hands up
and used centralized API providers instead. Actually implementing the
above and getting it into the hands of end-users won’t be easy.</p>
</div>
<div class="paragraph">
<p>On the other hand, decentralization isn’t cheap: using PayPal is one or
two orders of magnitude simpler than the Bitcoin protocol.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jameson_lopp_bitcoin_core_performance_evolution"><a class="anchor" href="#_jameson_lopp_bitcoin_core_performance_evolution"></a>8.4. Jameson Lopp - Bitcoin Core Performance Evolution</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://blog.lopp.net/bitcoin-core-performance-evolution/" class="bare">https://blog.lopp.net/bitcoin-core-performance-evolution/</a></p>
</li>
<li>
<p>Author: Jameson Lopp</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><em>A historical analysis of full validation node sync performance across 9 years of releases.</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/human-evolution-digital.jpg" alt="image"></span></p>
</div>
<div class="paragraph">
<p>One of my annual projects
<a href="https://blog.keys.casa/bitcoin-full-validation-sync-performance/">since
2018</a> is to perform full validation syncs of every Bitcoin node
implementation.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ve been following along then you may have noticed that Bitcoin
Core tends to get faster every year while less maintained
implementations tend to get slower. This is because if you&#8217;re not
constantly improving performance, it will take longer to process the
ever-increasing amount of data being added to the blockchain. But, I
recently wondered&#8230;&#8203; how slowly would Bitcoin Core sync if project
contributors had not continually optimized the software?</p>
</div>
<div class="paragraph">
<p>If you check the available downloads at <a href="https://bitcoincore.org/bin/" class="bare">https://bitcoincore.org/bin/</a>
you&#8217;ll note that precompiled binaries are available dating back to
version 0.8.6 (under "insecure") which was released in December 2013.
You can download binaries of the v0.7.0 and earlier releases
<a href="https://luke.dashjr.org/programs/bitcoin/files/bitcoind/">from Luke&#8217;s web
site</a>, through none of them will sync to chain tip without some extra
configuration for reasons that I
<a href="https://blog.lopp.net/running-bitcoin-core-v0-7-and-earlier/">explore in
another post</a>. As such, I&#8217;ve chosen to test <strong>all 15 major versions</strong> from
v0.8.6 to the most recent v22 release.</p>
</div>
<div class="paragraph">
<p>In order to keep the performance comparisons fair I&#8217;m setting the
following
<a href="https://jlopp.github.io/bitcoin-core-config-generator">configuration
parameters</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>assumevalid=0 (This forces all signatures to be verified, otherwise
each release would be verifying a different number of total signatures.
This config gets ignored by versions prior to v0.14 but doesn&#8217;t have a
huge effect because they are only skipping verifying signatures for
blocks that don&#8217;t contain many transactions.)</p>
</li>
<li>
<p>connect=&lt;local network peer&gt; (only sync from a machine on my local
network to remove unpredictable
<a href="https://blog.lopp.net/is-bitcoin-network-slowing-down/">effects of poorly
performing public peer nodes</a>)</p>
</li>
<li>
<p>dbcache=24000 (what I use on all of my syncing tests)</p>
</li>
<li>
<p>disablewallet=1 (to ensure that the node doesn&#8217;t attempt any wallet
related data processing)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next I wrote
<a href="https://github.com/jlopp/bitcoin-utils/blob/master/extractBitcoinNodeSyncTimes.php">this
script</a> in order to parse the debug.log files generated by the syncing
runs so that I could extract the elapsed time to reach each block height
into a CSV from which I could build the following chart. You can
<a href="https://docs.google.com/spreadsheets/d/1VCYviq5P9sPSj7VdYBnToVslZ-O_XQ99tl-QAVnVTfc/edit?usp=sharing">view
the raw data here</a>.</p>
</div>
<div class="sect3">
<h4 id="_the_results"><a class="anchor" href="#_the_results"></a>The Results</h4>
<div class="paragraph">
<p>To make the chart easier to view, I&#8217;ve truncated the results for block
heights under 200,000 - those blocks are all nearly empty and thus there
is negligible performance difference between versions.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/Bitcoin-Core-Sync-Performance-1.png" alt="image" width="1284" height="795"></span></p>
</div>
<div class="paragraph">
<p>From block 200,000 until the second halving (block 420,000) we see the
performance slope decreasing as blocks sizes are increasing and there is
more data being processed. After that, performance stabilizes because we
hit the block size limit and the node is processing the same volume of
data.</p>
</div>
<div class="paragraph">
<p>We then see another slope change around block 520,000 in which syncing
performance improves around 10%. This is likely due to increased SegWit
adoption (SegWit activated at block height 481,824.) This lines up with
Bitcoin Core releasing SegWit wallet support on February 26, 2018 (block
height 511,000.) We then can observe a final ~10% performance bump
around block 690,000 which lines up with Blockchain.com&#8217;s wallet finally
adding SegWit support.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/segwit_transactions.png" alt="segwit transactions" width="1138" height="675">
</div>
<div class="title">Figure 4. Source: <a href="https://transactionfee.info/charts/transactions-spending-segwit/" class="bare">https://transactionfee.info/charts/transactions-spending-segwit/</a></div>
</div>
<div class="paragraph">
<p>Note that performance improves for EVERY version of Bitcoin Core when
SegWit adoption increases, even the ones that don&#8217;t support SegWit
(versions older than v0.13.0.) For versions of Bitcoin Core that support
SegWit, my best guess is that it&#8217;s because SegWit solved the quadratic
hashing scaling problem. What&#8217;s that, you may wonder? Murch answered it
well <a href="https://bitcoin.stackexchange.com/a/54266">on this StackExchange
post</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The quadratic hashing issue appears in the verification of all
pre-segwit transaction formats. It stems from the method of verifying
the input scripts. For each input the transaction has, all the other
inputs are stripped from the transaction to check that remaining input
against the output it spends as wells as the corresponding signature. As
the effort of stripping the transaction is linearly dependent on the
number inputs and the stripping is repeated for each input, we do
n-times work that scales linearly with n: O(n)*O(n) = O(n²), the cost
grows quadratically with the number of inputs. This means that with
twice the number of inputs, the computational effort for the
verification quadruples.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/linear-quad-scale.png" alt="image" width="800" height="250"></span></p>
</div>
<div class="paragraph">
<p>SegWit changes the calculation of the transaction hash for signatures so
that each byte of a transaction only needs to be hashed at most twice,
whereas pre-SegWit transactions with many inputs could require a huge
number of hashing operations.</p>
</div>
<div class="paragraph">
<p>When I asked SegWit author Pieter Wuille if he thought that was a
reasonable explanation, he figured that any such gains would be
negligible because only a small number of transactions have enough
inputs to the point that quadratic hashing scaling becomes a noticeable
performance hit. He suspects there may some other unknown performance
gain at play.</p>
</div>
<div class="paragraph">
<p>Just to try to get an idea of the magnitude that large many-input
transactions might have on performance, I wrote
<a href="https://github.com/jlopp/bitcoin-utils/blob/master/countTransactionsManyInputs.php">this
script</a> to find all transactions with &gt; 50 inputs and categorize them as
SegWit or Legacy. We can see that there are an average of 10 such
transactions per block and SegWit spends became the dominant type around
block 540,000.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/Transactions-with-More-than-50-Inputs.png" alt="image" width="1172" height="725"></span></p>
</div>
<div class="paragraph">
<p>Could this trend alone explain ~10% performance increases given that
we&#8217;re talking about a subset of transactions with attributes that make
up less than 1% of all transactions? Doubtful. This could be an area of
future research to dig deeper and uncover the culprit.</p>
</div>
<div class="paragraph">
<p>OK, so why do older versions of Bitcoin Core also see a performance gain
post-SegWit activation? Because <em>older versions are not downloading,
processing, and validating the witness data</em>. This is particularly
remarkable if you observe the performance lines for v0.12 and v0.13
which are nearly indistinguishable until SegWit activates, at which
point you can see v0.12 suddenly syncing much faster since it&#8217;s
performing fewer computations.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/v12-v-13-performance.png" alt="image" width="1284" height="795"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_a_streak_of_performance_gains"><a class="anchor" href="#_a_streak_of_performance_gains"></a>A Streak of Performance Gains</h4>
<div class="paragraph">
<p>After surveying the 15 most recent releases of Bitcoin Core we can see
that each release syncs faster that its predecessor with only 2
exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>v0.10 was slower than v0.9 despite v0.10 rolling out headers-first
syncing. But those network performance increases won&#8217;t show up in my
testing because I&#8217;m syncing from a single peer node. Oddly, the
discrepancy seems to be a result of v0.9 getting a greater performance
gain post-SegWit activation than v0.8, v0.10, and v0.11. It&#8217;s odd
because all 4 of those releases should be skipping the same amount of
computations.</p>
</li>
<li>
<p>v0.13 was slower than v0.12 but only due to v0.12 skipping witness
validation, so I don&#8217;t really consider this a performance decrease. This
is the same reason I run all of my syncs with "assumevalid=0" to force
signature checking - otherwise the more recent releases would have an
unfair advantage because they would perform far fewer validation
computations.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_can_the_trend_continue"><a class="anchor" href="#_can_the_trend_continue"></a>Can the Trend Continue?</h4>
<div class="paragraph">
<p>I&#8217;m pleased to report that my pessimism was misplaced back in 2019;
Jeremy Rubin was right. There are plenty of performance gains to be had.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I&#8217;m sure there&#8217;s room for improvement, though it seems the low hanging
fruit has been plucked. I&#8217;d be especially impressed if Core manages to
achieve a negative delta in sync time between now and next year&#8217;s test.
🤓</p>
</div>
<div class="paragraph">
<p>— Jameson Lopp (@lopp)
<a href="https://twitter.com/lopp/status/1193615542361481216?ref_src=twsrc%5Etfw">November
10, 2019</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>At the time I believe my perspective was that because syncing on my
benchmark machine was bottlenecked by the CPU, it wouldn&#8217;t matter much
if additional improvements were made to network management or data
structures. What I failed to appreciate was that there were plenty of
optimizations to be made to ECDSA verification.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I ran 4 different syncs of Bitcoin Core to benchmark the real-world
performance improvements offered by enabling GLV Endomorphism. The
results were better than expected!<br>
<br>
Default sync: 18% faster<br>
Full verification of all historical signatures sync: 28% faster.
<a href="https://t.co/wJID8nZfNs">pic.twitter.com/wJID8nZfNs</a></p>
</div>
<div class="paragraph">
<p>— Jameson Lopp (@lopp)
<a href="https://twitter.com/lopp/status/1310676326127263745?ref_src=twsrc%5Etfw">September
28, 2020</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>And again, in the year following the addition of GLV endomorphism we
continued to see additional performance improvements to libsecp256k1
that resulted in another 5% speedup.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>But there&#8217;s no reason why signature validation has to be waited on to
connect the next block in IBD. This would allow you to finish connecting
all the txns while you process the sigs.<br>
<br>
Would need to measure how much time that would save, but could be
decent!</p>
</div>
<div class="paragraph">
<p>— jeremy rubin | bip-119 (@JeremyRubin)
<a href="https://twitter.com/JeremyRubin/status/1193617729300750336?ref_src=twsrc%5Etfw">November
10, 2019</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>As of 2022, I&#8217;m now much more optimistic that engineers can continue to
fight back against the ever-increasing computational resources required
to sync a fully validated Bitcoin node!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pieter_wuille_twitter_thread_on_improvements_in_libsecp256k1"><a class="anchor" href="#_pieter_wuille_twitter_thread_on_improvements_in_libsecp256k1"></a>8.5. Pieter Wuille - Twitter thread on improvements in libsecp256k1</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://twitter.com/pwuille/status/1450471673321381896" class="bare">https://twitter.com/pwuille/status/1450471673321381896</a></p>
</li>
<li>
<p>Author: Pieter Wuille</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>1/ To put the recent performance improvements in <a href="https://github.com/bitcoin-core/secp256k1" class="bare">https://github.com/bitcoin-core/secp256k1</a> into perspective, I made this graph of the library&#8217;s performance over time on ARM64 and x86_64.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/FCEWx-aXoAsbMZB.png" alt="FCEWx aXoAsbMZB">
</div>
</div>
<hr>
<div class="paragraph">
<p>2/ On the X axis a number of PR numbers are listed which had some noticeable effect on performance. In particular 830 (enabling the GLV endomorphism by default) and 831 (safegcd based modular inverses) had a huge impact.</p>
</div>
<div class="paragraph">
<p>About GLV endomorphism:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>About 25% speedup of signature validation. To how much that translates to IBD depends on the situation.</p>
</div>
<div class="paragraph">
<p>The GLV optimization has been integrated in libsecp256k1 since day 1, in 2013. It has just been default off.</p>
</div>
</blockquote>
</div>
<hr>
<div class="paragraph">
<p>3/ About the safegcd based modular inverses I&#8217;ve tweeted several times, amongst others here: [link to <a href="#othertwitterthread">other twitter thread</a> by Wuille]</p>
</div>
<hr>
<div class="paragraph">
<p>4/ The graph was created by running the "bench_verify" tool at every merge commit in the repository, with libgmp disabled (for commits which had it as optional dependency) to match how Bitcoin Core uses it.</p>
</div>
<div class="paragraph">
<p>In total, 387 merges, so 387 data points.</p>
</div>
<hr>
<div class="paragraph">
<p>5/ The vast majority of these don&#8217;t have any impact on performance at all, and a few only do so randomly (e.g. by adding a new function, some alignment in the binary is different, or inlining decisions are slightly different, while not having any algorithmic impact).</p>
</div>
<hr>
<div class="paragraph">
<p>6/ libsecp256k1 certainly has had a period where activity wasn&#8217;t that high, and the recent improvements are a sign this has improved (amongst others, thanks to the new maintainers
@n1ckler and @real_or_random, who are far more active than I was).</p>
</div>
<hr>
<div class="paragraph">
<p>fin/ Still, the library had hundreds of merged changes that didn&#8217;t impact performance. Many of those are maintenance, documentation, keeping CI up to date, tests; I&#8217;d like to use that as an example to show there is plenty of work for non-experts, and we welcome contributions!</p>
</div>
<div class="sect3">
<h4 id="othertwitterthread"><a class="anchor" href="#othertwitterthread"></a>Other twitter thread by Wuille</h4>
<div class="paragraph">
<p>Copied from <a href="https://twitter.com/pwuille/status/1309722142607515648" class="bare">https://twitter.com/pwuille/status/1309722142607515648</a></p>
</div>
<div class="paragraph">
<p>How randomly changing 1 character in an algorithm accidentally made it 18% faster. <a href="https://github.com/sipa/safegcd-bounds" class="bare">https://github.com/sipa/safegcd-bounds</a></p>
</div>
<hr>
<div class="paragraph">
<p>Greg Maxwell and I were working on tests for the safegcd-based modular inverse implementation in libsecp256k1: <a href="https://github.com/bitcoin-core/secp256k1/pull/831" class="bare">https://github.com/bitcoin-core/secp256k1/pull/831</a></p>
</div>
<hr>
<div class="paragraph">
<p>In order to build interesting test cases, Greg tried mutation testing: introduce intentional bugs in the code to see if our tests would catch it.</p>
</div>
<div class="paragraph">
<p>He noticed that changing a "&lt;" into "&lt;=" didn&#8217;t break any tests.</p>
</div>
<hr>
<div class="paragraph">
<p>Looking into it in more detail, I didn&#8217;t expect this would actually break anything, but just make it slower to finish.</p>
</div>
<div class="paragraph">
<p>So with that, he started looking for cases that were specifically slow under this mutation, to add those as a test. He couldn&#8217;t find any&#8230;&#8203;</p>
</div>
<hr>
<div class="paragraph">
<p>Now, I had just come up with a technique to generally find upper bounds on how many iterations this algorithm needs (see link in top tweet). It was easy to adapt it to this mutated version&#8230;&#8203; and found it only needed 590 iterations (where the original may need 723).</p>
</div>
<hr>
<div class="paragraph">
<p>For context, this is an unusual algorithm that can be made constant-time (a requirement in cryptographic applications for side-channel resistance) by simply always running the maximum number of iterations rather than stopping when done.</p>
</div>
<hr>
<div class="paragraph">
<p>This means this mutated variant actually always runs faster, rather than just on average.</p>
</div>
<div class="paragraph">
<p>@hashbreaker and @bo_yin have recently used this variant to break their own modular inversion speed record: <a href="https://twitter.com/hashbreaker/status/1348247397843968000" class="bare">https://twitter.com/hashbreaker/status/1348247397843968000</a></p>
</div>
<hr>
<div class="paragraph">
<p>I should clarify that the final version wasn&#8217;t actually what he randomly stumbled upon. Once we learned that small tweaks existed that had better bounds, we started looking for more, and found even better.</p>
</div>
<div class="paragraph">
<p>Original: ~2.8 steps/bit
Mutation: ~2.5 steps/bit
Final: ~2.3 steps/bit</p>
</div>
<hr>
<div class="paragraph">
<p>As for why it converges so much faster&#8230;&#8203; I don&#8217;t have any great insight.</p>
</div>
<div class="paragraph">
<p>But the diagram below (left=original, right=mutated) looks a lot prettier, right?</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/ErgMdkbU0AEIgeh.png" alt="ErgMdkbU0AEIgeh" width="50%"></span><span class="image"><img src="images/ErgMglFVQAEekab.png" alt="ErgMglFVQAEekab" width="50%"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_murch_2_of_3_inputs_using_pay_to_taproot"><a class="anchor" href="#_murch_2_of_3_inputs_using_pay_to_taproot"></a>8.6. Murch - 2-of-3 inputs using Pay-to-Taproot</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://murchandamus.medium.com/2-of-3-multisig-inputs-using-pay-to-taproot-d5faf2312ba3" class="bare">https://murchandamus.medium.com/2-of-3-multisig-inputs-using-pay-to-taproot-d5faf2312ba3</a></p>
</li>
<li>
<p>Author: Mark Erhardt (Murch)</p>
</li>
<li>
<p>Date copied: 2022-05-25</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><em>This article was amended on 2020–12–20 to improve the description of
the P2TR output scripts. Thanks to Matthew Zipkin, for pointing out the
prior imprecision.</em></p>
</div>
<div class="paragraph">
<p>The Bitcoin community has been
<a href="https://medium.com/hackernoon/excited-for-schnorr-signatures-a00ee467fc5f">abuzz
for a few years</a> about bringing Schnorr signatures to Bitcoin. Since
then, the idea has evolved into three formal Bitcoin Improvement
Proposals:
<a href="https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki">‘BIP340 —
Schnorr Signatures for secp256k1’</a>,
<a href="https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki">‘BIP341 —
Taproot: SegWit version 1 spending rules’</a>, and
<a href="https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki">‘BIP342 —
Validation of Taproot Scripts’</a>. Respectively, they define a standard
for Schnorr signatures in Bitcoin, introduce the Taproot construction,
and formalize the new Script v1 instruction set. Taproot also iterates
on the previous proposal of Merklized Alternative Script Trees (MAST).</p>
</div>
<div class="paragraph">
<p>There are two ways of spending a <em>pay-to-taproot</em> (P2TR) output. The
first way is called <em>key path spending.</em> P2TR funds are locked to a
single public key similarly to <em>pay-to-public-key</em> (P2PK) outputs. The
output script appears in the transaction as <em>‘OP_1 &lt;pubkey&gt;’</em>. This
script can be satisfied by providing an empty input script and a Schnorr
signature of the corresponding private key in the witness program. The
key path is the default spending path. It is used in single-sig and
collaborative multi-party spending.</p>
</div>
<div class="paragraph">
<p>Under the hood, the public key is a composition of an <em>inner key</em> and
the Merkle root of a Taproot tree (the inner key is <em>tweaked</em> with the
Merkle root). The inner key can optionally be a composite itself, for
example multiple public keys aggregated via the
<a href="https://blockstream.com/2019/02/18/en-musig-a-new-multisignature-standard/">MuSig</a>
scheme. These compositions are possible due to Schnorr signatures being
linear.</p>
</div>
<div class="paragraph">
<p>The second way of spending a P2TR output uses one of the Taproot leaves.
We call this <em>script path spending.</em> First, the existence of the leaf
needs to be proven which is done by revealing the inner key, the Merkle
path to the Taproot leaf, and the script encoded in the leaf. Then, the
spending conditions of the leaf’s script are fulfilled.</p>
</div>
<div class="paragraph">
<p>The remainder of this article explores the input costs of 2-of-3
multisig Taproot constructions. Some familiarity with the details of the
proposals is helpful. Check out the
<a href="https://bitcoinops.org/en/topics/taproot/">Taproot overview</a> and the
<a href="https://bitcoinops.org/en/newsletters/2019/05/14/#overview-of-the-taproot&#8212;&#8203;tapscript-proposed-bips">excellent
summary of the three BIPs</a> by the Bitcoin Optech Group if you are
looking to refresh the details.</p>
</div>
<div class="sect3">
<h4 id="_the_multisig_user_story"><a class="anchor" href="#_the_multisig_user_story"></a>The multisig user story</h4>
<div class="paragraph">
<p>We are looking at a wallet construction using three keys held by two or
three parties. The first key is held by the user, the second key is held
by the service provider, and the third key is a backup key either held
by the user or a key recovery service. We are assuming that the first
two keys are hot and can be used in an interactive signing scheme as
employed by MuSig. The backup key may be held cold e.g. on an air-gapped
system in which case interactive signing should be avoided.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1_XBzKkWMG4VmyCDQlNSAQfQ.png" alt="1 XBzKkWMG4VmyCDQlNSAQfQ" width="700" height="220">
</div>
<div class="title">Figure 5. 2-of-3 multisig with two hot keys and one (optionally) cold key,</div>
</div>
<div class="paragraph">
<p>Classically, a 2-of-3 multisig address is constructed in the form of a
<em>pay-to-scripthash (P2SH)</em> output of the form <em>‘2 &lt;pubkey1&gt; &lt;pubkey2&gt;
&lt;pubkey3&gt; 3 OP_CHECKMULTISIG’.</em> This construction can logically be
expressed as ‘(A ∧ B) ∨(A ∧ C) ∨(B ∧ C)’ which could also be thought of
as “one of three 2-of-2 multisig scripts”. The latter translates nicely
to Taproot: we can encode the preferred condition of spending with the
user and the service key (the two hot keys) in an aggregated pubkey for
the key path, and put the two spending conditions using the backup key
in leaves of the Taproot tree. Two variants are explored: one where the
backup key is capable of participating in the interactive MuSig signing
scheme, another that falls back to a simpler multisig scheme where
signing is non-interactive e.g. because the backup key is air-gapped and
the multiple roundtrips required for MuSig are inconvenient.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1_HrSHn2mC-40ofx_A3SzEOQ.png" alt="1 HrSHn2mC 40ofx A3SzEOQ" width="700" height="374">
</div>
<div class="title">Figure 6. The most likely spending option with the two hot keys is encoded as an aggregated key in the key path. The two backup spending options are put into leaves of the script tree.</div>
</div>
</div>
<div class="sect3">
<h4 id="_key_path_spending_costs"><a class="anchor" href="#_key_path_spending_costs"></a>Key path spending costs</h4>
<div class="paragraph">
<p>In the general case, all parties agree on a course of action and
collaborate to use the key path. This is the most cost-effective way to
spend a P2TR output and allows multiparty spenders (and other complex
spending conditions) to be indistinguishable from single-sig spenders.</p>
</div>
<div class="sect4">
<h5 id="_costs_of_key_path_input"><a class="anchor" href="#_costs_of_key_path_input"></a>Costs of key path input</h5>
<div class="paragraph">
<p>An input commits to a specific <em>unspent transaction output (UTXO)</em> which
is defined by the transaction that created it and the position in that
transaction’s output list. The UTXO entry provides the spending
conditions to be satisfied by the spender. An <em>nSequence</em> field allows
encoding replaceability, and the witness provides the spender’s
authentication. In the case of the key path this is a single Schnorr
signature which in some cases may actually consist of multiple
aggregated signatures.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>outpoint (txid:vout): 32 vB+4 vB</p>
</li>
<li>
<p>scriptSig size: 1 vB</p>
</li>
<li>
<p>nSequence: 4 vB</p>
</li>
<li>
<p>count witness items: 1 WU</p>
</li>
<li>
<p>witness item size: 1 WU</p>
</li>
<li>
<p>signature: 64 WU</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>32+4+1+4+(1+1+64)/4 = 57.5 vB</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_control_blocks"><a class="anchor" href="#_control_blocks"></a>Control Blocks</h4>
<div class="paragraph">
<p>When a fallback to the backup key is necessary, the existence of the
Taproot tree must be revealed. If there is only a single leaf, the
spender provides only the inner key. Tweaking the inner key with the
hashed leaf results in the public key. In sum, the data necessary to
prove the existence of a script path is called the <em>control block</em>.</p>
</div>
<div class="sect4">
<h5 id="_depth_0_control_block"><a class="anchor" href="#_depth_0_control_block"></a>Depth 0 control block</h5>
<div class="ulist">
<ul>
<li>
<p>Length of control block: 1 WU</p>
</li>
<li>
<p>Header byte (script version, sign of output key): 1 WU</p>
</li>
<li>
<p>Inner key: 32 WU</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>1+1+32 = 34 WU</p>
</div>
<div class="paragraph">
<p>In case of two leaves, additionally the first hashing partner for the
Merkle path must be revealed:</p>
</div>
</div>
<div class="sect4">
<h5 id="_depth_1_control_block"><a class="anchor" href="#_depth_1_control_block"></a>Depth 1 control block</h5>
<div class="ulist">
<ul>
<li>
<p>Length of control block: 1 WU</p>
</li>
<li>
<p>Header byte: 1 WU</p>
</li>
<li>
<p>Inner key of root key: 32 WU</p>
</li>
<li>
<p>Hashing partner in tree: 32 WU</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>1+ 1+ 32 + 32 = 66 WU</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_script_path_spending_cost"><a class="anchor" href="#_script_path_spending_cost"></a>Script path spending cost</h4>
<div class="paragraph">
<p>The below costs are in addition to the above costs of spending via the
key path.</p>
</div>
<div class="sect4">
<h5 id="_script_path_spend_assuming_2_of_2_musig_leaf_hot_backup_key"><a class="anchor" href="#_script_path_spend_assuming_2_of_2_musig_leaf_hot_backup_key"></a>Script path spend assuming 2-of-2 MuSig leaf (hot backup key)</h5>
<div class="paragraph">
<p>When the backup key is on a networked system, e.g. an HSM, and can
participate in a multi-roundtrip signing process, we can make use of
MuSig to aggregate the two public keys.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>script size: 1 WU</p>
</li>
<li>
<p>script “&lt;pk&gt; OP_CHECKSIG”: 33 WU+1 WU</p>
</li>
<li>
<p>Depth 1 Control block: 66 WU</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>57.5+(1+34+66)/4 = 82.75 vB</p>
</div>
</div>
<div class="sect4">
<h5 id="_construction_with_2_of_2_op_checksig_cold_backup_key_no_musig"><a class="anchor" href="#_construction_with_2_of_2_op_checksig_cold_backup_key_no_musig"></a>Construction with 2-of-2 OP_CHECKSIG (cold backup key, no MuSig)</h5>
<div class="paragraph">
<p>In the case that the backup key is offline and a human would have to
make multiple trips employing USB sticks or QR codes, saving roundtrips
may take precedence over saving a few bytes. Instead of an aggregated
public key, we use a non-interactive multisig construction.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>second signature: 1 WU+64 WU</p>
</li>
<li>
<p>script size: 1 WU</p>
</li>
<li>
<p>script “&lt;pk1&gt; OP_CHECKSIGVERIFY &lt;pk2&gt; OP_CHECKSIG” 33+1+33+1=68 WU</p>
</li>
<li>
<p>Depth 1 Control block: 66 WU</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>57.5+(1+64+1+68+66)/4 = 107.5 vB</p>
</div>
</div>
<div class="sect4">
<h5 id="_discarded_approach_single_leaf_with_2_of_3_script"><a class="anchor" href="#_discarded_approach_single_leaf_with_2_of_3_script"></a>Discarded approach: single leaf with 2-of-3 script</h5>
<div class="paragraph">
<p>It turns out that a single 2-of-3 leaf in lieu of the two 2-of-2 leaves
is both more costly and less private.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>+2nd sig: 1+64 WU</p>
</li>
<li>
<p>+1 empty witness item: 2 WU</p>
</li>
<li>
<p>Length of script: 1 WU</p>
</li>
<li>
<p>Script “&lt;pk1&gt; OP_CHECKSIG &lt;pk2&gt; OP_CHECKSIGADD &lt;pk3&gt; OP_CHECKSIGADD 2
OP_EQUAL”: 33+1+33+1+33+1+2=104 WU</p>
</li>
<li>
<p>Depth 0 Control block: 34 WU</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>57.5+(1+64+2+1+104+34)/4 = 109 vB</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_conclusion_4"><a class="anchor" href="#_conclusion_4"></a>Conclusion</h4>
<div class="paragraph">
<div class="title">Upper bound of input and output sizes for single-sig and 2-of-3 multisig.</div>
<p><span class="image"><img src="images/1_wsspff_5vVlEDPyndigjZg.png" alt="1 wsspff 5vVlEDPyndigjZg" width="654" height="327"></span></p>
</div>
<div class="paragraph">
<p>The described 2-of-3 multisig scheme achieves input sizes of 57.5 vbytes
for a key path spend, 82.75 vbytes for the leaves using a hot backup
key, and 107.5 vbytes for non-interactive backup spends. This results in
a fee reduction by 45% for 2-of-3 inputs when switching from P2WSH to
P2TR spending. In the uncommon case of a recovery transaction, the cost
is negligibly increased for cold keys. Single-sig users are also
incentivized to switch to P2TR as they save 11 vbytes on each input —
the output cost is externalized on the sender.</p>
</div>
<div class="paragraph">
<p><em>Thanks to Gloria Wang</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_a_trip_to_the_moon_requires_a_rocket_with_multiple_stages"><a class="anchor" href="#_gregory_maxwell_a_trip_to_the_moon_requires_a_rocket_with_multiple_stages"></a>8.7. Gregory Maxwell - A trip to the moon requires a rocket with multiple stages &#8230;&#8203;</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://www.reddit.com/r/Bitcoin/comments/438hx0/a_trip_to_the_moon_requires_a_rocket_with/" class="bare">https://www.reddit.com/r/Bitcoin/comments/438hx0/a_trip_to_the_moon_requires_a_rocket_with/</a></p>
</li>
<li>
<p>Author: Gregory Maxwell (nullc)</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_a_trip_to_the_moon_requires_a_rocket_with_multiple_stages_or_otherwise_the_rocket_equation_will_eat_your_lunch_packing_everyone_in_clown_car_style_into_a_trebuchet_and_hoping_for_success_is_right_out"><a class="anchor" href="#_a_trip_to_the_moon_requires_a_rocket_with_multiple_stages_or_otherwise_the_rocket_equation_will_eat_your_lunch_packing_everyone_in_clown_car_style_into_a_trebuchet_and_hoping_for_success_is_right_out"></a>A trip to the moon requires a rocket with multiple stages or otherwise the rocket equation will eat your lunch&#8230;&#8203; packing everyone in clown-car style into a trebuchet and hoping for success is right out.</h4>
<div class="paragraph">
<p>A lot of people on Reddit think of Bitcoin primarily as a competitor to
card payment networks. I think this is more than a little odd-- Bitcoin
is a digital <em>currency</em>. Visa and the US dollar are not usually
considered competitors, Mastercard and gold coins are not usually
considered competitors. Bitcoin isn&#8217;t a front end for something that
provides credit, etc.</p>
</div>
<div class="paragraph">
<p>Never the less, some are mostly interested in Bitcoin for payments
(<a href="https://bitcointalk.org/index.php?topic=204.msg1714#msg1714">not a new
phenomenon</a>)-- and are not so concerned about what are, in my view,
Bitcoin&#8217;s primary distinguishing values-- monetary sovereignty,
censorship resistance, trust cost minimization, international
accessibility/borderless operation, etc. (Or other areas we need to
improve, like personal and commercial privacy) Instead some are very
concerned about Bitcoin&#8217;s competitive properties compared to legacy
payment networks. &#8230;&#8203; And although consumer payments are only one small
part of whole global space of money, &#8230;&#8203; money gains value from network
effects, and so I would want all the "payments only" fans to love
Bitcoin too, even if I didn&#8217;t care about payments.</p>
</div>
<div class="paragraph">
<p>But what does it mean to be seriously competitive in that space? The
existing payments solutions have huge deployed infrastructure and
merchant adoption-- lets ignore that. What about capacity? Combined the
major card networks are now doing something on the other of 5000
transactions per second on a year round average; and likely something on
the order of 120,000 transactions per second on peak days.</p>
</div>
<div class="paragraph">
<p>The decentralized Bitcoin blockchain is globally shared broadcast
medium-- probably the most insanely inefficient mode of communication
ever devised by man. Yet, considering that, it has some impressive
capacity. But relative to highly efficient non-decentralized networks,
not so much. The issue is that in the basic Bitcoin system every node
takes on the whole load of the system, that is how it achieves its
monetary sovereignty, censorship resistance, trust cost minimization,
etc. Adding nodes increases costs, but not capacity. Even the most
<strong class="line-through">reckless</strong> hopeful blocksize growth numbers don&#8217;t come
anywhere close to matching those TPS figures. And even if they did, card
processing rates are rapidly increasing, especially as the developing
world is brought into them-- a few more years of growth would have their
traffic levels vastly beyond the Bitcoin figures again.</p>
</div>
<div class="paragraph">
<p>No amount of spin, inaccurately comparing a global broadcast consensus
system to loading a webpage changes any of this.</p>
</div>
<div class="paragraph">
<p>So-- Does that mean that Bitcoin can&#8217;t be a big winner as a payments
technology? No. But to reach the kind of capacity required to serve the
payments needs of the world we must work more intelligently.</p>
</div>
<div class="paragraph">
<p>From its very beginning Bitcoin was design to incorporate layers in
secure ways through its smart contracting capability (What, do you think
that was just put there so people could wax-philosophic about
meaningless "DAOs"?). In effect we will use the Bitcoin system as a
highly accessible and perfectly trustworthy robotic judge and conduct
most of our business outside of the court room-- but transact in such a
way that if something goes wrong we have all the evidence and
established agreements so we can be confident that the robotic court
will make it right. (Geek sidebar: If this seems impossible, go read
this old post on
<a href="https://bitcointalk.org/index.php?topic=281848.0">transaction
cut-through</a>)</p>
</div>
<div class="paragraph">
<p>This is possible precisely because of the core properties of Bitcoin. A
censorable or reversible base system is not very suitable to build
powerful upper layer transaction processing on top of&#8230;&#8203; and if the
underlying asset isn&#8217;t sound, there is little point in transacting with
it at all.</p>
</div>
<div class="paragraph">
<p>The science around Bitcoin is new and we don&#8217;t know exactly where the
breaking points are-- I hope we never discover them for sure-- we do
know that at the current load levels the decentralization of the system
has not improved as the users base has grown (and appear to have reduced
substantially: even businesses are largely relying on third party
processing for all their transactions; something we didn&#8217;t expect early
on).</p>
</div>
<div class="paragraph">
<p>There are many ways of layering Bitcoin, with varying levels of
security, ease of implementation, capacity, etc. Ranging from the
strongest-- bidirectional payment channels (often discussed as the
'lightning' system), which provide nearly equal security and
anti-censorship while also adding instantaneous payments and improved
privacy-- to the simplest, using centralized payment processors, which I
believe are (in spite of my reflexive distaste for all things
centralized) a perfectly reasonable thing to do for low value
transactions, and can be highly cost efficient. Many of these approaches
are competing with each other, and from that we gain a vibrant ecosystem
with the strongest features.</p>
</div>
<div class="paragraph">
<p>Growing by layers is the gold standard for technological innovation.
It&#8217;s how we build our understanding of mathematics and the physical
sciences, it&#8217;s how we build our communications protocols and networks&#8230;&#8203;
Not to mention payment networks. Thus far a
<a href="https://en.wikipedia.org/wiki/Multistage_rocket">multi-staged</a> approach
has been an integral part of the
<a href="https://en.wikipedia.org/wiki/Tsiolkovsky_rocket_equation">design of
rockets</a> which have, <a href="http://xkcd.com/893/">from time to time</a>, brought
mankind to the moon.</p>
</div>
<div class="paragraph">
<p>Bitcoin does many unprecedented things, but this doesn&#8217;t release it from
physical reality or from the existence of engineering trade-offs. It is
not acceptable, in the mad dash to fulfill a particular application set,
to turn our backs on the fundamentals that make the Bitcoin currency
valuable to begin with-- especially not when established forms in
engineering already tell us the path to have our cake and eat it too--
harmoniously satisfying all the demands.</p>
</div>
<div class="paragraph">
<p>Before and beyond the layers, there are other things being done to
improve capacity-- e.g. Bitcoin Core&#8217;s
<a href="https://bitcoincore.org/en/2015/12/21/capacity-increase/">capacity plan</a>
from December (see also: the
<a href="https://bitcoincore.org/en/2015/12/23/capacity-increases-faq/">FAQ</a>)
proposes some new improvements and inventions to nearly double the
system&#8217;s capacity while offsetting many of the costs and risks, in a
fully backwards compatible way. &#8230;&#8203; but, at least for those who are
focused on payments, no amount of simple changes really makes a
difference; not in the way layered engineering does.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_when_shit_hits_the_fan"><a class="anchor" href="#_when_shit_hits_the_fan"></a>9. When shit hits the fan</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_anthony_towns_responsible_disclosure_of_bugs"><a class="anchor" href="#_anthony_towns_responsible_disclosure_of_bugs"></a>9.1. Anthony Towns - Responsible disclosure of bugs</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/015002.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/015002.html</a></p>
</li>
<li>
<p>Author: Anthony Towns</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>On Tue, Sep 12, 2017 at 09:10:18AM -0700, Simon Liu wrote:
> It would be a good starting point if the current policy could be
> clarified, so everyone is on the same page, and there is no confusion.

Collecting various commentary from here and reddit, I think current de
facto policy is something like:

 * Vulnerabilities should be reported via <a href="https://lists.linuxfoundation.org/mailman/listinfo/bitcoin-dev">security at bitcoincore.org</a> [0]

 * A critical issue (that can be exploited immediately or is already
   being exploited causing large harm) will be dealt with by:
     * a released patch ASAP
     * wide notification of the need to upgrade (or to disable affected
       systems)
     * minimal disclosure of the actual problem, to delay attacks
   [1] [2]

 * A non-critical vulnerability (because it is difficult or expensive to
   exploit) will be dealt with by:
     * patch and review undertaken in the ordinary flow of development
     * backport of a fix or workaround from master to the current
       released version [2]

 * Devs will attempt to ensure that publication of the fix does not
   reveal the nature of the vulnerability by providing the proposed fix
   to experienced devs who have not been informed of the vulnerability,
   telling them that it fixes a vulnerability, and asking them to identify
   the vulnerability. [2]

 * Devs may recommend other bitcoin implementations adopt vulnerability
   fixes prior to the fix being released and widely deployed, if they
   can do so without revealing the vulnerability; eg, if the fix has
   significant performance benefits that would justify its inclusion. [3]

 * Prior to a vulnerability becoming public, devs will generally recommend
   to friendly altcoin devs that they should catch up with fixes. But this
   is only after the fixes are widely deployed in the bitcoin network. [4]

 * Devs will generally not notify altcoin developers who have behaved
   in a hostile manner (eg, using vulnerabilities to attack others, or
   who violate embargoes). [5]

 * Bitcoin devs won't disclose vulnerability details until >80% of bitcoin
   nodes have deployed the fixes. Vulnerability discovers are encouraged
   and requested to follow the same policy. [1] [6]

Those seem like pretty good policies to me, for what it's worth.

I haven't seen anything that indicates bitcoin devs will *ever* encourage
public disclosure of vulnerabilities (as opposed to tolerating other
people publishing them [6]). So I'm guessing current de facto policy is
more along the lines of:

 * Where possible, Bitcoin devs will never disclose vulnerabilities
   publically while affected code may still be in use (including by
   altcoins).

rather than something like:

 * Bitcoin devs will disclose vulnerabilities publically after 99% of the
   bitcoin network has upgraded [7], and fixes have been released for
   at least 12 months.


Instinctively, I'd say documenting this policy (or whatever it actually
is) would be good, and having all vulnerabilities get publically released
eventually would also be good; that's certainly the more "open source"
approach. But arguing the other side:

 - documenting security policy gives attackers a better handle on where
   to find weak points; this may be more harm than there is benefit to
   improving legitimate users' understanding of and confidence in the
   development process

 - the main benefit of public vulnerability disclosure is a better
   working relationship with security researchers and perhaps better
   understanding of what sort of bugs happen in practice in general;
   but if most of your security research is effectively in house [6],
   maybe those benefits aren't as great as the harm done by revealing
   even old vulnerabilities to attackers

If the first of those arguments holds, well, hopefully this message has
egregious errors that no one will correct, or it will quickly get lost
in this list's archives...

Cheers,
aj

[0] <a href="http://bitcoincore.org/en/contact" class="bare">http://bitcoincore.org/en/contact</a>
    referenced from .github/ISSUE_TEMPLATE.md in git

[1] <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014986.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014986.html</a>

[2] <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014990.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014990.html</a>

[3] <a href="https://www.reddit.com/r/btc/comments/6zf1qo/peter_todd_nicely_pulled_away_attention_from_jjs/dmxcw70/" class="bare">https://www.reddit.com/r/btc/comments/6zf1qo/peter_todd_nicely_pulled_away_attention_from_jjs/dmxcw70/</a>

[4] <a href="https://www.reddit.com/r/btc/comments/6z827o/chris_jeffrey_jj_discloses_bitcoin_attack_vector/dmxdg83/" class="bare">https://www.reddit.com/r/btc/comments/6z827o/chris_jeffrey_jj_discloses_bitcoin_attack_vector/dmxdg83/</a>

[5] <a href="https://www.reddit.com/r/btc/comments/6zb3lp/maxwell_admits_core_sat_on_vulnerability/dmv4y7g/" class="bare">https://www.reddit.com/r/btc/comments/6zb3lp/maxwell_admits_core_sat_on_vulnerability/dmv4y7g/</a>

[6] <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014991.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014991.html</a>

[7] Per <a href="http://luke.dashjr.org/programs/bitcoin/files/charts/branches.html" class="bare">http://luke.dashjr.org/programs/bitcoin/files/charts/branches.html</a>
    it seems like 1.7% of the network is running known-vulnerable versions
    0.8 and 0.9; but only 0.37% are running 0.10 or 0.11, so that might argue
    revealing any vulnerabilities fixed since 0.12.0 would be fine...
    (bitnodes.21.co doesn't seem to break down anything earlier than 0.12)</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bryan_bishop_responsible_disclosure_of_bugs"><a class="anchor" href="#_bryan_bishop_responsible_disclosure_of_bugs"></a>9.2. Bryan Bishop - Responsible disclosure of bugs</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014983.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014983.html</a></p>
</li>
<li>
<p>Author: Bryan Bishop</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>On Mon, Sep 11, 2017 at 10:37 PM, Anthony Towns via bitcoin-dev
<bitcoin-dev at lists.linuxfoundation.org> wrote:
> All of those things seem like they'd help not just altcoins but bitcoin
> investors/traders too, so it's not even a trade-off between classes of
> bitcoin core users.  And if in the end various altcoins aren't able to
> keep up with security fixes, that's probably valuable information to
> provide to the market...

I have a reply to your point, but I want to clarify first that I am
not trying to provide any sort of criticism of your character, and to
any extent that my text is misinterpreted that way, that's entirely my
fault here. Anyway, here goes.

It's not enough to defend bitcoin and its users from active threats,
there is a more general responsibility to defend all kinds of users
and different software from many kinds of threats in whatever forms,
even if folks are using stupid and insecure software that you
personally don't maintain or contribute to or advocate for. Handling
knowledge of a vulnerability is a delicate matter and you might be
receiving knowledge with more serious direct or indirect impact than
originally described.

Besides the moral and ethical reasons to not unduly accelerate the
exploitation of a vulnerability, there is also a reputational
standpoint to consider, in that your position that your own (security)
work is credible is actually harmed by showing negative care for other
works by being first to publish either insecure software or knowledge
of a vulnerability. And sometimes the opposite is true: by not
disclosing knowledge of how a design is broken to someone inviting its
review, you're showing negative care in that way too, such as by
unintentionally encouraging the implementation of really bad ideas or
entirely novel misunderstandings of what you once thought were clear
concepts. So there is a difficult path to walk and especially in
security not all may be as it seems; caution is highly recommended.

Yes it would be good for "the market" to "get the signal" that
altcoins are insecure, and that some altcoin vendors are literally and
actively malicious entities, but I think everyone needs to take a step
back here and very carefully consider the color of their hats,
including those who advocate in the name of insecure downstream/forked
software.

The downside of the approach I've advocated for is that it requires
knowledge, thinking and outsmarting the red teams; I am certainly
aware of the allure of the approaches that involve absolutist
statements like "anything weak [including bitcoin if it does have
weaknesses] deserves to die and be actively exploited" but it's not
something I am interested in espousing...nor do I think it would be
healthy for this community to internalize that perspective. Instead we
should continue to work on highly defensible software, and keep
vigilant in regards to security. In "the [civilized] garden" I would
expect there to be a general understanding that people collaborate and
work together to build highly defensible evolving systems even if
there exists knowledge of vulnerabilities. But we shouldn't be
surprised when we don't go out of our way to contribute to
alternative/parasitic systems... and we shouldn't be encouraging each
other to actively bring about the eschaton by way of mishandling
knowledge of vulnerabilities...

I know these issues are difficult to get a handle on. Hopefully I've
provided some useful perspective.

- Bryan
<a href="http://heybryan.org/" class="bare">http://heybryan.org/</a>
1 512 203 0507</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_responsible_disclosure_of_bugs"><a class="anchor" href="#_gregory_maxwell_responsible_disclosure_of_bugs"></a>9.3. Gregory Maxwell - Responsible disclosure of bugs</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014977.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014977.html</a></p>
</li>
<li>
<p>Author: Gregory Maxwell</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>On Mon, Sep 11, 2017 at 5:43 PM, Daniel Stadulis via bitcoin-dev
<bitcoin-dev at lists.linuxfoundation.org> wrote:
> I think it's relevant to treat different bug severity levels with different
> response plans.
>
> E.g.
> Compromising UTXO custody (In CVE-2010-5141, OP_RETURN vulnerability)
> Compromising UTXO state (In CVE-2013-3220, blockchain split due to Berkeley
> DB -> LevelDB upgrade, CVE-2010-5139 Overflow bug, unscheduled inflation of
> coins)
> Compromising Node performance (Various node-specific DoS attacks)
>
> Should have different disclosure policies, IMO

This assumes the states are discernible.  They often aren't cleanly.
You obviously know how bad it is in the best case, but the worst could
be much worse.

I've multiple time seen a hard to exploit issue turn out to be trivial
when you find the right trick, or a minor dos issue turn our to far
more serious.

Simple performance bugs, expertly deployed, can potentially be used to
carve up the network--- miner A and exchange B go in one partition,
everyone else in another.. and doublespend.

And so on.  So while I absolutely do agree that different things
should and can be handled differently, it is not always so clear cut.
It's prudent to treat things as more severe than you know them to be.

In fact, someone pointed out to me a major amplifier of the
utxo-memory attack thing today that Bitcoin Core narrowly dodges which
would have made it very easy to exploit against some users, and which
it seems no one previously considered.

I also think it's somewhat incorrect to call this thread anything
about disclosure, this thread is not about disclosure. Disclosure is
when you tell the vendor.  This thread is about publication and that
has very different implications. Publication is when you're sure
you've told the prospective attackers.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_wiki_common_vulnerabilities_and_exposures"><a class="anchor" href="#_bitcoin_wiki_common_vulnerabilities_and_exposures"></a>9.4. Bitcoin Wiki - Common Vulnerabilities and Exposures</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://en.bitcoin.it/wiki/Common_Vulnerabilities_and_Exposures" class="bare">https://en.bitcoin.it/wiki/Common_Vulnerabilities_and_Exposures</a></p>
</li>
<li>
<p>Author: Luke-Jr (mainly)</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>Truncated to only show the summary table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 16%;">
<col style="width: 14%;">
<col style="width: 14%;">
<col style="width: 14%;">
<col style="width: 14%;">
<col style="width: 14%;">
<col style="width: 14%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CVE</th>
<th class="tableblock halign-left valign-top">Announced</th>
<th class="tableblock halign-left valign-top">Affects</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Attack is&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Flaw</th>
<th class="tableblock halign-left valign-top">Net</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-BIP protocol changes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Netsplit<sup><a href="#cite_note-Netsplit-1">[1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit<sup><a href="#cite_note-hardfork-2">[2</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="/wiki/Consensus_versions">Various hardforks and softforks</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2010-5137">CVE-2010-5137</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010-07-28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wxBitcoin and bitcoind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OP_LSHIFT crash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2010-5141">CVE-2010-5141</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010-07-28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wxBitcoin and bitcoind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft<sup><a href="#cite_note-Theft-4">[4</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OP_RETURN could be used to
spend any output.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2010-5138">CVE-2010-5138</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010-07-29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wxBitcoin and bitcoind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unlimited SigOp DoS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="/wiki/CVE-2010-5139">CVE-2010-5139</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010-08-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wxBitcoin and
bitcoind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inflation<sup><a href="#cite_note-inflation-5">[5</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combined
output overflow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2010-5140">CVE-2010-5140</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010-09-29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wxBitcoin and bitcoind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Never confirming transactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2011-4447">CVE-2011-4447</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2011-11-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wxBitcoin and bitcoind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposure<sup><a href="#cite_note-Exposure-6">[6</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wallet non-encryption</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2011-4447.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2012-1909">CVE-2012-1909</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-03-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin protocol and
all clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Netsplit<sup><a href="#cite_note-Netsplit-1">[1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Very hard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction overwriting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-1909.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2012-1910">CVE-2012-1910</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-03-17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind &amp; Bitcoin-Qt
for Windows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown<sup><a href="#cite_note-Unknown-7">[7</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-thread
safe MingW exceptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-1910.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#BIP-0016">BIP 0016</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-04-01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softfork: P2SH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/BIP-0016.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2012-2459">CVE-2012-2459</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-05-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Netsplit<sup><a href="#cite_note-Netsplit-1">[1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block hash collision
(via merkle root)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-2459.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="/wiki/CVE-2012-3789">CVE-2012-3789</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-06-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and
Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Lack of) orphan txn
resource limits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20123789">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2012-4682">CVE-2012-4682</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-4682.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="/wiki/CVE-2012-4683">CVE-2012-4683</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-08-23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and
Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Targeted DoS by CPU
exhaustion using alerts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-4683.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="/wiki/CVE-2012-4684">CVE-2012-4684</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-08-24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and
Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network-wide DoS
using malleable signatures in alerts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20124684">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-2272">CVE-2013-2272</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-01-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposure<sup><a href="#cite_note-Exposure-6">[6</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote discovery of
node&#8217;s wallet addresses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132272">99.99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-2273">CVE-2013-2273</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-01-30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposure<sup><a href="#cite_note-Exposure-6">[6</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predictable change
output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132273">99.99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-2292">CVE-2013-2292</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-01-30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A transaction that takes at
least 3 minutes to verify</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132292">0%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="/wiki/CVE-2013-2293">CVE-2013-2293</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-02-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and
Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuous hard disk
seek</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132293">99.99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-3219">CVE-2013-3219</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-03-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt
0.8.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unenforced block protocol
rule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20133219">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-3220">CVE-2013-3220</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-03-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Netsplit<sup><a href="#cite_note-Netsplit-1">[1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inconsistent BDB lock
limit interactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20133220">99.99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#BIP-0034">BIP 0034</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-03-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softfork: Height in coinbase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/BIP-0034.html">100%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#BIP-0050">BIP 0050</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Netsplit<sup><a href="#cite_note-Netsplit-1">[1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit<sup><a href="#cite_note-hardfork-2">[2</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard fork to remove txid
limit protocol rule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?50">99.99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-4627">CVE-2013-4627</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-06-??</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory exhaustion with excess tx
message data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20134627">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-4165">CVE-2013-4165</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-07-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft<sup><a href="#cite_note-theft-local-timing-10">[10</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing leak
in RPC authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20134165">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2013-5700">CVE-2013-5700</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-09-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt
0.8.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote p2p crash via bloom
filters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20135700">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2014-0160">CVE-2014-0160</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-04-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything using OpenSSL
for TLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown<sup><a href="#cite_note-Unknown-7">[7</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote memory
leak via payment protocol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CVE-2015-3641</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt prior to 0.10.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Yet) Unspecified DoS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20135700">99.9%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP 66</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-02-13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softfork: Strict DER
signatures</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?66">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP 65</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-11-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softfork:
OP_CHECKLOCKTIMEVERIFY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?65">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIPs 68, 112 &amp; 113</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softforks: Rel locktime, CSV
&amp; MTP locktime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?68">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIPs 141, 143 &amp; 147</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016-10-27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softfork: Segwit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?141">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2016-8889">CVE-2016-8889</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016-10-27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Knots GUI
0.11.0 - 0.13.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug console history storing sensitive
info</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CVE-2017-9230</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> ?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> ?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> ?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASICBoost</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIP 148</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-03-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softfork: Segwit UASF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> ?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2017-12842">CVE-2017-12842</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-06-09</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No commitment
to block merkle tree depth</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-July/016189.html">CVE-2016-10724</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-07-02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt prior to 0.13.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keyholders<sup><a href="#cite_note-KeyholderEasy-11">[11</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alert memory
exhaustion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201610724">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-July/016189.html">CVE-2016-10725</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-07-02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and Bitcoin-Qt prior to 0.13.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keyholders<sup><a href="#cite_note-KeyholderEasy-11">[11</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final alert
cancellation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201610724">99%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2018-17144">CVE-2018-17144</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-09-17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and
Bitcoin-Qt prior to 0.16.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inflation<sup><a href="#cite_note-inflation-5">[5</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Missing check for duplicate
inputs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201817144">80%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://medium.com/@lukedashjr/cve-2018-20587-advisory-and-full-disclosure-a3105551e78b">CVE-2018-20587</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-02-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Knots prior to 0.17.1, and all current Bitcoin Core
releases</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft<sup><a href="#cite_note-theft-local-timing-10">[10</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No
alert for RPC service binding failure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201820587">&lt;1%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2017-18350">CVE-2017-18350</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-06-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and
Bitcoin-Qt prior to 0.15.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Varies<sup><a href="#cite_note-12">[12</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Buffer overflow from SOCKS proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201718350">94%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2018-20586">CVE-2018-20586</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-06-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitcoind and
Bitcoin-Qt prior to 0.17.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deception</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPC access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug log injection
via unauthenticated RPC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201820586">77%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-September/002174.html">CVE-2019-12998</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-08-30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">c-lightning prior to 0.7.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Missing check of
channel funding UTXO</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-September/002174.html">CVE-2019-12999</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-08-30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lnd prior to 0.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Missing check of channel
funding UTXO amount</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-September/002174.html">CVE-2019-13000</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-08-30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">eclair prior to 0.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Missing check of channel
funding UTXO</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2020-14199">CVE-2020-14199</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-06-03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trezor and others</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Social<sup><a href="#cite_note-13">[13</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double-signing can enable
unintended fees</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://invdos.net/">CVE-2018-17145</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-09-09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core prior to
0.16.2<br>
Bitcoin Knots prior to 0.16.1<br>
Bcoin prior to 1.0.2<br>
Btcd prior to 0.21.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">p2p memory
blow-up</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201817145">87%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2020-26895">CVE-2020-26895</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-10-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lnd prior to 0.10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Missing low-S normalization for HTLC signatures</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2020-26896">CVE-2020-26896</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-10-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lnd prior to 0.11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Varies<sup><a href="#cite_note-14">[14</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoice preimage extraction
via forwarded HTLC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CVE-2020-14198</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core 0.20.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoS<sup><a href="#cite_note-DoS-3">[3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote DoS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?202014198">93%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2021-3401">CVE-2021-3401</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-02-01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core GUI prior
to 0.19.0<br>
Bitcoin Knots GUI prior to 0.18.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Qt5 remote execution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20213401">64%</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CVE-2021-31876">CVE-2021-31876</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-05-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Various wallets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CVE-2021-41591</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-10-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lightning software</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CVE-2021-41592</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-10-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lightning software</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CVE-2021-41593</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-10-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lightning software</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIPs 341-343</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-11-13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Bitcoin nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fake
Conf<sup><a href="#cite_note-FakeConf-8">[8</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miners<sup><a href="#cite_note-MinerEasy-9">[9</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Softfork: Taproot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?343">57%</a></p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><span id="cite_note-Netsplit-1">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-Netsplit_1-0">1.0</a></sup> <sup><a href="#cite_ref-Netsplit_1-1">1.1</a></sup>
<sup><a href="#cite_ref-Netsplit_1-2">1.2</a></sup> <sup><a href="#cite_ref-Netsplit_1-3">1.3</a></sup>
<sup><a href="#cite_ref-Netsplit_1-4">1.4</a></sup># <span class="reference-text">Attacker can
create multiple views of the network, enabling
<a href="/wiki/Double-spending">double-spending</a> with over 1 confirmation</span>#</p>
</li>
<li>
<p><span id="cite_note-hardfork-2">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-hardfork_2-0">2.0</a></sup> <sup><a href="#cite_ref-hardfork_2-1">2.1</a></sup>#
<span class="reference-text">This is a protocol "hard-fork" that old clients will
reject as invalid and must therefore not be used.</span>#</p>
</li>
<li>
<p><span id="cite_note-DoS-3">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-DoS_3-0">3.00</a></sup> <sup><a href="#cite_ref-DoS_3-1">3.01</a></sup>
<sup><a href="#cite_ref-DoS_3-2">3.02</a></sup> <sup><a href="#cite_ref-DoS_3-3">3.03</a></sup>
<sup><a href="#cite_ref-DoS_3-4">3.04</a></sup> <sup><a href="#cite_ref-DoS_3-5">3.05</a></sup>
<sup><a href="#cite_ref-DoS_3-6">3.06</a></sup> <sup><a href="#cite_ref-DoS_3-7">3.07</a></sup>
<sup><a href="#cite_ref-DoS_3-8">3.08</a></sup> <sup><a href="#cite_ref-DoS_3-9">3.09</a></sup>
<sup><a href="#cite_ref-DoS_3-10">3.10</a></sup> <sup><a href="#cite_ref-DoS_3-11">3.11</a></sup>
<sup><a href="#cite_ref-DoS_3-12">3.12</a></sup> <sup><a href="#cite_ref-DoS_3-13">3.13</a></sup>
<sup><a href="#cite_ref-DoS_3-14">3.14</a></sup> <sup><a href="#cite_ref-DoS_3-15">3.15</a></sup>#
<span class="reference-text">Attacker can disable some functionality, for example
by crashing clients</span>#</p>
</li>
<li>
<p><span id="cite_note-Theft-4">[.mw-cite-backlink]#<a href="#cite_ref-Theft_4-0">↑</a></span>
<span class="reference-text">Attacker can take coins outside known network rules</span>#</p>
</li>
<li>
<p><span id="cite_note-inflation-5">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-inflation_5-0">5.0</a></sup> <sup><a href="#cite_ref-inflation_5-1">5.1</a></sup>#
<span class="reference-text">Attacker can create coins outside known network
rules</span>#</p>
</li>
<li>
<p><span id="cite_note-Exposure-6">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-Exposure_6-0">6.0</a></sup> <sup><a href="#cite_ref-Exposure_6-1">6.1</a></sup>
<sup><a href="#cite_ref-Exposure_6-2">6.2</a></sup># <span class="reference-text">Attacker can
access user data outside known acceptable methods</span>#</p>
</li>
<li>
<p><span id="cite_note-Unknown-7">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-Unknown_7-0">7.0</a></sup> <sup><a href="#cite_ref-Unknown_7-1">7.1</a></sup>#
<span class="reference-text">Extent of possible abuse is unknown</span>#</p>
</li>
<li>
<p><span id="cite_note-FakeConf-8">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-FakeConf_8-0">8.0</a></sup> <sup><a href="#cite_ref-FakeConf_8-1">8.1</a></sup>
<sup><a href="#cite_ref-FakeConf_8-2">8.2</a></sup> <sup><a href="#cite_ref-FakeConf_8-3">8.3</a></sup>
<sup><a href="#cite_ref-FakeConf_8-4">8.4</a></sup> <sup><a href="#cite_ref-FakeConf_8-5">8.5</a></sup>
<sup><a href="#cite_ref-FakeConf_8-6">8.6</a></sup> <sup><a href="#cite_ref-FakeConf_8-7">8.7</a></sup>
<sup><a href="#cite_ref-FakeConf_8-8">8.8</a></sup># <span class="reference-text">Attacker can
double-spend with 1 confirmation</span>#</p>
</li>
<li>
<p><span id="cite_note-MinerEasy-9">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-MinerEasy_9-0">9.0</a></sup> <sup><a href="#cite_ref-MinerEasy_9-1">9.1</a></sup>
<sup><a href="#cite_ref-MinerEasy_9-2">9.2</a></sup> <sup><a href="#cite_ref-MinerEasy_9-3">9.3</a></sup>
<sup><a href="#cite_ref-MinerEasy_9-4">9.4</a></sup> <sup><a href="#cite_ref-MinerEasy_9-5">9.5</a></sup>
<sup><a href="#cite_ref-MinerEasy_9-6">9.6</a></sup> <sup><a href="#cite_ref-MinerEasy_9-7">9.7</a></sup>
<sup><a href="#cite_ref-MinerEasy_9-8">9.8</a></sup> <sup><a href="#cite_ref-MinerEasy_9-9">9.9</a></sup>#
<span class="reference-text">Attacking requires mining block(s)</span>#</p>
</li>
<li>
<p><span id="cite_note-theft-local-timing-10">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-theft-local-timing_10-0">10.0</a></sup>
<sup><a href="#cite_ref-theft-local-timing_10-1">10.1</a></sup># <span class="reference-text">Local
attacker could potentially determine the RPC passphrase via a timing
sidechannel.</span>#</p>
</li>
<li>
<p><span id="cite_note-KeyholderEasy-11">[.mw-cite-backlink]</span>↑
<sup><a href="#cite_ref-KeyholderEasy_11-0">11.0</a></sup>
<sup><a href="#cite_ref-KeyholderEasy_11-1">11.1</a></sup># <span class="reference-text">Attacking
requires signing with the publicly-disclosed alert key</span>#</p>
</li>
<li>
<p><span id="cite_note-12">[.mw-cite-backlink]#<a href="#cite_ref-12">↑</a></span>
<span class="reference-text">Depends on software configuration</span>#</p>
</li>
<li>
<p><span id="cite_note-13">[.mw-cite-backlink]#<a href="#cite_ref-13">↑</a></span>
<span class="reference-text">User must be tricked into cooperating (social
engineering)</span>#</p>
</li>
<li>
<p><span id="cite_note-14">[.mw-cite-backlink]#<a href="#cite_ref-14">↑</a></span>
<span class="reference-text">Depends on node configuration, only affects routable
merchants, requires external knowledge of receiver&#8217;s invoices and/or
luck to identify receiver, only works against single-shot HTLCs (legacy
or MPP)</span>#</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_satoshi_nakamoto_alert_upgrade_to_0_3_5_asap"><a class="anchor" href="#_satoshi_nakamoto_alert_upgrade_to_0_3_5_asap"></a>9.5. Satoshi Nakamoto - *** ALERT <strong>*</strong> Upgrade to 0.3.5 ASAP</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcointalk.org/index.php?topic=626.msg645" class="bare">https://bitcointalk.org/index.php?topic=626.msg645</a></p>
</li>
<li>
<p>Author: Satoshi Nakamoto</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
		<table width="90%" cellpadding="0" cellspacing="0" border="0">
			<tr>
				<td>
					<br />
					<hr size="2" width="100%" />
					Title: <b>*** ALERT *** Upgrade to 0.3.6</b><br />
					Post by: <b>satoshi</b> on <b>July 29, 2010, 07:13:06 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Please upgrade to 0.3.6 ASAP! &nbsp;We fixed an implementation bug where it was possible that bogus transactions could be displayed as accepted. &nbsp;Do not accept Bitcoin transactions as payment until you upgrade to version 0.3.6!<br /><br />If you can&#039;t upgrade to 0.3.6 right away, it&#039;s best to shut down your Bitcoin node until you do.<br /><br />Also in 0.3.6, faster hashing:<br />- midstate cache optimisation thanks to tcatm<br />- Crypto++ ASM SHA-256 thanks to BlackEye<br />Total generating speedup 2.4x faster.<br /><br />Download:<br />http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.6/<br /><br />Windows and Linux users: if you got 0.3.5 you still need to upgrade to 0.3.6.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>Olipro</b> on <b>July 29, 2010, 07:25:38 PM</b>
					<hr />
					<div style="margin: 0 5ex;">is this in the SVN?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 07:26:39 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I appreciate the quickness of this security update, but unfortunately none of the Linux builds work (32bit or 64 bit) because the file is missing. I&#039;m assuming if I go find the file it will work, not sure what luck others will have though using the new build.<br /><br />Error<br /><div class="codeheader">Code:</div><div class="code">./bitcoin: error while loading shared libraries: libjpeg.so.62: cannot open shared object file: No such file or directory<br /></div></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>andy_3_913</b> on <b>July 29, 2010, 07:30:42 PM</b>
					<hr />
					<div style="margin: 0 5ex;">are satoshi and Olipro working together?<br />if not, any chance you could? :)<br /><br />i&#039;m well pleased with the speed enhancements Olipro is making, but i would like bc to be secure!</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>jgarzik</b> on <b>July 29, 2010, 07:30:57 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6451#msg6451">Quote from: satoshi on July 29, 2010, 07:13:06 PM</a></div><div class="quote">Please upgrade to 0.3.5 ASAP!&nbsp; We fixed an implementation bug where it was possible that bogus transactions could be accepted.&nbsp; Do not accept Bitcoin transactions as payment until you upgrade to version 0.3.5!<br /></div><br />Like Olipro, got a lot of people doing custom builds out there -- in fact, I <b>must</b> use a custom build on several machines.<br /><br />May we assume SVN has <i>all</i> necessary updates?<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 07:34:22 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6457#msg6457">Quote from: andy_3_913 on July 29, 2010, 07:30:42 PM</a></div><div class="quote">are satoshi and Olipro working together?<br />if not, any chance you could? :)<br /><br />i&#039;m well pleased with the speed enhancements Olipro is making, but i would like bc to be secure!<br /></div>So far, the new build (stock) has given a 100% speed increase on my Celeron Machines that couldn&#039;t run those custom builds before. I&#039;ll compare the new release to the older *optimized* builds to see what the speed difference is just out of curiosity.&nbsp; ;D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>Bitquux</b> on <b>July 29, 2010, 07:39:46 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6459#msg6459">Quote from: knightmb on July 29, 2010, 07:34:22 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6457#msg6457">Quote from: andy_3_913 on July 29, 2010, 07:30:42 PM</a></div><div class="quote">are satoshi and Olipro working together?<br />if not, any chance you could? :)<br /><br />i&#039;m well pleased with the speed enhancements Olipro is making, but i would like bc to be secure!<br /></div>So far, the new build (stock) has given a 100% speed increase on my Celeron Machines that couldn&#039;t run those custom builds before. I&#039;ll compare the new release to the older *optimized* builds to see what the speed difference is just out of curiosity.&nbsp; ;D<br /></div><br />So far I&#039;m seeing a comparable hashing rate to the most recent of the Olipro 32-bit binaries. It might even be slightly faster.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>jgarzik</b> on <b>July 29, 2010, 07:42:15 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><br />With the official Linux-64bit build, run on Fedora 13, I see it failing badly:<br /><br /><div class="codeheader">Code:</div><div class="code">************************<br />EXCEPTION: 22DbRunRecoveryException&nbsp; &nbsp; &nbsp; &nbsp;<br />DbEnv::open: DB_RUNRECOVERY: Fatal error, run database recovery&nbsp; &nbsp; &nbsp; &nbsp;<br />bitcoin in AppInit()&nbsp; &nbsp; &nbsp; &nbsp;<br /><br /><br /><br />************************<br />EXCEPTION: 22DbRunRecoveryException&nbsp; &nbsp; &nbsp; &nbsp;<br />DbEnv::open: DB_RUNRECOVERY: Fatal error, run database recovery&nbsp; &nbsp; &nbsp; &nbsp;<br />bitcoin in CMyApp::OnUnhandledException()&nbsp; &nbsp; &nbsp; &nbsp;<br /><br />terminate called after throwing an instance of &#039;DbRunRecoveryException&#039;<br />&nbsp; what():&nbsp; DbEnv::open: DB_RUNRECOVERY: Fatal error, run database recovery<br /></div><br />Praying my bitcoins aren&#039;t eaten...<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 07:47:37 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6462#msg6462">Quote from: jgarzik on July 29, 2010, 07:42:15 PM</a></div><div class="quote"><br />With the official Linux-64bit build, run on Fedora 13, I see it failing badly:<br /><br /><div class="codeheader">Code:</div><div class="code">************************<br />EXCEPTION: 22DbRunRecoveryException&nbsp; &nbsp; &nbsp; &nbsp;<br />DbEnv::open: DB_RUNRECOVERY: Fatal error, run database recovery&nbsp; &nbsp; &nbsp; &nbsp;<br />bitcoin in AppInit()&nbsp; &nbsp; &nbsp; &nbsp;<br /><br /><br /><br />************************<br />EXCEPTION: 22DbRunRecoveryException&nbsp; &nbsp; &nbsp; &nbsp;<br />DbEnv::open: DB_RUNRECOVERY: Fatal error, run database recovery&nbsp; &nbsp; &nbsp; &nbsp;<br />bitcoin in CMyApp::OnUnhandledException()&nbsp; &nbsp; &nbsp; &nbsp;<br /><br />terminate called after throwing an instance of &#039;DbRunRecoveryException&#039;<br />&nbsp; what():&nbsp; DbEnv::open: DB_RUNRECOVERY: Fatal error, run database recovery<br /></div><br />Praying my bitcoins aren&#039;t eaten...<br /><br /></div>I think you&#039;ll be ok, it blew up on me too. Run the older version, you should still see all your coins. Backup first for the next Linux release&nbsp; ;)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>jgarzik</b> on <b>July 29, 2010, 07:49:32 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6462#msg6462">Quote from: jgarzik on July 29, 2010, 07:42:15 PM</a></div><div class="quote">With the official Linux-64bit build, run on Fedora 13, I see it failing badly:<br /></div><br />Same result on another machine. &nbsp;BDB errors, and death. &nbsp;0.3.5 on 64bit Linux is questionable. &nbsp;You didn&#039;t mix up the builds with 32-bit Linux, did you?<br /><br />debug.log says:<br /><div class="codeheader">Code:</div><div class="code">Bitcoin version 0.3.5 beta<br />Default data directory /g/g/.bitcoin<br />Bound to port 8333<br />Loading addresses...<br />dbenv.open strLogDir=/garz/bitcoin/data/database strErrorFile=/garz/bitcoin/data/db.log<br /><br /><br />************************<br />EXCEPTION: 22DbRunRecoveryException &nbsp; &nbsp; &nbsp; <br />DbEnv::open: DB_RUNRECOVERY: Fatal error, run database recovery &nbsp; &nbsp; &nbsp; <br />bitcoin in AppInit() &nbsp; &nbsp; &nbsp; <br /></div></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.5 ASAP</b><br />
					Post by: <b>jgarzik</b> on <b>July 29, 2010, 07:52:45 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6464#msg6464">Quote from: knightmb on July 29, 2010, 07:47:37 PM</a></div><div class="quote">I think you&#039;ll be ok, it blew up on me too. Run the older version, you should still see all your coins. Backup first for the next Linux release&nbsp; ;)<br /></div><br />Double-ACK :)<br /><br />older version (SVN 117 + listtransactions + getinfo KHPS) works fine, all bitcoins there. &nbsp;And yes, I should back up before following &quot;please upgrade&quot; instructions... &nbsp; :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** version 0.3.6</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 07:54:27 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6466#msg6466">Quote from: davidonpda on July 29, 2010, 07:51:38 PM</a></div><div class="quote">Can windows users upgrade to the 3.5 for now?<br /></div>Yes, I&#039;ve tested on Windows XP, 2003, and 7 all went through just fine. You&#039;ll enjoy the speed increase as well. &nbsp;;)<br /><br />[<b>err, wait I guess, new version about to spawn</b>]</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** version 0.3.6</b><br />
					Post by: <b>satoshi</b> on <b>July 29, 2010, 07:55:51 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Haven&#039;t had time to update the SVN yet. &nbsp;Wait for 0.3.6, I&#039;m building it now. &nbsp;You can shut down your node in the meantime. &nbsp;</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** version 0.3.6</b><br />
					Post by: <b>satoshi</b> on <b>July 29, 2010, 08:30:15 PM</b>
					<hr />
					<div style="margin: 0 5ex;">SVN is updated with version 0.3.6.<br /><br />Uploading Windows build of 0.3.6 to Sourceforge now, then will rebuild linux.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** version 0.3.6</b><br />
					Post by: <b>RudeDude</b> on <b>July 29, 2010, 08:35:54 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Ha! One of the changes in there is updated some v &quot;0.3.3&quot; stuff to &quot;0.3.6&quot; but that isn&#039;t the important part of the update. :-)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** version 0.3.6</b><br />
					Post by: <b>jgarzik</b> on <b>July 29, 2010, 08:48:35 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><br />SVN r119 seems to work fine here.&nbsp; No BDB explosion.<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** version 0.3.6</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 08:51:29 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Tested the Windows build across XP, 2003, Vista, 7 (both 32 and 64bit builds), no issues installing or running client. So far so good, looking forward to the Linux client.&nbsp; ;)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>satoshi</b> on <b>July 29, 2010, 09:20:38 PM</b>
					<hr />
					<div style="margin: 0 5ex;">0.3.6 Linux build is back to the old makefile.unix. &nbsp;It static links libjpeg so that shouldn&#039;t be a problem.<br /><br />Is that working better?<br /><br />If you got 22DbRunRecoveryException and you&#039;ve used someone else&#039;s build before, you may need to delete (or move the files somewhere else) database/log.000000*<br /><br />Windows and Linux users: if you got 0.3.5 you still need to upgrade to 0.3.6.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 09:23:21 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Still a no go on the Linux build though, this is the console error I get. I checked to make sure the file was there, but the versions don&#039;t match I guess?<br /><br />64bit Client Error, will try out 32bit client and see if the error is similar.<br /><div class="codeheader">Code:</div><div class="code">./bitcoin: /lib64/libc.so.6: version `GLIBC_2.11&#039; not found (required by ./bitcoin)<br /></div><br />The machine I tested this on uses nothing but the stock builds, no modified builds were used prior.<br /><br />Same error for 32bit client<br /><div class="codeheader">Code:</div><div class="code">./bitcoin: /lib/libc.so.6: version `GLIBC_2.11&#039; not found (required by ./bitcoin)<br /></div><br /><br />Linux - Mandriva 2010.0 [64bit and 32bit] OS systems setup</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>bitcoinex</b> on <b>July 29, 2010, 09:27:15 PM</b>
					<hr />
					<div style="margin: 0 5ex;">0.3.6 binaries for linux works fine on two my machines (64 and 32 bits) with Debian squeeze/sid</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 09:28:55 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6493#msg6493">Quote from: bitcoinex on July 29, 2010, 09:27:15 PM</a></div><div class="quote">0.3.6 binaries for linux works fine on two my machines (64 and 32 bits)<br /></div>That&#039;s good to know, might just need to update mine, checking to see what versions I have currently installed.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>dwdollar</b> on <b>July 29, 2010, 09:29:41 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6492#msg6492">Quote from: knightmb on July 29, 2010, 09:23:21 PM</a></div><div class="quote">Still a no go on the Linux build though, this is the console error I get. I checked to make sure the file was there, but the versions don&#039;t match I guess?<br /><br />64bit Client Error, will try out 32bit client and see if the error is similar.<br /><div class="codeheader">Code:</div><div class="code">./bitcoin: /lib64/libc.so.6: version `GLIBC_2.11&#039; not found (required by ./bitcoin)<br /></div><br />The machine I tested this on uses nothing but the stock builds, no modified builds were used prior.<br /><br />Same error for 32bit client<br /><div class="codeheader">Code:</div><div class="code">./bitcoin: /lib/libc.so.6: version `GLIBC_2.11&#039; not found (required by ./bitcoin)<br /></div></div><br />I&#039;m getting this too on 32-bit Ubuntu 9.10.<br /><br />It works fine on 32-bit and 64-bit Ubuntu 10.04.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>jgarzik</b> on <b>July 29, 2010, 09:30:08 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6493#msg6493">Quote from: bitcoinex on July 29, 2010, 09:27:15 PM</a></div><div class="quote">0.3.6 binaries for linux works fine on two my machines (64 and 32 bits)<br /></div><br />If you (and others) are willing, <b>please post your OS + OS version</b>, when posting success/failure reports.<br /><br />I will echo a recommendation to satoshi from another forum member: &nbsp;build linux binaries on an <i>older</i> Linux OS, to ensure wider compatibility.&nbsp; Maybe something as old as CentOS 5 (caveat: requires custom openssl, boost, db4 and wx builds).<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 09:30:24 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Ah, mine is linked to 2.10.1, I&#039;ll bring my system up to bleeding edge to see if that solves it &nbsp;;D<br /><br />[edit] Well turns out I can&#039;t package wise as they top out at 2.10 for now</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 29, 2010, 09:32:47 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6497#msg6497">Quote from: jgarzik on July 29, 2010, 09:30:08 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6493#msg6493">Quote from: bitcoinex on July 29, 2010, 09:27:15 PM</a></div><div class="quote">0.3.6 binaries for linux works fine on two my machines (64 and 32 bits)<br /></div><br />If you (and others) are willing, <b>please post your OS + OS version</b>, when posting success/failure reports.<br /><br />I will echo a recommendation to satoshi from another forum member: &nbsp;build linux binaries on an <i>older</i> Linux OS, to ensure wider compatibility.&nbsp; Maybe something as old as CentOS 5 (caveat: requires custom openssl, boost, db4 and wx builds).<br /><br /></div>I would agree, would help those of us not on the bleeding edge of distro packages.&nbsp; :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>bitcoinex</b> on <b>July 29, 2010, 09:35:27 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6497#msg6497">Quote from: jgarzik on July 29, 2010, 09:30:08 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6493#msg6493">Quote from: bitcoinex on July 29, 2010, 09:27:15 PM</a></div><div class="quote">0.3.6 binaries for linux works fine on two my machines (64 and 32 bits)<br /></div><br />If you (and others) are willing, <b>please post your OS + OS version</b>, when posting success/failure reports.<br /><br />I will echo a recommendation to satoshi from another forum member: &nbsp;build linux binaries on an <i>older</i> Linux OS, to ensure wider compatibility.&nbsp; Maybe something as old as CentOS 5 (caveat: requires custom openssl, boost, db4 and wx builds).<br /><br /></div><br />sorry. I&#039;m checked binaries on Debian GNU/Linux squeeze/sid</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>satoshi</b> on <b>July 29, 2010, 09:43:15 PM</b>
					<hr />
					<div style="margin: 0 5ex;">&quot;./bitcoin: /lib64/libc.so.6: version `GLIBC_2.11&#039; not found (required by ./bitcoin)&quot; isn&#039;t a new problem that started with 0.3.6 is it? &nbsp;This was built on the same OS installations as 0.3.0.<br /><br />Unfortunately I upgraded to Ubuntu 10.04 before 0.3.0. &nbsp;I will not upgrade anymore. &nbsp;I don&#039;t know when I might have time to reinstall to downgrade, but at least by not upgrading, it&#039;ll gradually fix itself.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>The Madhatter</b> on <b>July 29, 2010, 09:44:02 PM</b>
					<hr />
					<div style="margin: 0 5ex;">v0.3.6 works on FreeBSD/i386 7.2,7.3 and on FreeBSD/amd64 8.0<br /><br />Compiles cleanly without any warnings, and appears to be working fine.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>Odin</b> on <b>July 29, 2010, 09:45:06 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Maybe the points listed in http://bitcointalk.org/index.php?topic=612.0 would help making the Linux binary distribution works for the widest audience.<br /><br />Getting the project to build under the OpenSUSE OBS service should allow the maintainer to get distribution specific compliation for free.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>SmokeTooMuch</b> on <b>July 29, 2010, 09:47:41 PM</b>
					<hr />
					<div style="margin: 0 5ex;">0.3.6 works great on Win7 Pro 64-Bit.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>Gooffy</b> on <b>July 29, 2010, 10:08:14 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Ubuntu Linux 9.10<br /><br />Error:<br /><br />/lib/tls/i686/cmov/libc.so.6: version `GLIBC_2.11&#039; not found&nbsp; &nbsp; &nbsp; &nbsp;:&#039;( </div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>bitcoinex</b> on <b>July 29, 2010, 10:11:15 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6511#msg6511">Quote from: WMFrend on July 29, 2010, 10:08:14 PM</a></div><div class="quote">Ubuntu Linux 9.10<br /><br />Error:<br /><br />/lib/tls/i686/cmov/libc.so.6: version `GLIBC_2.11&#039; not found&nbsp; &nbsp; &nbsp; &nbsp;:&#039;( <br /></div><br />$ dpkg -l|grep -i glibc<br />ii&nbsp; libdb1-compat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.1.3-9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;The Berkeley database routines [glibc 2.0/2.<br /><br /><br />?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>lachesis</b> on <b>July 29, 2010, 10:14:36 PM</b>
					<hr />
					<div style="margin: 0 5ex;">On Debian testing 32-bit, I get a few build errors, all resembling:<br /><div class="codeheader">Code:</div><div class="code">script.cpp:114: error: ‘OP_NOP1’ was not declared in this scope</div>I got these when attempting to &quot;make bitcoind&quot; without &quot;make clean&quot; or &quot;make&quot; first. It looks like the bitcoind build instructions don&#039;t compile the headers first, but they also don&#039;t delete the headers.h.gch, so the old headers are used if present.<br /><br />If anyone else gets this error, the simplest solution is to &quot;make clean&quot; and retry the build.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>dwdollar</b> on <b>July 29, 2010, 10:53:48 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6502#msg6502">Quote from: satoshi on July 29, 2010, 09:43:15 PM</a></div><div class="quote">&quot;./bitcoin: /lib64/libc.so.6: version `GLIBC_2.11&#039; not found (required by ./bitcoin)&quot; isn&#039;t a new problem that started with 0.3.6 is it? &nbsp;This was built on the same OS installations as 0.3.0.<br /><br />Unfortunately I upgraded to Ubuntu 10.04 before 0.3.0. &nbsp;I will not upgrade anymore. &nbsp;I don&#039;t know when I might have time to reinstall to downgrade, but at least by not upgrading, it&#039;ll gradually fix itself.<br /></div><br />That&#039;s strange, 0.3.3 worked fine on it. &nbsp;It&#039;s no biggie, I need to upgrade that machine anyway.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>Odin</b> on <b>July 29, 2010, 10:57:15 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6511#msg6511">Quote from: WMFrend on July 29, 2010, 10:08:14 PM</a></div><div class="quote">Ubuntu Linux 9.10<br /><br />Error:<br /><br />/lib/tls/i686/cmov/libc.so.6: version `GLIBC_2.11&#039; not found &nbsp; &nbsp; &nbsp; :&#039;( </div><br />dpkg -l | egrep &quot;(libc6|glibc)&quot;<br /># This will display what version you currently have installed<br /><br /># I guess you have glibc version 2.10 or older installed.<br /><br />apt-get update<br />apt-cache showpkg libc6 | less<br /># Look (near the bottom) for the versions available for a 2.11 version<br /><br />#Maybe you can just upgrade with:<br />apt-get upgrade libc6<br /><br /><br /># Above instruction for a real debian system, they might work with Ubuntu</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>satoshi</b> on <b>July 29, 2010, 11:12:12 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6515#msg6515">Quote from: lachesis on July 29, 2010, 10:14:36 PM</a></div><div class="quote">On Debian testing 32-bit, I get a few build errors, all resembling:<br /><div class="codeheader">Code:</div><div class="code">script.cpp:114: error: ‘OP_NOP1’ was not declared in this scope</div>I got these when attempting to &quot;make bitcoind&quot; without &quot;make clean&quot; or &quot;make&quot; first. It looks like the bitcoind build instructions don&#039;t compile the headers first, but they also don&#039;t delete the headers.h.gch, so the old headers are used if present.<br /><br />If anyone else gets this error, the simplest solution is to &quot;make clean&quot; and retry the build.<br /></div>We don&#039;t really need pre-compiled header.&nbsp; It only makes it compile slightly faster.&nbsp; I think I&#039;ll just get rid of it.&nbsp; Even still, you&#039;d still need to remember to &quot;make -f makefile.unix clean&quot; or delete headers.h.gch one more time to get rid of the leftover file.<br /><br />Damn that GLIBC_2.11.&nbsp; I thought I&#039;d been careful not to accept any of the updates.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 30, 2010, 12:27:27 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6542#msg6542">Quote from: satoshi on July 29, 2010, 11:12:12 PM</a></div><div class="quote">We don&#039;t really need pre-compiled header.&nbsp; It only makes it compile slightly faster.&nbsp; I think I&#039;ll just get rid of it.&nbsp; Even still, you&#039;d still need to remember to &quot;make -f makefile.unix clean&quot; or delete headers.h.gch one more time to get rid of the leftover file.<br /><br />Damn that GLIBC_2.11.&nbsp; I thought I&#039;d been careful not to accept any of the updates.<br /></div>I was going to compile a GLIBC_2.10 version until I noticed that I had to keep installing more and more to get through the check errors, LOL. Looks like I just need to fire up a Virtual Box with all the dev packages loaded to do this in a virtual machine to make life easier.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>bytemaster</b> on <b>July 30, 2010, 01:05:40 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Could someone help me understand why it matters that hashing is 2x faster?&nbsp; If everyone were to upgrade the coin inflation rate would still remain the same.&nbsp; Thus there is a &quot;slight&quot; advantage to early adopters.&nbsp; I guess some could say it gives &quot;honest nodes&quot; more time and thus makes it even harder for dishonest nodes to gain an edge.<br /><br />The #1 aspect if a currency is divisibility and fixed supply and the relative value of the coins will adjust automatically relative to the supply of goods available to buy.&nbsp; So I would think we would want to focus on aspects other than &quot;generation speed&quot; first.<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 30, 2010, 01:25:48 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6566#msg6566">Quote from: bytemaster on July 30, 2010, 01:05:40 AM</a></div><div class="quote">Could someone help me understand why it matters that hashing is 2x faster?&nbsp; If everyone were to upgrade the coin inflation rate would still remain the same.&nbsp; Thus there is a &quot;slight&quot; advantage to early adopters.&nbsp; I guess some could say it gives &quot;honest nodes&quot; more time and thus makes it even harder for dishonest nodes to gain an edge.<br /><br />The #1 aspect if a currency is divisibility and fixed supply and the relative value of the coins will adjust automatically relative to the supply of goods available to buy.&nbsp; So I would think we would want to focus on aspects other than &quot;generation speed&quot; first.<br /></div>Quite simply to level the playing field for coin generation and to help maintain block generation at a stable rate. If everyone was limited to just 100 khash/s by the client, someone would just compile a client that does not have the limit and load it up on a server farm where they could generate 10,000 khash/s per machine. It would put the coin generation supply in the hands of who ever had a large amount of money to invest in servers and discourage everyone else from trying to mint coin. If we could trust that clients would only act as transaction nodes and that everyone would get a fair shot at coin generation then no one would care if the client was generating at 5 khash/s all the time.<br /><br />So in a perfect world, no one would care that they can generate 2 or 3 times faster than someone else, but we don&#039;t live in a perfect world.&nbsp; ;)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>Anonymous</b> on <b>July 30, 2010, 05:51:34 AM</b>
					<hr />
					<div style="margin: 0 5ex;">My khash rate went from 700 to 1700.Sweet!</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>Cdecker</b> on <b>July 30, 2010, 01:53:56 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6504#msg6504">Quote from: Odin on July 29, 2010, 09:45:06 PM</a></div><div class="quote">Maybe the points listed in http://bitcointalk.org/index.php?topic=612.0 would help making the Linux binary distribution works for the widest audience.<br /><br />Getting the project to build under the OpenSUSE OBS service should allow the maintainer to get distribution specific compliation for free.</div><br />Great point. I got the bitcoind (without the wx GUI) compiling for Ubuntu 10.04 :D<br /><br />I&#039;ll try to get the other version to work too, but it&#039;s quite annoying that BC needs such a new version of libdb and wx...<br /><br />https://build.opensuse.org/package/show?package=bitcoind&amp;project=home:cdecker</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>BitLex</b> on <b>July 30, 2010, 02:02:25 PM</b>
					<hr />
					<div style="margin: 0 5ex;">0.3.6 up and running on w2k/xp32/xp64/w7<br /><br />nice speed-updates on all systems,<br />guess we can prepare for another major step up in difficulty, now that all nodes do 2-3times the hashes they did before.<br />is that a good or a bad thing?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>m0mchil</b> on <b>July 30, 2010, 02:16:08 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Fastest possible stock build removes any advantage other &#039;special&#039; builds would have. Which is good because generation will be more uniformly distributed. It&#039;s important for the official build to be always the fastest available. It should use any known optimization (including CUDA, OpenCL, ability to work on the Cell proc etc).<br /><br />The one and only effect for now - another difficulty adjustment, still same chance to generate until more users/cores came in.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>andy_3_913</b> on <b>July 30, 2010, 04:04:51 PM</b>
					<hr />
					<div style="margin: 0 5ex;">would an auto-update function built into bc be possible?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>HostFat</b> on <b>July 30, 2010, 04:49:25 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6667#msg6667">Quote from: andy_3_913 on July 30, 2010, 04:04:51 PM</a></div><div class="quote">would an auto-update function built into bc be possible?<br /></div>It&#039;s something that I have already suggested here :|<br />http://bitcointalk.org/index.php?topic=259.0</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>andy_3_913</b> on <b>July 30, 2010, 04:51:12 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6673#msg6673">Quote from: Joozero on July 30, 2010, 04:49:25 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6667#msg6667">Quote from: andy_3_913 on July 30, 2010, 04:04:51 PM</a></div><div class="quote">would an auto-update function built into bc be possible?<br /></div>It&#039;s something that I have already suggested here :|<br />http://bitcointalk.org/index.php?topic=259.0<br /></div><br />sorry! :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6</b><br />
					Post by: <b>Cdecker</b> on <b>July 30, 2010, 06:39:59 PM</b>
					<hr />
					<div style="margin: 0 5ex;">32Bit and 64Bit versions for Ubuntu 10.04 are available on the openSuse Build Service: https://www.bitcoin.org/smf/index.php?topic=644.0</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 30, 2010, 07:24:07 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I can only imagine the pain you went through to get these builds because I&#039;m trying to build the program on a Ubuntu 9.04 box and so far I can&#039;t seem to find all the dependencies to compile no matter how much I keep installing packages and compiling source, LOL.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>satoshi</b> on <b>July 30, 2010, 07:53:06 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6702#msg6702">Quote from: knightmb on July 30, 2010, 07:24:07 PM</a></div><div class="quote">I can only imagine the pain you went through to get these builds because I&#039;m trying to build the program on a Ubuntu 9.04 box and so far I can&#039;t seem to find all the dependencies to compile no matter how much I keep installing packages and compiling source, LOL.<br /></div>I can&#039;t understand why you&#039;re having so much pain. &nbsp;I just followed the instructions in build-unix.txt. &nbsp;I made a couple little corrections for Boost 1.37, which I&#039;ll put on SVN the next time I update it, noted below:<br /><br />Dependencies<br />------------<br />sudo apt-get install build-essential<br />sudo apt-get install libgtk2.0-dev<br />sudo apt-get install libssl-dev<br />sudo apt-get install libdb4.7-dev<br />sudo apt-get install libdb4.7++-dev<br />sudo apt-get install libboost-all-dev (or libboost1.37-dev)<br /><br />wxWidgets<br />---------<br />cd /usr/local<br />tar -xzvf wxWidgets-2.9.0.tar.gz<br />cd /usr/local/wxWidgets-2.9.0<br />mkdir buildgtk<br />cd buildgtk<br />../configure --with-gtk --enable-debug --disable-shared --enable-monolithic<br />make<br />sudo su<br />make install<br />ldconfig<br /><br /><br />added a comment in makefile.unix:<br /><br /># for boost 1.37, add -mt to the boost libraries<br />LIBS= \<br />&nbsp;-Wl,-Bstatic \<br />&nbsp;&nbsp; -l boost_system \<br />&nbsp;&nbsp; -l boost_filesystem \<br />&nbsp;&nbsp; -l boost_program_options \<br />&nbsp;&nbsp; -l boost_thread \<br />&nbsp;&nbsp; -l db_cxx \<br />&nbsp;&nbsp; -l crypto \<br />&nbsp;-Wl,-Bdynamic \<br />&nbsp;&nbsp; -l gthread-2.0<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 30, 2010, 08:04:19 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6711#msg6711">Quote from: satoshi on July 30, 2010, 07:53:06 PM</a></div><div class="quote">I can&#039;t understand why you&#039;re having so much pain. &nbsp;I just followed the instructions in build-unix.txt. &nbsp;I made a couple little corrections for Boost 1.37, which I&#039;ll put on SVN the next time I update it, noted below:<br /><br />Dependencies<br />------------<br />sudo apt-get install build-essential<br />sudo apt-get install libgtk2.0-dev<br />sudo apt-get install libssl-dev<br />sudo apt-get install libdb4.7-dev<br />sudo apt-get install libdb4.7++-dev<br /><b>sudo apt-get install libboost-all-dev (or libboost1.37-dev)</b><br /></div>That part I highlighted is what got me. You can&#039;t install all the libboost packages with that command (I tried to cheat with a * also), but part of my issue is I took it too literal like install *everything* that had to do with libboost, LOL.<br /><br />Really, all that was needed was the libboost1.37-dev package and that made all the compile errors go away. Everything else worked out just fine as far as compiling your own wxWidgets, compiling Boost 1.4, etc.<br /><br />So that last command should simply be<br /><b>sudo apt-get install libboost1.37-dev</b><br /><br />On a side note, I compiled mine on a Ubuntu 64bit system, so the finished program came out 64bit aware. I&#039;m testing it out on some 64bit systems to see how well things go.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>satoshi</b> on <b>July 30, 2010, 09:44:04 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6713#msg6713">Quote from: knightmb on July 30, 2010, 08:04:19 PM</a></div><div class="quote">So that last command should simply be<br /><b>sudo apt-get install libboost1.37-dev</b><br /></div>Except that wouldn&#039;t work for boost 1.40+ (on Ubuntu 10.04), where you need to get libboost-all-dev.<br /><br />Seems they changed everything around in Boost recently, &quot;-mt&quot; and all that, makes it hard.<br /><br />BTW, I tried Boost 1.34 but it didn&#039;t have the boost.interprocess stuff.<br /><br />Mac OSX version is available now. &nbsp;See bitcoin.org or the SourceForge link.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 30, 2010, 09:47:03 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6728#msg6728">Quote from: satoshi on July 30, 2010, 09:44:04 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6713#msg6713">Quote from: knightmb on July 30, 2010, 08:04:19 PM</a></div><div class="quote">So that last command should simply be<br /><b>sudo apt-get install libboost1.37-dev</b><br /></div>Except that wouldn&#039;t work for boost 1.40+ (on Ubuntu 10.04), where you need to get libboost-all-dev.<br /><br />Seems they changed everything around in Boost recently, &quot;-mt&quot; and all that, makes it hard.<br /><br />BTW, I tried Boost 1.34 but it didn&#039;t have the boost.interprocess stuff.<br /><br />Mac OSX version is available now. &nbsp;See bitcoin.org or the SourceForge link.<br /></div>Oh, ok, that makes more sense now. Didn&#039;t know that was being compiled on Ubuntu 10.04, I was thinking of everything from a Ubuntu 9.04 point of view.<br /><br />Well for me, the libboost1.37-dev was all it needed on a Ubuntu 9.04 box to get a 64bit compile. Seems I&#039;ll just need to keep a bunch of virutal box for each one to avoid distro confusion when compiling &nbsp;;D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6</b><br />
					Post by: <b>andy_3_913</b> on <b>July 30, 2010, 09:50:27 PM</b>
					<hr />
					<div style="margin: 0 5ex;">i admit.<br />i&#039;m totally out of my depth.<br />will wait for orbit@home to get back on-line<br /><br />:D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6</b><br />
					Post by: <b>knightmb</b> on <b>July 30, 2010, 10:20:53 PM</b>
					<hr />
					<div style="margin: 0 5ex;">You should see the face my wife makes when she sees me typing it &nbsp;;D<br /><br />First thing she said &quot;What hell are you guys talking about&quot; &nbsp;:-X</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>cryptical</b> on <b>July 31, 2010, 08:33:18 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6503#msg6503">Quote from: The MadHatter on July 29, 2010, 09:44:02 PM</a></div><div class="quote">v0.3.6 works on FreeBSD/i386 7.2,7.3 and on FreeBSD/amd64 8.0<br /><br />Compiles cleanly without any warnings, and appears to be working fine.<br /><br /></div><br />Are you doing anything special, or just gmake -f makefile.unix on FreeBSD/amd64?&nbsp; <br /><br />I&#039;m having trouble getting it to compile on FreeBSD/amd64 8.1, but I&#039;ll freely admit that<br />C++ is lost on me.&nbsp; I managed (using your patch for the makefile) to compile 0.3.3 previously<br />so I think that all the proper bits are installed.<br /><br />I&#039;m just trying to compile bitcoind for a headless FreeBSD box.<br /><br />Thanks.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</b><br />
					Post by: <b>knightmb</b> on <b>July 31, 2010, 09:10:46 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6849#msg6849">Quote from: cryptical on July 31, 2010, 08:33:18 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=626.msg6503#msg6503">Quote from: The MadHatter on July 29, 2010, 09:44:02 PM</a></div><div class="quote">v0.3.6 works on FreeBSD/i386 7.2,7.3 and on FreeBSD/amd64 8.0<br /><br />Compiles cleanly without any warnings, and appears to be working fine.<br /><br /></div><br />Are you doing anything special, or just gmake -f makefile.unix on FreeBSD/amd64?&nbsp; <br /><br />I&#039;m having trouble getting it to compile on FreeBSD/amd64 8.1, but I&#039;ll freely admit that<br />C++ is lost on me.&nbsp; I managed (using your patch for the makefile) to compile 0.3.3 previously<br />so I think that all the proper bits are installed.<br /><br />I&#039;m just trying to compile bitcoind for a headless FreeBSD box.<br /><br />Thanks.<br /></div>I would post up the compile log in the Development &amp; Technical section, might get more help there.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: *** ALERT *** Upgrade to 0.3.6</b><br />
					Post by: <b>Bitcoiner</b> on <b>August 03, 2010, 09:42:11 PM</b>
					<hr />
					<div style="margin: 0 5ex;">OlliPro&#039;s latest build is still faster, but this one comes close. 4700khash vs 5000khash</div>
					<br /><br />
					<div align="center" class="smalltext">
		<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://www.simplemachines.org/" title="Simple Machines Forum" target="_blank">Powered by SMF 1.1.19</a> |
<a href="http://www.simplemachines.org/about/copyright.php" title="Free Forum Software" target="_blank">SMF &copy; 2006-2009, Simple Machines</a>
		</span></div>
				</td>
			</tr>
		</table>
</div>
<div class="sect2">
<h3 id="_jeff_garzik_strange_block_74638"><a class="anchor" href="#_jeff_garzik_strange_block_74638"></a>9.6. Jeff Garzik - Strange block 74638</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcointalk.org/index.php?topic=822.msg9474#msg9474" class="bare">https://bitcointalk.org/index.php?topic=822.msg9474#msg9474</a></p>
</li>
<li>
<p>Author: Jeff Garzik</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
		<table width="90%" cellpadding="0" cellspacing="0" border="0">
			<tr>
				<td>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Strange block 74638</b><br />
					Post by: <b>jgarzik</b> on <b>August 15, 2010, 06:08:49 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><br />The &quot;value out&quot; in this block #74638 is quite strange:<br /><br /><div class="codeheader">Code:</div><div class="code">{<br />&nbsp; &nbsp; &quot;hash&quot; : &quot;0000000000790ab3f22ec756ad43b6ab569abf0bddeb97c67a6f7b1470a7ec1c&quot;,<br />&nbsp; &nbsp; &quot;ver&quot; : 1,<br />&nbsp; &nbsp; &quot;prev_block&quot; : &quot;0000000000606865e679308edf079991764d88e8122ca9250aef5386962b6e84&quot;,<br />&nbsp; &nbsp; &quot;mrkl_root&quot; : &quot;618eba14419e13c8d08d38c346da7cd1c7c66fd8831421056ae56d8d80b6ec5e&quot;,<br />&nbsp; &nbsp; &quot;time&quot; : 1281891957,<br />&nbsp; &nbsp; &quot;bits&quot; : 469794830,<br />&nbsp; &nbsp; &quot;nonce&quot; : 28192719,<br />&nbsp; &nbsp; &quot;n_tx&quot; : 2,<br />&nbsp; &nbsp; &quot;tx&quot; : [<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;hash&quot; : &quot;012cd8f8910355da9dd214627a31acfeb61ac66e13560255bfd87d3e9c50e1ca&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ver&quot; : 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;vin_sz&quot; : 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;vout_sz&quot; : 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;lock_time&quot; : 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;in&quot; : [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;prev_out&quot; : {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;hash&quot; : &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot; : 4294967295<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;coinbase&quot; : &quot;040e80001c028f00&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;out&quot; : [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value&quot; : 50.51000000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;scriptPubKey&quot; : &quot;0x4F4BA55D1580F8C3A8A2C78E8B7963837C7EA2BD8654B9D96C51994E6FCF6E65E1CF9A844B044EEA125F26C26DBB1B207E4C3F2A098989DA9BA5BA455E830F7504 OP_CHECKSIG&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]<br />&nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;hash&quot; : &quot;1d5e512a9723cbef373b970eb52f1e9598ad67e7408077a82fdac194b65333c9&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ver&quot; : 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;vin_sz&quot; : 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;vout_sz&quot; : 2,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;lock_time&quot; : 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;in&quot; : [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;prev_out&quot; : {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;hash&quot; : &quot;237fe8348fc77ace11049931058abb034c99698c7fe99b1cc022b1365a705d39&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot; : 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;scriptSig&quot; : &quot;0xA87C02384E1F184B79C6ACF070BEA45D5B6A4739DBFF776A5D8CE11B23532DD05A20029387F6E4E77360692BB624EEC1664A21A42AA8FC16AEB9BD807A4698D0CA8CDB0021024530 0x965D33950A28B84C9C19AB64BAE9410875C537F0EB29D1D21A60DA7BAD2706FBADA7DF5E84F645063715B7D0472ABB9EBFDE5CE7D9A74C7F207929EDAE975D6B04&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;out&quot; : [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value&quot; : 92233720368.54277039,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;scriptPubKey&quot; : &quot;OP_DUP OP_HASH160 0xB7A73EB128D7EA3D388DB12418302A1CBAD5E890 OP_EQUALVERIFY OP_CHECKSIG&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value&quot; : 92233720368.54277039,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;scriptPubKey&quot; : &quot;OP_DUP OP_HASH160 0x151275508C66F89DEC2C5F43B6F9CBE0B5C4722C OP_EQUALVERIFY OP_CHECKSIG&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;mrkl_tree&quot; : [<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;012cd8f8910355da9dd214627a31acfeb61ac66e13560255bfd87d3e9c50e1ca&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;1d5e512a9723cbef373b970eb52f1e9598ad67e7408077a82fdac194b65333c9&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;618eba14419e13c8d08d38c346da7cd1c7c66fd8831421056ae56d8d80b6ec5e&quot;<br />&nbsp; &nbsp; ]<br />}<br /></div><br />92233720368.54277039 BTC?&nbsp; Is that UINT64_MAX, I wonder?<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>lachesis</b> on <b>August 15, 2010, 06:17:35 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg9474#msg9474">Quote from: jgarzik on August 15, 2010, 06:08:49 PM</a></div><div class="quote">The &quot;value out&quot; in this block #74638 is quite strange:<br /></div>That is strange. What does the TxIn look like?<br /><br /><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg9474#msg9474">Quote from: jgarzik on August 15, 2010, 06:08:49 PM</a></div><div class="quote">92233720368.54277039 BTC?&nbsp; Is that UINT64_MAX, I wonder?<br /></div>It&#039;s 2^63/10^8, so it looks like it&#039;s INT64_MAX, not UINT64_MAX</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>theymos</b> on <b>August 15, 2010, 06:28:56 PM</b>
					<hr />
					<div style="margin: 0 5ex;">This could be a serious problem. Bitcoin&#039;s printblock also shows it:<br /><br /><div class="codeheader">Code:</div><div class="code">CBlock(hash=0000000000790ab3, ver=1, hashPrevBlock=0000000000606865, hashMerkleR<br />oot=618eba, nTime=1281891957, nBits=1c00800e, nNonce=28192719, vtx=2)<br />&nbsp; CTransaction(hash=012cd8, ver=1, vin.size=1, vout.size=1, nLockTime=0)<br />&nbsp; &nbsp; CTxIn(COutPoint(000000, -1), coinbase 040e80001c028f00)<br />&nbsp; &nbsp; CTxOut(nValue=50.51000000, scriptPubKey=0x4F4BA55D1580F8C3A8A2C7)<br />&nbsp; CTransaction(hash=1d5e51, ver=1, vin.size=1, vout.size=2, nLockTime=0)<br />&nbsp; &nbsp; CTxIn(COutPoint(237fe8, 0), scriptSig=0xA87C02384E1F184B79C6AC)<br />&nbsp; &nbsp; CTxOut(nValue=92233720368.54275808, scriptPubKey=OP_DUP OP_HASH160 0xB7A7)<br />&nbsp; &nbsp; CTxOut(nValue=92233720368.54275808, scriptPubKey=OP_DUP OP_HASH160 0x1512)<br />&nbsp; vMerkleTree: 012cd8 1d5e51 618eba</div></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>lfm</b> on <b>August 15, 2010, 06:55:34 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg9481#msg9481">Quote from: theymos on August 15, 2010, 06:28:56 PM</a></div><div class="quote">This could be a serious problem. Bitcoin&#039;s printblock also shows it:<br /><br /><div class="codeheader">Code:</div><div class="code">CBlock(hash=0000000000790ab3, ver=1, hashPrevBlock=0000000000606865, hashMerkleR<br />oot=618eba, nTime=1281891957, nBits=1c00800e, nNonce=28192719, vtx=2)<br />&nbsp; CTransaction(hash=012cd8, ver=1, vin.size=1, vout.size=1, nLockTime=0)<br />&nbsp; &nbsp; CTxIn(COutPoint(000000, -1), coinbase 040e80001c028f00)<br />&nbsp; &nbsp; CTxOut(nValue=50.51000000, scriptPubKey=0x4F4BA55D1580F8C3A8A2C7)<br />&nbsp; CTransaction(hash=1d5e51, ver=1, vin.size=1, vout.size=2, nLockTime=0)<br />&nbsp; &nbsp; CTxIn(COutPoint(237fe8, 0), scriptSig=0xA87C02384E1F184B79C6AC)<br />&nbsp; &nbsp; CTxOut(nValue=92233720368.54275808, scriptPubKey=OP_DUP OP_HASH160 0xB7A7)<br />&nbsp; &nbsp; CTxOut(nValue=92233720368.54275808, scriptPubKey=OP_DUP OP_HASH160 0x1512)<br />&nbsp; vMerkleTree: 012cd8 1d5e51 618eba</div></div><br /><br />The sum of the two outputs overflows to a negative. Its a bug in the transaction checks which did not reject it, then someone noticed and exploited it. Presumably a new version will be able to reject it and start a new valid fork. meanwhile should probablt shut down whatever you can and by no means make nor accept any transactions.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 07:30:30 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Related thread: http://bitcointalk.org/index.php?topic=823.0</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>lfm</b> on <b>August 15, 2010, 07:34:18 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Im speculating here somewhat but from what I can see someone has generated a transaction, probably using a custom modification of the software to generate a transaction which exploits a weakness in the code. The code check each transaction output for negative numbers individually (up to ver 0.3.8 at least) but forgot to check that the sum of two outputs (where you have the normal output of a transaction and the &quot;change&quot; leftover amount returned to the sender) is negative. So if you put two large but positive values in the transaction the overflow is then only checked that it is less than or equal to the inputs.<br /><br />Normally the inputs are equal to the outputs of a transaction. The exception is when there is a &quot;fee&quot; charged for the transaction. The net allows anyone to voluntarily pay any amout for a fee. SO when the sum was negative the difference from the input looked like a fee. It slipped thru all the checks. Her is some of the details:<br />&nbsp;out Value 1:92233720368.54(7ffffffffff85ee0)<br />&nbsp;out Value 2:92233720368.54(7ffffffffff85ee0)<br /><br />the sum would make -0.01 BTC<br /><br />generated transaction &quot;reward&quot; including 51 bitcent &quot;fee&quot;<br />&nbsp;out Value:50.51(000000012d1024c0)<br /><br />that implies the input value was 0.50 BTC<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>aceat64</b> on <b>August 15, 2010, 07:50:00 PM</b>
					<hr />
					<div style="margin: 0 5ex;">For now I have stopped generating on my nodes.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 08:29:32 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Let&#039;s not keep two different threads open on this subject. Let&#039;s move our conversation over to the thread in the dev forum (http://bitcointalk.org/index.php?topic=823.0). Moderators, please lock this thread if you agree.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>Insti</b> on <b>August 15, 2010, 08:38:16 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg9519#msg9519">Quote from: NewLibertyStandard on August 15, 2010, 08:29:32 PM</a></div><div class="quote">Let&#039;s not keep two different threads open on this subject. Let&#039;s move our conversation over to the thread in the dev forum (http://bitcointalk.org/index.php?topic=823.0). Moderators, please lock this thread if you agree.<br /></div>This thread currently has more useful information in it.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 08:42:17 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg9523#msg9523">Quote from: Insti on August 15, 2010, 08:38:16 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg9519#msg9519">Quote from: NewLibertyStandard on August 15, 2010, 08:29:32 PM</a></div><div class="quote">Let&#039;s not keep two different threads open on this subject. Let&#039;s move our conversation over to the thread in the dev forum (http://bitcointalk.org/index.php?topic=823.0). Moderators, please lock this thread if you agree.<br /></div>This thread currently has more useful information in it.<br /></div>Both threads have a link to the other, so usefulness of information doesn&#039;t matter. I think the other thread is more appropriate which is why I suggested this one be locked. If a moderator thinks this one is more appropriate, then they should lock the other. Of course if the moderators want both threads going at the same time, that&#039;s their prerogative. It&#039;s just a suggestion and not really a big deal either way.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>mizerydearia</b> on <b>August 20, 2010, 12:57:53 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Here is some information related to the incident that may be used by anyone else if they would dislike. &nbsp;If you would like to use it then you may not.<br /><br />In old/corrupt chain:<br /><br />Block 74637 has timestamp of 1281891763 (Sun Aug 15 11:34:43 CDT 2010)<br />Block 74638 had timestamp of 1281891957 (Sun Aug 15 12:05:57 CDT 2010)<br />Block 74639 had timestamp of 1281892233 (Sun Aug 15 12:10:33 CDT 2010)<br /><br /><br />This means the malicious event occurred between 11:34:43 CDT and 12:10:33 CDT on August 15th.<br /><br />http://bitcointalk.org/index.php?topic=822.0<br />August 15, 2010, 01:08:49 PM CDT<br /><br />This means the malicious event was discovered up to about 1.5hrs after it occurred.<br /><br />http://bitcointalk.org/index.php?topic=823.msg9524#msg9524<br />August 15, 2010, 03:39:42 PM CDT<br /><br />This means about 4hrs after it occurred a first patch was made available.<br /><br />http://bitcointalk.org/index.php?topic=823.msg9548#msg9548<br />August 15, 2010, 04:40:19 PM CDT<br /><br />This means about just over 5hrs after it occurred a path was pushed to svn by satoshi.<br /><br />5 hours is much more impressive than &quot;within a day.&quot; even though the official release of 0.3.10 didn&#039;t occur until the next day. =/<br /><br />I first posted this as a comment to http://www.bitcoinblogger.com/2010/08/bitcoin-issues-security-update-faster.html<br /><br />Other threads related to the issue:<br />http://bitcointalk.org/index.php?topic=823.0<br />http://bitcointalk.org/index.php?topic=827.0<br />http://bitcointalk.org/index.php?topic=832.0</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>FreeMoney</b> on <b>August 20, 2010, 02:04:47 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Did we get luck or is there a secret pager number that alerts Satoshi to emergencies :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>mizerydearia</b> on <b>August 20, 2010, 03:02:27 AM</b>
					<hr />
					<div style="margin: 0 5ex;">I heard that the patch was available before Satoshi awakened.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>FreeMoney</b> on <b>August 20, 2010, 03:41:54 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg10348#msg10348">Quote from: mizerydearia on August 20, 2010, 03:02:27 AM</a></div><div class="quote">I heard that the patch was available before Satoshi awakened.<br /></div><br />Nice. I shouldn&#039;t even have assumed he did it. I know there are lots of people here with skills.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>sgk</b> on <b>July 23, 2014, 09:07:53 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Well... this issue made it to &quot;The 9 Biggest Screwups in Bitcoin History&quot;<br /><br />http://www.coindesk.com/9-biggest-screwups-bitcoin-history/</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>Justin00</b> on <b>July 23, 2014, 09:10:18 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Thanks for reporting news from 2010 :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>Justin00</b> on <b>July 23, 2014, 09:27:20 AM</b>
					<hr />
					<div style="margin: 0 5ex;">heh I was being sarcastic at first but that link you provided is actually pretty cool... Thanks :)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>sgk</b> on <b>July 23, 2014, 12:14:59 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg7983240#msg7983240">Quote from: Justin00 on July 23, 2014, 09:27:20 AM</a></div><div class="quote">heh I was being sarcastic at first but that link you provided is actually pretty cool... Thanks :)<br /></div><br />Thank you.<br /><br />Although the one I&#039;ll always remember is the guy who threw the hard drive with 7500 BTC into a dump yard.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>BowieMan</b> on <b>July 23, 2014, 12:19:23 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=822.msg7983036#msg7983036">Quote from: sgk on July 23, 2014, 09:07:53 AM</a></div><div class="quote">Well... this issue made it to &quot;The 9 Biggest Screwups in Bitcoin History&quot;<br /><br />http://www.coindesk.com/9-biggest-screwups-bitcoin-history/<br /></div><br />Wow, do they link the thread? I almost got a heart attack while reading that &#039;a fork will probably fix it&#039; But the block number is quite low, so I maybe should have noticed my mistake earlier. Good thing most of those quirks are now fixed!</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>Justin00</b> on <b>July 23, 2014, 01:19:16 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Post #1 from 2010 has several threads on the issue... </div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>Taras</b> on <b>July 24, 2014, 07:51:15 AM</b>
					<hr />
					<div style="margin: 0 5ex;">I just looked at this thread before it was super-bumped...<br /><br />Must be a sign, HL3 confirmed</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Strange block 74638</b><br />
					Post by: <b>allyouracid</b> on <b>November 28, 2015, 01:36:50 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Hey guys,<br /><br />first off: I&#039;m very sorry to be a grave digger. But I have this (already solved) incident in my mind since I read about it, which was quite a while after it occurred.<br /><br />Now, I thought about what would happen if the one who generated that transaction had malicious intents. Let&#039;s make a thought play:<br />Transaction was made and someone - let&#039;s call him Bob - now holds more than 184bn BTC in his wallet. Knowing the transaction will be detected soon, Bob is in a hurry.<br /><br />He moves his coins over to an Altcoin exchange and sells whatever he can for Altcoins, crashing the price of e.g. Litecoin, DASH and what not else.<br /><br />Now, Bob moves his fraudulently generated DASH, Litecoin etc. to his wallets. He has made one hell of a gain, waiting for things to calm, so he can sell his Altcoins back for Bitcoin.<br /><br />Meanwhile, the incident was detected and five hours later, a &quot;rollback&quot; - the hardfork - was decided upon and done.<br /><br />What happens now? The Altcoin exchange has some serious trouble: many, many users now have sold Litecoin and DASH for Bitcoins which don&#039;t exist, anymore. As the exchange isn&#039;t able to pay (let users withdraw their non existing BTC), but the Altcoins are already withdrawn by Bob, what would happen next?<br /><br />Would that just be a &quot;shit happens&quot; situation, or would the Altcoins which are affected also be forced to do a hardfork?<br /><br /><br />Anyone who is interested in continuing this thought is welcome to do so! :)</div>
					<br /><br />
					<div align="center" class="smalltext">
		<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://www.simplemachines.org/" title="Simple Machines Forum" target="_blank">Powered by SMF 1.1.19</a> |
<a href="http://www.simplemachines.org/about/copyright.php" title="Free Forum Software" target="_blank">SMF &copy; 2006-2009, Simple Machines</a>
		</span></div>
				</td>
			</tr>
		</table>
</div>
<div class="sect2">
<h3 id="_satoshi_nakamoto_re_overflow_bug_serious"><a class="anchor" href="#_satoshi_nakamoto_re_overflow_bug_serious"></a>9.7. Satoshi Nakamoto - Re: overflow bug SERIOUS</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcointalk.org/index.php?topic=823.msg9531#msg9531" class="bare">https://bitcointalk.org/index.php?topic=823.msg9531#msg9531</a></p>
</li>
<li>
<p>Author: Satoshi Nakamoto</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
		<table width="90%" cellpadding="0" cellspacing="0" border="0">
			<tr>
				<td>
					<br />
					<hr size="2" width="100%" />
					Title: <b>overflow bug SERIOUS</b><br />
					Post by: <b>lfm</b> on <b>August 15, 2010, 07:04:11 PM</b>
					<hr />
					<div style="margin: 0 5ex;">seems a block at height 74638 has expoited a bug in the net. It uses an integer overflow to make a negative total transaction. The two transaction outputs are: <br /><br />&nbsp;out Value:92233720368.54(7ffffffffff85ee0) out Value:92233720368.54(7ff<br />ffffffff85ee0)<br /><br />We need a fix asap<br /><br />Edit: <br />(satoshi)<br />0.3.10 patch download links here:<br />http://bitcointalk.org/index.php?topic=827.0<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 07:25:58 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Original post: http://bitcointalk.org/index.php?topic=822.0</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 08:26:44 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><del>Whether to stop generating depends on the possible solution. If there are ever bad blocks, I can imagine an officially patched Bitcoin could be hard coded to exclude bad transactions contained in the block chain so that although the bad transactions would still be sitting in the chain, they would be ignored. I recommend people keep on generating if you were previously generating but be cautious about transactions until we hear back from Satoshi.</del><br /><br />The recommendation (http://bitcointalk.org/index.php?topic=823.msg9531#msg9531) is to stop generating.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>Gavin Andresen</b> on <b>August 15, 2010, 08:39:42 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Until there is a better fix... after a very small amount of testing this seems to work:<br /><div class="codeheader">Code:</div><div class="code">--- a/main.h<br />+++ b/main.h<br />@@ -473,8 +473,12 @@ public:<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Check for negative values<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;foreach(const CTxOut&amp; txout, vout)<br />+ {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (txout.nValue &lt; 0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return error(&quot;CTransaction::CheckTransaction() : txout.nValue negative&quot;);<br />+ if (txout.nValue &gt; 21000000*COIN)<br />+ return error(&quot;CTransaction::CheckTransaction() : txout.nValue over-max&quot;);<br />+ }<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (IsCoinBase())<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br />@@ -520,6 +524,8 @@ public:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int64 nValueOut = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;foreach(const CTxOut&amp; txout, vout)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br />+ if (txout.nValue &gt; 21000000*COIN)<br />+ continue; // ignore over-max-value...<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (txout.nValue &lt; 0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;throw runtime_error(&quot;CTransaction::GetValueOut() : negative value&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nValueOut += txout.nValue;<br /><br /></div>You&#039;ll need to re-download the part of the block chain before the bad block-- remove the blkindex.dat and blk0001.dat files.&nbsp; &nbsp;I started with knightmb&#039;s blockchain (http://knightmb.dyndns.org/files/bitcoin/blocks/) snapshot.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>jgarzik</b> on <b>August 15, 2010, 08:42:49 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Or the same patch from your github, http://gist.github.com/525921 (http://gist.github.com/525921) which gives us the raw patch that can be applied directly,<br />http://gist.github.com/raw/525921/fe2ad7583f0dd2444caa0b3e24d750bf45cac11b/Quick%20fix%20block%2074652 (http://gist.github.com/raw/525921/fe2ad7583f0dd2444caa0b3e24d750bf45cac11b/Quick%20fix%20block%2074652)<br /><br /><b>EDIT</b>:&nbsp; I was unable to patch directly using this, perhaps CRLF problems.<br /><br />I applied your changes manually, and uploaded the result here: http://yyz.us/bitcoin/patch.bitcoin-gavin-overflow-quick-fix (http://yyz.us/bitcoin/patch.bitcoin-gavin-overflow-quick-fix)<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 08:59:09 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Here&#039;s the preliminary change.&nbsp; Look right?&nbsp; I have more changes to make, this isn&#039;t all of it.&nbsp; Will SVN shortly.<br /><br /><div class="codeheader">Code:</div><div class="code">&nbsp; &nbsp; bool CheckTransaction() const<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; // Basic checks that don&#039;t depend on any context<br />&nbsp; &nbsp; &nbsp; &nbsp; if (vin.empty() || vout.empty())<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return error(&quot;CTransaction::CheckTransaction() : vin or vout empty&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Check for negative and overflow values<br />&nbsp; &nbsp; &nbsp; &nbsp; int64 nTotal = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; foreach(const CTxOut&amp; txout, vout)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (txout.nValue &lt; 0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return error(&quot;CTransaction::CheckTransaction() : txout.nValue negative&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (txout.nValue &gt; 21000000 * COIN)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return error(&quot;CTransaction::CheckTransaction() : txout.nValue too high&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nTotal += txout.nValue;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (nTotal &gt; 21000000 * COIN)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return error(&quot;CTransaction::CheckTransaction() : txout total too high&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; if (IsCoinBase())<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (vin[0].scriptSig.size() &lt; 2 || vin[0].scriptSig.size() &gt; 100)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return error(&quot;CTransaction::CheckTransaction() : coinbase script size&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(const CTxIn&amp; txin, vin)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (txin.prevout.IsNull())<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return error(&quot;CTransaction::CheckTransaction() : prevout is null&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; return true;<br />&nbsp; &nbsp; }<br /></div><br />Don&#039;t sticky the topic, nobody looks up there.&nbsp; There&#039;ll be enough posts to bump.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 09:06:45 PM</b>
					<hr />
					<div style="margin: 0 5ex;">It would help if people stop generating.&nbsp; We will probably need to re-do a branch around the current one, and the less you generate the faster that will be.<br /><br />A first patch will be in SVN rev 132.&nbsp; It&#039;s not uploaded yet.&nbsp; I&#039;m pushing some other misc changes out of the way first, then I&#039;ll upload the patch for this.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 09:09:53 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I&#039;m afraid the community is just too big and distributed now to expect much in the way of voluntary quick action on anything, especially generation which I&#039;m sure many have on automatic and largely unmoderated.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>Gavin Andresen</b> on <b>August 15, 2010, 09:10:33 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Looks good to me.<br /><br />Can you easily hardcode a check for the bad block&#039;s hash at startup and orphan it and subsequent blocks if they&#039;re on the best-block chain?<br />It&#039;s painful to have to re-download all or most of the chain to fix this...<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 09:15:18 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9534#msg9534">Quote from: gavinandresen on August 15, 2010, 09:10:33 PM</a></div><div class="quote">Looks good to me.<br /><br />Can you easily hardcode a check for the bad block&#039;s hash at startup and orphan it and subsequent blocks if they&#039;re on the best-block chain?<br />It&#039;s painful to have to re-download all or most of the chain to fix this...</div>Or just a quick re-verification of all blocks. After all, it is 5x faster (http://bitcointalk.org/index.php?topic=550.0) than it used t be. ;)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 09:23:55 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Once you have an update, you could download knightmb&#039;s block chain. &nbsp;You&#039;ll want one that&#039;s old enough that it ends <i>before</i> block 74000 so the most recent security lockin will check it. &nbsp;Can someone find the link for that?&nbsp; </div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>theymos</b> on <b>August 15, 2010, 09:26:09 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9539#msg9539">Quote from: satoshi on August 15, 2010, 09:23:55 PM</a></div><div class="quote">Once you have an update, you could download knightmb&#039;s block chain. &nbsp;You&#039;ll want one that&#039;s old enough that it ends <i>before</i> block 74000 so the most recent security lockin will check it. &nbsp;Can someone find the link for that?&nbsp; <br /></div><br />http://knightmb.dyndns.org/files/bitcoin/blocks/</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 09:29:08 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I prefer to just re-download them.<br /><br />Block verification after the patch but before everyone upgrades is going to be SLOW! It&#039;ll probably cause the next difficulty adjustment to decrease significantly. Of course everyone will probably have upgraded by the time the next adjustment rolls around, so we&#039;ll probably roll through it relatively quickly.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 09:36:30 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Edit: Hmm, I see there is an info file included which might just clue me in.<br /><br />How about explaining to us stupid newbies what we would do with the blockchain once we download it?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>jgarzik</b> on <b>August 15, 2010, 09:38:41 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9545#msg9545">Quote from: kencausey on August 15, 2010, 09:36:30 PM</a></div><div class="quote">How about explaining to us stupid newbies what we would do with the blockchain once we download it?<br /></div><br />It means replacing files in the bitcoin data directory.&nbsp; It is not recommended, unless you know what you&#039;re doing.<br /><br />Easiest and safest way is to backup wallet.dat then redownload everything.<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 09:40:19 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Patch is uploaded to SVN rev 132! <br /><br />For now, recommended steps:<br />1) Shut down.<br />2) Download knightmb&#039;s blk files.&nbsp; (replace your blk0001.dat and blkindex.dat files)<br />3) Upgrade.<br />4) It should start out with less than 74000 blocks. Let it redownload the rest.<br /><br />If you don&#039;t want to use knightmb&#039;s files, you could just delete your blk*.dat files, but it&#039;s going to be a lot of load on the network if everyone is downloading the whole block index at once.<br /><br />I&#039;ll build releases shortly. </div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 09:40:31 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9545#msg9545">Quote from: kencausey on August 15, 2010, 09:36:30 PM</a></div><div class="quote">How about explaining to us stupid newbies what we would do with the blockchain once we download it?<br /></div>While Bitcoin is not running, you put it in your Bitcoin data directory. ~/.bitcoin on Linux. If you want to re-download the whole chain, you just delete the file from the data directory while Bitcoin is not running.<br /><br />I&#039;m going to be move my blk00x.dat files and blkindex.dat file out of by data directory and restart the client. Those are the correct files, right?<br /><br />Edit: I&#039;ll also backup the whole directory, like I usually do before upgrades.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>jgarzik</b> on <b>August 15, 2010, 09:50:57 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9548#msg9548">Quote from: satoshi on August 15, 2010, 09:40:19 PM</a></div><div class="quote">If you don&#039;t want to use knightmb&#039;s files, you could just delete your blk*.dat files, but it&#039;s going to be a lot of load on the network if everyone is downloading the whole block index at once.<br /></div><br />Anybody wanna volunteer to create blk*.dat for block chain &lt;= 64637 ?<br /><br />Maybe the official binaries could simply ship a known-good block chain, to save time and bandwidth?<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 10:05:11 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Will the bug fix include the 4-way SSE2 patch (http://bitcointalk.org/index.php?topic=820.msg9452#msg9452) of 0.3.9 rc2? Thanks for letting me know that it is included (http://bitcointalk.org/index.php?topic=823.msg9557#msg9557), theymos. <del>Please release another release candidate when you have a moment if it is not included.</del><br /><br /><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9555#msg9555">Quote from: davidonpda on August 15, 2010, 10:02:05 PM</a></div><div class="quote">What about the transactions from 74000 to the invalid block. Are those all invalid now as well?<br /></div>Only the blocks including and after the invalid block are invalid. All previous blocks are valid.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>theymos</b> on <b>August 15, 2010, 10:06:02 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9555#msg9555">Quote from: davidonpda on August 15, 2010, 10:02:05 PM</a></div><div class="quote">What about the transactions from 74000 to the invalid block. Are those all invalid now as well?<br /></div><br />Only this aberrant transaction and coins generated after it in the block chain will be removed. All other transactions will continue to exist.<br /><br /><div class="quoteheader">Quote from: NewLibertyStandard</div><div class="quote">Will the bug fix include the 4-way SSE2 patch included in 0.3.9rc2?</div><br />It&#039;s included.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 15, 2010, 10:13:43 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Oh, yeah, just noticed this topic. I can&#039;t remember when those block chains were snapshot, but I&#039;ll update it to be more descriptive (like block 64,000, etc.)<br /><br />Good thing I keep those around. &nbsp;;D<br /><br />My web server sits on a fiber, so it won&#039;t be a big deal everyone starts to download those files at once (at least for the more technical people).<br /><br />[edit] Shutting down all the remaining servers and super-nodes I left running. Hope that helps.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>Insti</b> on <b>August 15, 2010, 10:17:25 PM</b>
					<hr />
					<div style="margin: 0 5ex;">knightmb, do you still have any of your monster network available to turn on to help build the new valid chain?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 15, 2010, 10:18:17 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9560#msg9560">Quote from: Insti on August 15, 2010, 10:17:25 PM</a></div><div class="quote">knightmb, do you still have any of your monster network available to turn on to help build the new valid chain?<br /></div>Not anymore, was shutdown on the last day of the month for July, all I have left are about a 2 dozen servers, but near nothing of what I had before.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 10:27:26 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Here&#039;s something for your Signature if you&#039;re interested.<br /><br /><div class="codeheader">Code:</div><div class="code">[i][color=red][b]*** WARNING ***[/b][/color]&nbsp; DO NOT TRUST ANY TRANSACTIONS THAT HAPPENED AFTER 15.08.2010 17:05 UTC (block 74638). We are investigating a problem. ([url=http://bit.ly/afalQU]more[/url])[/i]</div><br />I shortened the URL since the signature can only contain 300 characters. Also, can we get some color on the news warning? It&#039;s not very noticeable.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 15, 2010, 10:30:23 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I can build a block chain to the desired number using a combo of the old block chain and a client with the latest block chain (minus the bad stuff), what number should I shot for?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 10:31:07 PM</b>
					<hr />
					<div style="margin: 0 5ex;">74637 is the last good block</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 15, 2010, 10:34:03 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9565#msg9565">Quote from: kencausey on August 15, 2010, 10:31:07 PM</a></div><div class="quote">74637 is the last good block<br /></div>Ok, good, I&#039;ve relabeled the old block chain on my site, I&#039;ll try to get as close to that number as I can. Basically, I&#039;m just loading up two clients, one with the old chain, another with the sorta bad chain at the end. I&#039;m going to let the first client get as close to the number as I can before stopping it. Then snapshot off that block chain. Since it does about 500 at a time, I&#039;ll probably be able to get it close to 74,501<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>BitLex</b> on <b>August 15, 2010, 10:35:48 PM</b>
					<hr />
					<div style="margin: 0 5ex;">i&#039;v got one of a w7-machine count 74602, if that helps.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 10:44:55 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9569#msg9569">Quote from: davidonpda on August 15, 2010, 10:41:29 PM</a></div><div class="quote">I already said that I have it right at 74637.<br /><br />Satoshi said it needs to be before 74,000<br /></div>So long as a the person who creates it has a patched client and downloads the whole chain, optimally from another computer on their local network, then it should stop at the right place automatically.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>BitLex</b> on <b>August 15, 2010, 10:52:47 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9569#msg9569">Quote from: davidonpda on August 15, 2010, 10:41:29 PM</a></div><div class="quote">Satoshi said it needs to be before 74,000<br /></div>He didn&#039;t, he said &quot;you&#039;ll want one&quot;, not that it <b>needs to be</b>, a little different.<br />and if &quot;..Only the blocks including and after the invalid block are invalid. All previous blocks are valid..&quot;, it doesn&#039;t need to be before 74000.<br /><br />just wanted to save knightmb some time, but yours is bigger than mine anyway.&nbsp; ;D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 10:58:08 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Don&#039;t update the block chain download. &nbsp;When you take someone&#039;s block chain download, you don&#039;t want it right up to the end. &nbsp;A somewhat old one is better so it can download and verify the most recent blocks.<br /><br />tcatm&#039;s 4-way SSE2 SHA-256 is in the file sha256.cpp and already uploaded a few revs ago.<br /><br />I just now uploaded rev 134 which is the makefile.unix that enables building with it on Linux. &nbsp;If you build rev 134 on Linux now you&#039;ll get the -4way switch.<br /><br />If you have problems building because of it, then edit makefile.unix and:<br />- remove -DFOURWAYSSE2<br />- remove obj/sha256.o from the end of these lines:<br />bitcoin: $(OBJS) obj/ui.o obj/uibase.o obj/sha256.o<br />bitcoind: $(OBJS:obj/%=obj/nogui/%) obj/sha256.o<br /><br />The 0.3.10 linux build <i>will</i> have the -4way option when I build it.<br /><br />Here are the patch downloads for Windows:<br /><br />http://www.bitcoin.org/download/bitcoin-0.3.10-win32-setup.exe<br />http://www.bitcoin.org/download/bitcoin-0.3.10-win32.zip<br /><br />SHA1 16645ec5fcdb35bc54bc7195309a1a81105242bb bitcoin-0.3.10-win32-setup.exe<br />SHA1 4f35ad7711a38fe8c880c6c9beab430824c426d3 bitcoin-0.3.10-win32.zip<br /><br />Steps:<br />1) Shut down.<br />2) Download knightmb&#039;s blk files and replace your blk0001.dat and blkindex.dat files.<br />http://knightmb.dyndns.org/files/bitcoin/blocks/<br />http://rapidshare.com/files/413168038/BitcoinBlocks.torrent<br />3) Upgrade to 0.3.10.<br />4) It should start out with less than 74000 blocks and redownload the rest.<br /><br />Or if you don&#039;t want to mess with downloading blk files, you can just do this:<br /><br />1) Shut down.<br />2) Delete (or move) blk*.dat<br />3) Upgrade to 0.3.10.<br />4) It redownloads all blocks, probably take about an hour.<br /><br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 15, 2010, 10:59:04 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Yeah, a little confusing &nbsp;???<br /><br />So I don&#039;t need to create one, or do I need to take what you guys already have and just throw it up on the FTP?<br /><br />Can you dump block data from a windows machine onto a Linux/Mac machine?<br /><br /><b>[edit]</b> Just saw your post, I&#039;ll build one to less than 74,000 then, should at least save you technical people a few minutes of downloading the new chain.&nbsp; ;)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Oh the Suspense!</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 15, 2010, 10:59:31 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><del>I can&#039;t stand the suspense! Do any Jr. Members or higher happen to have an unofficial SVN rev 134 Linux 64-bit build compiled that they&#039;d be willing to share? Yeah, I know the official build is about to be released in a few minutes. It&#039;s not terribly important.<br /><br />Edit: Updated the SVN version number as per satoshi&#039;s comment a moment ago.</del><br /><br />Ah, never mind. Since the SVN version was just updated and the Windows builds were just released, I&#039;ll wait. :-[</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 11:17:24 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9574#msg9574">Quote from: knightmb on August 15, 2010, 10:59:04 PM</a></div><div class="quote"><b>[edit]</b> Just saw your post, I&#039;ll build one to less than 74,000 then, should at least save you technical people a few minutes of downloading the new chain. &nbsp;;)<br /></div>Just leave the old one alone! &nbsp;Older is better. &nbsp;What block number is it? &nbsp;Anywhere from 60000-74000 is good.&nbsp; The one that you&#039;ve had available for a while has been vetted and is the best choice.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 11:18:34 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I just used your old file knightmb and on a rather old system it didn&#039;t take me very long to catch up, so I&#039;m inclined to say &quot;don&#039;t bother&quot;.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>theymos</b> on <b>August 15, 2010, 11:21:06 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9576#msg9576">Quote from: satoshi on August 15, 2010, 11:17:24 PM</a></div><div class="quote">What block number is it?<br /></div><br />It&#039;s around 67k. It only took me about 3 minutes to get to the current block.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>HostFat</b> on <b>August 15, 2010, 11:32:43 PM</b>
					<hr />
					<div style="margin: 0 5ex;">I think that you should add something about this: http://bitcointalk.org/index.php?topic=259.0<br />There must be a label on the client that show a warning message if needed :)<br />Now everyone have always to check the website, and I think that this is bad.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 15, 2010, 11:35:39 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Cool, works for me!&nbsp; ;D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 11:36:10 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Starting at 67000 is <i>perfect</i>. &nbsp;<br /><br />Yeah, at the moment you&#039;ll stop at 74638. &nbsp;It should start slowly creeping up as more nodes upgrade and generate.<br /><br />Linux build links below.<br /><br />The Linux version includes tcatm&#039;s 4-way SSE2 SHA-256 that makes generating faster on i5 and AMD CPU&#039;s. &nbsp;Use the &quot;-4way&quot; switch to enable it and check if it&#039;s faster for you.<br /><br />Download links:<br />http://www.bitcoin.org/download/bitcoin-0.3.10-win32-setup.exe<br />http://www.bitcoin.org/download/bitcoin-0.3.10-win32.zip<br />http://www.bitcoin.org/download/bitcoin-0.3.10-linux.tar.gz<br /><br />SHA1 16645ec5fcdb35bc54bc7195309a1a81105242bb bitcoin-0.3.10-win32-setup.exe<br />SHA1 4f35ad7711a38fe8c880c6c9beab430824c426d3 bitcoin-0.3.10-win32.zip<br />SHA1 e3fda1ddb31b0d5c35156cacd80dee6ea6ae6423 bitcoin-0.3.10-linux.tar.gz</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 15, 2010, 11:37:07 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9582#msg9582">Quote from: Joozero on August 15, 2010, 11:32:43 PM</a></div><div class="quote">I think that you should add something about this: http://bitcointalk.org/index.php?topic=259.0<br />There must be a label on the client that show a warning message if needed :)<br />Now everyone have always to check the website, and I think that this is bad.<br /></div>Agree, wanted to do that for a long time, haven&#039;t had time to do it.<br /><br />For now, you could also subscribe to the bitcoin-list mailing list.&nbsp; It rarely gets used except for announcements like this and major new versions.<br /><br />Subscribe/unsubscribe page:<br />http://lists.sourceforge.net/mailman/listinfo/bitcoin-list<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 15, 2010, 11:37:40 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9576#msg9576">Quote from: satoshi on August 15, 2010, 11:17:24 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9574#msg9574">Quote from: knightmb on August 15, 2010, 10:59:04 PM</a></div><div class="quote"><b>[edit]</b> Just saw your post, I&#039;ll build one to less than 74,000 then, should at least save you technical people a few minutes of downloading the new chain. &nbsp;;)<br /></div>Just leave the old one alone! &nbsp;Older is better. &nbsp;What block number is it? &nbsp;Anywhere from 60000-74000 is good.&nbsp; The one that you&#039;ve had available for a while has been vetted and is the best choice.<br /></div>I&#039;ve put the block number with the file, so you&#039;ll know exactly where each stops at.&nbsp; <br /><br />BitCoinBlocks_Linux_67309.zip<br />BitCoinBlocks_Windows_67300.zip<br /><br />I&#039;ve leave them be. Glad to know I could help&nbsp; :)<br /><br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 11:45:26 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9580#msg9580">Quote from: davidonpda on August 15, 2010, 11:31:37 PM</a></div><div class="quote">... It already is on block 74638. I assume that means that block is now a good one?<br /></div><br />I had some confusion on this myself and got clarification in #bitcoin-dev:<br /><br />The bad block was number 74638, the last good one was 74637.&nbsp; The numbers start at 0, so when your client shows there are 74638 blocks then that means you have up to block number 74637, the last good one.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>HostFat</b> on <b>August 15, 2010, 11:47:58 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader">Quote</div><div class="quote">Agree, wanted to do that for a long time, haven&#039;t had time to do it.<br /><br />For now, you could also subscribe to the bitcoin-list mailing list. &nbsp;It rarely gets used except for announcements like this and major new versions.<br /><br />Subscribe/unsubscribe page:<br />http://lists.sourceforge.net/mailman/listinfo/bitcoin-list<br /></div><br />Good :D<br /><br />Anyway <b>I usually</b> check the website, I was thinking to a solution for newbie-users ( that they are more to come on future )<br />A small bug can be a big problem with a network with a lot of newbie and/or not-informed users. ( and none of them will ever give a look to a source like this: http://lists.sourceforge.net/mailman/listinfo/bitcoin-list :P )<br /><br />( sorry for my english, I hope you are still understanding me ;D )</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 15, 2010, 11:59:36 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Updated and combined instructions:<br /><br />1. &nbsp;Stop generating immediately, close your current client if you have not updated to 0.3.10.<br /><br />2. &nbsp;Download 0.3.10:<br /><br />http://www.bitcoin.org/download/bitcoin-0.3.10-win32-setup.exe<br />http://www.bitcoin.org/download/bitcoin-0.3.10-win32.zip<br />http://www.bitcoin.org/download/bitcoin-0.3.10-linux.tar.gz<br /><br />SHA1 16645ec5fcdb35bc54bc7195309a1a81105242bb bitcoin-0.3.10-win32-setup.exe<br />SHA1 4f35ad7711a38fe8c880c6c9beab430824c426d3 bitcoin-0.3.10-win32.zip<br />SHA1 e3fda1ddb31b0d5c35156cacd80dee6ea6ae6423 bitcoin-0.3.10-linux.tar.gz<br /><br />3. (optional) &nbsp;Download a previously known good blockchain:<br /><br />http://knightmb.dyndns.org/files/bitcoin/blocks/<br />http://rapidshare.com/files/413168038/BitcoinBlocks.torrent<br /><br />and replace your blk0001.dat and blkindex.dat files with those from the relevant download for your platform.<br /><br />3b. &nbsp;If you don&#039;t download, delete or move the blk0001.dat and blkindex.dat files.<br /><br />4. &nbsp;Start 0.3.10 and watch it catch up to block 74637 and beyond and help restart things.<br /><br /><b>Edit:</b><br /><b>Edit 2: Add more explanation</b><br /><br />4b. &nbsp;Currently the network has a combination of good and bad nodes (those running versions older than 0.3.10). &nbsp;If you only connect to nodes running old versions, you will be stuck at 74638 blocks. &nbsp;You can fix this by running the client with the options &quot;-addnode=75.158.131.108 -addnode=99.27.237.13 -addnode=76.235.234.64 -addnode=74.137.15.169 -addnode=68.68.99.14&quot;.&nbsp; This specifically connects you to a number of &#039;known good&#039; nodes and ensures that you receive transactions generated within the network of updated clients.&nbsp; As the number of out of date clients in the network decreases, this will become unnecessary.&nbsp; If you want more nodes or just different ones, you can find a larger list at http://www.bitcoin.org/wiki/doku.php?do=show&amp;id=74638_nodes .</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>BitLex</b> on <b>August 16, 2010, 12:12:36 AM</b>
					<hr />
					<div style="margin: 0 5ex;">my forwarded node counts 74642 as i type (36conn.),<br />3 other nodes are still at 74638 (8conn. each)</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 16, 2010, 12:20:59 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Ya know, in a way, this actually temporarily decreases the difficulty to generate blocks until everyone upgrades. Yeah, it&#039;ll be slower, but that just gives each client more time to try to generate the difficult hash.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>Ground Loop</b> on <b>August 16, 2010, 12:29:55 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Question about fallout:&nbsp; I had a transaction that I submitted after the bad block, using the bad block chain.<br /><br />What is the status of that transaction?<br />From what I can tell, my (updated) sending client wallet shows the deducted amount.<br /><br />Will it get reincorporated into the fixed chain, and will the recipient be able to spend it?<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kosovito</b> on <b>August 16, 2010, 12:39:17 AM</b>
					<hr />
					<div style="margin: 0 5ex;">I did all steps, now my client is 0.3.10 and it stopped at block 74638. Is all fine?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 16, 2010, 01:00:45 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9609#msg9609">Quote from: Ground Loop on August 16, 2010, 12:29:55 AM</a></div><div class="quote">Question about fallout: &nbsp;I had a <b>transaction</b> that I submitted after the bad block, using the bad block chain.<br /><br />What is the status of that transaction?<br />From what I can tell, my (updated) sending client wallet shows the deducted amount.<br /><br />Will it get reincorporated into the fixed chain, and will the recipient be able to spend it?<br /></div>Right, it will get reincorporated into the fixed chain. &nbsp;The transaction won&#039;t disappear, it&#039;ll still be visible on both sides, but the confirmation count will jump back to 0 and start counting up again.<br /><br />It&#039;s only if you generated a block in the bad chain after block 74638 that the 50 BTC from that will disappear. &nbsp;Any blocks in the bad chain wouldn&#039;t have matured yet. </div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 16, 2010, 01:02:24 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9615#msg9615">Quote from: kosovito on August 16, 2010, 12:39:17 AM</a></div><div class="quote">I did all steps, now my client is 0.3.10 and it stopped at block 74638. Is all fine?<br /></div>If you still show 74638 blocks then you aren&#039;t connected to any 0.3.10 nodes. &nbsp;<br /><br />For today, try adding these parameters:&nbsp; <br />-addnode=75.158.131.108 -addnode=99.27.237.13 -addnode=68.68.99.14<br /><br />See<br />http://bitcointalk.org/index.php?topic=828</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>GoldRush</b> on <b>August 16, 2010, 01:02:35 AM</b>
					<hr />
					<div style="margin: 0 5ex;">Most people running clients are not reading this message thread. &nbsp;So... &nbsp;Silly questions:<br /><br />1) How will this continue to affect version 3.8.1 (pre-catastrophe) clients with bad block chain?<br />2) How will this affect clients that upgrade to 3.8.10 but don&#039;t remove their block chain files?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>kencausey</b> on <b>August 16, 2010, 01:06:13 AM</b>
					<hr />
					<div style="margin: 0 5ex;">I added the addnode options and info about the &#039;stuck at 74638 blocks&#039; issue at http://bitcointalk.org/index.php?topic=823.msg9595#msg9595</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 16, 2010, 01:12:05 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9625#msg9625">Quote from: trebronics on August 16, 2010, 01:02:35 AM</a></div><div class="quote">Most people running clients are not reading this message thread. &nbsp;So... &nbsp;Silly questions:<br /><br />1) How will this continue to affect version 3.8.1 (pre-catastrophe) clients with bad block chain?<br />2) How will this affect clients that upgrade to 3.8.10 but don&#039;t remove their block chain files?<br /></div>1) Once more than 50% of the node power is upgraded and the good chain overtakes the bad, the 0.3.10 nodes will make it hard for any bad transactions to get any confirmations. <br />2) If you didn&#039;t remove your blk*.dat files, you&#039;re not helping to contribute to that 50%, and you&#039;ll still show bad transactions until the good chain overtakes the bad chain.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>Ground Loop</b> on <b>August 16, 2010, 02:02:07 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9606#msg9606">Quote from: NewLibertyStandard on August 16, 2010, 12:20:59 AM</a></div><div class="quote">Ya know, in a way, this actually temporarily decreases the difficulty to generate blocks until everyone upgrades. Yeah, it&#039;ll be slower, but that just gives each client more time to try to generate the difficult hash.<br /></div><br />Of course, this happened right after the difficulty kicked up to 511.7, so all these new &quot;good&quot; blocks will have to contend with that.&nbsp; And a good chunk of the network grind power is off on the wrong chain, so new blocks may take a lot longer than 10min to find.&nbsp; At what point will the balancing figure this out and possibly kick the difficulty back down again?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 16, 2010, 02:16:10 AM</b>
					<hr />
					<div style="margin: 0 5ex;">The bad chain is also slowed down as more nodes upgrade.<br /><br />We&#039;ve already generated 14 blocks since 74638. &nbsp;The builds of 0.3.10 were uploaded about 2 and 3 hours ago. &nbsp;Of the nodes I&#039;m connected to, more than half are already 0.3.10. &nbsp;I would say we probably already have more power than the bad chain.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 16, 2010, 02:22:05 AM</b>
					<hr />
					<div style="margin: 0 5ex;">I&#039;m chucking as much CPU at this as I can. &nbsp;Yeah, bit of an unfair advantage I guess until everyone upgrades. &nbsp;:-X<br />My wife&#039;s PC already generated 2 of the new blocks (LOL), luck is on her side I guess.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>lachesis</b> on <b>August 16, 2010, 02:28:57 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9642#msg9642">Quote from: satoshi on August 16, 2010, 02:16:10 AM</a></div><div class="quote">... Of the nodes I&#039;m connected to, more than half are already 0.3.10. ...<br /></div>That&#039;s great news! How did you figure that out, though? I was considering writing a client specially tailored to put itself out there and try to get as many people to connect as possible, then survey their versions and write out a log (in addition to all the normal bitcoin stuff).</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 16, 2010, 02:38:21 AM</b>
					<hr />
					<div style="margin: 0 5ex;">On Windows, findstr /c:&quot;version message&quot; debug.log<br /><br />It looks like the bad chain was on block 74678 recently. &nbsp;Can&#039;t wait to overtake it.<br /><br />On the stats at http://nullvoid.org/bitcoin/statistix.php&nbsp; there&#039;s been 5 blocks per hour in the last 3 hours. &nbsp;We had a difficulty adjustment about a day ago that should have put it back to 6 blocks per hour.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>bdonlan</b> on <b>August 16, 2010, 02:39:55 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9642#msg9642">Quote from: satoshi on August 16, 2010, 02:16:10 AM</a></div><div class="quote">The bad chain is also slowed down as more nodes upgrade.<br /><br />We&#039;ve already generated 14 blocks since 74638. &nbsp;The builds of 0.3.10 were uploaded about 2 and 3 hours ago. &nbsp;Of the nodes I&#039;m connected to, more than half are already 0.3.10. &nbsp;I would say we probably already have more power than the bad chain.<br /><br /></div>I think it&#039;d probably be a good idea still to come out with another version that rejects connections from older versions - otherwise the network might remain rather fragmented for a while. :/</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>mizerydearia</b> on <b>August 16, 2010, 02:50:00 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9595#msg9595">Quote from: kencausey on August 15, 2010, 11:59:36 PM</a></div><div class="quote">4b. &nbsp;Currently the network has a combination of good and bad nodes (those running versions older than 0.3.10). &nbsp;If you only connect to nodes running old versions, you will be stuck at 74638 blocks. &nbsp;You can fix this by running the client with the options &quot;-addnode=75.158.131.108 -addnode=99.27.237.13 -addnode=76.235.234.64 -addnode=74.137.15.169 -addnode=68.68.99.14&quot;<br /></div><br />http://www.bitcoin.org/wiki/doku.php?do=show&amp;id=74638_nodes</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 16, 2010, 03:09:52 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9649#msg9649">Quote from: bdonlan on August 16, 2010, 02:39:55 AM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9642#msg9642">Quote from: satoshi on August 16, 2010, 02:16:10 AM</a></div><div class="quote">The bad chain is also slowed down as more nodes upgrade.<br /><br />We&#039;ve already generated 14 blocks since 74638. &nbsp;The builds of 0.3.10 were uploaded about 2 and 3 hours ago. &nbsp;Of the nodes I&#039;m connected to, more than half are already 0.3.10. &nbsp;I would say we probably already have more power than the bad chain.<br /><br /></div>I think it&#039;d probably be a good idea still to come out with another version that rejects connections from older versions - otherwise the network might remain rather fragmented for a while. :/<br /></div>We want to keep the older clients connected so that when the correct chain overtakes the incorrect chain, they will switch back to the correct chain. Although I don&#039;t know the specifics of how far back in the chain the old chain will accept a branched chain.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>knightmb</b> on <b>August 16, 2010, 03:57:39 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9657#msg9657">Quote from: NewLibertyStandard on August 16, 2010, 03:09:52 AM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9649#msg9649">Quote from: bdonlan on August 16, 2010, 02:39:55 AM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9642#msg9642">Quote from: satoshi on August 16, 2010, 02:16:10 AM</a></div><div class="quote">The bad chain is also slowed down as more nodes upgrade.<br /><br />We&#039;ve already generated 14 blocks since 74638. &nbsp;The builds of 0.3.10 were uploaded about 2 and 3 hours ago. &nbsp;Of the nodes I&#039;m connected to, more than half are already 0.3.10. &nbsp;I would say we probably already have more power than the bad chain.<br /><br /></div>I think it&#039;d probably be a good idea still to come out with another version that rejects connections from older versions - otherwise the network might remain rather fragmented for a while. :/<br /></div>We want to keep the older clients connected so that when the correct chain overtakes the incorrect chain, they will switch back to the correct chain. Although I don&#039;t know the specifics of how far back in the chain the old chain will accept a branched chain.<br /></div>The old clients should accept it all the way back to the last snapshot of release, so this being found so quickly and so long after the last release, it should work in theory. Here&#039;s a good test of the theory&nbsp; ;D</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>Ground Loop</b> on <b>August 16, 2010, 05:07:50 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9623#msg9623">Quote from: satoshi on August 16, 2010, 01:00:45 AM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9609#msg9609">Quote from: Ground Loop on August 16, 2010, 12:29:55 AM</a></div><div class="quote">Question about fallout: &nbsp;I had a <b>transaction</b> that I submitted after the bad block, using the bad block chain.<br /><br />What is the status of that transaction?<br />From what I can tell, my (updated) sending client wallet shows the deducted amount.<br /><br />Will it get reincorporated into the fixed chain, and will the recipient be able to spend it?<br /></div>Right, it will get reincorporated into the fixed chain. &nbsp;The transaction won&#039;t disappear, it&#039;ll still be visible on both sides, but the confirmation count will jump back to 0 and start counting up again.<br /><br />It&#039;s only if you generated a block in the bad chain after block 74638 that the 50 BTC from that will disappear. &nbsp;Any blocks in the bad chain wouldn&#039;t have matured yet. <br /></div><br />Interesting.. fascinating to watch this work its way through the bowels of the system.<br />It was block 73746 that I generated.<br />&nbsp; &nbsp; CTxOut(nValue=50.00000000, scriptPubKey=0x8DDD5C7DADB2D43AC5F186)<br />08/12/10 02:35 generated 50.00<br /><br />And I sent 49.00 of it to 19Nzg21hQQDAY5GTdTTuUVPA4MaE7AusXz (using the broken chain)<br /><br />Now I&#039;m waiting for that node to figure out it was received, and it&#039;s using the new chain.<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 16, 2010, 12:59:38 PM</b>
					<hr />
					<div style="margin: 0 5ex;">It looks like we overtook the bad chain somewhere around 74689.&nbsp; 0.3.9 and lower nodes have been responding with the current block number for some hours now.<br /><br />That means it&#039;s no longer necessary to delete blk*.dat before upgrading.&nbsp; You can just upgrade and it&#039;ll reorg away the bad block chain.<br /><br />Thanks to everyone for the quick response!</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>throughput</b> on <b>August 16, 2010, 02:35:10 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Would it be useful to have RPC command to chop off the tail of the chain manually,<br />instead of removind and redownloading the whole chain?<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>laszlo</b> on <b>August 16, 2010, 10:13:00 PM</b>
					<hr />
					<div style="margin: 0 5ex;">So at this point, would a client that has not upgraded also have the correct chain?</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>NewLibertyStandard</b> on <b>August 16, 2010, 10:15:32 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=823.msg9833#msg9833">Quote from: laszlo on August 16, 2010, 10:13:00 PM</a></div><div class="quote">So at this point, would a client that has not upgraded also have the correct chain?<br /></div>Yes. The only exception would be if an unpatched client made another fake transaction and managed to verify it. They would be able to spread that fake block to a few other nodes that haven&#039;t upgraded, but the upgraded clients seem to have more power than the unpatched clients, so the bad link would not last long and would not be spread by upgraded clients.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: overflow bug SERIOUS</b><br />
					Post by: <b>satoshi</b> on <b>August 16, 2010, 10:54:55 PM</b>
					<hr />
					<div style="margin: 0 5ex;">Un-upgraded nodes have the correct chain most of the time, but they are still trying to include the overflow transaction in every block, so they&#039;re continually trying to fork and generate invalid blocks.&nbsp; If an old version node is restarted, its transaction pool is emptied, so it may generate valid blocks for a while until the transaction gets broadcast again.&nbsp; 0.3.9 and lower nodes still must upgrade.<br /><br />The SVN now has the code we needed to automatically reorg the block chain without having to delete the blk*.dat files manually.&nbsp; I knew I couldn&#039;t write that code fast and carefully enough yesterday, so I went with the quick manual option.</div>
					<br /><br />
					<div align="center" class="smalltext">
		<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://www.simplemachines.org/" title="Simple Machines Forum" target="_blank">Powered by SMF 1.1.19</a> |
<a href="http://www.simplemachines.org/about/copyright.php" title="Free Forum Software" target="_blank">SMF &copy; 2006-2009, Simple Machines</a>
		</span></div>
				</td>
			</tr>
		</table>
</div>
<div class="sect2">
<h3 id="_gavin_andresen_bip50_march_2013_chain_fork_post_mortem"><a class="anchor" href="#_gavin_andresen_bip50_march_2013_chain_fork_post_mortem"></a>9.8. Gavin Andresen - BIP50, March 2013 Chain Fork Post-Mortem</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://github.com/bitcoin/bips/blob/master/bip-0050.mediawiki" class="bare">https://github.com/bitcoin/bips/blob/master/bip-0050.mediawiki</a></p>
</li>
<li>
<p>Author: Gavin Andresen</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  BIP: 50
  Title: March 2013 Chain Fork Post-Mortem
  Author: Gavin Andresen &lt;gavinandresen@gmail.com&gt;
  Comments-Summary: No comments yet.
  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-0050
  Status: Final
  Type: Informational
  Created: 2013-03-20
  License: PD</pre>
</div>
</div>
<div class="sect3">
<h4 id="what_went_wrong"><a class="anchor" href="#what_went_wrong"></a>What went wrong</h4>
<div class="paragraph">
<p>A block that had a larger number of total transaction inputs than
previously seen was mined and broadcasted. Bitcoin 0.8 nodes were able
to handle this, but some pre-0.8 Bitcoin nodes rejected it, causing an
unexpected fork of the blockchain. The pre-0.8-incompatible chain (from
here on, the 0.8 chain) at that point had around 60% of the mining hash
power ensuring the split did not automatically resolve (as would have
occurred if the pre-0.8 chain outpaced the 0.8 chain in total work,
forcing 0.8 nodes to reorganise to the pre-0.8 chain).</p>
</div>
<div class="paragraph">
<p>In order to restore a canonical chain as soon as possible, BTCGuild and
Slush downgraded their Bitcoin 0.8 nodes to 0.7 so their pools would
also reject the larger block. This placed majority hashpower on the
chain without the larger block, thus eventually causing the 0.8 nodes to
reorganise to the pre-0.8 chain.</p>
</div>
<div class="paragraph">
<p>During this time there was at least
<a href="https://bitcointalk.org/index.php?topic=152348.0">one large double
spend</a>. However, it was done by someone experimenting to see if it was
possible and was not intended to be malicious.</p>
</div>
</div>
<div class="sect3">
<h4 id="what_went_right"><a class="anchor" href="#what_went_right"></a>What went right</h4>
<div class="ulist">
<ul>
<li>
<p>The split was detected very quickly.</p>
</li>
<li>
<p>The right people were online and available in IRC or could be
contacted directly.</p>
</li>
<li>
<p>Marek Palatinus (Slush) and Michael Marsee (Eleuthria of BTCGuild)
quickly downgraded their nodes to restore a pre-0.8 chain as canonical,
despite the fact that this caused them to sacrifice significant amounts
of money.</p>
</li>
<li>
<p>Deposits to the major exchanges and payments via BitPay were also
suspended (and then un-suspended) very quickly.</p>
</li>
<li>
<p>Fortunately, the only attack on a merchant was done by someone who was
not intending to actually steal money.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="root_cause"><a class="anchor" href="#root_cause"></a>Root cause</h4>
<div class="paragraph">
<p>Bitcoin versions prior to 0.8 configure an insufficient number of
Berkeley DB locks to process large but otherwise valid blocks. Berkeley
DB locks have to be manually configured by API users depending on
anticipated load. The manual says this:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The recommended algorithm for selecting the maximum number of locks,
lockers, and lock objects is to run the application under stressful
conditions and then review the lock system&#8217;s statistics to determine
the maximum number of locks, lockers, and lock objects that were used.
Then, double these values for safety.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>With the insufficiently high BDB lock configuration, it implicitly had
become a network consensus rule determining block validity (albeit an
inconsistent and unsafe rule, since the lock usage could vary from node
to node).</p>
</div>
<div class="paragraph">
<p>Because max-sized blocks had been successfully processed on the testnet,
it did not occur to anyone that there could be blocks that were smaller
but require more locks than were available. Prior to 0.7 unmodified
mining nodes self-imposed a maximum block size of 500,000 bytes, which
further prevented this case from being triggered. 0.7 made the target
size configurable and miners had been encouraged to increase this target
in the week prior to the incident.</p>
</div>
<div class="paragraph">
<p>Bitcoin 0.8 did not use Berkeley DB. It switched to LevelDB instead,
which did not implement the same locking limits as BDB. Therefore it was
able to process the forking block successfully.</p>
</div>
<div class="paragraph">
<p>Note that BDB locks are also required during processing of
re-organizations. Versions prior to 0.8 may be unable to process some
valid re-orgs.</p>
</div>
<div class="paragraph">
<p>This would be an issue even if the entire network was running version
0.7.2. It is theoretically possible for one 0.7.2 node to create a block
that others are unable to validate, or for 0.7.2 nodes to create block
re-orgs that peers cannot validate, because the contents of each node&#8217;s
blkindex.dat database is not identical, and the number of locks required
depends on the exact arrangement of the blkindex.dat on disk (locks are
acquired per-page).</p>
</div>
</div>
<div class="sect3">
<h4 id="action_items"><a class="anchor" href="#action_items"></a>Action items</h4>
<div class="sect4">
<h5 id="_immediately"><a class="anchor" href="#_immediately"></a>Immediately</h5>
<div class="paragraph">
<p><strong>Done</strong>: Release a version 0.8.1, forked directly from 0.8.0, that, for
the next two months has the following new rules:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Reject blocks that would probably cause more than 10,000 locks to be
taken.</p>
</li>
<li>
<p>Limit the maximum block-size created to 500,000 bytes</p>
</li>
<li>
<p>Release a patch for older versions that implements the same rules, but
also increases the maximum number of locks to 537,000</p>
</li>
<li>
<p>Create a web page on bitcoin.org that will urge users to upgrade to
0.8.1, but will tell them how to set DB_CONFIG to 537,000 locks if they
absolutely cannot.</p>
</li>
<li>
<p>Over the next 2 months, send a series of alerts to users of older
versions, pointing to the web page.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="alert_system"><a class="anchor" href="#alert_system"></a>Alert system</h5>
<div class="paragraph">
<p><strong>Done</strong>: Review who has access to the alert system keys, make sure they
all have contact information for each other, and get good timezone
overlap by people with access to the keys.</p>
</div>
<div class="paragraph">
<p><strong>Done</strong>: Implement a new bitcoind feature so services can get timely
notification of alerts: -alertnotify= Run command when an AppliesToMe()
alert is received.</p>
</div>
<div class="paragraph">
<p><strong>Done</strong>: Pre-generate 52 test alerts, and set a time every week when they
are broadcast on -testnet (so -alertnotify scripts can be tested in
as-close-to-real-world conditions as possible).</p>
</div>
<div class="paragraph">
<p>Idea from Michael Gronager: encourage merchants/exchanges (and maybe
pools) to run new code behind a bitcoind running the network-majority
version.</p>
</div>
</div>
<div class="sect4">
<h5 id="safe_mode"><a class="anchor" href="#safe_mode"></a>Safe mode</h5>
<div class="paragraph">
<p><strong>Done</strong>: Perhaps trigger an alert if there is a long enough side chain
detected, even if it is not the main chain. Pools could use this to
automatically suspend payouts if a long side-chain suddenly appeared out
of nowhere (it’s hard for an attacker to mine such a thing).</p>
</div>
</div>
<div class="sect4">
<h5 id="_testing_2"><a class="anchor" href="#_testing_2"></a>Testing</h5>
<div class="paragraph">
<p>Start running bots on the testnet that grab some coins from a testnet
faucet, generate large numbers of random transactions that
split/recombine them and then send them back to the faucet. Randomized
online testing on the testnet might have revealed the pathological block
type earlier.</p>
</div>
</div>
<div class="sect4">
<h5 id="double_spending"><a class="anchor" href="#double_spending"></a>Double spending</h5>
<div class="paragraph">
<p>A double spend attack was successful, despite that both sides of the
chain heard about the transactions in the same order. The reason is most
likely that the memory pools were cleared when the mining pool nodes
were downgraded. A solution is for nodes to sync their mempools to each
other at startup, however, this requires a memory pool expiry policy to
be implemented as currently node restarts are the only way for
unconfirmed transactions to be evicted from the system.</p>
</div>
</div>
<div class="sect4">
<h5 id="_resolution"><a class="anchor" href="#_resolution"></a>Resolution</h5>
<div class="paragraph">
<p>On 16 August, 2013 block 252,451
(0x0000000000000024b58eeb1134432f00497a6a860412996e7a260f47126eed07) was
accepted by the main network, forking unpatched nodes off the network.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_copyright"><a class="anchor" href="#_copyright"></a>Copyright</h4>
<div class="paragraph">
<p>This document is placed in the public domain.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pieter_wuille_bip66_strict_der_signatures"><a class="anchor" href="#_pieter_wuille_bip66_strict_der_signatures"></a>9.9. Pieter Wuille - BIP66, Strict DER signatures</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki" class="bare">https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki</a></p>
</li>
<li>
<p>Author: Pieter Wuille</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  BIP: 66
  Layer: Consensus (soft fork)
  Title: Strict DER signatures
  Author: Pieter Wuille &lt;pieter.wuille@gmail.com&gt;
  Comments-Summary: No comments yet.
  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-0066
  Status: Final
  Type: Standards Track
  Created: 2015-01-10
  License: BSD-2-Clause</pre>
</div>
</div>
<div class="sect3">
<h4 id="_abstract"><a class="anchor" href="#_abstract"></a>Abstract</h4>
<div class="paragraph">
<p>This document specifies proposed changes to the Bitcoin transaction
validity rules to restrict signatures to strict DER encoding.</p>
</div>
</div>
<div class="sect3">
<h4 id="_copyright_2"><a class="anchor" href="#_copyright_2"></a>Copyright</h4>
<div class="paragraph">
<p>This BIP is licensed under the 2-clause BSD license.</p>
</div>
</div>
<div class="sect3">
<h4 id="_motivation_2"><a class="anchor" href="#_motivation_2"></a>Motivation</h4>
<div class="paragraph">
<p>Bitcoin&#8217;s reference implementation currently relies on OpenSSL for
signature validation, which means it is implicitly defining Bitcoin&#8217;s
block validity rules. Unfortunately, OpenSSL is not designed for
consensus-critical behaviour (it does not guarantee bug-for-bug
compatibility between versions), and thus changes to it can - and have -
affected Bitcoin software.</p>
</div>
<div class="paragraph">
<p>One specifically critical area is the encoding of signatures. Until
recently, OpenSSL&#8217;s releases would accept various deviations from the
DER standard and accept signatures as valid. When this changed in
OpenSSL 1.0.0p and 1.0.1k, it made some nodes reject the chain.</p>
</div>
<div class="paragraph">
<p>This document proposes to restrict valid signatures to exactly what is
mandated by DER, to make the consensus rules not depend on OpenSSL&#8217;s
signature parsing. A change like this is required if implementations
would want to remove all of OpenSSL from the consensus code.</p>
</div>
</div>
<div class="sect3">
<h4 id="_specification"><a class="anchor" href="#_specification"></a>Specification</h4>
<div class="paragraph">
<p>Every signature passed to OP_CHECKSIG, OP_CHECKSIGVERIFY,
OP_CHECKMULTISIG, or OP_CHECKMULTISIGVERIFY, to which ECDSA verification
is applied, must be encoded using strict DER encoding (see further).</p>
</div>
<div class="paragraph">
<p>These operators all perform ECDSA verifications on pubkey/signature
pairs, iterating from the top of the stack backwards. For each such
verification, if the signature does not pass the
<code>IsValidSignatureEncoding</code> check below, the entire script evaluates to
false immediately. If the signature is valid DER, but does not pass
ECDSA verification, opcode execution continues as it used to, causing
opcode execution to stop and push false on the stack (but not
immediately fail the script) in some cases, which potentially skips
further signatures (and thus does not subject them to
<code>IsValidSignatureEncoding</code>).</p>
</div>
<div class="sect4">
<h5 id="der_encoding_reference"><a class="anchor" href="#der_encoding_reference"></a>DER encoding reference</h5>
<div class="paragraph">
<p>The following code specifies the behaviour of strict DER checking. Note
that this function tests a signature byte vector which includes the
1-byte sighash flag that Bitcoin adds, even though that flag falls
outside of the DER specification, and is unaffected by this proposal.
The function is also not called for cases where the length of sig is 0,
in order to provide a simple, short and efficiently-verifiable encoding
for deliberately invalid signatures.</p>
</div>
<div class="paragraph">
<p>DER is specified in <a href="https://www.itu.int/rec/T-REC-X.690/en" class="bare">https://www.itu.int/rec/T-REC-X.690/en</a> .</p>
</div>
<div class="literalblock">
<div class="content">
<pre>bool static IsValidSignatureEncoding(const std::vector&lt;unsigned char&gt; &amp;sig) {
    // Format: 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S] [sighash]
    // * total-length: 1-byte length descriptor of everything that follows,
    //   excluding the sighash byte.
    // * R-length: 1-byte length descriptor of the R value that follows.
    // * R: arbitrary-length big-endian encoded R value. It must use the shortest
    //   possible encoding for a positive integers (which means no null bytes at
    //   the start, except a single one when the next byte has its highest bit set).
    // * S-length: 1-byte length descriptor of the S value that follows.
    // * S: arbitrary-length big-endian encoded S value. The same rules apply.
    // * sighash: 1-byte value indicating what data is hashed (not part of the DER
    //   signature)

    // Minimum and maximum size constraints.
    if (sig.size() &lt; 9) return false;
    if (sig.size() &gt; 73) return false;

    // A signature is of type 0x30 (compound).
    if (sig[0] != 0x30) return false;

    // Make sure the length covers the entire signature.
    if (sig[1] != sig.size() - 3) return false;

    // Extract the length of the R element.
    unsigned int lenR = sig[3];

    // Make sure the length of the S element is still inside the signature.
    if (5 + lenR &gt;= sig.size()) return false;

    // Extract the length of the S element.
    unsigned int lenS = sig[5 + lenR];

    // Verify that the length of the signature matches the sum of the length
    // of the elements.
    if ((size_t)(lenR + lenS + 7) != sig.size()) return false;

    // Check whether the R element is an integer.
    if (sig[2] != 0x02) return false;

    // Zero-length integers are not allowed for R.
    if (lenR == 0) return false;

    // Negative numbers are not allowed for R.
    if (sig[4] &amp; 0x80) return false;

    // Null bytes at the start of R are not allowed, unless R would
    // otherwise be interpreted as a negative number.
    if (lenR &gt; 1 &amp;&amp; (sig[4] == 0x00) &amp;&amp; !(sig[5] &amp; 0x80)) return false;

    // Check whether the S element is an integer.
    if (sig[lenR + 4] != 0x02) return false;

    // Zero-length integers are not allowed for S.
    if (lenS == 0) return false;

    // Negative numbers are not allowed for S.
    if (sig[lenR + 6] &amp; 0x80) return false;

    // Null bytes at the start of S are not allowed, unless S would otherwise be
    // interpreted as a negative number.
    if (lenS &gt; 1 &amp;&amp; (sig[lenR + 6] == 0x00) &amp;&amp; !(sig[lenR + 7] &amp; 0x80)) return false;

    return true;
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h5>
<div class="paragraph">
<p>Notation: P1 and P2 are valid, serialized, public keys. S1 and S2 are
valid signatures using respective keys P1 and P2. S1' and S2' are
non-DER but otherwise valid signatures using those same keys. F is any
invalid but DER-compliant signature (including 0, the empty string). F'
is any invalid and non-DER-compliant signature.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>S1' P1 CHECKSIG</code> fails (changed)</p>
</li>
<li>
<p><code>S1' P1 CHECKSIG NOT</code> fails (unchanged)</p>
</li>
<li>
<p><code>F P1 CHECKSIG</code> fails (unchanged)</p>
</li>
<li>
<p><code>F P1 CHECKSIG NOT</code> can succeed (unchanged)</p>
</li>
<li>
<p><code>F' P1 CHECKSIG</code> fails (unchanged)</p>
</li>
<li>
<p><code>F' P1 CHECKSIG NOT</code> fails (changed)</p>
</li>
<li>
<p><code>0 S1' S2 2 P1 P2 2 CHECKMULTISIG</code> fails (changed)</p>
</li>
<li>
<p><code>0 S1' S2 2 P1 P2 2 CHECKMULTISIG NOT</code> fails (unchanged)</p>
</li>
<li>
<p><code>0 F S2' 2 P1 P2 2 CHECKMULTISIG</code> fails (unchanged)</p>
</li>
<li>
<p><code>0 F S2' 2 P1 P2 2 CHECKMULTISIG NOT</code> fails (changed)</p>
</li>
<li>
<p><code>0 S1' F 2 P1 P2 2 CHECKMULTISIG</code> fails (unchanged)</p>
</li>
<li>
<p><code>0 S1' F 2 P1 P2 2 CHECKMULTISIG NOT</code> can succeed (unchanged)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that the examples above show that only additional failures are
required by this change, as required for a soft forking change.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_deployment"><a class="anchor" href="#_deployment"></a>Deployment</h4>
<div class="paragraph">
<p>We reuse the double-threshold switchover mechanism from BIP 34, with the
same thresholds, but for nVersion = 3. The new rules are in effect for
every block (at height H) with nVersion = 3 and at least 750 out of 1000
blocks preceding it (with heights H-1000..H-1) also have nVersion = 3.
Furthermore, when 950 out of the 1000 blocks preceding a block do have
nVersion = 3, nVersion = 2 blocks become invalid, and all further blocks
enforce the new rules.</p>
</div>
</div>
<div class="sect3">
<h4 id="_compatibility_2"><a class="anchor" href="#_compatibility_2"></a>Compatibility</h4>
<div class="paragraph">
<p>The requirement to have signatures that comply strictly with DER has
been enforced as a relay policy by the reference client since v0.8.0,
and very few transactions violating it are being added to the chain as
of January 2015. In addition, every non-compliant signature can
trivially be converted into a compliant one, so there is no loss of
functionality by this requirement. This proposal has the added benefit
of reducing transaction malleability (see BIP 62).</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementation_2"><a class="anchor" href="#_implementation_2"></a>Implementation</h4>
<div class="paragraph">
<p>An implementation for the reference client is available at
<a href="https://github.com/bitcoin/bitcoin/pull/5713" class="bare">https://github.com/bitcoin/bitcoin/pull/5713</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h4>
<div class="paragraph">
<p>This document is extracted from the previous BIP62 proposal, which had
input from various people, in particular Greg Maxwell and Peter Todd,
who gave feedback about this document as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_disclosures"><a class="anchor" href="#_disclosures"></a>Disclosures</h4>
<div class="ulist">
<ul>
<li>
<p>Subsequent to the network-wide adoption and enforcement of this BIP,
the author
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-July/009697.html">disclosed</a>
that strict DER signatures provided an indirect solution to a consensus
bug he had previously discovered.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pieter_wuille_disclosure_consensus_bug_indirectly_solved_by_bip66"><a class="anchor" href="#_pieter_wuille_disclosure_consensus_bug_indirectly_solved_by_bip66"></a>9.10. Pieter Wuille - Disclosure: consensus bug indirectly solved by BIP66</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-July/009697.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-July/009697.html</a></p>
</li>
<li>
<p>Author: Pieter Wuille</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello all,

I'd like to disclose a vulnerability I discovered in September 2014,
which became unexploitable when BIP66's 95% threshold was reached
earlier this month.

## Short description:

A specially-crafted transaction could have forked the blockchain
between nodes:
* using OpenSSL on a 32-bit systems and on 64-bit Windows systems
* using OpenSSL on non-Windows 64-bit systems (Linux, OSX, ...)
* using some non-OpenSSL codebases for parsing signatures

## Upgrade instructions:

None. Transactions that could trigger this problem have become invalid
on the network since BIP66's deployment of version 3 blocks reached 95%
on July 4th, 2015.

## Long description:

The problem is related to the signature encoding rules.

Bitcoin's signatures are ASN.1 BER encoded. BER is a complex standard
that allows many different encodings for the same data. Since Bitcoin
Core 0.8, a standardness rule has been in effect that only allowed
subset of encodings (DER) for relay and mining, even though any BER
remained valid in the blockchain - at least in theory.

In practice, BER has many weird edge cases, and I have not found a
single cryptographic codebase that can parse all of them correctly.
This includes OpenSSL, Crypto, BouncyCastle, btcec, and our own
libsecp256k1 library.

This on itself would not be a problem, as full nodes on the network
currently use OpenSSL. However, while researching what was needed to
make libsecp256k1 compatible with it, I discovered that OpenSSL is even
inconsistent with itself across different platforms.

One of the features of BER is the ability for internal structures to
have a length descriptor whose size itself is up to 126 bytes (see
X.690-0207 8.1.3.5). A 1 terabyte data structure would for example use
a 5-byte length descriptor. However, there is no requirement to use the
shortest possible descriptor, so even a 70-byte ECDSA signature could
use a 5-byte length descriptor and be valid. Unfortunately, OpenSSL
supports length descriptors only as long as their size is at most that
of a C 'long int', a type whose size depends on the platform (Windows
and 32-bit Linux/OSX have a 4-byte long int, 64-bit Linux/OSX have an
8-byte long int). See
https://github.com/openssl/openssl/blob/bfa34f551c2d38e826deb44a269cb0f720f9f63b/crypto/asn1/asn1_lib.c#L178.
Some non-OpenSSL based signature validation
systems don't support such length descriptors at all, resulting in an
extra forking risk on top for them if used for blockchain validation.

This effectively means that a block chain containing a transaction with
a valid signature using such a 5-byte length descriptor would be
accepted by some systems and not by others, resulting in a fork if it
were mined into a block.

## Timeline:

* 2013-Feb-19: Bitcoin Core 0.8.0 was released, which made non-DER
signatures non-standard. No release since then would relay or mine
transactions that could trigger the vulnerability. However, such a
transaction was still valid inside blocks.

* 2014-Feb-10: I proposed BIP62 to deal with transaction malleability.
The BIP62 draft includes a rule that would make version 2 transactions
with non-DER signatures invalid.

* 2014-Jul-18: In order to make Bitcoin's signature encoding rules not
depend on OpenSSL's specific parser, I modified the BIP62 proposal to
have its strict DER signatures requirement also apply to version 1
transactions. No non-DER signatures were being mined into blocks
anymore at the time, so this was assumed to not have any impact. See
https://github.com/bitcoin/bips/pull/90 and
http://lists.linuxfoundation.org/pipermail/bitcoin-dev/2014-July/006299.html.
Unknown at the time, but if deployed this would have solved the
vulnerability.

* 2014-Sep-01: While analysing OpenSSL's source code for BER parsing, I
discovered the architecture dependency listed above and the associated
vulnerability. The best means to fix it at the time was by getting
BIP62 adopted.

* 2014-Sep-07, 2014-Oct-17, 2014-Oct-26, 2014-Dec-06, 2015-Jan-09:
Several proposed changes to BIP62. See
https://github.com/bitcoin/bips/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+is%3Aclosed+bip62.

* 2015-Jan-10: OpenSSL releases versions 1.0.0p and 1.0.1k, with a fix
for CVE-2014-8275. The fix introduced a restriction on ECDSA signatures
to be strict DER, which would have solved all problems related to
signature encodings, except Bitcoin's consensus-critical nature
requires bug-for-bug compatibility between nodes. Worse, it seemed that
there was again a small (1%) number of blocks being created with
non-DER signatures in it, resulting in actual forks. The only immediate
solution that did not introduce more risk for forks was parsing and
re-encoding signatures using OpenSSL itself before verification to
bypass the restriction, making the problem persist. See
http://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-January/007097.html.

* 2015-Jan-21: The new attention to signature encoding might have
revealed the vulnerability, and the presence of miners not enforcing
strict DER might have made the vulnerability actually exploitable.
BIP62 was still a moving target, so we wanted a faster means to solve
this. Therefore, a new BIP was proposed with just the strict DER
requirement, numbered BIP66. This would both allow non-OpenSSL
verification, and solve the vulnerability, without needing to fix the
less urgent malleability problem that BIP62 wanted to address. See
http://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-January/007156.html.

* 2015-Feb-17: Bitcoin Core 0.10.0 was released, with support for
BIP66. See
http://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-February/007480.html.

* 2015-Jul-04: BIP66's 95% threshold was reached, enabling a consensus
rule for strict DER signatures in the blockchain. This solved the
vulnerability, and opens the door to using non-OpenSSL signature
verification in the near future.

- --
Pieter Wuille

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQGcBAEBAgAGBQJVt5FGAAoJEFeJbS/48LZX3ccMAJdPrpa8ggcYEyy8naqc7ewL
1Mwv24p/6Q8+T7Q6EWmgoApY1jljF+AzgSpfaf310QZf9yuC/JCAmHfUaa9UQG
Mq1+duX64uDWIeNKTfuCwZvU0ataARZKmFUpp60UF+VtiJyLo9tpHTVajM0lv9Oq
OX40qHVC/iBogRLNREC1ggWH1JPMTbEch50YX1bgNi3gE5gtMggSQ2OXrGCCtrvR
7cVFlIyOhlLtvSAnxzmHyY8Iol+qVhIZi4mCmDgOoQKVaiYm1cODQ+nrMHx02DKC
Wqstwb/mET/vbCX4qxSNQ2B+mQk0WO/gSrWiQkBLi/AfLBh/8A/kL1RpKxVQzoaP
O165LbXye42w8Js/sE/zT6d4CIbYaW0GpF6m4agwDYgPLomhdk/elPRojKYsEab+
oFWPVagqKI9e/pjFBxqfIv3iyx1hHB6YIaX5TfFRVjsWzag5Qi2ssQYOQymyjg4J
UHNR/xW0PMPAOg5KS/uFja4OWxstHhTW9G+rslEK9g==
=7F3K
-----END PGP SIGNATURE-----</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gregory_maxwell_openssl_1_0_0p_1_0_1k_incompatible_causes_blockchain_rejection"><a class="anchor" href="#_gregory_maxwell_openssl_1_0_0p_1_0_1k_incompatible_causes_blockchain_rejection"></a>9.11. Gregory Maxwell - OpenSSL 1.0.0p / 1.0.1k incompatible, causes blockchain rejection.</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-January/007097.html" class="bare">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-January/007097.html</a></p>
</li>
<li>
<p>Author: Gregory Maxwell</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>OpenSSL 1.0.0p / 1.0.1k was recently released and is being
pushed out by various operating system maintainers.  My review
determined that this update is incompatible with the Bitcoin
system and could lead to consensus forks.

Bitcoin Core released binaries from Bitcoin.org are unaffected,
as are any built with the gitian deterministic build system.

If you are running third-party or self-compiled Bitcoin Core
or an alternative implementation using OpenSSL you must not
update OpenSSL or must run a Bitcoin software containing a
workaround:

<a href="https://github.com/bitcoin/bitcoin/commit/488ed32f2ada1d1dd108fc245d025c4d5f252783" class="bare">https://github.com/bitcoin/bitcoin/commit/488ed32f2ada1d1dd108fc245d025c4d5f252783</a>
(versions of this will be backported to other stable branches soon)

The tests included with Bitcoin Core in the test_bitcoin
utility already detect this condition and fail.  (_Do not ignore or
disable the tests in order to run or distribute software
which fails_)

The incompatibility is due to the OpenSSL update changing the
behavior of ECDSA validation to reject any signature which is
not encoded in a very rigid manner.  This was a result of
OpenSSL's change for CVE-2014-8275 "Certificate fingerprints
can be modified".

While for most applications it is generally acceptable to eagerly
reject some signatures, Bitcoin is a consensus system where all
participants must generally agree on the exact validity or
invalidity of the input data.  In a sense, consistency is more
important than "correctness".

As a result, an uncontrolled 'fix' can constitute a security
vulnerability for the Bitcoin system.  The Bitcoin Core developers
have been aware of this class of risk for a long time and have
taken measures to mitigate it generally; e.g., shipping static
binaries, internalizing the Leveldb library... etc.

It was somewhat surprising, however, to see this kind of change show
up as a "low" priority fix in a security update and pushed out live
onto large numbers of systems within hours.

We were specifically aware of potential hard-forks due to signature
encoding handling and had been hoping to close them via BIP62 in 0.10.
BIP62's purpose is to improve transaction malleability handling and
as a side effect rigidly defines the encoding for signatures, but the
overall scope of BIP62 has made it take longer than we'd like to
deploy.

(Coincidentally, I wrote about this concern and our unique demands on
 cryptographic software as part of a comment on Reddit shortly before
 discovering that part of this OpenSSL update was actually
 incompatible with Bitcoin:
 <a href="https://www.reddit.com/r/Bitcoin/comments/2rrxq7/on_why_010s_release_notes_say_we_have_reason_to/cnitbz3" class="bare">https://www.reddit.com/r/Bitcoin/comments/2rrxq7/on_why_010s_release_notes_say_we_have_reason_to/cnitbz3</a>
)

The patches above, however, only fix one symptom of the general
problem: relying on software not designed or distributed for
consensus use (in particular OpenSSL) for consensus-normative
behavior.  Therefore, as an incremental improvement, I propose
a targeted soft-fork to enforce strict DER compliance soon,
utilizing a subset of BIP62.

Adding a blockchain rule for strict DER will reduce the risk of
consensus inconsistencies from alternative implementations of
signature parsing or signature verification, simplify BIP62,
and better isolate the cryptographic validation code from the
consensus algorithm. A failure to do so will likely leave us
in this situation, or possibly worse, again in the future.

The relevant incompatible transactions are already non-standard on
the network since 0.8.0's release in February 2013, although there
was seemingly a single miner still mining incompatible transactions.
That miner has been contacted and has fixed their software, so a
soft-fork with no chain forking should be possible.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bitcoin_org_some_miners_generating_invalid_blocks"><a class="anchor" href="#_bitcoin_org_some_miners_generating_invalid_blocks"></a>9.12. bitcoin.org - Some Miners Generating Invalid Blocks</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://bitcoin.org/en/alert/2015-07-04-spv-mining" class="bare">https://bitcoin.org/en/alert/2015-07-04-spv-mining</a></p>
</li>
<li>
<p>Author: Unknown</p>
</li>
<li>
<p>Date copied: 2022-05-26</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>4 July 2015</p>
</div>
<div class="paragraph">
<p><em>This document is being updated as new information arrives. Last update:
2015-07-15 13:00. All times are UTC.</em></p>
</div>
<div class="paragraph">
<p><strong>Note: this situation has not been fully resolved, and it does not
appear that it will be fully resolved anytime soon. Users of the
affected wallets listed below are still advised to wait additional
confirmations or to switch to a safer wallet.</strong></p>
</div>
<div class="paragraph">
<p>##Summary</p>
</div>
<div class="paragraph">
<p>Your bitcoins are safe if you received them in transactions confirmed
before 2015-07-15 12:00 UTC.</p>
</div>
<div class="paragraph">
<p>However, there has been a problem with a planned upgrade. For bitcoins
received later than the time above, confirmation scores are
significantly less reliable then they usually are for users of certain
software:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Lightweight
(<a href="http://bitcoin.stackexchange.com/questions/4649/what-is-an-spv-client">SPV</a>)
wallet users</strong> should wait an additional 30 confirmations more than you
would normally wait. Electrum users, please see
<a href="https://en.bitcoin.it/wiki/July_2015_Forks#Electrum">this note</a>.</p>
</li>
<li>
<p><strong>Bitcoin Core 0.9.4 or earlier users</strong> should wait an additional 30
confirmations more than you would normally wait or upgrade to
<a href="/en/download">Bitcoin Core 0.10.2</a>.</p>
</li>
<li>
<p><strong>Web wallet users</strong> should wait an additional 30 confirmations more
than you would normally wait, unless you know for sure that your wallet
is secured by Bitcoin Core 0.9.5 or later.</p>
</li>
<li>
<p><strong>Bitcoin Core 0.9.5 or later users are unaffected.</strong> (Note:
<a href="/en/download">upgrade to 0.10.2</a> is recommended due to
denial-of-service vulnerabilities unrelated to this alert.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>##Miners</p>
</div>
<div class="paragraph">
<p>If you pool mine, please switch to a pool that properly validates
blocks. The Wiki Mining Pool Comparison page currently contains a list
of
<a href="https://en.bitcoin.it/wiki/Comparison_of_mining_pools#SPV_Mining_.2F_Old_Bitcoin_Core">known
(or suspected) good and bad pools</a>.</p>
</div>
<div class="paragraph">
<p>If you solo mine, please switch to Bitcoin Core 0.10.2.</p>
</div>
<div class="sect3">
<h4 id="solution"><a class="anchor" href="#solution"></a>When Will Things Go Back To Normal?</h4>
<div class="paragraph">
<p>The problem is miners creating invalid blocks. Some software can detect
that those blocks are invalid and reject them; other software can’t
detect that blocks are invalid, so they show confirmations that aren’t
real.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bitcoin Core 0.9.5 and later</strong> never had any problems because it could
detect which blocks were invalid.</p>
</li>
<li>
<p><strong>Bitcoin Core 0.9.4 and earlier</strong> will never provide as much security
as later versions of Bitcoin Core because it doesn’t know about the
additional
<a href="https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki">BIP66</a>
consensus rules. <a href="/en/download">Upgrade</a> is recommended to return to
full node security.</p>
</li>
<li>
<p><strong>Lightweight (SPV) wallets</strong> are not safe for less than 30
confirmations until all the major pools switch to full validation.</p>
</li>
<li>
<p><strong>Web wallets</strong> are very diverse in what infrastructure they run and how
they handle double spends, so unless you know for sure that they use
Bitcoin Core 0.9.5 or later for full validation, you should assume they
have the same security as the lightweight wallets described above.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="cause"><a class="anchor" href="#cause"></a>What&#8217;s Happening</h4>
<div class="paragraph">
<p>Summary: Some miners are currently generating invalid blocks. Almost all
software (besides Bitcoin Core 0.9.5 and later) will accept these
invalid blocks under certain conditions.</p>
</div>
<div class="paragraph">
<p>So far, the following forks of two or more blocks have occurred:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End time</th>
<th class="tableblock halign-left valign-top">Blocks <sup><a href="#invalid-blocks">[1</a>]</sup></th>
<th class="tableblock halign-left valign-top">Double Spends</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 July @ 02:10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 July @ 21:50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23:40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not yet known</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The paragraphs that follow explain the cause more throughly.</p>
</div>
<div class="paragraph">
<p>For several months, an increasing amount of mining hash rate has been
signaling its intent to begin enforcing
<a href="https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki">BIP66</a>
strict DER signatures. As part of the BIP66 rules, once 950 of the last
1,000 blocks were version 3 (v3) blocks, all upgraded miners would
reject version 2 (v2) blocks.</p>
</div>
<div class="paragraph">
<p>Early morning on 4 July 2015, the 950/1000 (95%) threshold was reached.
Shortly thereafter, a small miner (part of the non-upgraded 5%) mined an
invalid block–as was an expected occurrence. Unfortunately, it turned
out that roughly half the network hash rate was mining without fully
validating blocks (called SPV mining), and built new blocks on top of
that invalid block.</p>
</div>
<div class="paragraph">
<p>Note that the roughly 50% of the network that was SPV mining had
explicitly indicated that they would enforce the BIP66 rules. By not
doing so, several large miners have lost over $50,000 dollars worth of
mining income so far.</p>
</div>
<div class="paragraph">
<p>All software that assumes blocks are valid (because invalid blocks cost
miners money) is at risk of showing transactions as confirmed when they
really aren’t. This particularly affects lightweight (SPV) wallets and
software such as old versions of Bitcoin Core which have been downgraded
to SPV-level security by the new BIP66 consensus rules.</p>
</div>
<div class="paragraph">
<p>The recommended fix, which was attempted, was to get all miners off of
SPV mining and back to full validation (at least temporarily). If this
happens, Bitcoin.org will reduce its current recommendation of waiting
30 extra confirmations to a lower number.</p>
</div>
</div>
<div class="sect3">
<h4 id="_updates_2"><a class="anchor" href="#_updates_2"></a>Updates</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>6 July 04:00:</strong> A new fork occurred starting 5 July at 21:30 with
three blocks before the valid chain again became the strongest chain.
See the recently-added <a href="#list-of-forks">list of forks</a>. Reports that
the situation has passed are <strong>not correct.</strong> Please continue to wait 30
more confirmations than you usually would wait before accepting a
transaction.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_invalid_blocks"><a class="anchor" href="#_invalid_blocks"></a>Invalid Blocks</h4>
<div class="paragraph">
<p>Please see the list of
<a href="https://en.bitcoin.it/wiki/July_2015_Forks#Invalid_Block_Hashes">invalid
block hashes</a> on the Bitcoin Wiki.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-03-24 09:32:44 UTC
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>